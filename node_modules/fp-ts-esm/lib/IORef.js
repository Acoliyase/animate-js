"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.IORef = void 0;
exports.newIORef = newIORef;
/**
 * @example
 * import { flatMap } from 'fp-ts/IO'
 * import { newIORef } from 'fp-ts/IORef'
 *
 * assert.strictEqual(flatMap(newIORef(1), ref => flatMap(ref.write(2), () => ref.read))(), 2)
 *
 * @category model
 * @since 2.0.0
 */
class IORef {
    constructor(value) {
        this.value = value;
        this.read = () => this.value;
        this.write = this.write.bind(this);
        this.modify = this.modify.bind(this);
    }
    /**
     * @since 2.0.0
     */
    write(a) {
        return () => {
            this.value = a;
        };
    }
    /**
     * @since 2.0.0
     */
    modify(f) {
        return () => {
            this.value = f(this.value);
        };
    }
}
exports.IORef = IORef;
/**
 * @category constructors
 * @since 2.0.0
 */
function newIORef(a) {
    return () => new IORef(a);
}
