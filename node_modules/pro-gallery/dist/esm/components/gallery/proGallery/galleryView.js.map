{"version":3,"file":"galleryView.js","sourceRoot":"","sources":["../../../../../src/components/gallery/proGallery/galleryView.js"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { window, utils, GALLERY_CONSTS, optionsMap } from 'pro-gallery-lib';\nimport GalleryDebugMessage from './galleryDebugMessage.js';\nimport itemView from '../../item/itemView.js';\nimport { getItemsInViewportOrMarginByScrollLocation } from '../../helpers/virtualization.js';\n\nclass GalleryView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleKeys = this.handleKeys.bind(this);\n    this.showMoreItems = this.showMoreItems.bind(this);\n    this.onLoadMoreButtonKeyDown = this.onLoadMoreButtonKeyDown.bind(this);\n    this.onLoadMoreButtonKeyUp = this.onLoadMoreButtonKeyUp.bind(this);\n    this.createGalleryConfig = this.createGalleryConfig.bind(this);\n    this.screenLogs = this.screenLogs.bind(this);\n    this.createGallery = this.createGallery.bind(this);\n\n    this.id = Date.now() + '|' + Math.floor(Math.random() * 10000);\n\n    this.state = {\n      activeIndex: 0,\n    };\n  }\n\n  handleKeys(e) {\n    const activeItemIdx = window.document.activeElement.getAttribute('data-idx');\n\n    if (activeItemIdx) {\n      const findNeighborItem =\n        this.props.actions.findNeighborItem || this.props.galleryStructure.findNeighborItem || (() => {}); //temp change for tests to pass\n\n      const idx = Number(activeItemIdx);\n\n      let newIdx = -1;\n\n      switch (e.keyCode || e.charCode) {\n        case 38: //up\n          newIdx = findNeighborItem(idx, 'up');\n          break;\n        case 37: //left\n          newIdx = findNeighborItem(\n            idx,\n            this.props.options[optionsMap.behaviourParams.gallery.layoutDirection] ===\n              GALLERY_CONSTS[optionsMap.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT\n              ? 'right'\n              : 'left'\n          );\n          break;\n        case 40: //down\n          newIdx = findNeighborItem(idx, 'down');\n          if (this.props.totalItemsCount - 1 === newIdx && newIdx === this.state.activeIndex) {\n            // If we are on the last item in the gallery and we pressed the down arrow\n            // we want to move the focus to the out0fGallery element\n            e.stopPropagation();\n            utils.focusGalleryElement(this.props.outOfViewComponent);\n            return false;\n          }\n          break;\n        case 39: //right\n          newIdx = findNeighborItem(\n            idx,\n            this.props.options[optionsMap.behaviourParams.gallery.layoutDirection] ===\n              GALLERY_CONSTS[optionsMap.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT\n              ? 'left'\n              : 'right'\n          );\n          break;\n        case 27: //esc\n          // e.stopPropagation();\n          // utils.focusGalleryElement(this.props.galleryContainerRef);\n          return false;\n      }\n\n      //if nextIdx is below the lastVisibleItemIdx (higher idx), we will ignore the findNeighborItem answer and stay on the same item\n      if (newIdx > this.lastVisibleItemIdx()) {\n        newIdx = idx;\n      }\n\n      if (newIdx >= 0) {\n        e.preventDefault();\n        e.stopPropagation();\n        utils.setStateAndLog(this, 'Set Gallery Current Item', {\n          activeIndex: newIdx,\n        });\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  lastVisibleItemIdxInHeight(height) {\n    for (let i = this.props.galleryStructure.items.length - 1; i >= 0; i--) {\n      const item = this.props.galleryStructure.items[i];\n      const isVisible = item.offset.top < height;\n      if (isVisible) {\n        return i;\n      }\n    }\n    return this.items.length - 1;\n  }\n\n  lastVisibleItemIdx() {\n    let galleryHeight = this.props.displayShowMore ? this.props.container.height : this.props.galleryStructure.height;\n    //the item must be visible and above the show more button\n    return this.lastVisibleItemIdxInHeight(galleryHeight - 100);\n  }\n  showMoreItems() {\n    if (this.props.settings?.isAccessible) {\n      // tal - I left this check since we do not want to focus the last item in non-accessibility mode\n      //find the last visible item and focus on it\n      try {\n        const lastItemIdx = this.lastVisibleItemIdx();\n        utils.setStateAndLog(\n          this,\n          'Focus on Last Gallery Item',\n          {\n            activeIndex: lastItemIdx + 1,\n          },\n          () => {\n            this.props.actions.toggleLoadMoreItems();\n          }\n        );\n      } catch (e) {\n        console.warn('showMoreItems: Cannot find item to focus', e);\n      }\n    } else {\n      this.props.actions.toggleLoadMoreItems();\n    }\n  }\n\n  onLoadMoreButtonKeyDown(e) {\n    switch (e.keyCode || e.charCode) {\n      case 32: // space\n      case 13: // enter\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      default:\n        break;\n    }\n  }\n\n  onLoadMoreButtonKeyUp(e) {\n    switch (e.keyCode || e.charCode) {\n      case 32: // space\n      case 13: // enter\n        e.stopPropagation();\n        utils.setStateAndLog(this, 'Set Gallery Current Item', {\n          activeIndex: this.lastVisibleItemIdx(),\n        });\n        // this is to make sure that the focus is moved to the items first before the \"load more\" button disappears\n        // other wise the gallery will lose focus to the body\n        setTimeout(() => {\n          this.props.actions.toggleLoadMoreItems();\n        }, 0);\n        return false;\n      default:\n        break;\n    }\n  }\n\n  createGallery(showMore) {\n    const { options, settings, container, galleryStructure, getVisibleItems, virtualizationSettings, scrollTop } =\n      this.props;\n    const galleryConfig = this.createGalleryConfig();\n    const showMoreContainerHeight = 138; //according to the scss\n    const debugMsg = <GalleryDebugMessage {...this.props.debug} />;\n\n    let galleryHeight;\n    if (showMore) {\n      galleryHeight = container.galleryHeight - showMoreContainerHeight;\n    } else {\n      galleryHeight = galleryStructure.height + 'px';\n    }\n    const galleryWidth = this.props.isPrerenderMode\n      ? 'auto'\n      : this.props.container.galleryWidth - options[optionsMap.layoutParams.structure.itemSpacing];\n\n    const items = getVisibleItems(galleryStructure.galleryItems, container, this.props.isPrerenderMode);\n    const itemsWithVirtualizationData = getItemsInViewportOrMarginByScrollLocation({\n      items,\n      options,\n      virtualizationSettings,\n      galleryHeight: Math.min(galleryStructure.height, container.screen?.height || galleryStructure.height),\n      scrollPosition: scrollTop || 0,\n    });\n    const layout = itemsWithVirtualizationData.map(({ item, shouldRender }, index) => {\n      const itemProps = item.renderProps({\n        ...galleryConfig,\n        visible: item.isVisible,\n        key: `itemView-${item.id}-${index}`,\n      });\n      return React.createElement(itemView, {\n        ...itemProps,\n        type: shouldRender ? itemProps.type : 'dummy',\n      });\n    });\n\n    return (\n      <div\n        id={this.props.galleryContainerId}\n        className={\n          'pro-gallery inline-styles ' +\n          (options[optionsMap.layoutParams.structure.scrollDirection] ===\n          GALLERY_CONSTS[optionsMap.layoutParams.structure.scrollDirection].HORIZONTAL\n            ? ' one-row slider hide-scrollbars '\n            : '') +\n          (settings?.isAccessible ? ' accessible ' : '') +\n          (options[optionsMap.behaviourParams.gallery.layoutDirection] ===\n          GALLERY_CONSTS[optionsMap.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT\n            ? ' rtl '\n            : ' ltr ')\n        }\n        style={{\n          height: galleryHeight,\n          overflowX: 'hidden',\n          //  width: this.props.container.galleryWidth,\n        }}\n        onKeyDown={this.handleKeys}\n      >\n        <div\n          id={`pro-gallery-margin-container-${this.props.id}`}\n          className={'pro-gallery-margin-container'}\n          style={{\n            margin:\n              (this.props.options.galleryMargin ||\n                this.props.options[optionsMap.layoutParams.structure.gallerySpacing]) + 'px',\n            height: galleryHeight,\n            width: galleryWidth,\n            overflow: 'visible',\n            position: 'relative',\n          }}\n        >\n          {debugMsg}\n          {layout}\n        </div>\n      </div>\n    );\n  }\n\n  createGalleryConfig() {\n    return {\n      scrollingElement: this.props.scrollingElement,\n      scroll: this.props.scroll,\n      container: this.props.container,\n      options: this.props.options,\n      settings: this.props.settings,\n      activeIndex: this.state.activeIndex,\n      customComponents: this.props.customComponents,\n      galleryId: this.props.id,\n      gotFirstScrollEvent: this.props.gotFirstScrollEvent,\n      playingVideoIdx: this.props.playingVideoIdx,\n      playing3DIdx: this.props.playing3DIdx,\n      noFollowForSEO: this.props.noFollowForSEO,\n      isPrerenderMode: this.props.isPrerenderMode,\n      firstUserInteractionExecuted: this.props.firstUserInteractionExecuted,\n      enableExperimentalFeatures: this.props.enableExperimentalFeatures,\n      actions: {\n        eventsListener: this.props.actions.eventsListener,\n      },\n    };\n  }\n\n  screenLogs() {\n    return utils.shouldDebug('screenLogs') ? (\n      <div className=\"screen-logs\">\n        URL width: {utils.parseGetParam('width')}, Container: {JSON.stringify(this.props.container.galleryWidth)},\n        window.document.body.clientWidth {document.body.clientWidth}, window.innerWidth {window.innerWidth},\n        window.screen.width: {window.screen.width}\n      </div>\n    ) : (\n      ''\n    );\n  }\n\n  createShowMoreButton() {\n    if (typeof this.props.customComponents.customLoadMoreRenderer === 'function') {\n      return <div onClick={this.showMoreItems}>{this.props.customComponents.customLoadMoreRenderer(this.props)}</div>;\n    }\n    const { options } = this.props;\n    let showMoreButton = false;\n    const buttonState = this.props.displayShowMore;\n    const shouldShowButton = buttonState && this.props.galleryStructure.height > this.props.container.height;\n\n    if (shouldShowButton) {\n      const buttonText = options[optionsMap.behaviourParams.gallery.vertical.loadMore.text] || 'Load More';\n      showMoreButton = (\n        <div className={'show-more-container' + (utils.isMobile() ? ' pro-gallery-mobile-indicator' : '')}>\n          <button\n            tabIndex={utils.getTabIndex('loadMoreButton')}\n            id={'show-more-' + this.props.id}\n            className=\"show-more\"\n            onClick={this.showMoreItems}\n            onMouseDown={(e) => e.preventDefault()}\n            data-hook=\"show-more\"\n            aria-label={buttonText}\n            onKeyDown={this.onLoadMoreButtonKeyDown}\n            onKeyUp={this.onLoadMoreButtonKeyUp}\n          >\n            {buttonText}\n          </button>\n        </div>\n      );\n    }\n\n    return showMoreButton;\n  }\n\n  //-----------------------------------------| RENDER |--------------------------------------------//\n\n  render() {\n    if (utils.isVerbose()) {\n      console.count('galleryView render');\n      console.time('Rendering Gallery took ');\n      console.log('[DEBUG_RENDER] GalleryView options', this.props.options);\n      console.log(\n        '[DEBUG_RENDER] GalleryView props changed',\n        utils.printableObjectsDiff(this.lastProps || {}, this.props)\n      );\n      this.lastProps = { ...this.props };\n      console.log(\n        '[DEBUG_RENDER] GalleryView state changed',\n        utils.printableObjectsDiff(this.lastState || {}, this.state)\n      );\n      this.lastState = { ...this.state };\n      this.renderCount = (this.renderCount || 0) + 1;\n    }\n\n    const showMore = this.createShowMoreButton();\n    const gallery = this.createGallery(showMore);\n\n    if (utils.isVerbose()) {\n      console.timeEnd('Rendering Gallery took ');\n    }\n    const screenLogs = this.screenLogs();\n\n    return (\n      <div\n        className={'pro-gallery-parent-container'}\n        key={`pro-gallery-${this.id}`}\n        {...utils.getAriaAttributes({\n          proGalleryRole: this.props.proGalleryRole,\n          proGalleryRegionLabel: this.props.proGalleryRegionLabel,\n        })}\n      >\n        {screenLogs}\n        {gallery}\n        {showMore}\n      </div>\n    );\n  }\n}\n\nexport default GalleryView;\n/* eslint-enable prettier/prettier */\n"]}