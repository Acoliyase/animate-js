{"version":3,"file":"3dItem.js","sourceRoot":"","sources":["../../../../../src/components/item/3d/3dItem.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAEzC,OAAO,EAAE,SAAS,EAAE,MAAM,YAAY,CAAC;AACvC,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAClD,MAAM,CAAC,OAAO,UAAU,UAAU,CAAC,KAA2B;IAC5D,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;IAEjD,MAAM,MAAM,GAAG,CACb,gCACE,GAAG,EAAE,QAAQ,EACb,KAAK,EAAE,MAAM,EACb,MAAM,EAAE,MAAM,EACd,GAAG,EAAE,SAAS,EACd,KAAK,EAAE;YACL,UAAU,EAAE,aAAa;YACzB,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACzB,UAAU,EAAE,eAAe;SAC5B,GACD,CACH,CAAC;IAEF,gCAAgC,CAAC,KAAK,CAAC,CAAC;IAExC,OAAO,CACL;QACG,MAAM;QACN,KAAK,CAAC,qBAAqB,CAAC;YAC3B,YAAY,EAAE,CAAC,KAAK,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;YACxG,OAAO,EAAE,oBAAC,SAAS,IAAC,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,GAAI;SACtD,CAAC;QACD,KAAK,CAAC,KAAK,CACX,CACJ,CAAC;AACJ,CAAC;AACD,SAAS,gCAAgC,CAAC,KAA2B;IACnE,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC;QAC9C,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,SAAS,EAAE;YAClC,MAAM,WAAW,GAAG,CAAC,CAAa,EAAE,EAAE;gBACpC,CAAC,CAAC,wBAAwB,EAAE,CAAC;gBAC7B,MAAM,WAAW,GAAG,SAAS,CAAC,aAAa,CAAiB,uBAAuB,CAAC,CAAC;gBACrF,IAAI,WAAW,EAAE;oBACf,WAAW,CAAC,KAAK,EAAE,CAAC;iBACrB;YACH,CAAC,CAAC;YACF,SAAS,CAAC,gBAAgB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;YACrD,OAAO,GAAG,EAAE,CAAC,SAAS,CAAC,mBAAmB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;SACtE;QACD,OAAO;IACT,CAAC,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;AACzB,CAAC","sourcesContent":["import React, { useEffect } from 'react';\nimport { ThreeDImplementation } from './types.js';\nimport { use3DItem } from './hooks.js';\nimport { GalleryUI } from '../media/GalleryUI.js';\nexport default function ThreeDItem(props: ThreeDImplementation): JSX.Element {\n  const { canvasRef, isLoaded } = use3DItem(props);\n\n  const canvas = (\n    <canvas\n      key={'canvas'}\n      width={'100%'}\n      height={'100%'}\n      ref={canvasRef}\n      style={{\n        background: 'transparent',\n        opacity: isLoaded ? 1 : 0,\n        transition: 'opacity 200ms',\n      }}\n    />\n  );\n\n  useOrbitControlsClickPropagation(props);\n\n  return (\n    <>\n      {canvas}\n      {props.thumbnailWithOverride({\n        extraClasses: [props.placeholderExtraClasses, isLoaded ? 'three-d-loaded' : 'three-d-loading'].join(' '),\n        overlay: <GalleryUI type={'rotateArrow'} size={60} />,\n      })}\n      {props.hover}\n    </>\n  );\n}\nfunction useOrbitControlsClickPropagation(props: ThreeDImplementation) {\n  useEffect(() => {\n    const container = props.itemContainer.current;\n    if (!props.shouldPlay && container) {\n      const onMouseDown = (e: MouseEvent) => {\n        e.stopImmediatePropagation();\n        const itemWrapper = container.querySelector<HTMLDivElement>('.gallery-item-wrapper');\n        if (itemWrapper) {\n          itemWrapper.click();\n        }\n      };\n      container.addEventListener('mousedown', onMouseDown);\n      return () => container.removeEventListener('mousedown', onMouseDown);\n    }\n    return;\n  }, [props.shouldPlay]);\n}\n"]}