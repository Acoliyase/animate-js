{"version":3,"file":"mouseCursorPosition.js","sourceRoot":"","sources":["../../../../src/components/helpers/mouseCursorPosition.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport Emitter from './emitter.js';\nimport { proxy } from './proxy.js';\nimport { utils } from 'pro-gallery-lib';\n\ntype MouseFollowerEvents = {\n  mouseMove: (x: number, y: number) => void;\n  mouseClickInteractionEvent: (e: MouseEvent) => void;\n  mouseEnterState: (mouseIn: boolean, x: number, y: number) => void;\n};\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function mouseFollower(container: HTMLElement) {\n  const emitter = new Emitter<MouseFollowerEvents>();\n  let state = {\n    mouseIn: false,\n    position: [0, 0] as [number, number],\n  };\n  emitter.listen.mouseEnterState((mouseIn, ...position) => {\n    state = {\n      mouseIn,\n      position,\n    };\n  });\n  emitter.listen.mouseMove((x, y) => {\n    state = {\n      ...state,\n      position: [x, y],\n    };\n  });\n  const getMousePosition = (event: MouseEvent) => {\n    const bounding = container.getBoundingClientRect();\n    const position = [event.clientX - bounding.left, event.clientY - bounding.top] as [number, number];\n    return position;\n  };\n\n  function onMouseEnter(event: MouseEvent) {\n    const position = getMousePosition(event);\n    emitter.call.mouseEnterState(!isHoveringClickableElement(container, event, ...position), ...position);\n  }\n  function onMouseMove(event: MouseEvent) {\n    const position = getMousePosition(event);\n    emitter.call.mouseEnterState(!isHoveringClickableElement(container, event, ...position), ...position);\n    emitter.call.mouseMove(...position);\n  }\n  function onMouseLeave() {\n    emitter.call.mouseEnterState(false, 0, 0);\n  }\n  function onMouseClickInteractionEvent(event: MouseEvent) {\n    emitter.call.mouseClickInteractionEvent(event);\n  }\n  container.addEventListener('mouseenter', onMouseEnter);\n  container.addEventListener('mousemove', onMouseMove);\n  container.addEventListener('mouseleave', onMouseLeave);\n  container.addEventListener('click', onMouseClickInteractionEvent);\n  container.addEventListener('mousedown', onMouseClickInteractionEvent);\n  container.addEventListener('mouseup', onMouseClickInteractionEvent);\n  return {\n    listen: emitter.listen,\n    get state() {\n      return state;\n    },\n    destroy: () => {\n      container.removeEventListener('mouseenter', onMouseEnter);\n      container.removeEventListener('mousemove', onMouseMove);\n      container.removeEventListener('mouseleave', onMouseLeave);\n      container.removeEventListener('click', onMouseClickInteractionEvent);\n      container.removeEventListener('mousedown', onMouseClickInteractionEvent);\n      container.removeEventListener('mouseup', onMouseClickInteractionEvent);\n    },\n  };\n}\n\ninterface MouseCursorProps {\n  render: (x: number, y: number) => React.ReactNode;\n  onClick: (e: MouseEvent) => void;\n  onMouseDownOrUp: (e: MouseEvent) => void;\n  onEnterState?: (mouseIn: boolean) => void;\n  getElement: () => HTMLElement;\n  shouldRenderAtPosition: (x: number, y: number) => boolean;\n  throttle: number;\n}\n\ninterface MouseCursorState {\n  position: [number, number];\n  mouseIn: boolean;\n}\n\nconst getContainerById = (id: string) => document.getElementById(`pro-gallery-container-${id}`) as HTMLElement;\n\nconst MouseFollowerContext = React.createContext<ReturnType<typeof mouseFollower> | undefined>(undefined);\n\nexport const MouseFollowerProvider = ({ children, id }: { children: React.ReactNode; id: string }) => {\n  const [mouseFollowerValue, setMouseFollowerValue] = React.useState<ReturnType<typeof mouseFollower>>();\n  useEffect(() => {\n    const container = getContainerById(id);\n    const mouseFollowerValue = mouseFollower(container);\n    setMouseFollowerValue(mouseFollowerValue);\n    return () => {\n      mouseFollowerValue.destroy();\n    };\n  }, [id]);\n\n  return (\n    <MouseFollowerContext.Provider value={mouseFollowerValue}>\n      {mouseFollowerValue && children}\n    </MouseFollowerContext.Provider>\n  );\n};\n\nexport class MouseCursor extends React.Component<MouseCursorProps, MouseCursorState> {\n  declare context: NonNullable<React.ContextType<typeof MouseFollowerContext>>;\n\n  static contextType = MouseFollowerContext;\n\n  cleanup: (() => void) | undefined;\n  componentDidMount(): void {\n    if (!this.context) {\n      throw new Error('MouseFollowerContext is undefined');\n    }\n    const removeMoveListener = this.context.listen.mouseMove(\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (utils as any).throttle(() => {\n        this.setState({\n          position: this.context.state.position,\n        });\n      }, this.props.throttle)\n    );\n    const removeEnterListener = this.context.listen.mouseEnterState(() => {\n      const { mouseIn, position } = this.context.state;\n      if (this.state.mouseIn !== mouseIn) {\n        this.setState({\n          mouseIn: mouseIn,\n          position,\n        });\n        if (this.props.onEnterState) {\n          this.props.onEnterState(mouseIn);\n        }\n      }\n    });\n    const removeClickListener = this.context.listen.mouseClickInteractionEvent((e) => {\n      if (!this.state.mouseIn) {\n        return;\n      }\n      const [x, y] = this.state.position;\n      if (!this.props.shouldRenderAtPosition(x, y)) {\n        return;\n      }\n      if (e.type === 'mousedown' || e.type === 'mouseup') {\n        this.props.onMouseDownOrUp(e);\n        return;\n      }\n      this.props.onClick(e);\n    });\n    this.cleanup = () => {\n      removeMoveListener();\n      removeEnterListener();\n      removeClickListener();\n    };\n  }\n  componentWillUnmount(): void {\n    this.cleanup?.();\n  }\n\n  state: MouseCursorState = {\n    position: this.context?.state.position || [0, 0],\n    mouseIn: this.context?.state.mouseIn || false,\n  };\n  render(): React.ReactNode {\n    if (!this.state.mouseIn) {\n      return null;\n    }\n    const [x, y] = this.state.position;\n    if (!this.props.shouldRenderAtPosition(x, y)) {\n      return null;\n    }\n    return this.props.render(this.state.position[0], this.state.position[1]);\n  }\n}\n\nconst CLICKABLE_ATTR = 'pg-clickable';\ninterface ArrowFollowerProps {\n  children: (x: number, y: number) => React.ReactNode;\n  onNavigate: () => void;\n  mouseCursorContainerMaxWidth: number;\n  id: string;\n  direction: 'right' | 'left';\n  isTheOnlyArrow: boolean;\n}\n\nconst isHoveringClickableElement = (element: HTMLElement, e: MouseEvent, x: number, y: number) => {\n  // cancel the click event\n  for (const ele of e.composedPath() as HTMLElement[]) {\n    if (ele instanceof HTMLElement && ele.getAttribute(CLICKABLE_ATTR) === 'true') {\n      return true;\n    }\n  }\n  const bounding = element.getBoundingClientRect();\n  const elementUnderMouse = document.elementFromPoint(x + bounding.left, y + bounding.top) as HTMLElement | null;\n  if (!elementUnderMouse) {\n    return false;\n  }\n  let parent = elementUnderMouse as HTMLElement | null;\n  while (parent) {\n    if (parent.getAttribute(CLICKABLE_ATTR) === 'true') {\n      return true;\n    }\n    parent = parent.parentElement;\n  }\n  return false;\n};\n\nexport class ArrowFollower extends React.Component<ArrowFollowerProps> {\n  shouldRender = (x: number): boolean => {\n    const element = getContainerById(this.props.id);\n    const containerWidth = element.offsetWidth;\n    const realMaxWidth = Math.min(this.props.mouseCursorContainerMaxWidth, this.props.isTheOnlyArrow ? 100 : 50);\n    const amountOfPixelsNeeded = containerWidth * (realMaxWidth / 100);\n    const isLeft = amountOfPixelsNeeded >= x;\n    const isRight = x > containerWidth - amountOfPixelsNeeded;\n\n    return this.props.direction === 'left' ? isLeft : isRight;\n  };\n\n  onNavigation = (e: MouseEvent): void => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onNavigate();\n  };\n\n  render(): React.ReactNode {\n    return (\n      <MouseCursor\n        getElement={() => getContainerById(this.props.id)}\n        render={(x, y) => {\n          return (\n            <>\n              {this.props.children(x, y)}\n              <style>\n                {`\n                  #${getContainerById(this.props.id)?.id} * {\n                    cursor: none !important;\n                  }\n              `}\n              </style>\n            </>\n          );\n        }}\n        shouldRenderAtPosition={this.shouldRender}\n        onClick={this.onNavigation}\n        onMouseDownOrUp={(e) => e.stopPropagation()}\n        throttle={50}\n      />\n    );\n  }\n}\n\nexport function clickableFactory(): React.ReactHTML {\n  const instances = new Map<string, React.FC>();\n  return proxy<React.ReactHTML>((name) => {\n    if (!instances.get(name)) {\n      instances.set(name, (props) => {\n        return React.createElement(name, {\n          ...props,\n          [CLICKABLE_ATTR]: 'true',\n        });\n      });\n    }\n    return instances.get(name) as React.ReactHTML[keyof React.ReactHTML];\n  });\n}\n\nexport const clickable = clickableFactory();\n"]}