{"version":3,"file":"emitter.js","sourceRoot":"","sources":["../../../../src/components/helpers/emitter.ts"],"names":[],"mappings":";;AAAA,yCAAmC;AAEnC,MAAqB,OAAO;IAA5B;QACU,cAAS,GAEZ,EAAE,CAAC;IAgDV,CAAC;IA9CC,EAAE,CAAoB,KAAQ,EAAE,QAAc;QAC5C,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QACpD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtC,OAAO;YACL,MAAM,EAAE,GAAG,EAAE;gBACX,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YAC5B,CAAC;SACF,CAAC;IACJ,CAAC;IAED,IAAI,CAAoB,KAAQ,EAAE,GAAG,IAAsB;QACzD,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;SACnD;IACH,CAAC;IAED,GAAG,CAAoB,KAAQ,EAAE,QAAc;QAC7C,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,SAAS,EAAE;YACb,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;SAClD;IACH,CAAC;IAED,IAAI,IAAI;QACN,OAAO,IAAA,gBAAK,EAET,CAAC,QAAQ,EAAE,EAAE;YACd,OAAO,CAAC,GAAG,IAAoC,EAAE,EAAE;gBACjD,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,IAAI,CAAC,CAAC;YAC/B,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAA,gBAAK,EAET,CAAC,QAAQ,EAAE,EAAE;YACd,OAAO,CAAC,QAAQ,EAAE,EAAE;gBAClB,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAC5B,OAAO,GAAG,EAAE;oBACV,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAC/B,CAAC,CAAC;YACJ,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAnDD,0BAmDC","sourcesContent":["import { proxy } from './proxy.js';\n\nexport default class Emitter<T extends Record<string, (...args: any[]) => void>> {\n  private listeners: Partial<{\n    [K in keyof T]: T[K][];\n  }> = {};\n\n  on<K extends keyof T>(event: K, listener: T[K]) {\n    this.listeners[event] = this.listeners[event] || [];\n    this.listeners[event]!.push(listener);\n    return {\n      remove: () => {\n        this.off(event, listener);\n      },\n    };\n  }\n\n  emit<K extends keyof T>(event: K, ...args: Parameters<T[K]>): void {\n    const listener = this.listeners[event];\n    if (listener) {\n      listener.forEach((listener) => listener(...args));\n    }\n  }\n\n  off<K extends keyof T>(event: K, listener: T[K]): void {\n    const listeners = this.listeners[event];\n    if (listeners) {\n      listeners.splice(listeners.indexOf(listener), 1);\n    }\n  }\n\n  get call() {\n    return proxy<{\n      [K in keyof T]: (...args: Parameters<T[K]>) => void;\n    }>((property) => {\n      return (...args: Parameters<T[typeof property]>) => {\n        this.emit(property, ...args);\n      };\n    });\n  }\n\n  get listen() {\n    return proxy<{\n      [K in keyof T]: (listener: T[K]) => () => void;\n    }>((property) => {\n      return (listener) => {\n        this.on(property, listener);\n        return () => {\n          this.off(property, listener);\n        };\n      };\n    });\n  }\n}\n"]}