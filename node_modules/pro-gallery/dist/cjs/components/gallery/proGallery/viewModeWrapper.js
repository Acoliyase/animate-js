"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ViewModeWrapperHOC = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importDefault(require("react"));
const pro_gallery_lib_1 = require("pro-gallery-lib");
// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
const ViewModeWrapperHOC = (WrappedComponent) => {
    return class ViewModeWrapperHOC extends react_1.default.Component {
        constructor(props) {
            super(props);
            this.initViewModeWrapper(props);
        }
        initViewModeWrapper(props) {
            if (typeof props.viewMode !== 'undefined') {
                pro_gallery_lib_1.viewModeWrapper.setViewMode(props.viewMode);
            }
            if (typeof props.deviceType !== 'undefined' && pro_gallery_lib_1.viewModeWrapper._deviceType !== props.deviceType) {
                pro_gallery_lib_1.utils.dumpCache();
                pro_gallery_lib_1.viewModeWrapper.setDeviceType(props.deviceType);
            }
        }
        updateViewModeWrapper(nextProps) {
            if (this.props.viewMode !== nextProps.viewMode) {
                pro_gallery_lib_1.utils.dumpCache();
                pro_gallery_lib_1.viewModeWrapper.setViewMode(nextProps.viewMode);
            }
            if (this.props.deviceType !== nextProps.deviceType) {
                pro_gallery_lib_1.utils.dumpCache();
                pro_gallery_lib_1.viewModeWrapper.setDeviceType(nextProps.deviceType);
            }
        }
        UNSAFE_componentWillReceiveProps(nextProps) {
            this.updateViewModeWrapper(nextProps);
        }
        render() {
            return react_1.default.createElement(WrappedComponent, Object.assign({}, this.props));
        }
    };
};
exports.ViewModeWrapperHOC = ViewModeWrapperHOC;
//# sourceMappingURL=viewModeWrapper.js.map