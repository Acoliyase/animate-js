{"version":3,"file":"videoItem.js","sourceRoot":"","sources":["../../../../../src/components/item/videos/videoItem.js"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { GALLERY_CONSTS, window, utils, optionsMap } from 'pro-gallery-lib';\nimport { shouldCreateVideoPlaceholder } from '../itemHelper.js';\nimport { getStyle } from './getStyle.js';\n\nclass VideoItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.pause = this.pause.bind(this);\n    this.play = this.play.bind(this);\n    this.playVideoIfNeeded = this.playVideoIfNeeded.bind(this);\n\n    this.state = {\n      playedOnce: false,\n      loadVideo: props.loadVideo || props.shouldPlay,\n      isPlaying: false,\n      shouldPlay: props.shouldPlay,\n      reactPlayerLoaded: false,\n      vimeoPlayerLoaded: false,\n      hlsPlayerLoaded: false,\n    };\n  }\n\n  componentDidMount() {\n    this.dynamiclyImportVideoPlayers();\n  }\n\n  dynamiclyImportVideoPlayers() {\n    if (!(window && window.ReactPlayer)) {\n      import(/* webpackChunkName: \"proGallery_reactPlayer\" */ 'react-player').then((ReactPlayer) => {\n        // cjs/esm interop hack\n        if (ReactPlayer.default.default) {\n          window.ReactPlayer = ReactPlayer.default.default;\n        } else {\n          window.ReactPlayer = ReactPlayer.default;\n        }\n        this.setState({ reactPlayerLoaded: true });\n        this.playVideoIfNeeded();\n      });\n    }\n    if (\n      //Vimeo player must be loaded by us, problem with requireJS\n      !(window && window.Vimeo) &&\n      this.props.videoUrl &&\n      this.props.videoUrl.includes('vimeo.com')\n    ) {\n      import(/* webpackChunkName: \"proGallery_vimeoPlayer\" */ '@vimeo/player').then((Player) => {\n        window.Vimeo = { Player: Player.default };\n        this.setState({ vimeoPlayerLoaded: true });\n        this.playVideoIfNeeded();\n      });\n    }\n    if (\n      //Hls player must be loaded by us, problem with requireJS\n      !(window && window.Hls) &&\n      this.isHLSVideo()\n    ) {\n      import(/* webpackChunkName: \"proGallery_HlsPlayer\" */ 'hls.js').then((Player) => {\n        window.Hls = Player.default;\n        this.setState({ hlsPlayerLoaded: true });\n        this.playVideoIfNeeded();\n      });\n    }\n  }\n\n  isHLSVideo() {\n    return this.props.videoUrl && (this.props.videoUrl.includes('/hls') || this.props.videoUrl.includes('.m3u8'));\n  }\n\n  shouldUseHlsPlayer() {\n    return this.isHLSVideo() && !utils.isiOS();\n  }\n\n  shouldForceVideoForHLS() {\n    return this.isHLSVideo() && utils.isiOS();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.shouldPlay || nextProps.firstUserInteractionExecuted) {\n      this.setState({ loadVideo: true });\n    }\n\n    if (nextProps.shouldPlay) {\n      this.setState({ shouldPlay: true });\n    }\n\n    this.playVideoIfNeeded(nextProps);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.activeIndex !== this.props.activeIndex) {\n      this.fixIFrameTabIndexIfNeeded();\n    }\n\n    if (prevProps.type === 'image' && this.props.type === 'video') {\n      this.dynamiclyImportVideoPlayers();\n    }\n\n    this.playVideoIfNeeded();\n  }\n\n  play() {\n    this.props.playVideo(this.props.idx);\n  }\n\n  pause() {\n    this.props.pauseVideo();\n  }\n\n  isPrefersReducedMotion() {\n    return window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  }\n\n  playVideoIfNeeded(props = this.props) {\n    try {\n      const { shouldPlay } = props;\n      if (shouldPlay && !this.isPlaying && !this.isPrefersReducedMotion()) {\n        this.videoElement =\n          this.videoElement || window.document.querySelector(`#video-${this.props.id}-${this.props.galleryId} video`);\n        if (this.videoElement) {\n          this.isPlaying = true;\n          this.videoElement.play();\n          utils.isVerbose() && console.log('[VIDEO] Playing video #' + this.props.idx, this.videoElement);\n        }\n      }\n    } catch (e) {\n      console.error('[VIDEO] Could not play video #' + this.props.idx, this.videoElement, e);\n    }\n  }\n  //-----------------------------------------| UTILS |--------------------------------------------//\n  createPlayerElement() {\n    //video dimensions are for videos in grid fill - placing the video with negative margins to crop into a square\n    if (!(window && window.ReactPlayer && (this.state.loadVideo || this.props.playing))) {\n      return null;\n    }\n    const PlayerElement = window.ReactPlayer;\n    const isWiderThenContainer = this.props.style.ratio >= this.props.cropRatio;\n\n    // adding 1 pixel to compensate for the difference we have sometimes from layouter in grid fill\n    const isCrop =\n      this.props.options[optionsMap.layoutParams.crop.enable] &&\n      this.props.options[optionsMap.layoutParams.crop.method] ===\n        GALLERY_CONSTS[optionsMap.layoutParams.crop.method].FILL;\n\n    const url = this.props.videoUrl\n      ? this.props.videoUrl\n      : this.props.createUrl(GALLERY_CONSTS.urlSizes.RESIZED, GALLERY_CONSTS.urlTypes.VIDEO);\n\n    const attributes = {\n      controlsList: 'nodownload',\n      disablePictureInPicture: true,\n      muted: !this.props.options[optionsMap.behaviourParams.item.video.volume],\n      preload: 'metadata',\n      style: getStyle(isCrop, isWiderThenContainer),\n      type: 'video/mp4',\n    };\n\n    if (shouldCreateVideoPlaceholder(this.props.options)) {\n      attributes.poster = this.props.createUrl(GALLERY_CONSTS.urlSizes.SCALED, GALLERY_CONSTS.urlTypes.HIGH_RES);\n    }\n\n    return (\n      <PlayerElement\n        playsinline\n        className={'gallery-item-visible video gallery-item'}\n        id={`video-${this.props.id}-${this.props.galleryId}`}\n        width=\"100%\"\n        height=\"100%\"\n        url={url}\n        alt={typeof this.props.alt === 'string' ? this.props.alt : 'untitled video'}\n        loop={!!this.props.options[optionsMap.behaviourParams.item.video.loop]}\n        ref={(player) => (this.video = player)}\n        volume={this.props.options[optionsMap.behaviourParams.item.video.volume] ? 0.8 : 0}\n        playing={this.state.shouldPlay && !this.isPrefersReducedMotion()}\n        onEnded={() => {\n          this.setState({ isPlaying: false });\n          this.props.actions.eventsListener(GALLERY_CONSTS.events.VIDEO_ENDED, this.props);\n        }}\n        onPause={() => {\n          this.setState({ isPlaying: false });\n        }}\n        onError={(e) => {\n          this.props.actions.eventsListener(GALLERY_CONSTS.events.VIDEO_ERROR, {\n            ...this.props,\n            videoError: e,\n          });\n        }}\n        playbackRate={Number(this.props.options[optionsMap.behaviourParams.item.video.speed]) || 1}\n        onStart={() => {\n          if (!this.state.playedOnce) {\n            this.setState({ playedOnce: true });\n          }\n        }}\n        onPlay={() => {\n          this.props.actions.eventsListener(GALLERY_CONSTS.events.VIDEO_PLAYED, this.props);\n          this.setState({ isPlaying: true });\n        }}\n        onReady={() => {\n          this.playVideoIfNeeded();\n          this.fixIFrameTabIndexIfNeeded();\n          this.props.actions.setItemLoaded();\n          this.setState({ ready: true });\n        }}\n        onProgress={() => {\n          if (!this.props.shouldPlay) {\n            this.setState({ shouldPlay: false });\n          }\n        }}\n        controls={\n          this.props.activeIndex === this.props.idx &&\n          this.props.options[optionsMap.behaviourParams.item.video.enableControls]\n        }\n        config={{\n          file: {\n            attributes,\n            forceHLS: this.shouldUseHlsPlayer(),\n            forceVideo: this.shouldForceVideoForHLS(),\n          },\n        }}\n        key={'video-' + this.props.id}\n      />\n    );\n  }\n\n  fixIFrameTabIndexIfNeeded() {\n    if (this.props.isExternalVideo) {\n      const videoGalleryItem =\n        window.document &&\n        window.document.querySelector(`#pro-gallery-${this.props.galleryId} #video-${this.props.id}`);\n      const videoIFrames = videoGalleryItem && videoGalleryItem.getElementsByTagName('iframe');\n      const videoIFrame = videoIFrames && videoIFrames[0];\n      if (videoIFrame) {\n        if (this.props.activeIndex === this.props.idx) {\n          videoIFrame.setAttribute('tabIndex', '0');\n        } else {\n          videoIFrame.setAttribute('tabIndex', '-1');\n        }\n      }\n    }\n  }\n\n  getVideoContainerStyles() {\n    const videoContainerStyle = {\n      ...this.props.imageDimensions,\n    };\n    if (utils.deviceHasMemoryIssues() || this.state.ready || !shouldCreateVideoPlaceholder(this.props.options)) {\n      // videoContainerStyle.backgroundColor = 'black';\n    } else {\n      videoContainerStyle.backgroundImage = `url(${this.props.createUrl(\n        GALLERY_CONSTS.urlSizes.RESIZED,\n        GALLERY_CONSTS.urlTypes.HIGH_RES\n      )})`;\n    }\n    return videoContainerStyle;\n  }\n\n  //-----------------------------------------| RENDER |--------------------------------------------//\n\n  render() {\n    const { thumbnail, hover } = this.props;\n    let baseClassName = [\n      'gallery-item-content',\n      'gallery-item-visible',\n      'gallery-item-preloaded',\n      'gallery-item-video',\n      'gallery-item',\n      'video-item',\n    ];\n    if (utils.isiPhone()) {\n      baseClassName.push('ios');\n    }\n    if (this.state.isPlaying) {\n      baseClassName.push('playing');\n    }\n    if (this.state.playedOnce && this.state.ready) {\n      baseClassName.push('playedOnce');\n    }\n    if (this.props.isCurrentHover) {\n      baseClassName.push('item-content-hover');\n    } else {\n      baseClassName.push('item-content-regular');\n    }\n    // eslint-disable-next-line no-unused-vars\n    const video = (\n      <div\n        className={baseClassName.join(' ')}\n        data-hook=\"video_container-video-player-element\"\n        key={'video_container-' + this.props.id}\n        style={this.getVideoContainerStyles()}\n      >\n        {this.createPlayerElement()}\n        {this.state.isPlaying ? null : this.props.videoPlayButton}\n      </div>\n    );\n\n    return (\n      <div key={'video-and-hover-container' + this.props.idx}>\n        {video}\n        {shouldCreateVideoPlaceholder(this.props.options) && thumbnail}\n        {hover}\n      </div>\n    );\n  }\n}\n\nexport default VideoItem;\n"]}