"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importDefault(require("react"));
const printOnlySource_js_1 = require("./printOnlySource.js");
class ImageRenderer extends react_1.default.Component {
    constructor(props) {
        super(props);
        this.imageRef = null;
    }
    componentDidMount() {
        var _a;
        if (((_a = this.imageRef) === null || _a === void 0 ? void 0 : _a.complete) && typeof this.props.onLoad === 'function') {
            this.props.onLoad();
        }
    }
    render() {
        const _a = this.props, { customImageRenderer } = _a, imageProps = tslib_1.__rest(_a, ["customImageRenderer"]); // customImageRenderer is not valid for dom elements.
        if (typeof customImageRenderer === 'function') {
            return customImageRenderer(this.props);
        }
        else if (typeof this.props.src === 'string') {
            return (react_1.default.createElement("img", Object.assign({ ref: (ref) => {
                    this.imageRef = ref;
                }, alt: this.props.alt }, imageProps)));
        }
        else if (typeof this.props.src === 'object') {
            return (react_1.default.createElement("picture", { id: `multi_picture_${this.props.id}`, key: `multi_picture_${this.props.id}` },
                this.props.src.map((src, index) => src.forPrinting ? (react_1.default.createElement(printOnlySource_js_1.PrintOnlyImageSource, { key: `print-only-image-${index}`, srcSet: src.dpr, type: `image/${src.type}` })) : (react_1.default.createElement("source", { key: `image-source-${index}`, srcSet: src.dpr || src.url, type: `image/${src.type}` }))),
                react_1.default.createElement("img", Object.assign({ ref: (ref) => {
                        this.imageRef = ref;
                    }, alt: this.props.alt }, imageProps, { src: this.props.src[this.props.src.length - 1].url }))));
        }
        else {
            return null;
        }
    }
}
exports.default = ImageRenderer;
//# sourceMappingURL=imageRenderer.js.map