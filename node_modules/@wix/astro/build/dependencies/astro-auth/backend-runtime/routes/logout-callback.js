import {
  saveSessionTokensToCookie
} from "../chunk-HPW4ZAEJ.js";
import {
  auth,
  returnToQueryParamName
} from "../chunk-YHKPE45V.js";
import "../chunk-MLKGABMK.js";

// src/routes/logout-callback.ts
var GET = async (context) => {
  const returnTo = context.url.searchParams.get(returnToQueryParamName) ?? "/";
  if (!returnTo.startsWith("/")) {
    throw new Error(
      `Invalid \`${returnToQueryParamName}\` query param, only relative URLs are allowed`
    );
  }
  saveSessionTokensToCookie(context, await auth.generateVisitorTokens());
  return context.redirect(returnTo);
};
export {
  GET
};
