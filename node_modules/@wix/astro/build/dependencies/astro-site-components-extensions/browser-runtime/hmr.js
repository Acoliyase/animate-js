// ../astro-browser-runtime/src/hmr/react-component.tsx
import React, { useEffect, useRef, useState } from "react";
function createComponentHmrWrapper(OriginalComponent, hotData) {
  return (props) => {
    const [WrappedComponent, setComponent] = useState(
      () => hotData.Component ?? OriginalComponent
    );
    const isMountedRef = useRef(false);
    useEffect(() => {
      isMountedRef.current = true;
      hotData.setComponent = (NewComponent) => {
        hotData.Component = NewComponent;
        if (isMountedRef.current) {
          setComponent(() => NewComponent);
        }
      };
      return () => {
        isMountedRef.current = false;
      };
    }, []);
    return /* @__PURE__ */ React.createElement(WrappedComponent, { ...props });
  };
}
export {
  createComponentHmrWrapper
};
