---
/// <reference types="astro/env" />

const extensions = import.meta.glob(
  `/.astro/integrations/_wix_astro_backoffice-extensions/backoffice/*/entry.astro`
);

if (Astro.params.compId == null) {
  return new Response(null, { status: 404 });
}

const load =
  extensions[
    `.astro/integrations/_wix_astro_backoffice-extensions/backoffice/${Astro.params.compId}/entry.astro`
  ];

if (load == null) {
  return new Response(null, { status: 404 });
}

const mod = await load();

if (mod == null || typeof mod !== 'object' || !('default' in mod)) {
  return new Response(null, { status: 404 });
}

const Component = mod.default as any;
---

<Component />
