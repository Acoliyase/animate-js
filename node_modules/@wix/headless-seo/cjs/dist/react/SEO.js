"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Root = Root;
exports.Tags = Tags;
exports.UpdateTagsTrigger = UpdateTagsTrigger;
const jsx_runtime_1 = require("react/jsx-runtime");
const seo_tags_service_js_1 = require("../services/seo-tags-service.js");
const services_manager_react_1 = require("@wix/services-manager-react");
const services_manager_1 = require("@wix/services-manager");
/**
 * Root component that provides the SEO service context to its children.
 * This component sets up the necessary services for rendering and managing SEO tags for a page or item.
 *
 * @order 1
 * @component
 * @example
 * ```tsx
 * import { SEO } from "@wix/seo/components";
 * import { loadSEOTagsServiceConfig } from "@wix/seo/services";
 * import { seoTags } from "@wix/seo";
 *
 * // This should be done in the server-side
 * const seoTagsServiceConfig = await loadSEOTagsServiceConfig({
 *   pageURL: url,
 *   itemData: { slug: "<YOUR_ITEM_SLUG>" },
 *   itemType: seoTags.ItemType.<YOUR_ITEM_TYPE>,
 * });
 *
 * <SEO.Root seoTagsServiceConfig={seoTagsServiceConfig}>
 *   <SEO.UpdateTagsTrigger>
 *     {({ updateSeoTags }) => (
 *       <a
 *         href="https://your-domain.com/items/different-item"
 *         onClick={() =>
 *           updateSeoTags(seoTags.ItemType.STORES_PRODUCT, { slug: "different-product-slug" })
 *         }
 *       >
 *         Go to a different item
 *       </a>
 *     )}
 *   </SEO.UpdateTagsTrigger>
 * </SEO.Root>
 * ```
 */
function Root(props) {
    const { children, seoTagsServiceConfig } = props;
    return ((0, jsx_runtime_1.jsx)(services_manager_react_1.WixServices, { servicesMap: (0, services_manager_1.createServicesMap)().addService(seo_tags_service_js_1.SEOTagsServiceDefinition, seo_tags_service_js_1.SEOTagsService, seoTagsServiceConfig), children: children }));
}
/**
 * Renders SEO tags (title, meta, link, script) in the document head using a provided SEO service configuration.
 *
 * Integrates with the Wix services manager and a custom SEO tags service to inject SEO-relevant tags.
 *
 * @example
 * import { loadSEOTagsServiceConfig } from "@wix/seo/server-actions";
 * import { SEO } from "@wix/seo/components";
 * import { seoTags } from "@wix/seo";
 *
 * const seoTagsServiceConfig = await loadSEOTagsServiceConfig({
 *   pageURL: url,
 *   itemData: { slug: "<YOUR_ITEM_SLUG>" },
 *   itemType: seoTags.ItemType.<YOUR_ITEM_TYPE>,
 * });
 *
 * <head>
 *   <SEO.Tags seoTagsServiceConfig={seoTagsServiceConfig} />
 * </head>
 *
 * @component
 */
function Tags(props) {
    const { seoTagsServiceConfig } = props;
    const dataAttr = { 'wix-seo-tags': 'true' };
    return seoTagsServiceConfig.tags
        .filter((tag) => !tag.disabled)
        .map((tag, index) => {
        if (tag.type === 'title') {
            return ((0, jsx_runtime_1.jsx)("title", { ...dataAttr, children: tag.children }, `title-${index}`));
        }
        if (tag.type === 'meta') {
            return (0, jsx_runtime_1.jsx)("meta", { ...tag.props, ...dataAttr }, `meta-${index}`);
        }
        if (tag.type === 'link') {
            return (0, jsx_runtime_1.jsx)("link", { ...tag.props, ...dataAttr }, `link-${index}`);
        }
        if (tag.type === 'script') {
            return ((0, jsx_runtime_1.jsx)("script", { ...tag.props, ...tag.meta, ...dataAttr, dangerouslySetInnerHTML: { __html: tag.children || '' } }, `script-${index}`));
        }
        return null;
    });
}
/**
 * UpdateTagsTrigger - Handles updating SEO tags dynamically.
 *
 * This component enables client-side updates of SEO tags without requiring a full page reload.
 * It wraps content and provides a function to trigger SEO tag updates.
 *
 * @example
 * ```tsx
 * import { SEO } from "@wix/seo/components";
 * import { loadSEOTagsServiceConfig } from "@wix/seo/services";
 * import { seoTags } from "@wix/seo";
 *
 * // This should be done on the server side
 * const seoTagsServiceConfig = await loadSEOTagsServiceConfig({
 *   pageURL: url,
 *   itemData: { slug: "<YOUR_ITEM_SLUG>" },
 *   itemType: seoTags.ItemType.<YOUR_ITEM_TYPE>,
 * });
 *
 * <SEO.Root seoTagsServiceConfig={seoTagsServiceConfig}>
 *   <SEO.UpdateTagsTrigger>
 *     {({ updateSeoTags }) => (
 *       <a
 *         href="https://your-domain.com/items/different-item"
 *         onClick={() =>
 *           updateSeoTags(
 *             seoTags.ItemType.STORES_PRODUCT,
 *             { slug: "different-product-slug" }
 *           )
 *         }
 *       >
 *         Go to a different item
 *       </a>
 *     )}
 *   </SEO.UpdateTagsTrigger>
 * </SEO.Root>
 * ```
 *
 * @component
 */
function UpdateTagsTrigger(props) {
    const service = (0, services_manager_react_1.useService)(seo_tags_service_js_1.SEOTagsServiceDefinition);
    return props.children({
        updateSeoTags: service.updateSeoTags,
    });
}
