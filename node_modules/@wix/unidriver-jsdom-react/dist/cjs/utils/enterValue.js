"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.enterValue = void 0;
const react_1 = require("@testing-library/react");
const user_event_1 = require("@testing-library/user-event");
const unidriver_common_1 = require("@wix/unidriver-common");
const enterValue = async (base, value, options) => {
    const { disabled, readOnly, name, type } = base;
    const shouldClear = options?.shouldClear ?? true;
    const delayMs = options?.delay ?? 0;
    if (disabled || readOnly) {
        return;
    }
    if (delayMs > 0) {
        let currentValue = shouldClear ? '' : 'value' in base ? String(base.value) : '';
        for (const char of value) {
            currentValue += char;
            await (0, react_1.act)(async () => {
                react_1.fireEvent.change(base, { target: { name, type, value: currentValue } });
                await (0, unidriver_common_1.delay)(delayMs);
            });
        }
        return;
    }
    await (0, react_1.act)(async () => {
        return shouldClear ? react_1.fireEvent.change(base, { target: { name, value } }) : user_event_1.userEvent.type(base, value);
    });
};
exports.enterValue = enterValue;
//# sourceMappingURL=enterValue.js.map