"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setup = void 0;
const tslib_1 = require("tslib");
const testing_1 = require("@wix/unidriver-common/testing");
const playwrightUniDriver_1 = require("../playwrightUniDriver");
const stories = tslib_1.__importStar(require("../stories/TestApp.stories"));
const react_1 = tslib_1.__importDefault(require("react"));
const setup = async (params, ctx) => {
    const args = Object.values(stories).find((meta) => {
        return meta.name === params.story;
    })?.args;
    const component = await ctx?.mount(react_1.default.createElement(testing_1.TestApp, { ...args }));
    if (!component) {
        throw new Error('Failed to mount component');
    }
    await component.locator('.todo-app').isVisible();
    const driver = (0, playwrightUniDriver_1.playwrightUniDriver)(component);
    const tearDown = () => {
        return undefined;
    };
    return { driver, tearDown };
};
exports.setup = setup;
//# sourceMappingURL=setup.js.map