"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var CategoryList_exports = {};
__export(CategoryList_exports, {
  default: () => CategoryList_default,
  mapIconsToCategories: () => mapIconsToCategories
});
module.exports = __toCommonJS(CategoryList_exports);
var React = __toESM(require("react"));
var import_react = require("react");
var import_category_table = __toESM(require("../category-table"));
var import_search_input = __toESM(require("@wix/wix-storybook-utils/dist/cjs/ui/search-input"));
var import_useSearchIcons = __toESM(require("./useSearchIcons"));
var import_dataHooks = __toESM(require("../../dataHooks"));
var import_CategoryList_st = require("./CategoryList.st.css");
const mapIconsToCategories = (iconsMetadata) => {
  const categoryMap = {};
  for (const icon of iconsMetadata) {
    const { category = "Uncategorized" } = icon;
    if (!categoryMap[category]) {
      categoryMap[category] = {
        title: category,
        iconsMetadata: []
      };
    }
    categoryMap[category].iconsMetadata.push(icon);
  }
  return Object.values(categoryMap);
};
const CategoryList = ({
  iconsMetadata,
  tableHeaderTitles,
  mapIconToRow,
  searchKeys,
  dataHook,
  className
}) => {
  const { filteredIconsMetadata, debouncedSearch } = (0, import_useSearchIcons.default)(
    iconsMetadata,
    searchKeys
  );
  const categories = (0, import_react.useMemo)(
    () => mapIconsToCategories(filteredIconsMetadata),
    [filteredIconsMetadata]
  );
  return /* @__PURE__ */ React.createElement("div", { className, "data-hook": dataHook }, /* @__PURE__ */ React.createElement(
    import_search_input.default,
    {
      inputClassName: "",
      className: import_CategoryList_st.classes.searchInput,
      onChange: ({ target: { value } }) => debouncedSearch(value),
      dataHook: import_dataHooks.default.categorySearchInput
    }
  ), categories.map((category) => /* @__PURE__ */ React.createElement(
    import_category_table.default,
    {
      ...category,
      ...{ tableHeaderTitles, mapIconToRow },
      key: category.title
    }
  )));
};
var CategoryList_default = CategoryList;
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  mapIconsToCategories
});
