import * as React from "react";
import { useMemo } from "react";
import CategoryTable from "../category-table";
import SearchInput from "@wix/wix-storybook-utils/dist/cjs/ui/search-input";
import useSearchIcons from "./useSearchIcons";
import dataHooks from "../../dataHooks";
import { classes } from "./CategoryList.st.css";
const mapIconsToCategories = (iconsMetadata) => {
  const categoryMap = {};
  for (const icon of iconsMetadata) {
    const { category = "Uncategorized" } = icon;
    if (!categoryMap[category]) {
      categoryMap[category] = {
        title: category,
        iconsMetadata: []
      };
    }
    categoryMap[category].iconsMetadata.push(icon);
  }
  return Object.values(categoryMap);
};
const CategoryList = ({
  iconsMetadata,
  tableHeaderTitles,
  mapIconToRow,
  searchKeys,
  dataHook,
  className
}) => {
  const { filteredIconsMetadata, debouncedSearch } = useSearchIcons(
    iconsMetadata,
    searchKeys
  );
  const categories = useMemo(
    () => mapIconsToCategories(filteredIconsMetadata),
    [filteredIconsMetadata]
  );
  return /* @__PURE__ */ React.createElement("div", { className, "data-hook": dataHook }, /* @__PURE__ */ React.createElement(
    SearchInput,
    {
      inputClassName: "",
      className: classes.searchInput,
      onChange: ({ target: { value } }) => debouncedSearch(value),
      dataHook: dataHooks.categorySearchInput
    }
  ), categories.map((category) => /* @__PURE__ */ React.createElement(
    CategoryTable,
    {
      ...category,
      ...{ tableHeaderTitles, mapIconToRow },
      key: category.title
    }
  )));
};
var CategoryList_default = CategoryList;
export {
  CategoryList_default as default,
  mapIconsToCategories
};
