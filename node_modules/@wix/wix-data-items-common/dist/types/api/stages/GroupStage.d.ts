import { Expression } from '../expressions/Expression';
import * as apiTypes from '../../types/data-item-types';
import { PipelineStage } from './stages';
/**
 * @builder
 */
export interface GroupStage extends PipelineStage {
    /**
     * Specifies how to group items in the result.
     *
     * The `by()` method configures the aggregation pipeline to group items for which the specified `expression` resolves to the same value. The `key` and resolved `expression` determine the result item's unique `_id` property.
     *
     * > **Note**: When `by()` is not called or when it is called with no parameters, all items are placed in a single group.
     *
     * @param expression - Expression to determine the grouping value. Items with matching values are grouped together. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param key - Name of the field in the result that contains the grouping value.
     * @returns GroupStage object.
     */
    by(expression: Expression, key: string): GroupStage;
    /**
     * Calculates the sum of the specified expression across all items in the group.
     *
     * The `sum()` method refines the aggregation pipeline to calculate the sum of the specified expression across all items in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to calculate the group's total sum. Expression must resolve to a number. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    sum(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Calculates the average value across all items in the group based on the specified expression.
     *
     * The `avg()` method refines the aggregation pipeline to calculate the average value of the specified expression across all items in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to calculate the group's average value. The expression must resolve to a number. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    avg(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Finds the minimum value across all items in the group.
     *
     * The `min()` method refines the aggregation pipeline to find the minimum value of the specified field across all the items in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to find the group's minimum value. Expression must resolve to a comparable value, such as a number or string. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    min(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Finds the maximum value across all items in the group.
     *
     * The `max()` method refines the aggregation pipeline to find the maximum value of the specified field across all the items in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to find the group's maximum value. Expression must resolve to a comparable value, such as a number or string. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    max(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Counts the number of items in the group.
     *
     * The `count()` method refines the aggregation pipeline to count the number of items in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    count(resultFieldName: string): GroupStage;
    /**
     * Finds the first item in the group.
     *
     * The `first()` method refines the aggregation pipeline to find the first item in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to find the first item in the group. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    first(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Finds the last item in the group.
     *
     * The `last()` method refines the aggregation pipeline to find the last item in the group.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to find the last item in the group. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    last(expression: Expression, resultFieldName: string): GroupStage;
    /**
     * Collects values from all items in the group into an array.
     *
     * The `push()` method refines the aggregation pipeline to collect values from all items in the group into an array.
     *
     * @public
     * @documentationMaturity preview
     * @param expression - Expression to collect items into an array. Learn more about using [expressions in aggregation pipelines](https://dev.wix.com/docs/sdk/backend-modules/data/items/wix-data-aggregate-pipeline-expressions/introduction).
     * @param resultFieldName - Field to store the result in.
     *
     * Learn more about [field keys](https://support.wix.com/en/article/cms-formerly-content-manager-about-your-collection-fields#field-id-velo-by-wix-only).
     * @returns GroupStage object.
     */
    push(expression: Expression, resultFieldName: string): GroupStage;
}
export declare class GroupStageImpl implements GroupStage {
    private ids;
    private accumulators;
    by(expression: Expression, key: string): GroupStage;
    sum(expression: Expression, resultFieldName: string): GroupStage;
    avg(expression: Expression, resultFieldName: string): GroupStage;
    min(expression: Expression, resultFieldName: string): GroupStage;
    max(expression: Expression, resultFieldName: string): GroupStage;
    count(resultFieldName: string): GroupStage;
    first(expression: Expression, resultFieldName: string): GroupStage;
    last(expression: Expression, resultFieldName: string): GroupStage;
    push(expression: Expression, resultFieldName: string): GroupStage;
    private addAccumulator;
    /**
     * @internal
     */
    build(): apiTypes.Stage;
}
//# sourceMappingURL=GroupStage.d.ts.map