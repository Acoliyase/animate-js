{"version":3,"names":["_errors","require","apiTypes","_interopRequireWildcard","_utils","_common","_WixDataQueryImpl","_WixDataResultImpl","_WixDataAggregateImpl","_ApiClient","_WixDataPatchImpl","_WixDataSearchImpl","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","createFilter","filter","anyFilter","getFilterModel","model","_e","filterTree","WixDataApi","constructor","clientFactory","allowGet","environment","gridAppId","tracer","_defineProperty2","withArgs","args","collectionName","options","apiValidator","arity","validateAndReject","trace","env","client","truncateDataItems","dataCollectionId","toOptions","itemId","dataItem","getDataItem","dataItemId","toReadOptions","fields","catch","recover","ItemDoesNotExistCode","toDataItem","item","warnAboutBrokenFields","insertDataItem","id","_id","data","toInsertOptions","saveDataItem","toSaveOptions","updateDataItem","toUpdateOptions","removeDataItem","toRemoveOptions","fieldModification","action","ACTION","SET_FIELD","fieldPath","setFieldOptions","value","actionOptions","REMOVE_FIELD","INCREMENT_FIELD","incrementFieldOptions","APPEND_TO_ARRAY","appendToArrayOptions","REMOVE_FROM_ARRAY","removeFromArrayOptions","Error","WixDataPatchImpl","onRun","_args","patchParams","fieldModifications","map","toFieldModificationApi","result","patchDataItem","patch","toPatchOptions","itemIds","WixDataBulkPatchImpl","results","bulkPatchDataItems","patches","toBulkResult","ensureValidQuery","invalidArgs","length","wdeValidationError","messages","queryValidations","queryInvalid","WixDataQueryImpl","onCount","params","invalidArguments","validateAndReturn","totalCount","countDataItems","onDistinct","field","_toSort$find","fieldName","order","toSort","orderBy","find","fetch","cursorOrOffset","returnTotalCount","distinctValues","pagingMetadata","queryDistinctValues","toPaging","limitNumber","isOffset","items","paging","skipNumber","WixDataResultImpl","onFind","dataItems","queryDataItems","query","projectedFields","sort","referencedItemOptions","included","randomSortOptions","sortMode","SortMode","RANDOM","randomOptions","seed","WixDataSearchImpl","expression","queryText","request","search","fuzzy","isFuzzy","mode","searchMode","searchDataItems","cursor","limit","isNonEmptyString","WixDataAggregateImpl","validationErrors","aggregateValidations","aggregateInvalid","toOperation","itemFieldName","undefined","aggregateDataItems","initialFilter","aggregation","groupingFields","groupBy","operations","aggregates","a","resultFieldName","name","average","avg","min","max","sum","itemCount","count","finalFilter","havingTree","unwrapAggregationId","pipeline","aggregatePipelineDataItems","bulkRemoveOptions","bulkRemoveDataItems","dataItemIds","bulkInsertOptions","appId","runBulkSave","overrideExisting","bulkUpdateOptions","bulkUpdateDataItems","toBulkUpdateOptions","current","queryReferencedDataItems","onlyReferencedItems","holdingItem","relationshipAttribute","referenceParameter","referringItemId","referringItemFieldName","SortOrder","ASC","DESC","skip","refsOrAttr","leftOrOpts","right","refs","opts","argc","rights","asArray","relationshipName","left","references","bulkInsertDataItemReferences","dataItemReferences","referencedItemId","referenceParameters","replaceDataItemReferences","newReferencedItemIds","referenceRemoveParameters","bulkRemoveDataItemReferences","isReferenced","isReferencedDataItem","consistentRead","ApiClient","wixData","filterBuilder","bulkSaveDataItems","bulkInsertDataItems","ignoreCodes","fn","exports","arguments","suppressHooks","draftsOptions","showDrafts","conditionOptions","condition","includeReferencedItems","includeReferences","res","appOptions","entries","every","kv","language","publishPluginOptions","includeDraftItems","cursorPaging","offset","fieldOrder","providerOrValue","code","error","_details","details","applicationError","Promise","resolve","reject","hasFieldWithDollar","hasField","key","startsWith","hasFieldWithDot","includes","console","warn","errors","flatMap","_r$itemMetadata","_r$itemMetadata2","itemMetadata","success","BulkError","description","originalIndex","_r$itemMetadata3","inserted","BulkActionType","INSERT","updated","UPDATE","PATCH","removed","DELETE","skipped","insertedItemIds","_r$itemMetadata4","updatedItemIds","_r$itemMetadata5","removedItemIds","_r$itemMetadata6","isObject","rest","keys","notEmpty","xOrXs","isArray","commonApiValidator"],"sources":["../../../src/api/WixDataApi.ts"],"sourcesContent":["import {\n  apiValidator as commonApiValidator,\n  messages,\n  BulkError,\n  wdeValidationError,\n} from '../errors'\nimport { HttpApiClientFactory } from '../types'\nimport * as apiTypes from '../types/data-item-types'\n\nimport { hasField, isObject, isArray } from '../utils'\nimport { filterBuilder } from './common'\nimport {\n  Provider,\n  WixDataAggregateOptions,\n  WixDataBulkResult,\n  WixDataItem,\n  WixDataItemOrId,\n  WixDataOptions,\n  WixDataPatchOptions,\n  WixDataInsertOptions,\n  WixDataRemoveOptions,\n  WixDataQueryReferencedOptions,\n  WixDataReadOptions,\n  WixDataReadWithProjectionOptions,\n  WixDataReference,\n  WixDataUpdateOptions,\n  WixDataBulkUpdateOptions,\n  WixDataSaveOptions,\n} from './types'\nimport { QueryParams, WixDataQueryImpl } from './impl/WixDataQueryImpl'\nimport { WixDataQuery } from './WixDataQuery'\nimport { WixDataResultImpl, PageFetcher } from './impl/WixDataResultImpl'\nimport { WixDataAggregateImpl } from './impl/WixDataAggregateImpl'\nimport { ApiClient } from './ApiClient'\nimport {\n  WixDataPatch,\n  FieldModification,\n  WixDataBulkPatch,\n} from './WixDataPatch'\nimport { WixDataAggregate } from './WixDataAggregate'\nimport { WixDataFilter } from './WixDataFilter'\nimport { WixDataResult } from './WixDataResult'\nimport { WixDataBulkPatchImpl, WixDataPatchImpl } from './impl/WixDataPatchImpl'\nimport { WixDataSearch } from './WixDataSearch'\nimport { WixDataSearchImpl } from './impl/WixDataSearchImpl'\n\nfunction createFilter(filter: WixDataFilter): Record<string, any> {\n  if (filter == null) {\n    return {}\n  }\n  const anyFilter = filter as any\n  if (typeof anyFilter.getFilterModel === 'function') {\n    try {\n      const model = anyFilter.getFilterModel()\n      if (model != null) {\n        return model\n      }\n    } catch (_e) {\n      // fall back below\n    }\n  }\n  if (anyFilter.filterTree != null) {\n    return anyFilter.filterTree as Record<string, any>\n  }\n  return {}\n}\n\ntype ProvidedOpt<T> = T | undefined | Provider<T | undefined>\ntype TraceWith = (\n  label: string,\n  opts?: object\n) => <T>(fn: () => Promise<T>) => Promise<T>\n\nexport class WixDataApi {\n  private client: ApiClient\n\n  constructor(\n    clientFactory: HttpApiClientFactory<any>,\n    allowGet: boolean,\n    private readonly environment?: apiTypes.Environment,\n    private readonly gridAppId?: ProvidedOpt<string>,\n    private readonly tracer?: TraceWith\n  ) {\n    this.client = new ApiClient(clientFactory, allowGet)\n  }\n\n  get wixData(): WixDataApi {\n    return this\n  }\n\n  get filter(): WixDataFilter {\n    return filterBuilder()\n  }\n\n  // NOTE sort method for builder is not implemented\n\n  truncate = withArgs(\n    async (\n      args,\n      collectionName: string,\n      options?: WixDataOptions\n    ): Promise<void> => {\n      await apiValidator()\n        .arity('truncate', args, 1, 2)\n        .collectionName(collectionName)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('truncate', { collectionName })(async (env) => {\n        await this.client.truncateDataItems({\n          ...env,\n          dataCollectionId: collectionName,\n          ...toOptions(options),\n        })\n      })\n    }\n  )\n\n  // --- single-item methods ---\n\n  get = withArgs(\n    async (\n      args,\n      collectionName: string,\n      itemId: string,\n      options?: WixDataReadWithProjectionOptions\n    ): Promise<WixDataItem | null> => {\n      await apiValidator()\n        .arity('get', args, 2, 3)\n        .collectionName(collectionName)\n        .itemId(itemId)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('get', { collectionName, itemId })(async (env) => {\n        const { dataItem } = await this.client\n          .getDataItem({\n            ...env,\n            dataCollectionId: collectionName,\n            dataItemId: itemId,\n            ...toReadOptions(options),\n            fields: options?.fields,\n          })\n          .catch(\n            recover(ItemDoesNotExistCode, {} as apiTypes.GetDataItemResponse)\n          )\n\n        return dataItem ? toDataItem(dataItem) : null\n      })\n    }\n  )\n\n  insert = withArgs(\n    async (\n      args,\n      collectionName: string,\n      item: Partial<WixDataItem>,\n      options?: WixDataUpdateOptions\n    ): Promise<WixDataItem> => {\n      await apiValidator()\n        .arity('insert', args, 2, 3)\n        .collectionName(collectionName)\n        .item(item, collectionName, false)\n        .options(options)\n        .validateAndReject()\n\n      warnAboutBrokenFields(item)\n\n      return this.trace('insert', { collectionName })(async (env) => {\n        const { dataItem } = await this.client.insertDataItem({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItem: {\n            id: item._id,\n            data: item,\n          },\n          ...toInsertOptions(options),\n        })\n\n        return toDataItem(dataItem!)\n      })\n    }\n  )\n\n  save = withArgs(\n    async (\n      args,\n      collectionName: string,\n      item: Partial<WixDataItem>,\n      options?: WixDataSaveOptions\n    ): Promise<WixDataItem> => {\n      await apiValidator()\n        .arity('save', args, 2, 3)\n        .collectionName(collectionName)\n        .item(item, collectionName, false)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('save', { collectionName })(async (env) => {\n        const { dataItem } = await this.client.saveDataItem({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItem: {\n            id: item._id,\n            data: item,\n          },\n          ...toSaveOptions(options),\n        })\n        return toDataItem(dataItem!)\n      })\n    }\n  )\n\n  update = withArgs(\n    async (\n      args,\n      collectionName: string,\n      item: WixDataItem,\n      options?: WixDataUpdateOptions\n    ) => {\n      await apiValidator()\n        .arity('update', args, 2, 3)\n        .collectionName(collectionName)\n        .item(item, collectionName, false)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('update', { collectionName })(async (env) => {\n        const { dataItem } = await this.client.updateDataItem({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItem: {\n            id: item._id,\n            data: item,\n          },\n          ...toUpdateOptions(options),\n        })\n        return toDataItem(dataItem!)\n      })\n    }\n  )\n\n  remove = withArgs(\n    async (\n      args,\n      collectionName: string,\n      itemId: string,\n      options?: WixDataRemoveOptions\n    ): Promise<WixDataItem | null> => {\n      await apiValidator()\n        .arity('remove', args, 2, 3)\n        .collectionName(collectionName)\n        .itemId(itemId)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('remove', { collectionName, itemId })(async (env) => {\n        const { dataItem } = await this.client\n          .removeDataItem({\n            ...env,\n            dataCollectionId: collectionName,\n            dataItemId: itemId,\n            ...toRemoveOptions(options),\n          })\n          .catch(\n            recover(ItemDoesNotExistCode, {} as apiTypes.GetDataItemResponse)\n          )\n        return dataItem ? toDataItem(dataItem) : null\n      })\n    }\n  )\n\n  private toFieldModificationApi = (fieldModification: FieldModification) => {\n    switch (fieldModification.action) {\n      case 'SET_FIELD':\n        return {\n          action: apiTypes.ACTION.SET_FIELD,\n          fieldPath: fieldModification.fieldPath,\n          setFieldOptions: {\n            value: fieldModification.actionOptions,\n          },\n        }\n      case 'REMOVE_FIELD':\n        return {\n          action: apiTypes.ACTION.REMOVE_FIELD,\n          fieldPath: fieldModification.fieldPath,\n        }\n      case 'INCREMENT_FIELD':\n        return {\n          action: apiTypes.ACTION.INCREMENT_FIELD,\n          fieldPath: fieldModification.fieldPath,\n          incrementFieldOptions: {\n            value: fieldModification.actionOptions,\n          },\n        }\n      case 'APPEND_TO_ARRAY':\n        return {\n          action: apiTypes.ACTION.APPEND_TO_ARRAY,\n          fieldPath: fieldModification.fieldPath,\n          appendToArrayOptions: {\n            value: fieldModification.actionOptions,\n          },\n        }\n      case 'REMOVE_FROM_ARRAY':\n        return {\n          action: apiTypes.ACTION.REMOVE_FROM_ARRAY,\n          fieldPath: fieldModification.fieldPath,\n          removeFromArrayOptions: {\n            value: fieldModification.actionOptions,\n          },\n        }\n      default:\n        throw new Error('Invalid patch action')\n    }\n  }\n\n  patch = (collectionName: string, itemId: string): WixDataPatch => {\n    return new WixDataPatchImpl({\n      collectionName,\n      itemId,\n      onRun: async (_args, patchParams, options) => {\n        const fieldModifications = patchParams.fieldModifications.map(\n          this.toFieldModificationApi\n        )\n\n        return this.trace('patch', { collectionName })(async (env) => {\n          const result = await this.client.patchDataItem({\n            ...env,\n            dataCollectionId: patchParams.collectionName,\n            patch: {\n              dataItemId: patchParams.itemId,\n              fieldModifications,\n            },\n            ...toPatchOptions(options),\n          })\n\n          return result.dataItem ? toDataItem(result.dataItem) : null\n        })\n      },\n    })\n  }\n\n  bulkPatch = (collectionName: string, itemIds: string[]): WixDataBulkPatch => {\n    return new WixDataBulkPatchImpl({\n      collectionName,\n      itemIds,\n      onRun: async (_args, patchParams, options) => {\n        const fieldModifications = patchParams.fieldModifications.map(\n          this.toFieldModificationApi\n        )\n\n        return this.trace('bulkPatch', { collectionName })(async (env) => {\n          const { results } = await this.client.bulkPatchDataItems({\n            ...env,\n            dataCollectionId: patchParams.collectionName,\n            patches: patchParams.itemIds.map((itemId) => ({\n              dataItemId: itemId,\n              fieldModifications,\n            })),\n            ...toPatchOptions(options),\n          })\n\n          return toBulkResult(itemIds, results!, ['WDE0073'])\n        })\n      },\n    })\n  }\n\n  // --- query, count, distinct ---\n\n  query = (collectionName: string): WixDataQuery => {\n    const ensureValidQuery = (invalidArgs: string[]) => {\n      if (invalidArgs.length > 0) {\n        throw wdeValidationError(\n          messages.queryValidations.queryInvalid(collectionName, invalidArgs)\n        )\n      }\n    }\n\n    return new WixDataQueryImpl({\n      collectionName,\n      onCount: async (args, params, options) => {\n        ensureValidQuery([\n          ...params.invalidArguments,\n          ...apiValidator()\n            .collectionName(collectionName)\n            .arity('count', args, 0, 1)\n            .options(options)\n            .validateAndReturn(),\n        ])\n\n        return this.trace('count', { collectionName })(async (env) => {\n          const { totalCount } = await this.client.countDataItems({\n            ...env,\n            dataCollectionId: collectionName,\n            filter: params.filterTree,\n            ...toReadOptions(options),\n          })\n          return totalCount!\n        })\n      },\n      onDistinct: async (args, params, field, options) => {\n        ensureValidQuery([\n          ...params.invalidArguments,\n          ...apiValidator()\n            .collectionName(collectionName)\n            .arity('distinct', args, 1, 2)\n            .fieldName(field)\n            .options(options)\n            .validateAndReturn(),\n        ])\n\n        const order = toSort(params.orderBy).find(\n          (o) => o.fieldName === field\n        )?.order\n\n        const fetch: PageFetcher<any> = (cursorOrOffset, returnTotalCount) =>\n          this.trace('distinct', { collectionName, field })(async (env) => {\n            const { distinctValues, pagingMetadata } =\n              await this.client.queryDistinctValues({\n                ...env,\n                dataCollectionId: collectionName,\n                ...toReadOptions(options),\n                ...toPaging(params.limitNumber, cursorOrOffset),\n                ...(isOffset(cursorOrOffset)\n                  ? {\n                      fieldName: field,\n                      filter: params.filterTree,\n                      order,\n                      returnTotalCount,\n                    }\n                  : {}),\n              })\n            return [distinctValues!, pagingMetadata!]\n          })\n\n        const [items, paging] = await fetch(\n          params.skipNumber,\n          options?.returnTotalCount\n        )\n\n        return new WixDataResultImpl(items, paging, fetch, params)\n      },\n      onFind: async (args, params, options) => {\n        ensureValidQuery([\n          ...params.invalidArguments,\n          ...apiValidator()\n            .collectionName(collectionName)\n            .arity('find', args, 0, 1)\n            .options(options)\n            .validateAndReturn(),\n        ])\n\n        const fetch: PageFetcher = (cursorOrOffset, returnTotalCount) =>\n          this.trace('query', { collectionName })(async (env) => {\n            const { dataItems, pagingMetadata } =\n              await this.client.queryDataItems({\n                ...env,\n                dataCollectionId: collectionName,\n                query: {\n                  fields: params.projectedFields,\n                  ...toPaging(params.limitNumber, cursorOrOffset),\n                  ...(isOffset(cursorOrOffset)\n                    ? {\n                        filter: params.filterTree,\n                        sort: toSort(params.orderBy),\n                      }\n                    : {}),\n                },\n                referencedItemOptions: params.included,\n                ...toReadOptions(options),\n                ...(isOffset(cursorOrOffset) ? { returnTotalCount } : {}),\n                ...(params.randomSortOptions\n                  ? {\n                      sortMode: apiTypes.SortMode.RANDOM,\n                      randomOptions: { seed: params.randomSortOptions.seed },\n                    }\n                  : {}),\n              })\n            return [dataItems!.map(toDataItem), pagingMetadata!]\n          })\n        const [items, paging] = await fetch(\n          params.skipNumber,\n          options?.returnTotalCount\n        )\n\n        return new WixDataResultImpl(items, paging, fetch, params)\n      },\n    })\n  }\n\n  search = (collectionName: string): WixDataSearch => {\n    const ensureValidQuery = (invalidArgs: string[]) => {\n      if (invalidArgs.length > 0) {\n        throw wdeValidationError(\n          messages.queryValidations.queryInvalid(collectionName, invalidArgs)\n        )\n      }\n    }\n\n    return new WixDataSearchImpl({\n      collectionName,\n      onRun: async (\n        params,\n        options?: WixDataReadOptions\n      ): Promise<WixDataResult> => {\n        ensureValidQuery([\n          ...params.invalidArguments,\n          ...apiValidator()\n            .collectionName(collectionName)\n            .options(options)\n            .validateAndReturn(),\n        ])\n\n        const expression = params.queryText\n\n        const fetch: PageFetcher = (cursorOrOffset) =>\n          this.trace('search', { collectionName, expression })(async (env) => {\n            const request: apiTypes.SearchDataItemsRequest = {\n              ...env,\n              dataCollectionId: collectionName,\n              search: {\n                filter: params.filterTree,\n                sort: toSort(params.orderBy),\n                fields: params.projectedFields,\n                search: {\n                  expression: params.queryText,\n                  fuzzy: params.isFuzzy,\n                  mode: params.searchMode,\n                },\n                ...toPaging(params.limitNumber, cursorOrOffset),\n              },\n              referencedItemOptions: params.included,\n              ...toReadOptions(options),\n            }\n\n            const { dataItems, pagingMetadata } =\n              await this.client.searchDataItems(request)\n            return [dataItems!.map(toDataItem), pagingMetadata!]\n          })\n\n        const [items, paging] = await fetch(params.skipNumber)\n\n        return new WixDataResultImpl(items, paging, fetch, params)\n      },\n    })\n  }\n\n  // NOTE find method is not implemented\n\n  fetch = withArgs(\n    async (\n      args,\n      collectionName: string,\n      cursor: string,\n      limit?: number,\n      options?: WixDataReadOptions\n    ): Promise<WixDataResult> => {\n      await apiValidator()\n        .arity('fetch', args, 2, 4)\n        .collectionName(collectionName)\n        .isNonEmptyString(cursor, 'cursor')\n        .validateAndReject()\n\n      const fetch: PageFetcher = (cursorOrOffset) =>\n        this.trace('query', { collectionName })(async (env) => {\n          const { dataItems, pagingMetadata } =\n            await this.client.queryDataItems({\n              ...env,\n              dataCollectionId: collectionName,\n              query: {\n                ...toPaging(limit, cursorOrOffset),\n              },\n              ...toReadOptions(options),\n            })\n          return [dataItems!.map(toDataItem), pagingMetadata!]\n        })\n      const [items, paging] = await fetch(cursor)\n\n      return new WixDataResultImpl(items, paging, fetch, {\n        limitNumber: limit,\n        collectionName,\n        skipNumber: 0,\n      })\n    }\n  )\n\n  // --- aggregate ---\n\n  aggregate = (collectionName: string): WixDataAggregate => {\n    return new WixDataAggregateImpl({\n      collectionName,\n      onRun: async (args, params, options) => {\n        const validationErrors = [\n          ...params.invalidArguments,\n          ...apiValidator()\n            .arity('run', args, 0, 1)\n            .collectionName(collectionName)\n            .options(options)\n            .validateAndReturn(),\n        ]\n\n        if (validationErrors.length > 0) {\n          throw wdeValidationError(\n            messages.aggregateValidations.aggregateInvalid(\n              collectionName,\n              validationErrors\n            )\n          )\n        }\n\n        const fetch: PageFetcher<Record<string, any>> = (\n          cursorOrOffset,\n          returnTotalCount\n        ) =>\n          this.trace('aggregate', { collectionName })(async (env) => {\n            const toOperation = (field?: string) =>\n              field ? { itemFieldName: field } : undefined\n\n            const { results, pagingMetadata } =\n              await this.client.aggregateDataItems({\n                ...env,\n                dataCollectionId: collectionName,\n                ...toPaging(params.limitNumber, cursorOrOffset),\n                ...toReadOptions(options),\n                ...(isOffset(cursorOrOffset)\n                  ? {\n                      initialFilter: params.filterTree,\n                      aggregation: {\n                        groupingFields: params.groupBy,\n                        operations: params.aggregates.map((a) => ({\n                          resultFieldName: a.name,\n                          average: toOperation(a.avg),\n                          min: toOperation(a.min),\n                          max: toOperation(a.max),\n                          sum: toOperation(a.sum),\n                          itemCount: a.count ? {} : undefined,\n                        })),\n                      },\n                      finalFilter: params.havingTree,\n                      sort: toSort(params.orderBy),\n                      returnTotalCount,\n                    }\n                  : {}),\n              })\n            return [unwrapAggregationId(results!), pagingMetadata!]\n          })\n\n        const [items, paging] = await fetch(\n          params.skipNumber,\n          options?.returnTotalCount\n        )\n\n        return new WixDataResultImpl(items, paging, fetch, params)\n      },\n    })\n  }\n\n  fetchAggregate = withArgs(\n    async (\n      args,\n      collectionName: string,\n      cursor: string,\n      limit?: number,\n      options?: WixDataReadOptions\n    ) => {\n      await apiValidator()\n        .arity('fetchAggregate', args, 2, 4)\n        .collectionName(collectionName)\n        .isNonEmptyString(cursor, 'cursor')\n        .validateAndReject()\n\n      const fetch: PageFetcher<Record<string, any>> = (cursorOrOffset) =>\n        this.trace('aggregate', { collectionName })(async (env) => {\n          const { results, pagingMetadata } =\n            await this.client.aggregateDataItems({\n              ...env,\n              dataCollectionId: collectionName,\n              ...toPaging(limit, cursorOrOffset),\n              ...toReadOptions(options),\n            })\n          return [unwrapAggregationId(results!), pagingMetadata!]\n        })\n\n      const [items, paging] = await fetch(cursor, true)\n\n      return new WixDataResultImpl(items, paging, fetch, {\n        limitNumber: limit,\n        skipNumber: 0,\n        collectionName,\n      })\n    }\n  )\n\n  aggregatePipeline = withArgs(\n    async (\n      args,\n      collectionName: string,\n      pipeline: apiTypes.AggregationPipeline,\n      options?: WixDataAggregateOptions\n    ): Promise<apiTypes.AggregatePipelineDataItemsResponse> => {\n      await apiValidator()\n        .arity('aggregatePipeline', args, 2, 3)\n        .collectionName(collectionName)\n        .validateAndReject()\n\n      return this.trace('aggregatePipeline', { collectionName })(\n        async (env) => {\n          const request: apiTypes.AggregatePipelineDataItemsRequest = {\n            ...env,\n            dataCollectionId: collectionName,\n            pipeline,\n            ...options,\n          }\n\n          return this.client.aggregatePipelineDataItems(request)\n        }\n      )\n    }\n  )\n\n  // --- bulk methods ---\n\n  bulkRemove = withArgs(\n    async (\n      args,\n      collectionName: string,\n      itemIds: string[],\n      options?: WixDataOptions\n    ): Promise<WixDataBulkResult> => {\n      await apiValidator()\n        .arity('bulkRemove', args, 2, 3)\n        .collectionName(collectionName)\n        .itemIds(itemIds, collectionName)\n        .bulkRemoveOptions(options)\n        .validateAndReject()\n\n      return this.trace('bulkRemove', { collectionName })(async (env) => {\n        const { results } = await this.client.bulkRemoveDataItems({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItemIds: itemIds,\n          ...toRemoveOptions(options as any),\n        })\n        // Non-existing items are skipped and not reported as errors.\n        return toBulkResult(itemIds, results!, ['WDE0073'])\n      })\n    }\n  )\n\n  private async runBulkSave(\n    env: { environment?: apiTypes.Environment; appId?: string },\n    collectionName: string,\n    items: Partial<WixDataItem>[],\n    options?: WixDataOptions,\n    overrideExisting: boolean = true\n  ): Promise<WixDataBulkResult> {\n    const request: apiTypes.BulkInsertDataItemsRequest = {\n      ...env,\n      dataCollectionId: collectionName,\n      dataItems: items.map((data) => ({\n        id: data._id,\n        data,\n      })),\n      ...toOptions(options),\n    }\n    const { results } = await (overrideExisting\n      ? this.client.bulkSaveDataItems(request)\n      : this.client.bulkInsertDataItems(request))\n    const ignoreCodes = overrideExisting ? [] : ['WDE0074']\n    return toBulkResult(items, results!, ignoreCodes)\n  }\n\n  bulkInsert = withArgs(\n    async (\n      args,\n      collectionName: string,\n      items: Partial<WixDataItem>[],\n      options?: WixDataOptions & { overrideExisting?: boolean }\n    ): Promise<WixDataBulkResult> => {\n      await apiValidator()\n        .arity('bulkInsert', args, 2, 3)\n        .items(items, collectionName)\n        .bulkInsertOptions(options)\n        .collectionName(collectionName)\n        .validateAndReject()\n\n      return this.trace('bulkInsert', { collectionName, options })(\n        async (appId) =>\n          this.runBulkSave(\n            appId,\n            collectionName,\n            items,\n            options,\n            options?.overrideExisting ?? false\n          )\n      )\n    }\n  )\n\n  bulkSave = withArgs(\n    async (\n      args,\n      collectionName: string,\n      items: Partial<WixDataItem>[],\n      options?: WixDataOptions\n    ): Promise<WixDataBulkResult> => {\n      await apiValidator()\n        .arity('bulkSave', args, 2, 3)\n        .bulkInsertOptions(options)\n        .collectionName(collectionName)\n        .items(items, collectionName)\n        .validateAndReject()\n\n      return this.trace('bulkSave', { collectionName })(async (env) =>\n        this.runBulkSave(env, collectionName, items, options)\n      )\n    }\n  )\n\n  bulkUpdate = withArgs(\n    async (\n      args,\n      collectionName: string,\n      items: WixDataItem[],\n      options?: WixDataBulkUpdateOptions\n    ): Promise<WixDataBulkResult> => {\n      await apiValidator()\n        .arity('bulkUpdate', args, 2, 3)\n        .bulkUpdateOptions(options)\n        .collectionName(collectionName)\n        .items(items, collectionName)\n        .validateAndReject()\n\n      return this.trace('bulkUpdate', { collectionName })(async (env) => {\n        const { results } = await this.client.bulkUpdateDataItems({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItems: items.map((data) => ({\n            id: data._id,\n            data,\n          })),\n          ...toBulkUpdateOptions(options),\n        })\n        // Non-existing items are skipped and not reported as errors.\n        return toBulkResult(items, results!, ['WDE0073'])\n      })\n    }\n  )\n\n  // --- references ---\n\n  fetchReferenced = withArgs(\n    async (\n      args,\n      collectionName: string,\n      cursor: string,\n      limit?: number,\n      options?: WixDataReadWithProjectionOptions\n    ): Promise<WixDataResult<WixDataItem | string>> => {\n      await apiValidator()\n        .arity('fetchReferenced', args, 2, 4)\n        .isNonEmptyString(cursor, 'cursor')\n        .collectionName(collectionName)\n        .validateAndReject()\n\n      const fetch: PageFetcher<WixDataItem | string> = (current) =>\n        this.trace('fetchReferenced', { collectionName })(async (env) => {\n          const { results, pagingMetadata } =\n            await this.client.queryReferencedDataItems({\n              ...env,\n              ...toPaging(limit, current),\n              ...toReadOptions(options),\n              dataCollectionId: collectionName,\n              fields: options?.fields,\n            })\n          return [onlyReferencedItems(results!), pagingMetadata!]\n        })\n\n      const [items, paging] = await fetch(cursor)\n      return new WixDataResultImpl(items, paging, fetch, {\n        collectionName,\n        limitNumber: limit,\n        skipNumber: 0,\n      })\n    }\n  )\n\n  queryReferenced = withArgs(\n    async (\n      args,\n      collectionName: string,\n      holdingItem: WixDataItemOrId,\n      relationshipAttribute: string,\n      options?: WixDataQueryReferencedOptions\n    ): Promise<WixDataResult> => {\n      await apiValidator()\n        .arity('queryReferenced', args, 3, 4)\n        .collectionName(collectionName)\n        .referenceParameter(holdingItem)\n        .isNonEmptyString(relationshipAttribute, 'relationshipAttribute')\n        .options(options)\n        .validateAndReject()\n\n      const id = itemId(holdingItem)\n      const fetch: PageFetcher = (cursorOrOffset, returnTotalCount) =>\n        this.trace('queryReferenced', {\n          collectionName,\n          itemId: id,\n          options,\n          relationshipAttribute,\n        })(async (env) => {\n          const { results, pagingMetadata } =\n            await this.client.queryReferencedDataItems({\n              ...env,\n              ...toPaging(options?.limit ?? 50, cursorOrOffset),\n              ...toReadOptions(options),\n              dataCollectionId: collectionName,\n              fields: options?.fields,\n              ...(isOffset(cursorOrOffset)\n                ? {\n                    referringItemId: id,\n                    referringItemFieldName: relationshipAttribute,\n                    order:\n                      options?.order === 'asc'\n                        ? apiTypes.SortOrder.ASC\n                        : options?.order === 'desc'\n                        ? apiTypes.SortOrder.DESC\n                        : undefined,\n                    returnTotalCount,\n                  }\n                : {}),\n            })\n          return [onlyReferencedItems(results!), pagingMetadata!]\n        })\n\n      const [items, paging] = await fetch(\n        options?.skip ?? 0,\n        options?.returnTotalCount\n      )\n      return new WixDataResultImpl(items, paging, fetch, {\n        collectionName,\n        limitNumber: options?.limit ?? 50,\n        skipNumber: options?.skip ?? 0,\n      })\n    }\n  )\n\n  insertReference: {\n    // overload with array of references\n    (\n      collectionName: string,\n      refs: WixDataReference[],\n      options?: WixDataOptions\n    ): Promise<void>\n    // overload with separate left and right(s)\n    (\n      collectionName: string,\n      relationshipAttribute: string,\n      left: WixDataItemOrId,\n      right: WixDataItemOrId | WixDataItemOrId[],\n      options?: WixDataOptions\n    ): Promise<void>\n  } = withArgs(\n    async (\n      args,\n      collectionName: string,\n      refsOrAttr: any,\n      leftOrOpts?: any,\n      right?: any,\n      options?: any\n    ) => {\n      let refs: WixDataReference[]\n      let opts: WixDataOptions\n      let argc: [number, number]\n\n      if (typeof refsOrAttr === 'string') {\n        const rights: WixDataItemOrId[] = asArray(right)\n        refs = rights.map((r) => ({\n          relationshipName: refsOrAttr,\n          left: leftOrOpts as WixDataItemOrId,\n          right: r,\n        }))\n        opts = options\n        argc = [4, 5]\n      } else {\n        refs = refsOrAttr\n        opts = leftOrOpts\n        argc = [2, 3]\n      }\n      await apiValidator()\n        .arity('insertReference', args, ...argc)\n        .collectionName(collectionName)\n        .references(refs)\n        .options(opts)\n        .validateAndReject()\n\n      await this.trace('insertReference', { collectionName })(async (env) =>\n        this.client.bulkInsertDataItemReferences({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItemReferences: refs.map((r) => ({\n            referringItemFieldName: r.relationshipName,\n            referringItemId: itemId(r.left),\n            referencedItemId: itemId(r.right),\n          })),\n          ...toOptions(opts),\n        })\n      )\n    }\n  )\n\n  replaceReferences = withArgs(\n    async (\n      args,\n      collectionName: string,\n      relationshipAttribute: string,\n      left: WixDataItemOrId,\n      right: WixDataItemOrId | WixDataItemOrId[],\n      options?: WixDataOptions\n    ): Promise<void> => {\n      const rights = asArray(right)\n      await apiValidator()\n        .arity('replaceReferences', args, 4, 5)\n        .collectionName(collectionName)\n        .isNonEmptyString(relationshipAttribute, 'relationshipAttribute')\n        .referenceParameter(left)\n        .referenceParameters(rights)\n        .options(options)\n        .validateAndReject()\n\n      await this.trace('replaceReferences', {\n        collectionName,\n        relationshipAttribute,\n      })(async (env) =>\n        this.client.replaceDataItemReferences({\n          ...env,\n          dataCollectionId: collectionName,\n          referringItemFieldName: relationshipAttribute,\n          referringItemId: itemId(left),\n          newReferencedItemIds: rights.map(itemId),\n          ...toOptions(options),\n        })\n      )\n    }\n  )\n\n  removeReference = withArgs(\n    async (\n      args,\n      collectionName: string,\n      relationshipAttribute: string,\n      left: WixDataItemOrId,\n      right: WixDataItemOrId | WixDataItemOrId[],\n      options?: WixDataOptions\n    ) => {\n      const rights = asArray(right)\n      await apiValidator()\n        .arity('removeReference', args, 4, 5)\n        .collectionName(collectionName)\n        .referenceParameter(left)\n        .referenceRemoveParameters(rights)\n        .isNonEmptyString(relationshipAttribute, 'relationshipAttribute')\n        .options(options)\n        .validateAndReject()\n\n      await this.trace('removeReference', {\n        collectionName,\n        relationshipAttribute,\n      })(async (env) =>\n        this.client.bulkRemoveDataItemReferences({\n          ...env,\n          dataCollectionId: collectionName,\n          dataItemReferences: rights.map((r) => ({\n            referringItemFieldName: relationshipAttribute,\n            referringItemId: itemId(left),\n            referencedItemId: itemId(r),\n          })),\n          ...toOptions(options),\n        })\n      )\n    }\n  )\n\n  isReferenced = withArgs(\n    async (\n      args,\n      collectionName: string,\n      relationshipAttribute: string,\n      left: WixDataItemOrId,\n      right: WixDataItemOrId,\n      options?: WixDataReadOptions\n    ): Promise<boolean> => {\n      await apiValidator()\n        .arity('isReferenced', args, 4, 5)\n        .collectionName(collectionName)\n        .referenceParameter(left)\n        .referenceParameter(right)\n        .options(options)\n        .validateAndReject()\n\n      return this.trace('isReferenced', {\n        collectionName,\n        relationshipAttribute,\n      })(async (env) => {\n        const { isReferenced } = await this.client.isReferencedDataItem({\n          ...env,\n          dataCollectionId: collectionName,\n          referringItemFieldName: relationshipAttribute,\n          referringItemId: itemId(left),\n          referencedItemId: itemId(right),\n          ...toReadOptions(options),\n          consistentRead: options?.consistentRead,\n        })\n        return isReferenced!\n      })\n    }\n  )\n\n  private trace(\n    action: string,\n    opts: object\n  ): <R>(\n    fn: (env: {\n      environment?: apiTypes.Environment\n      appId?: string\n    }) => Promise<R>\n  ) => Promise<R> {\n    return async (fn) => {\n      const gridAppId = await get(this.gridAppId)\n      const env = { appId: gridAppId, environment: this.environment }\n      if (this.tracer) {\n        return this.tracer(`WixDataApi.${action}`, {\n          ...opts,\n          gridAppId,\n          environment: this.environment,\n        })(() => fn(env))\n      }\n      return fn(env)\n    }\n  }\n}\n\nfunction withArgs<Args extends any[], R>(\n  fn: (all: IArguments, ...args: Args) => R\n): (...args: Args) => R {\n  return function (...args) {\n    return fn(arguments, ...args)\n  }\n}\n\nfunction toPatchOptions(options?: WixDataPatchOptions) {\n  return {\n    suppressHooks: options?.suppressHooks,\n    ...draftsOptions(options?.showDrafts),\n    ...conditionOptions(options?.condition),\n  }\n}\n\nfunction toInsertOptions(options?: WixDataInsertOptions) {\n  return {\n    ...toOptions(options),\n    includeReferencedItems: options?.includeReferences,\n  }\n}\n\nfunction toSaveOptions(options?: WixDataSaveOptions) {\n  return {\n    ...toOptions(options),\n    includeReferencedItems: options?.includeReferences,\n  }\n}\n\nfunction toUpdateOptions(options?: WixDataUpdateOptions) {\n  return {\n    ...toOptions(options),\n    includeReferencedItems: options?.includeReferences,\n    ...conditionOptions(options?.condition),\n  }\n}\n\nfunction toBulkUpdateOptions(options?: WixDataBulkUpdateOptions) {\n  return {\n    ...toOptions(options),\n    ...conditionOptions(options?.condition),\n  }\n}\n\nfunction toOptions(opts?: WixDataOptions) {\n  if (!opts) {\n    return undefined\n  }\n  const res = {\n    suppressHooks: opts.suppressHooks,\n    appOptions: opts.appOptions,\n    ...draftsOptions(opts?.showDrafts),\n  }\n  if (Object.entries(res).every((kv) => kv[1] === undefined)) {\n    return undefined\n  }\n  return res\n}\n\nfunction toReadOptions(options?: WixDataReadOptions) {\n  return {\n    suppressHooks: options?.suppressHooks,\n    appOptions: options?.appOptions,\n    ...draftsOptions(options?.showDrafts),\n    consistentRead: options?.consistentRead,\n    language: options?.language,\n  }\n}\n\nfunction conditionOptions(condition?: WixDataFilter) {\n  return condition != undefined\n    ? {\n        condition: {\n          filter: createFilter(condition),\n        },\n      }\n    : { condition: undefined }\n}\n\nfunction toRemoveOptions(options?: WixDataRemoveOptions) {\n  return {\n    ...toOptions(options),\n    ...conditionOptions(options?.condition),\n  }\n}\n\nfunction draftsOptions(showDrafts?: boolean) {\n  return showDrafts !== undefined\n    ? { publishPluginOptions: { includeDraftItems: showDrafts } }\n    : {}\n}\n\nfunction toDataItem(item: apiTypes.DataItem): WixDataItem {\n  return item.data as WixDataItem\n}\n\nfunction toPaging(limit: number | undefined, cursorOrOffset: string | number) {\n  return typeof cursorOrOffset === 'string'\n    ? {\n        cursorPaging: {\n          limit,\n          cursor: cursorOrOffset,\n        },\n      }\n    : limit !== undefined || cursorOrOffset > 0\n    ? {\n        paging: {\n          limit,\n          offset: cursorOrOffset,\n        },\n      }\n    : {}\n}\n\nfunction toSort(orderBy: QueryParams['orderBy']): apiTypes.Sorting[] {\n  return orderBy.map((fieldOrder) => {\n    const [[fieldName, sort]] = Object.entries(fieldOrder)\n    const order =\n      sort === 'asc'\n        ? apiTypes.SortOrder.ASC\n        : sort === 'desc'\n        ? apiTypes.SortOrder.DESC\n        : undefined\n    return { fieldName, order }\n  })\n}\n\nasync function get<T>(providerOrValue: T | Provider<T>): Promise<T> {\n  if (typeof (providerOrValue as any)?.get === 'function') {\n    return (providerOrValue as Provider<T>).get()\n  }\n  return providerOrValue as T\n}\n\nfunction recover<T>(code: string, value: T): (error: unknown) => Promise<T> {\n  return (error) => {\n    if (\n      error instanceof Error &&\n      (error as any)?.details?.applicationError?.code === code\n    ) {\n      return Promise.resolve(value)\n    }\n    return Promise.reject(error)\n  }\n}\n\nfunction warnAboutBrokenFields(item: Partial<WixDataItem>) {\n  const hasFieldWithDollar = hasField(item, (key) => key.startsWith('$'))\n  const hasFieldWithDot = hasField(item, (key) => key.includes('.'))\n  if (hasFieldWithDollar) {\n    console.error(\n      \"Data inserted contains field name prefixed with symbol '$'. It is not recommended to use such field names as it will not work with some data operations.\"\n    )\n  }\n  if (hasFieldWithDot) {\n    console.warn(\n      \"Data inserted contains field name containing symbol '.'. It is not recommended to use such field names as it will not work with some data operations.\"\n    )\n  }\n}\n\nfunction toBulkResult(\n  request: any[],\n  results: apiTypes.BulkDataItemResult[],\n  ignoreCodes: string[] = []\n): WixDataBulkResult {\n  const errors = results.flatMap((r) => {\n    if (r.itemMetadata?.success || !r.itemMetadata?.error) {\n      return []\n    }\n    if (ignoreCodes.includes(r.itemMetadata.error.code ?? '')) {\n      return []\n    }\n    return [\n      new BulkError(\n        r.itemMetadata.error.description!,\n        r.itemMetadata.error.code!,\n        request[r.itemMetadata.originalIndex!],\n        'BulkError',\n        r.itemMetadata.originalIndex!\n      ),\n    ]\n  })\n  const success = results.filter((r) => r.itemMetadata?.success)\n  const inserted = success.filter(\n    (r) => r.action === apiTypes.BulkActionType.INSERT\n  )\n  const updated = success.filter(\n    (r) =>\n      r.action === apiTypes.BulkActionType.UPDATE ||\n      r.action === apiTypes.BulkActionType.PATCH\n  )\n  const removed = success.filter(\n    (r) => r.action === apiTypes.BulkActionType.DELETE\n  )\n  return {\n    inserted: inserted.length,\n    updated: updated.length,\n    removed: removed.length,\n    skipped: request.length - errors.length - success.length,\n    errors,\n    insertedItemIds: inserted.map((r) => r.itemMetadata?.id!),\n    updatedItemIds: updated.map((r) => r.itemMetadata?.id!),\n    removedItemIds: removed.map((r) => r.itemMetadata?.id!),\n  }\n}\n\nfunction unwrapAggregationId(\n  items: Record<string, any>[]\n): Record<string, any>[] {\n  // When grouping by one field WixDataService returns value on _id field directly, DataItemService wraps it in an object, i.e.\n  // grouping by surname returns {_id: 'Simpson'} in WixDataService vs {_id: {surname: 'Simpson'}} in DataItemService\n  // When grouping by more fields, values are kept wrapped.\n  return items.map((item) => {\n    const id = item._id\n    if (isObject(id)) {\n      const [key, ...rest] = Object.keys(id)\n      if (rest.length === 0) {\n        item._id = id[key]\n        return item\n      }\n    }\n    return item\n  })\n}\n\nfunction onlyReferencedItems(\n  results: apiTypes.ReferencedResult[]\n): WixDataItem[] {\n  return results\n    .map((result) => result.dataItem)\n    .filter(notEmpty)\n    .map(toDataItem)\n}\n\nfunction notEmpty<T>(value: T | null | undefined): value is T {\n  return value != null\n}\n\nfunction itemId(item: WixDataItemOrId): string {\n  return typeof item === 'string' ? item : item._id\n}\n\nfunction asArray<T>(xOrXs: T | T[]): T[] {\n  return isArray(xOrXs) ? (xOrXs as T[]) : [xOrXs as T]\n}\n\nfunction isOffset(cursorOrOffset: string | number) {\n  return typeof cursorOrOffset === 'number'\n}\n\nconst ItemDoesNotExistCode = 'WDE0073'\n\nfunction apiValidator() {\n  return commonApiValidator(wdeValidationError)\n}\n"],"mappings":"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","ignoreList":[]}