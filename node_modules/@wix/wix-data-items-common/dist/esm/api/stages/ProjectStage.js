export class ProjectStageImpl {
    constructor() {
        this.fields = [];
    }
    include(...fieldNames) {
        fieldNames.forEach((fieldName) => {
            this.fields.push({ include: { fieldName } });
        });
        return this;
    }
    exclude(...fieldNames) {
        fieldNames.forEach((fieldName) => {
            this.fields.push({ exclude: { fieldName } });
        });
        return this;
    }
    reshape(expression, resultFieldName) {
        this.addField(expression, resultFieldName);
        return this;
    }
    projectNested(stage, resultFieldName) {
        return this.addNestedProjectionField(resultFieldName, stage.fields);
    }
    addField(expression, resultFieldName) {
        this.fields.push({
            reshape: { resultFieldName, expression: expression.build() },
        });
        return this;
    }
    addNestedProjectionField(resultFieldName, fields) {
        this.fields.push({ projectNested: { resultFieldName, fields } });
        return this;
    }
    /** @private */
    build() {
        return { projection: { fields: this.fields } };
    }
}
//# sourceMappingURL=ProjectStage.js.map