import { jsx as _jsx } from "react/jsx-runtime";
import React from 'react';
import { media as wixMedia } from '@wix/sdk';
import { AsChildSlot } from '@wix/headless-utils/react';
export const WixMediaImage = React.forwardRef(({ media, isShape, width, height, className, alt = '', asChild, children, ...otherProps }, ref) => {
    if (!media?.image)
        return null;
    const getUrl = isShape ? wixMedia.getShapeUrl : wixMedia.getImageUrl;
    const parsed = getUrl(media.image);
    const src = parsed.url;
    const derivedWidth = width || parsed.width;
    const derivedHeight = height || parsed.height;
    const derivedAlt = parsed.altText ?? alt;
    const dimensions = {};
    if (derivedWidth) {
        dimensions.width = derivedWidth;
    }
    if (derivedHeight) {
        dimensions.height = derivedHeight;
    }
    return (_jsx(AsChildSlot, { ref: ref, asChild: asChild, className: className, customElement: children, customElementProps: {
            src,
            ...dimensions,
            alt: derivedAlt,
        }, ...otherProps, children: _jsx("img", { src: src, ...dimensions, alt: derivedAlt }) }));
});
