import { createRequire as _createRequire } from 'node:module';
const require = _createRequire(import.meta.url);

// src/index.ts
import path from "path";
function sourceLocationPlugin({ types: t }, opts = {}) {
  const attrName = opts.attributeName || "data-source-location";
  return {
    name: "babel-plugin-jsx-source-attrs",
    visitor: {
      JSXOpeningElement(pathNode, state) {
        if (t.isJSXFragment(pathNode.node)) {
          return;
        }
        if (pathNode.node.attributes.some(
          (a) => t.isJSXAttribute(a) && a.name.name === attrName
        )) {
          return;
        }
        const absPath = state.file.opts.filename || "unknown";
        const relPath = path.relative(process.cwd(), absPath);
        const { line, column } = pathNode.node.loc?.start || {};
        const attr = t.jsxAttribute(
          t.jsxIdentifier(attrName),
          t.stringLiteral(`${relPath}:${line}:${column}`)
        );
        pathNode.node.attributes.unshift(attr);
      }
    }
  };
}
export {
  sourceLocationPlugin as default
};
//# sourceMappingURL=index.mjs.map