"use strict";

exports.__esModule = true;
exports.useAssistantEffect = useAssistantEffect;
var _react = require("react");
var _hooks = require("./hooks");
/**
 * React hook to listen for side effects emitted by the assistant platform.
 * @param handler - The function to call when a side effect is emitted.
 * @param appDefId - Optional application definition ID to filter side effects.
 * @param sideEffectName - Optional event name or array of event names to filter side effects.
 */
function useAssistantEffect(handler, appDefId, sideEffectName) {
  const emitter = (0, _hooks.initSideEffectEmitterSingleton)();
  (0, _react.useEffect)(() => {
    const wrappedHandler = sideEffect => {
      const sideEffectNames = Array.isArray(sideEffectName) ? sideEffectName : [sideEffectName];
      if (!sideEffectName || sideEffectNames.includes(sideEffect.name)) {
        if (!appDefId || appDefId === sideEffect.appDefinitionId) {
          handler(sideEffect.payload, sideEffect.name, sideEffect);
        }
      }
    };
    emitter.addEventListener(wrappedHandler);
    return () => emitter.removeEventListener(wrappedHandler);
  }, [appDefId, sideEffectName, handler, emitter]);
}
//# sourceMappingURL=useAssistantEffect.js.map