{"version":3,"names":["useEffect","initSideEffectEmitterSingleton","useAssistantEffect","handler","appDefId","sideEffectName","emitter","wrappedHandler","sideEffect","sideEffectNames","Array","isArray","includes","name","appDefinitionId","payload","addEventListener","removeEventListener"],"sources":["../../src/useAssistantEffect.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { initSideEffectEmitterSingleton } from './hooks';\nimport { SideEffect } from './SideEffectEmitter';\n\n/**\n * React hook to listen for side effects emitted by the assistant platform.\n * @param handler - The function to call when a side effect is emitted.\n * @param appDefId - Optional application definition ID to filter side effects.\n * @param sideEffectName - Optional event name or array of event names to filter side effects.\n */\nexport function useAssistantEffect<T>(\n  handler: (\n    sideEffectPayload: T,\n    sideEffectName: string,\n    sideEffect: SideEffect<T>,\n  ) => void,\n  appDefId?: string,\n  sideEffectName?: string | string[],\n) {\n  const emitter = initSideEffectEmitterSingleton();\n\n  useEffect(() => {\n    const wrappedHandler = (sideEffect: SideEffect<T>) => {\n      const sideEffectNames = Array.isArray(sideEffectName)\n        ? sideEffectName\n        : [sideEffectName];\n      if (!sideEffectName || sideEffectNames.includes(sideEffect.name)) {\n        if (!appDefId || appDefId === sideEffect.appDefinitionId) {\n          handler(sideEffect.payload, sideEffect.name, sideEffect);\n        }\n      }\n    };\n\n    emitter.addEventListener(wrappedHandler);\n    return () => emitter.removeEventListener(wrappedHandler);\n  }, [appDefId, sideEffectName, handler, emitter]);\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,8BAA8B,QAAQ,SAAS;AAGxD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,kBAAkBA,CAChCC,OAIS,EACTC,QAAiB,EACjBC,cAAkC,EAClC;EACA,MAAMC,OAAO,GAAGL,8BAA8B,CAAC,CAAC;EAEhDD,SAAS,CAAC,MAAM;IACd,MAAMO,cAAc,GAAIC,UAAyB,IAAK;MACpD,MAAMC,eAAe,GAAGC,KAAK,CAACC,OAAO,CAACN,cAAc,CAAC,GACjDA,cAAc,GACd,CAACA,cAAc,CAAC;MACpB,IAAI,CAACA,cAAc,IAAII,eAAe,CAACG,QAAQ,CAACJ,UAAU,CAACK,IAAI,CAAC,EAAE;QAChE,IAAI,CAACT,QAAQ,IAAIA,QAAQ,KAAKI,UAAU,CAACM,eAAe,EAAE;UACxDX,OAAO,CAACK,UAAU,CAACO,OAAO,EAAEP,UAAU,CAACK,IAAI,EAAEL,UAAU,CAAC;QAC1D;MACF;IACF,CAAC;IAEDF,OAAO,CAACU,gBAAgB,CAACT,cAAc,CAAC;IACxC,OAAO,MAAMD,OAAO,CAACW,mBAAmB,CAACV,cAAc,CAAC;EAC1D,CAAC,EAAE,CAACH,QAAQ,EAAEC,cAAc,EAAEF,OAAO,EAAEG,OAAO,CAAC,CAAC;AAClD","ignoreList":[]}