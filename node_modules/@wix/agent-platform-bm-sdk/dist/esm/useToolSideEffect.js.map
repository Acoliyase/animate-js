{"version":3,"names":["useCallback","useAssistantEffect","ASSISTANT_HUB_SPI_IMPLEMENTOR","useToolSideEffect","handler","toolName","wrappedHandler","payload","request","response"],"sources":["../../src/useToolSideEffect.tsx"],"sourcesContent":["import { useCallback } from 'react';\nimport { useAssistantEffect } from './useAssistantEffect';\n\nexport const ASSISTANT_HUB_SPI_IMPLEMENTOR =\n  '5e9a9fda-5d98-4339-8ebd-d7721e790b67';\n\ntype ToolOutput = {\n  content: string;\n  success: boolean;\n};\n\n/**\n * `useToolSideEffect()` is a hook that allows you to listen for assistant tool (aka skill tool) execution side effects.\n * It will be triggered only for tools defined in the assistant hub.\n * If you want to listen your own side effects triggered in your own SPI Assistant, use `useAssistantEffect()` instead.\n */\nexport function useToolSideEffect<ToolInput>(\n  handler: (toolInput: ToolInput, toolOutput: ToolOutput) => void,\n  toolName: string,\n) {\n  const wrappedHandler = useCallback(\n    (payload: {\n      toolName: string;\n      request: ToolInput;\n      response: ToolOutput;\n    }) => {\n      if (payload.toolName === toolName) {\n        handler(payload.request, payload.response);\n      }\n    },\n    [handler, toolName],\n  );\n\n  useAssistantEffect(\n    wrappedHandler,\n    ASSISTANT_HUB_SPI_IMPLEMENTOR,\n    'TOOL_EXECUTION',\n  );\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,kBAAkB,QAAQ,sBAAsB;AAEzD,OAAO,MAAMC,6BAA6B,GACxC,sCAAsC;AAOxC;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,iBAAiBA,CAC/BC,OAA+D,EAC/DC,QAAgB,EAChB;EACA,MAAMC,cAAc,GAAGN,WAAW,CAC/BO,OAIA,IAAK;IACJ,IAAIA,OAAO,CAACF,QAAQ,KAAKA,QAAQ,EAAE;MACjCD,OAAO,CAACG,OAAO,CAACC,OAAO,EAAED,OAAO,CAACE,QAAQ,CAAC;IAC5C;EACF,CAAC,EACD,CAACL,OAAO,EAAEC,QAAQ,CACpB,CAAC;EAEDJ,kBAAkB,CAChBK,cAAc,EACdJ,6BAA6B,EAC7B,gBACF,CAAC;AACH","ignoreList":[]}