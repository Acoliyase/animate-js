import { runTest } from '@wix/unidriver-common/testing';
import { setupWithAwaiter } from '../setup';
describe('Adapter Specific', () => {
    describe('get', () => {
        it('should resolve a promise with a unidriver element', async () => {
            await runTest(setupWithAwaiter, undefined, { story: 'get' }, async ({ driver }) => {
                const result = await driver.get('[data-hook="todo-item"]');
                expect(await result.exists()).toBe(true);
            });
        });
        it('should be able to get an element [when] element appears later', async () => {
            await runTest(setupWithAwaiter, undefined, { story: 'get' }, async ({ driver }) => {
                const completedItemSelector = '[data-hook="todo-item"][data-completed="true"]';
                // ensure that no completed item is present
                const completedItem = driver.$(completedItemSelector);
                expect(await completedItem.exists()).toBe(false);
                // marks item as completed
                await driver.$('[data-hook="todo-item"] button').click();
                const element = await driver.get(completedItemSelector);
                expect(await element.exists()).toBe(true);
            });
        });
        it('should reject a promise if an element is not found', async () => {
            await runTest(setupWithAwaiter, undefined, { story: 'get' }, async ({ driver }) => {
                const getterPromise = driver.get('[data-testid="non-existent-element"]');
                await expect(getterPromise).rejects.toThrowError();
            });
        });
        it('should return an object which syncs with the DOM', async () => {
            await runTest(setupWithAwaiter, undefined, { story: 'get' }, async ({ driver }) => {
                const result = await driver.get('[data-hook="todo-item"][data-completed="false"]');
                expect(await result.exists()).toBe(true);
                await driver.$('[data-hook="todo-item"] button').click();
                expect(await result.exists()).toBe(false);
            });
        });
    });
});
//# sourceMappingURL=get.sled.spec.js.map