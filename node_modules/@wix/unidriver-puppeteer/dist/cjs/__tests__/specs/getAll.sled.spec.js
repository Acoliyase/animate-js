"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const setup_1 = require("../setup");
const testing_1 = require("@wix/unidriver-common/testing");
describe('Adapter Specific', () => {
    describe('getAll', () => {
        it('should resolve a promise with a unidriver element list', async () => {
            await (0, testing_1.runTest)(setup_1.setupWithAwaiter, undefined, { story: 'get-all' }, async ({ driver }) => {
                const results = await driver.getAll('[data-hook="todo-item"]');
                expect(await results.at(0).exists()).toBe(true);
                expect(await results.at(1).exists()).toBe(true);
                expect(await results.at(2).exists()).toBe(false);
            });
        });
        it('should be able to get an element(s) [when] element appears later', async () => {
            await (0, testing_1.runTest)(setup_1.setupWithAwaiter, undefined, { story: 'get-all' }, async ({ driver }) => {
                const completedItemSelector = '[data-hook="todo-item"][data-completed="true"]';
                // ensure that no completed items are present
                const completedItems = driver.$$(completedItemSelector);
                expect(await completedItems.at(0).exists()).toBe(false);
                // marks items as completed
                const buttons = driver.$$('[data-hook="todo-item"] button');
                await buttons.at(0).click();
                await buttons.at(1).click();
                const elementList = await driver.getAll(completedItemSelector);
                expect(await elementList.at(0).exists()).toBe(true);
                expect(await elementList.at(1).exists()).toBe(true);
            });
        });
        it('should reject a promise if an element is not found', async () => {
            await (0, testing_1.runTest)(setup_1.setupWithAwaiter, undefined, { story: 'get-all' }, async ({ driver }) => {
                const getterPromise = driver.getAll('[data-testid="non-existent-element"]');
                await expect(getterPromise).rejects.toThrowError();
            });
        });
        it('should return an object which syncs with the DOM', async () => {
            await (0, testing_1.runTest)(setup_1.setupWithAwaiter, undefined, { story: 'get-all' }, async ({ driver }) => {
                const result = await driver.getAll('[data-hook="todo-item"][data-completed="false"]');
                expect(await result.at(0).exists()).toBe(true);
                expect(await result.at(1).exists()).toBe(true);
                const buttons = driver.$$('[data-hook="todo-item"] button');
                await buttons.at(0).click();
                await buttons.at(1).click();
                expect(await result.at(0).exists()).toBe(false);
                expect(await result.at(1).exists()).toBe(false);
            });
        });
    });
});
//# sourceMappingURL=getAll.sled.spec.js.map