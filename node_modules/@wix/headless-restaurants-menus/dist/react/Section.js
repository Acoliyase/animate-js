import { jsx as _jsx } from "react/jsx-runtime";
import React from 'react';
import { Section as CoreSection, SectionName, SectionDescription, } from './core/index.js';
import { AsChildSlot } from '@wix/headless-utils/react';
import { TestIds } from './TestIds.js';
import { useSectionContext } from './core/Section.js';
import * as ItemComponent from './Item.js';
import { MenusServiceDefinition } from '../services/index.js';
import { useService } from '@wix/services-manager-react';
export function Root(props) {
    if (!props.section) {
        return null;
    }
    return _jsx(CoreSection, { section: props.section, children: props.children });
}
/**
 * Displays the section name with customizable rendering following the documented API.
 *
 * @component
 * @example
 * ```tsx
 * // Default usage
 * <Section.Name className="text-xl font-medium" />
 *
 * // asChild with primitive
 * <Section.Name asChild>
 *   <h3 className="text-xl font-medium" />
 * </Section.Name>
 *
 * // asChild with react component
 * <Section.Name asChild>
 *   {React.forwardRef(({name, ...props}, ref) => (
 *     <h3 ref={ref} {...props} className="text-xl font-medium">
 *       {name}
 *     </h3>
 *   ))}
 * </Section.Name>
 * ```
 */
export const Name = React.forwardRef((props, ref) => {
    const { asChild, children, className, ...otherProps } = props;
    return (_jsx(SectionName, { children: ({ name }) => {
            return (_jsx(AsChildSlot, { ref: ref, asChild: asChild, className: className, "data-testid": TestIds.sectionName, customElement: children, customElementProps: { name }, content: name, ...otherProps, children: _jsx("h2", { children: name }) }));
        } }));
});
/**
 * Displays the section description with customizable rendering following the documented API.
 *
 * @component
 * @example
 * ```tsx
 * // Default usage
 * <Section.Description className="text-secondary-foreground" />
 *
 * // asChild with primitive
 * <Section.Description asChild>
 *   <p className="text-secondary-foreground" />
 * </Section.Description>
 *
 * // asChild with react component
 * <Section.Description asChild>
 *   {React.forwardRef(({description, ...props}, ref) => (
 *     <p ref={ref} {...props} className="text-secondary-foreground">
 *       {description}
 *     </p>
 *   ))}
 * </Section.Description>
 * ```
 */
export const Description = React.forwardRef((props, ref) => {
    const { asChild, children, className, ...otherProps } = props;
    return (_jsx(SectionDescription, { children: ({ description }) => {
            return (_jsx(AsChildSlot, { ref: ref, asChild: asChild, className: className, "data-testid": TestIds.sectionDescription, customElement: children, customElementProps: { description }, content: description, ...otherProps, children: _jsx("p", { children: description }) }));
        } }));
});
Name.displayName = 'Section.Name';
Description.displayName = 'Section.Description';
export const ItemsRepeater = React.forwardRef((props, _ref) => {
    const { children } = props;
    const menusService = useService(MenusServiceDefinition);
    const { section } = useSectionContext();
    const items = (section.itemIds ?? [])
        .map((itemId) => menusService.items.get().find((item) => item._id === itemId))
        .filter((item) => item !== undefined) ?? [];
    const hasItems = items.length > 0;
    if (!hasItems)
        return null;
    return items.map((item) => (_jsx(ItemComponent.Root, { item: item, "data-testid": TestIds.itemName, "data-item-id": item._id, children: children }, item._id)));
});
ItemsRepeater.displayName = 'Section.ItemsRepeater';
/**
 * Section namespace containing all section components
 * following the compound component pattern: SectionComponent.Root, SectionComponent.Name, SectionComponent.Description, etc.
 */
export const SectionComponent = {
    /** Section root component */
    Root,
    /** Section name component */
    Name,
    /** Section description component */
    Description,
    /** Section items repeater component */
    ItemsRepeater,
};
