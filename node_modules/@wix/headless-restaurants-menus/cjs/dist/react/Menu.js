import { jsx as _jsx, Fragment as _Fragment } from "react/jsx-runtime";
import React from 'react';
import { Menu as CoreMenu, MenuName, MenuDescription } from './core/index.js';
import { AsChildSlot } from '@wix/headless-utils/react';
import { TestIds } from './TestIds.js';
import { useMenuContext } from './core/Menu.js';
import * as SectionComponent from './Section.js';
import { useService } from '@wix/services-manager-react';
import { MenusServiceDefinition } from '../services/index.js';
export function Root(props) {
    if (!props.menu) {
        return null;
    }
    return _jsx(CoreMenu, { menu: props.menu, children: props.children });
}
/**
 * Displays the menu name with customizable rendering following the documented API.
 *
 * @component
 * @example
 * ```tsx
 * // Default usage
 * <Menu.Name className="text-2xl font-semibold" />
 *
 * // asChild with primitive
 * <Menu.Name asChild>
 *   <h2 className="text-2xl font-semibold" />
 * </Menu.Name>
 *
 * // asChild with react component
 * <Menu.Name asChild>
 *   {React.forwardRef(({name, ...props}, ref) => (
 *     <h2 ref={ref} {...props} className="text-2xl font-semibold">
 *       {name}
 *     </h2>
 *   ))}
 * </Menu.Name>
 * ```
 */
export const Name = React.forwardRef((props, ref) => {
    const { asChild, children, className, ...otherProps } = props;
    return (_jsx(MenuName, { children: ({ name }) => {
            return (_jsx(AsChildSlot, { ref: ref, asChild: asChild, className: className, "data-testid": TestIds.menuName, customElement: children, customElementProps: { name }, content: name, ...otherProps, children: _jsx("h1", { children: name }) }));
        } }));
});
/**
 * Displays the menu description with customizable rendering following the documented API.
 *
 * @component
 * @example
 * ```tsx
 * // Default usage
 * <Menu.Description className="text-secondary-foreground" />
 *
 * // asChild with primitive
 * <Menu.Description asChild>
 *   <p className="text-secondary-foreground" />
 * </Menu.Description>
 *
 * // asChild with react component
 * <Menu.Description asChild>
 *   {React.forwardRef(({description, ...props}, ref) => (
 *     <p ref={ref} {...props} className="text-secondary-foreground">
 *       {description}
 *     </p>
 *   ))}
 * </Menu.Description>
 * ```
 */
export const Description = React.forwardRef((props, ref) => {
    const { asChild, children, className, ...otherProps } = props;
    return (_jsx(MenuDescription, { children: ({ description }) => {
            return (_jsx(AsChildSlot, { ref: ref, asChild: asChild, className: className, "data-testid": TestIds.menuDescription, customElement: children, customElementProps: { description }, content: description, ...otherProps, children: _jsx("p", { children: description }) }));
        } }));
});
Name.displayName = 'Menu.Name';
Description.displayName = 'Menu.Description';
export const SectionsRepeater = React.forwardRef((props, _ref) => {
    const { children } = props;
    const { menu } = useMenuContext();
    const { sections } = useService(MenusServiceDefinition);
    const menuSections = (menu.sectionIds ?? [])
        .map((sectionId) => sections.get().find((section) => section._id === sectionId))
        .filter((section) => section !== undefined) ?? [];
    const hasSections = menuSections.length > 0;
    if (!hasSections)
        return null;
    return (_jsx(_Fragment, { children: menuSections.map((section) => (_jsx(SectionComponent.Root, { section: section, "data-testid": TestIds.itemName, "data-section-id": section._id, children: children }, section._id))) }));
});
SectionsRepeater.displayName = 'Menu.SectionsRepeater';
/**
 * Menu namespace containing all menu components
 * following the compound component pattern: MenuComponent.Root, MenuComponent.Name, MenuComponent.Description, etc.
 */
export const MenuComponent = {
    /** Menu root component */
    Root,
    /** Menu name component */
    Name,
    /** Menu description component */
    Description,
    /** Menu sections repeater component */
    SectionsRepeater,
};
