{"version":3,"names":["_core","require","_DragHandle","allowedTags","Set","blockedTags","blockedRoles","shouldAllowDrag","node","tagName","toLowerCase","role","getAttribute","has","isDragHandleNode","parentElement","PointerSensor","DefaultPointerSensor","exports","_defineProperty2","default","eventName","handler","nativeEvent","event","target","KeyboardSensor","DefaultKeyboardSensor","options","context","activators","every","activator"],"sources":["../../../../src/drag-and-drop/table/sensors.ts"],"sourcesContent":["import { PointerEvent } from 'react';\nimport {\n  PointerSensor as DefaultPointerSensor,\n  KeyboardSensor as DefaultKeyboardSensor,\n  Activators,\n  KeyboardSensorOptions,\n} from '@dnd-kit/core';\nimport { isDragHandleNode } from './DragHandle';\n\nconst allowedTags = new Set<string>(['tr', 'td']);\nconst blockedTags = new Set<string>([\n  'button',\n  'a',\n  'select',\n  'input',\n  'option',\n  'textarea',\n  'img',\n  'label',\n]);\nconst blockedRoles = new Set<string>(['button', 'listbox']);\n\nconst shouldAllowDrag = (node: HTMLElement | null): boolean => {\n  while (node) {\n    const tagName = node.tagName.toLowerCase();\n    const role = node.getAttribute('role');\n\n    if (allowedTags.has(tagName)) {\n      return true;\n    }\n\n    if (isDragHandleNode(node)) {\n      return true;\n    }\n\n    if (blockedTags.has(tagName)) {\n      return false;\n    }\n\n    if (role && blockedRoles.has(role)) {\n      return false;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nexport class PointerSensor extends DefaultPointerSensor {\n  static activators = [\n    {\n      eventName: 'onPointerDown' as const,\n      handler: ({ nativeEvent: event }: PointerEvent) => {\n        return shouldAllowDrag(event.target as HTMLElement);\n      },\n    },\n  ];\n}\n\nexport class KeyboardSensor extends DefaultKeyboardSensor {\n  static activators: Activators<KeyboardSensorOptions> = [\n    {\n      eventName: 'onKeyDown' as const,\n      handler: (event, options, context) => {\n        return (\n          shouldAllowDrag(event.nativeEvent.target as HTMLElement) &&\n          DefaultKeyboardSensor.activators.every((activator) =>\n            activator.handler(event, options, context),\n          )\n        );\n      },\n    },\n  ];\n}\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AAMA,IAAAC,WAAA,GAAAD,OAAA;AAEA,MAAME,WAAW,GAAG,IAAIC,GAAG,CAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACjD,MAAMC,WAAW,GAAG,IAAID,GAAG,CAAS,CAClC,QAAQ,EACR,GAAG,EACH,QAAQ,EACR,OAAO,EACP,QAAQ,EACR,UAAU,EACV,KAAK,EACL,OAAO,CACR,CAAC;AACF,MAAME,YAAY,GAAG,IAAIF,GAAG,CAAS,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;AAE3D,MAAMG,eAAe,GAAIC,IAAwB,IAAc;EAC7D,OAAOA,IAAI,EAAE;IACX,MAAMC,OAAO,GAAGD,IAAI,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC;IAC1C,MAAMC,IAAI,GAAGH,IAAI,CAACI,YAAY,CAAC,MAAM,CAAC;IAEtC,IAAIT,WAAW,CAACU,GAAG,CAACJ,OAAO,CAAC,EAAE;MAC5B,OAAO,IAAI;IACb;IAEA,IAAI,IAAAK,4BAAgB,EAACN,IAAI,CAAC,EAAE;MAC1B,OAAO,IAAI;IACb;IAEA,IAAIH,WAAW,CAACQ,GAAG,CAACJ,OAAO,CAAC,EAAE;MAC5B,OAAO,KAAK;IACd;IAEA,IAAIE,IAAI,IAAIL,YAAY,CAACO,GAAG,CAACF,IAAI,CAAC,EAAE;MAClC,OAAO,KAAK;IACd;IAEAH,IAAI,GAAGA,IAAI,CAACO,aAAa;EAC3B;EAEA,OAAO,KAAK;AACd,CAAC;AAEM,MAAMC,aAAa,SAASC,mBAAoB,CAAC;AASvDC,OAAA,CAAAF,aAAA,GAAAA,aAAA;AAAA,IAAAG,gBAAA,CAAAC,OAAA,EATYJ,aAAa,gBACJ,CAClB;EACEK,SAAS,EAAE,eAAwB;EACnCC,OAAO,EAAEA,CAAC;IAAEC,WAAW,EAAEC;EAAoB,CAAC,KAAK;IACjD,OAAOjB,eAAe,CAACiB,KAAK,CAACC,MAAqB,CAAC;EACrD;AACF,CAAC,CACF;AAGI,MAAMC,cAAc,SAASC,oBAAqB,CAAC;AAczDT,OAAA,CAAAQ,cAAA,GAAAA,cAAA;AAAA,IAAAP,gBAAA,CAAAC,OAAA,EAdYM,cAAc,gBAC8B,CACrD;EACEL,SAAS,EAAE,WAAoB;EAC/BC,OAAO,EAAEA,CAACE,KAAK,EAAEI,OAAO,EAAEC,OAAO,KAAK;IACpC,OACEtB,eAAe,CAACiB,KAAK,CAACD,WAAW,CAACE,MAAqB,CAAC,IACxDE,oBAAqB,CAACG,UAAU,CAACC,KAAK,CAAEC,SAAS,IAC/CA,SAAS,CAACV,OAAO,CAACE,KAAK,EAAEI,OAAO,EAAEC,OAAO,CAC3C,CAAC;EAEL;AACF,CAAC,CACF","ignoreList":[]}