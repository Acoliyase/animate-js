{"version":3,"names":["_react","_interopRequireWildcard","require","_sortable","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","dndContext","TableTestWrapper","props","children","sortableId","onDragStart","onDragEnd","onDragCancel","useEffect","activeId","activeIndex","overId","overIndex","exports","TableRowTestWrapper","_DraggableTableRow","index","id","rest","type","DraggableTableRow","draggableTableRowProps","data","useSortable","containerId","sortable","createElement","_extends2","onPointerDown","dnd","active","current","items","onPointerUp","over","setTimeout","style","transition","undefined","__self","__source","fileName","lineNumber","columnNumber"],"sources":["../../../../src/drag-and-drop/table/TestWrappers.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { DndContext, DndContextProps } from '@dnd-kit/core';\nimport { useSortable } from '@dnd-kit/sortable';\n\nexport interface TableRowTestWrapperProps\n  extends Omit<React.HTMLAttributes<HTMLTableRowElement>, 'id'> {\n  id: string | number;\n  index: number;\n  children: React.ReactElement<\n    React.HTMLAttributes<HTMLTableRowElement>,\n    React.JSXElementConstructor<React.HTMLAttributes<HTMLTableRowElement>>\n  >;\n}\n\ninterface TableTestWrapperProps {\n  sortableId: string;\n  children: React.ReactElement<DndContextProps, typeof DndContext>;\n}\n\nconst dndContext: Record<\n  string,\n  {\n    activeId: string | number | null;\n    activeIndex: number | null;\n    overId: string | number | null;\n    overIndex: number | null;\n    onDragStart?(event: {\n      active: { id: string | number; data: any };\n    }): unknown;\n    onDragEnd?(event: {\n      active: { id: string | number };\n      over?: { id: string | number };\n    }): unknown;\n    onDragCancel?(): unknown;\n  } | null\n> = {};\n\nexport const TableTestWrapper = (props: TableTestWrapperProps) => {\n  const { children, sortableId } = props;\n  const {\n    props: { onDragStart, onDragEnd, onDragCancel },\n  } = children;\n\n  useEffect(() => {\n    dndContext[sortableId] = {\n      onDragStart,\n      onDragEnd: onDragEnd as any,\n      onDragCancel: onDragCancel as any,\n      activeId: null,\n      activeIndex: null,\n      overId: null,\n      overIndex: null,\n    };\n\n    return () => {\n      dndContext[sortableId] = null;\n    };\n  }, [onDragStart, onDragEnd, onDragCancel, sortableId]);\n\n  return children;\n};\n\nexport const TableRowTestWrapper = function _DraggableTableRow(\n  props: TableRowTestWrapperProps,\n) {\n  const { children, index, id, ...rest } = props;\n  const { type: DraggableTableRow, props: draggableTableRowProps } = children;\n  const { data } = useSortable({ id });\n  const containerId = data.sortable.containerId;\n\n  return (\n    <DraggableTableRow\n      {...draggableTableRowProps}\n      onPointerDown={() => {\n        const dnd = dndContext[containerId];\n\n        if (dnd) {\n          dnd.activeId = id;\n          dnd.activeIndex = index;\n\n          dnd.onDragStart?.({\n            active: {\n              id: dnd.activeId,\n              data: {\n                current: {\n                  sortable: {\n                    containerId,\n                    items: [],\n                    index,\n                  },\n                },\n              },\n            },\n          });\n        }\n      }}\n      onPointerUp={() => {\n        const dnd = dndContext[containerId];\n\n        if (dnd) {\n          dnd.overId = id;\n          dnd.overIndex = index;\n\n          dnd.onDragEnd?.({\n            active: {\n              id: dnd.activeId!,\n            },\n            over: {\n              id: dnd.overId,\n            },\n          });\n        }\n\n        setTimeout(() => {\n          dndContext[containerId] = null;\n        });\n      }}\n      {...rest}\n      style={{\n        ...draggableTableRowProps.style,\n        ...rest.style,\n        transition: undefined,\n      }}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]}