{"version":3,"names":["_react","_interopRequireWildcard","require","_utilities","_TestWrappers","_DraggableTableRowStCss","_DragAndDropContext","_useSortableTableRow","_DraggableRowContext","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","DraggableTableRow","exports","React","memo","_DraggableTableRow","props","children","id","index","isDragOverlay","isDragAndDropDisabled","forwardedRef","type","Tr","key","trProps","onDragAndDropDisabledRowPointerDown","eventHandlers","onDropAnimationEnd","hideOverlayBottomShadow","useIsDropDisabled","useDragAndDropContext","dragHandleRef","useRef","useEffect","isDropDisabled","disabled","draggable","droppable","attributes","listeners","transform","transition","setNodeRef","isDragging","useSortableTableRow","draggableRowContextValue","useMemo","ref","useCallback","el","createElement","_extends2","onPointerDown","nativeEvent","__self","__source","fileName","lineNumber","columnNumber","style","CSS","Transform","toString","rowEvents","row","tr","className","st","classes","root","dragging","overlay","tabIndex","undefined","process","env","NODE_ENV","TableRowTestWrapper","DraggableRowContext","Provider","value"],"sources":["../../../../src/drag-and-drop/table/DraggableTableRow.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { CSS } from '@dnd-kit/utilities';\nimport { TableRowTestWrapper } from './TestWrappers';\nimport { classes, st } from './DraggableTableRow.st.css.js';\nimport { useDragAndDropContext } from './DragAndDropContext';\nimport { useSortableTableRow } from './useSortableTableRow';\nimport { DraggableRowContext } from './DraggableRowContext';\nimport { UseSortableArguments } from '@dnd-kit/sortable';\n\nexport interface DraggableTableRowProps {\n  id: number | string;\n  index: number;\n  isDragOverlay?: boolean;\n  isDragAndDropDisabled?: boolean;\n  children: React.ReactElement<\n    React.HTMLAttributes<HTMLTableRowElement>,\n    React.ComponentType<\n      React.HTMLAttributes<HTMLTableRowElement> &\n        React.RefAttributes<HTMLElement> & {\n          isDragOverlay?: boolean;\n        }\n    >\n  >;\n  forwardedRef?: (el: HTMLElement | null | undefined) => void;\n}\n\nexport const DraggableTableRow = React.memo(function _DraggableTableRow(\n  props: DraggableTableRowProps,\n) {\n  const {\n    children,\n    id,\n    index,\n    isDragOverlay,\n    isDragAndDropDisabled,\n    forwardedRef,\n  } = props;\n  const { type: Tr, key, props: trProps } = children;\n\n  const {\n    onDragAndDropDisabledRowPointerDown,\n    eventHandlers,\n    onDropAnimationEnd,\n    hideOverlayBottomShadow,\n    useIsDropDisabled,\n  } = useDragAndDropContext();\n\n  const dragHandleRef = useRef<HTMLElement | null>();\n\n  useEffect(() => {\n    if (onDropAnimationEnd) {\n      return onDropAnimationEnd(id, dragHandleRef);\n    }\n\n    return;\n  }, [id, onDropAnimationEnd]);\n\n  const isDropDisabled = useIsDropDisabled?.(id);\n\n  const disabled: UseSortableArguments['disabled'] = {\n    draggable: false,\n    droppable: isDropDisabled,\n  };\n\n  const {\n    attributes,\n    listeners,\n    transform,\n    transition,\n    setNodeRef,\n    isDragging,\n  } = useSortableTableRow({\n    id,\n    disabled,\n  });\n\n  const draggableRowContextValue = useMemo(\n    () => ({\n      isDragOverlay,\n    }),\n    [isDragOverlay],\n  );\n\n  const ref = useCallback(\n    (el: HTMLElement | null) => {\n      forwardedRef?.(el);\n      setNodeRef(el);\n    },\n    [forwardedRef, setNodeRef],\n  );\n\n  if (isDragAndDropDisabled) {\n    return (\n      <Tr\n        key={key}\n        {...trProps}\n        onPointerDown={(e) => {\n          trProps.onPointerDown?.(e);\n          onDragAndDropDisabledRowPointerDown?.(id, e.nativeEvent);\n        }}\n        ref={(el) => {\n          forwardedRef?.(el);\n        }}\n      />\n    );\n  }\n\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const rowEvents = eventHandlers?.row?.({ id });\n\n  let tr = (\n    <Tr\n      key={key}\n      {...trProps}\n      className={st(\n        classes.root,\n        {\n          dragging: isDragging,\n          overlay: isDragOverlay,\n          hideOverlayBottomShadow,\n        },\n        trProps.className,\n      )}\n      style={{\n        ...trProps.style,\n        ...style,\n      }}\n      {...attributes}\n      {...listeners}\n      ref={ref}\n      tabIndex={undefined}\n      {...rowEvents}\n      onPointerDown={(e) => {\n        trProps?.onPointerDown?.(e);\n        listeners?.onPointerDown?.(e);\n        rowEvents?.onPointerDown?.(e);\n      }}\n    />\n  );\n\n  if (process.env.NODE_ENV === 'test') {\n    tr = (\n      <TableRowTestWrapper\n        {...eventHandlers?.row?.({ id, disabled })}\n        id={id}\n        index={index}\n      >\n        {tr}\n      </TableRowTestWrapper>\n    );\n  }\n\n  return (\n    <DraggableRowContext.Provider value={draggableRowContextValue}>\n      {tr}\n    </DraggableRowContext.Provider>\n  );\n});\n"],"mappings":"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","ignoreList":[]}