{"version":3,"names":["React","useEffect","useSortable","dndContext","TableTestWrapper","props","children","sortableId","onDragStart","onDragEnd","onDragCancel","activeId","activeIndex","overId","overIndex","TableRowTestWrapper","_DraggableTableRow","index","id","rest","type","DraggableTableRow","draggableTableRowProps","data","containerId","sortable","createElement","_extends","onPointerDown","dnd","active","current","items","onPointerUp","over","setTimeout","style","transition","undefined"],"sources":["../../../../src/drag-and-drop/table/TestWrappers.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { DndContext, DndContextProps } from '@dnd-kit/core';\nimport { useSortable } from '@dnd-kit/sortable';\n\nexport interface TableRowTestWrapperProps\n  extends Omit<React.HTMLAttributes<HTMLTableRowElement>, 'id'> {\n  id: string | number;\n  index: number;\n  children: React.ReactElement<\n    React.HTMLAttributes<HTMLTableRowElement>,\n    React.JSXElementConstructor<React.HTMLAttributes<HTMLTableRowElement>>\n  >;\n}\n\ninterface TableTestWrapperProps {\n  sortableId: string;\n  children: React.ReactElement<DndContextProps, typeof DndContext>;\n}\n\nconst dndContext: Record<\n  string,\n  {\n    activeId: string | number | null;\n    activeIndex: number | null;\n    overId: string | number | null;\n    overIndex: number | null;\n    onDragStart?(event: {\n      active: { id: string | number; data: any };\n    }): unknown;\n    onDragEnd?(event: {\n      active: { id: string | number };\n      over?: { id: string | number };\n    }): unknown;\n    onDragCancel?(): unknown;\n  } | null\n> = {};\n\nexport const TableTestWrapper = (props: TableTestWrapperProps) => {\n  const { children, sortableId } = props;\n  const {\n    props: { onDragStart, onDragEnd, onDragCancel },\n  } = children;\n\n  useEffect(() => {\n    dndContext[sortableId] = {\n      onDragStart,\n      onDragEnd: onDragEnd as any,\n      onDragCancel: onDragCancel as any,\n      activeId: null,\n      activeIndex: null,\n      overId: null,\n      overIndex: null,\n    };\n\n    return () => {\n      dndContext[sortableId] = null;\n    };\n  }, [onDragStart, onDragEnd, onDragCancel, sortableId]);\n\n  return children;\n};\n\nexport const TableRowTestWrapper = function _DraggableTableRow(\n  props: TableRowTestWrapperProps,\n) {\n  const { children, index, id, ...rest } = props;\n  const { type: DraggableTableRow, props: draggableTableRowProps } = children;\n  const { data } = useSortable({ id });\n  const containerId = data.sortable.containerId;\n\n  return (\n    <DraggableTableRow\n      {...draggableTableRowProps}\n      onPointerDown={() => {\n        const dnd = dndContext[containerId];\n\n        if (dnd) {\n          dnd.activeId = id;\n          dnd.activeIndex = index;\n\n          dnd.onDragStart?.({\n            active: {\n              id: dnd.activeId,\n              data: {\n                current: {\n                  sortable: {\n                    containerId,\n                    items: [],\n                    index,\n                  },\n                },\n              },\n            },\n          });\n        }\n      }}\n      onPointerUp={() => {\n        const dnd = dndContext[containerId];\n\n        if (dnd) {\n          dnd.overId = id;\n          dnd.overIndex = index;\n\n          dnd.onDragEnd?.({\n            active: {\n              id: dnd.activeId!,\n            },\n            over: {\n              id: dnd.overId,\n            },\n          });\n        }\n\n        setTimeout(() => {\n          dndContext[containerId] = null;\n        });\n      }}\n      {...rest}\n      style={{\n        ...draggableTableRowProps.style,\n        ...rest.style,\n        transition: undefined,\n      }}\n    />\n  );\n};\n"],"mappings":"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","ignoreList":[]}