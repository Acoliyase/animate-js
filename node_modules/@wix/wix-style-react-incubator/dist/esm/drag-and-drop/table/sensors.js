import _defineProperty from "@babel/runtime/helpers/defineProperty";
import { PointerSensor as DefaultPointerSensor, KeyboardSensor as DefaultKeyboardSensor } from '@dnd-kit/core';
import { isDragHandleNode } from './DragHandle';
const allowedTags = new Set(['tr', 'td']);
const blockedTags = new Set(['button', 'a', 'select', 'input', 'option', 'textarea', 'img', 'label']);
const blockedRoles = new Set(['button', 'listbox']);
const shouldAllowDrag = node => {
  while (node) {
    const tagName = node.tagName.toLowerCase();
    const role = node.getAttribute('role');
    if (allowedTags.has(tagName)) {
      return true;
    }
    if (isDragHandleNode(node)) {
      return true;
    }
    if (blockedTags.has(tagName)) {
      return false;
    }
    if (role && blockedRoles.has(role)) {
      return false;
    }
    node = node.parentElement;
  }
  return false;
};
export class PointerSensor extends DefaultPointerSensor {}
_defineProperty(PointerSensor, "activators", [{
  eventName: 'onPointerDown',
  handler: _ref => {
    let {
      nativeEvent: event
    } = _ref;
    return shouldAllowDrag(event.target);
  }
}]);
export class KeyboardSensor extends DefaultKeyboardSensor {}
_defineProperty(KeyboardSensor, "activators", [{
  eventName: 'onKeyDown',
  handler: (event, options, context) => {
    return shouldAllowDrag(event.nativeEvent.target) && DefaultKeyboardSensor.activators.every(activator => activator.handler(event, options, context));
  }
}]);
//# sourceMappingURL=sensors.js.map