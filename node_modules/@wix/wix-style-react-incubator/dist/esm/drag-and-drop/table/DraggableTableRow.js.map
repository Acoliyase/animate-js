{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","CSS","TableRowTestWrapper","classes","st","useDragAndDropContext","useSortableTableRow","DraggableRowContext","DraggableTableRow","memo","_DraggableTableRow","props","children","id","index","isDragOverlay","isDragAndDropDisabled","forwardedRef","type","Tr","key","trProps","onDragAndDropDisabledRowPointerDown","eventHandlers","onDropAnimationEnd","hideOverlayBottomShadow","useIsDropDisabled","dragHandleRef","isDropDisabled","disabled","draggable","droppable","attributes","listeners","transform","transition","setNodeRef","isDragging","draggableRowContextValue","ref","el","createElement","_extends","onPointerDown","e","nativeEvent","style","Transform","toString","rowEvents","row","tr","className","root","dragging","overlay","tabIndex","undefined","process","env","NODE_ENV","Provider","value"],"sources":["../../../../src/drag-and-drop/table/DraggableTableRow.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { CSS } from '@dnd-kit/utilities';\nimport { TableRowTestWrapper } from './TestWrappers';\nimport { classes, st } from './DraggableTableRow.st.css.js';\nimport { useDragAndDropContext } from './DragAndDropContext';\nimport { useSortableTableRow } from './useSortableTableRow';\nimport { DraggableRowContext } from './DraggableRowContext';\nimport { UseSortableArguments } from '@dnd-kit/sortable';\n\nexport interface DraggableTableRowProps {\n  id: number | string;\n  index: number;\n  isDragOverlay?: boolean;\n  isDragAndDropDisabled?: boolean;\n  children: React.ReactElement<\n    React.HTMLAttributes<HTMLTableRowElement>,\n    React.ComponentType<\n      React.HTMLAttributes<HTMLTableRowElement> &\n        React.RefAttributes<HTMLElement> & {\n          isDragOverlay?: boolean;\n        }\n    >\n  >;\n  forwardedRef?: (el: HTMLElement | null | undefined) => void;\n}\n\nexport const DraggableTableRow = React.memo(function _DraggableTableRow(\n  props: DraggableTableRowProps,\n) {\n  const {\n    children,\n    id,\n    index,\n    isDragOverlay,\n    isDragAndDropDisabled,\n    forwardedRef,\n  } = props;\n  const { type: Tr, key, props: trProps } = children;\n\n  const {\n    onDragAndDropDisabledRowPointerDown,\n    eventHandlers,\n    onDropAnimationEnd,\n    hideOverlayBottomShadow,\n    useIsDropDisabled,\n  } = useDragAndDropContext();\n\n  const dragHandleRef = useRef<HTMLElement | null>();\n\n  useEffect(() => {\n    if (onDropAnimationEnd) {\n      return onDropAnimationEnd(id, dragHandleRef);\n    }\n\n    return;\n  }, [id, onDropAnimationEnd]);\n\n  const isDropDisabled = useIsDropDisabled?.(id);\n\n  const disabled: UseSortableArguments['disabled'] = {\n    draggable: false,\n    droppable: isDropDisabled,\n  };\n\n  const {\n    attributes,\n    listeners,\n    transform,\n    transition,\n    setNodeRef,\n    isDragging,\n  } = useSortableTableRow({\n    id,\n    disabled,\n  });\n\n  const draggableRowContextValue = useMemo(\n    () => ({\n      isDragOverlay,\n    }),\n    [isDragOverlay],\n  );\n\n  const ref = useCallback(\n    (el: HTMLElement | null) => {\n      forwardedRef?.(el);\n      setNodeRef(el);\n    },\n    [forwardedRef, setNodeRef],\n  );\n\n  if (isDragAndDropDisabled) {\n    return (\n      <Tr\n        key={key}\n        {...trProps}\n        onPointerDown={(e) => {\n          trProps.onPointerDown?.(e);\n          onDragAndDropDisabledRowPointerDown?.(id, e.nativeEvent);\n        }}\n        ref={(el) => {\n          forwardedRef?.(el);\n        }}\n      />\n    );\n  }\n\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  };\n\n  const rowEvents = eventHandlers?.row?.({ id });\n\n  let tr = (\n    <Tr\n      key={key}\n      {...trProps}\n      className={st(\n        classes.root,\n        {\n          dragging: isDragging,\n          overlay: isDragOverlay,\n          hideOverlayBottomShadow,\n        },\n        trProps.className,\n      )}\n      style={{\n        ...trProps.style,\n        ...style,\n      }}\n      {...attributes}\n      {...listeners}\n      ref={ref}\n      tabIndex={undefined}\n      {...rowEvents}\n      onPointerDown={(e) => {\n        trProps?.onPointerDown?.(e);\n        listeners?.onPointerDown?.(e);\n        rowEvents?.onPointerDown?.(e);\n      }}\n    />\n  );\n\n  if (process.env.NODE_ENV === 'test') {\n    tr = (\n      <TableRowTestWrapper\n        {...eventHandlers?.row?.({ id, disabled })}\n        id={id}\n        index={index}\n      >\n        {tr}\n      </TableRowTestWrapper>\n    );\n  }\n\n  return (\n    <DraggableRowContext.Provider value={draggableRowContextValue}>\n      {tr}\n    </DraggableRowContext.Provider>\n  );\n});\n"],"mappings":"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","ignoreList":[]}