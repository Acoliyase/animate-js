{"version":3,"names":["_core","require","_mobx","_WixPatternsContainer","_history","_PartialWindowMock","_debounce","_interopRequireDefault","_throttle","_partialLodashMock","_jest","configure","isolateGlobalState","computedRequiresReaction","process","env","NODE_ENV","disableErrorBoundaries","DISABLE_ERROR_BOUNDARIES","defaultQueryCache","QueryCache","patchesCache","Map","buildWixPatternsContainer","wixPatternsEssentials","containerOverrides","initialProps","localCache","contextType","errorMonitor","httpClient","createEssentials","createComponentSettings","useTranslation","Trans","useExperiments","environment","environmentBI","showToast","experiments","errorHandler","onNavigation","getHostContainer","onSidePanelOpen","closeSidePanel","history","user","queryCache","onlineManager","defaultOnlineManager","usePageLocation","navigateTo","onBeforeUnload","biLogger","WixPatternsContainer","focusManager","createMemoryHistory","createBrowserHistory","window","PartialWindowMock","matchMedia","args","location","download","uri","saveAs","link","document","createElement","href","body","appendChild","click","removeChild","close","lodash","isTestEnvironment","isJestExists","jest","isMockFunction","setTimeout","partialLodashMock","debounce","throttle"],"sources":["../../../src/state/buildWixPatternsContainer.ts"],"sourcesContent":["import {\n  focusManager,\n  onlineManager as defaultOnlineManager,\n  QueryCache,\n} from 'react-query/core';\nimport { configure } from 'mobx';\nimport {\n  ContextType,\n  WixPatternsEssentials,\n  WixPatternsInitialProps,\n} from '../model';\nimport {\n  WixPatternsContainer,\n  WixPatternsContainerParams,\n} from './WixPatternsContainer';\nimport { createBrowserHistory } from 'history';\nimport { PartialWindowMock } from '../mocks/PartialWindowMock';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport { partialLodashMock } from '../mocks/partialLodashMock';\nimport { isJestExists, isTestEnvironment } from '../test-utils/jest';\n\nconfigure({\n  isolateGlobalState: true,\n  computedRequiresReaction: process.env.NODE_ENV === 'development',\n  disableErrorBoundaries:\n    process.env.NODE_ENV !== 'production' &&\n    typeof process !== 'undefined' &&\n    process.env.DISABLE_ERROR_BOUNDARIES === 'true',\n});\n\nconst defaultQueryCache = new QueryCache();\nconst patchesCache: WixPatternsContainerParams['patchesCache'] = new Map();\n\nexport function buildWixPatternsContainer(\n  wixPatternsEssentials: WixPatternsEssentials,\n  {\n    containerOverrides,\n    initialProps,\n    localCache,\n    contextType,\n  }: {\n    containerOverrides?: Partial<WixPatternsContainerParams>;\n    initialProps?: WixPatternsInitialProps;\n    localCache?: boolean;\n    contextType?: ContextType;\n  } = {},\n) {\n  const {\n    errorMonitor,\n    httpClient,\n    createEssentials,\n    createComponentSettings,\n    useTranslation,\n    Trans,\n    useExperiments,\n    environment,\n    environmentBI,\n    showToast,\n    experiments,\n    errorHandler,\n    onNavigation,\n    getHostContainer,\n    onSidePanelOpen,\n    closeSidePanel,\n    history,\n    user,\n    queryCache = defaultQueryCache,\n    onlineManager = defaultOnlineManager,\n    usePageLocation,\n    navigateTo,\n    onBeforeUnload,\n    biLogger,\n  } = wixPatternsEssentials;\n\n  return new WixPatternsContainer({\n    initialProps,\n    errorMonitor,\n    httpClient,\n    onlineManager,\n    focusManager,\n    createEssentials,\n    contextType,\n    createComponentSettings,\n    history:\n      process.env.NODE_ENV === 'test'\n        ? require('history').createMemoryHistory()\n        : history ?? createBrowserHistory(),\n    experiments,\n    biLogger,\n    useTranslation,\n    Trans,\n    useExperiments,\n    environment,\n    environmentBI,\n    errorHandler,\n    user,\n    showToast,\n    usePageLocation,\n    navigateTo,\n    onNavigation,\n    onBeforeUnload,\n    getHostContainer,\n    onSidePanelOpen,\n    closeSidePanel,\n    queryCache:\n      process.env.NODE_ENV === 'test' || localCache\n        ? new QueryCache()\n        : queryCache,\n    patchesCache: process.env.NODE_ENV === 'test' ? new Map() : patchesCache,\n    window:\n      process.env.NODE_ENV === 'test'\n        ? new PartialWindowMock()\n        : {\n            matchMedia: (...args) => window.matchMedia(...args),\n            location: window.location,\n            download: (uri, saveAs) => {\n              const link = document.createElement('a');\n              link.href = uri;\n              if (saveAs) {\n                link.download = saveAs;\n              }\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);\n            },\n            close: window.close,\n          },\n    lodash:\n      isTestEnvironment() && isJestExists() && jest.isMockFunction(setTimeout)\n        ? partialLodashMock()\n        : { debounce, throttle },\n    ...containerOverrides,\n  });\n}\n"],"mappings":"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","ignoreList":[]}