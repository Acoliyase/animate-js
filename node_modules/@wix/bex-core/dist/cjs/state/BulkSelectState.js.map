{"version":3,"names":["_SelectState","require","_mobx","_snapshot","_util","_events","BulkSelectState","allSelected","select","defaultStatus","isChecked","hasUnchecked","uncheckedValues","length","constructor","params","_defineProperty2","default","EventEmitter","events","emit","action","isEmptyEnabledItems","deselectAll","selectAll","collection","scrollToTop","disableAutoSelectAllCount","useNewSelectAllLogic","SelectState","keyGetter","item","key","totalSnapshot","Snapshot","expression","effect","result","total","makeObservable","computed","observable","ref","selectOne","selectOneItem","deselectOne","deselectOneItem","resetToDefaults","bound","selectedIds","uncheckedIds","selectedValues","selectedKeyedItems","uncheckedInCurrentCollection","selectedCountOrTotal","checkedSet","indeterminateSet","getCollectionItem","_keyedItemsMap","get","selectedKeys","toArray","filter","status","map","value","selectedCount","allSelectedItemsFetched","items","Set","isIndeterminate","final","keyedItems","finalizeMany","runInAction","start","startAll","set","keyedItem","delete","clear","init","disposers","addEventListener","emitter","forceUpdate","reaction","syncValues","e","forEach","disposer","id","isEmpty","itemKey","has","toggle","exports"],"sources":["../../../src/state/BulkSelectState.ts"],"sourcesContent":["import { SelectState } from './SelectState';\nimport {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  reaction,\n  runInAction,\n} from 'mobx';\nimport { CollectionState } from './CollectionState';\nimport { Snapshot } from './snapshot';\nimport { addEventListener, TypedEmitter } from '../util';\nimport { EventEmitter } from 'events';\nimport { KeyedItem } from '../model';\n\nexport interface BulkSelectKeyedItem<T> {\n  item: T;\n  key: string;\n}\n\nexport interface BulkSelectStateParams<T> {\n  collection: CollectionState<T, any>;\n  disableAutoSelectAllCount?: boolean;\n  maxSelection?: number;\n  scrollToTop: () => unknown;\n  useNewSelectAllLogic?: boolean;\n}\n\nexport class BulkSelectState<T> {\n  readonly select: SelectState<BulkSelectKeyedItem<T>>;\n  readonly events = new EventEmitter() as TypedEmitter<{\n    openModal: () => unknown;\n    closeModal: () => unknown;\n  }>;\n  readonly collection;\n  readonly scrollToTop;\n  useNewSelectAllLogic;\n  disableAutoSelectAllCount?: boolean;\n  totalSnapshot;\n\n  get allSelected() {\n    return this.select.defaultStatus.isChecked;\n  }\n\n  get hasUnchecked() {\n    return !!this.uncheckedValues.length;\n  }\n\n  constructor(params: Readonly<BulkSelectStateParams<T>>) {\n    this.collection = params.collection;\n    this.scrollToTop = params.scrollToTop;\n    this.disableAutoSelectAllCount = params.disableAutoSelectAllCount;\n    this.useNewSelectAllLogic = params.useNewSelectAllLogic;\n\n    this.select = new SelectState<BulkSelectKeyedItem<T>>({\n      keyGetter: (item) => item.key,\n    });\n\n    this.totalSnapshot = new Snapshot({\n      expression: () => this.allSelected,\n      effect: () => this.collection.result.total,\n    });\n\n    makeObservable(this, {\n      allSelected: computed,\n      disableAutoSelectAllCount: observable.ref,\n      selectAll: action,\n      selectOne: action,\n      selectOneItem: action,\n      deselectOne: action,\n      deselectOneItem: action,\n      resetToDefaults: action.bound,\n      hasUnchecked: computed,\n      selectedIds: computed,\n      uncheckedIds: computed,\n      selectedValues: computed,\n      selectedKeyedItems: computed,\n      uncheckedValues: computed,\n      uncheckedInCurrentCollection: computed,\n      selectedCountOrTotal: computed,\n      checkedSet: computed,\n      indeterminateSet: computed,\n    });\n  }\n\n  getCollectionItem(key: string) {\n    return this.collection.result._keyedItemsMap.get(key);\n  }\n\n  get selectedIds() {\n    return this.select.selectedKeys;\n  }\n\n  get uncheckedIds() {\n    return this.select.toArray\n      .filter(({ status }) => !status.isChecked)\n      .map(({ value }) => value.key);\n  }\n\n  get selectedCount(): number {\n    return this.select.selectedCount;\n  }\n\n  get allSelectedItemsFetched() {\n    return this.selectedCountOrTotal <= this.collection.result.items.length;\n  }\n\n  get selectedValues() {\n    return this.select.selectedValues.map(({ item }) => item);\n  }\n\n  get checkedSet() {\n    return new Set(\n      this.select.toArray\n        .filter(({ status }) => status.isChecked)\n        .map(({ value }) => value.key),\n    );\n  }\n\n  get indeterminateSet() {\n    return new Set(\n      this.select.toArray\n        .filter(({ status }) => status.isIndeterminate)\n        .map(({ value }) => value.key),\n    );\n  }\n\n  get uncheckedValues() {\n    return this.select.toArray\n      .filter(({ status }) => !status.isChecked)\n      .map(({ value }) => value.item);\n  }\n\n  isChecked(key: string) {\n    const { select } = this;\n    return select.isChecked(key);\n  }\n\n  selectAll() {\n    const { select, collection } = this;\n    select.defaultStatus = select.defaultStatus.final();\n    const {\n      result: { keyedItems },\n    } = collection;\n    select.finalizeMany(keyedItems);\n  }\n\n  deselectAll() {\n    const { select } = this;\n    runInAction(() => {\n      select.defaultStatus = select.defaultStatus.start();\n    });\n    select.startAll();\n  }\n\n  selectOneItem(item: BulkSelectKeyedItem<T>) {\n    const { select, useNewSelectAllLogic } = this;\n\n    select.set(item);\n\n    if (!useNewSelectAllLogic) {\n      runInAction(() => {\n        select.defaultStatus = select.defaultStatus.start();\n      });\n    }\n  }\n\n  selectOne(key: string) {\n    const { collection } = this;\n    const { result } = collection;\n    const keyedItem = result.get(key);\n    if (keyedItem) {\n      this.selectOneItem(keyedItem);\n    }\n  }\n\n  deselectOneItem(keyedItem: BulkSelectKeyedItem<T>) {\n    const { select, useNewSelectAllLogic } = this;\n\n    select.delete(keyedItem);\n\n    if (!useNewSelectAllLogic) {\n      runInAction(() => {\n        select.defaultStatus = select.defaultStatus.start();\n      });\n    }\n  }\n\n  deselectOne(key: string) {\n    const { collection } = this;\n    const { result } = collection;\n    const keyedItem = result.get(key);\n\n    if (keyedItem == null) {\n      return;\n    }\n\n    this.deselectOneItem(keyedItem);\n  }\n\n  openModal = () => {\n    this.events.emit('openModal');\n  };\n\n  closeModal = () => {\n    this.events.emit('closeModal');\n  };\n\n  resetToDefaults() {\n    const { select } = this;\n    runInAction(() => {\n      select.defaultStatus = select.defaultStatus.start();\n    });\n    select.clear();\n  }\n\n  init() {\n    const disposers = [\n      this.totalSnapshot.init(),\n      addEventListener(this.collection.emitter, 'ready', () => {\n        this.totalSnapshot.forceUpdate();\n      }),\n      reaction(\n        () => this.collection.result.keyedItems,\n        (keyedItems) => {\n          const {\n            select,\n            allSelected,\n            disableAutoSelectAllCount,\n            collection: {\n              result: { _keyedItemsMap },\n            },\n          } = this;\n          if (allSelected && !disableAutoSelectAllCount) {\n            select.syncValues(keyedItems);\n          } else {\n            select.syncValues(\n              select.selectedKeys\n                .map(\n                  (key) =>\n                    _keyedItemsMap.get(key) as\n                      | BulkSelectKeyedItem<T>\n                      | null\n                      | undefined,\n                )\n                .filter((e): e is BulkSelectKeyedItem<T> => e != null),\n            );\n          }\n        },\n      ),\n    ];\n\n    return () => {\n      disposers.forEach((disposer) => disposer());\n    };\n  }\n\n  get selectedKeyedItems() {\n    return this.selectedIds\n      .map((id) => this.collection.result.get(id))\n      .filter((item): item is KeyedItem<T> => !!item);\n  }\n\n  get isEmpty() {\n    return this.select.isEmpty;\n  }\n\n  get uncheckedInCurrentCollection() {\n    const { uncheckedValues, collection } = this;\n    const { itemKey } = collection;\n\n    return uncheckedValues.filter((item) =>\n      collection.result.has(itemKey(item)),\n    );\n  }\n\n  get selectedCountOrTotal() {\n    const {\n      allSelected,\n      disableAutoSelectAllCount,\n      selectedIds,\n      useNewSelectAllLogic,\n      uncheckedInCurrentCollection,\n      collection: {\n        result: { total },\n      },\n    } = this;\n\n    if (!allSelected || disableAutoSelectAllCount) {\n      return selectedIds.length;\n    }\n\n    if (useNewSelectAllLogic) {\n      return total - uncheckedInCurrentCollection.length;\n    }\n\n    return total;\n  }\n\n  toggleIsSelectAll = action(() => {\n    const {\n      allSelected,\n      select: { isEmptyEnabledItems },\n    } = this;\n    if (allSelected || !isEmptyEnabledItems) {\n      this.deselectAll();\n    } else {\n      this.selectAll();\n    }\n  });\n\n  toggle(keyedItem: BulkSelectKeyedItem<T>) {\n    this.select.toggle(keyedItem);\n  }\n}\n"],"mappings":"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","ignoreList":[]}