{"version":3,"names":["DateRangePreset","exports","NONE","SEVEN_DAYS","FOURTEEN_DAYS","MONTH","TODAY","TOMORROW","NEXT_THREE_DAYS","NEXT_SEVEN_DAYS","NEXT_THIRTY_DAYS","CUSTOM","DefaultDateRangePreset","getDateRangeLabel","item","dateFormatters","from","to","filter","Boolean","map","date","mediumTime","format","join","renderPresetToolbarTag","container","translate","t","preset","presetToDaysAmount","children","MAP_DATE_PRESET_TO_KEY","shouldRenderPresetTag","Object","values","includes","days","months","getDatesFromPreset","today","Date","presetDiff","undefined","fromDate","getTime","years","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","setHours"],"sources":["../../../../src/state/RangeFilterState/dateRangeUtils.ts"],"sourcesContent":["import { FilterItem } from '../../model';\nimport { RangeItem } from './RangeFilterState';\nimport { Translate, TranslationsKeys } from '../../services';\n\nexport const DateRangePreset: Record<DateRangePresetOptions, string> = {\n  NONE: 'NONE',\n  SEVEN_DAYS: 'SEVEN_DAYS',\n  FOURTEEN_DAYS: 'FOURTEEN_DAYS',\n  MONTH: 'MONTH',\n  TODAY: 'TODAY',\n  TOMORROW: 'TOMORROW',\n  NEXT_THREE_DAYS: 'NEXT_THREE_DAYS',\n  NEXT_SEVEN_DAYS: 'NEXT_SEVEN_DAYS',\n  NEXT_THIRTY_DAYS: 'NEXT_THIRTY_DAYS',\n  CUSTOM: 'CUSTOM',\n};\n\nexport const DefaultDateRangePreset: Record<\n  'NONE' | 'SEVEN_DAYS' | 'FOURTEEN_DAYS' | 'MONTH' | 'CUSTOM',\n  string\n> = {\n  NONE: 'NONE',\n  SEVEN_DAYS: 'SEVEN_DAYS',\n  FOURTEEN_DAYS: 'FOURTEEN_DAYS',\n  MONTH: 'MONTH',\n  CUSTOM: 'CUSTOM',\n};\n\nconst getDateRangeLabel = (\n  item: RangeItem<Date>,\n  {\n    dateFormatters,\n  }: {\n    dateFormatters: {\n      medium: Intl.DateTimeFormat;\n      mediumTime: Intl.DateTimeFormat;\n    };\n  },\n) => {\n  return [item.from, item.to]\n    .filter(Boolean as unknown as (d: Date | null) => d is Date)\n    .map((date) => dateFormatters.mediumTime.format(date))\n    .join(' - ');\n};\n\nexport const renderPresetToolbarTag =\n  (container: {\n    translate: Translate;\n    dateFormatters: {\n      medium: Intl.DateTimeFormat;\n      mediumTime: Intl.DateTimeFormat;\n    };\n  }) =>\n  <V>(filter: FilterItem<V>) => {\n    const { translate: t, dateFormatters } = container;\n    const { preset } = filter as FilterItem<RangeItem<Date>>;\n    if (!preset || !presetToDaysAmount[preset]) {\n      return {\n        children: getDateRangeLabel(filter as RangeItem<Date>, {\n          dateFormatters,\n        }),\n      };\n    }\n    return { children: t(MAP_DATE_PRESET_TO_KEY[preset]) };\n  };\n\nexport const shouldRenderPresetTag = (preset?: string) =>\n  preset &&\n  Object.values(DateRangePreset).includes(preset) &&\n  preset !== DateRangePreset.NONE &&\n  preset !== DateRangePreset.CUSTOM;\n\nexport const presetToDaysAmount: {\n  [key: string]: {\n    months?: number;\n    days?: number;\n    years?: number;\n  };\n} = {\n  [DateRangePreset.SEVEN_DAYS]: {\n    days: -7,\n  },\n  [DateRangePreset.FOURTEEN_DAYS]: {\n    days: -14,\n  },\n  [DateRangePreset.MONTH]: {\n    months: -1,\n  },\n  [DateRangePreset.TODAY]: {\n    days: 0,\n  },\n  [DateRangePreset.TOMORROW]: {\n    days: 1,\n  },\n  [DateRangePreset.NEXT_THREE_DAYS]: {\n    days: 3,\n  },\n  [DateRangePreset.NEXT_SEVEN_DAYS]: {\n    days: 7,\n  },\n  [DateRangePreset.NEXT_THIRTY_DAYS]: {\n    days: 30,\n  },\n};\n\nexport const getDatesFromPreset = (preset?: string): RangeItem<Date> => {\n  const today = new Date();\n  const presetDiff = preset ? presetToDaysAmount[preset] : undefined;\n  if (!presetDiff) {\n    return { from: null, to: null };\n  }\n  const fromDate = new Date(today.getTime());\n  const { days, months, years } = presetDiff;\n  if (days) {\n    fromDate.setDate(today.getDate() + days);\n\n    // tomorrow preset is the ony preset which does not include today\n    if (preset === DateRangePreset.TOMORROW) {\n      today.setDate(today.getDate() + days);\n    }\n  }\n  if (months) {\n    fromDate.setMonth(today.getMonth() + months);\n  }\n  if (years) {\n    fromDate.setFullYear(today.getFullYear() + years);\n  }\n\n  if (fromDate.getTime() > today.getTime()) {\n    today.setHours(0, 0, 0, 0);\n    fromDate.setHours(23, 59, 59, 999);\n    return { from: today, to: fromDate, preset };\n  }\n\n  fromDate.setHours(0, 0, 0, 0);\n  today.setHours(23, 59, 59, 999);\n  return { from: fromDate, to: today, preset };\n};\n\nexport const MAP_DATE_PRESET_TO_KEY: { [key: string]: TranslationsKeys } = {\n  [DateRangePreset.NONE]: 'cairo.filtersPanel.date.none',\n  [DateRangePreset.SEVEN_DAYS]: 'cairo.filtersPanel.date.7days',\n  [DateRangePreset.FOURTEEN_DAYS]: 'cairo.filtersPanel.date.14days',\n  [DateRangePreset.MONTH]: 'cairo.filtersPanel.date.lastMonth',\n  [DateRangePreset.CUSTOM]: 'cairo.filtersPanel.date.custom',\n  [DateRangePreset.TODAY]: 'cairo.filtersPanel.date.today',\n  [DateRangePreset.TOMORROW]: 'cairo.filtersPanel.date.tomorrow',\n  [DateRangePreset.NEXT_THREE_DAYS]: 'cairo.filtersPanel.date.next3Days',\n  [DateRangePreset.NEXT_SEVEN_DAYS]: 'cairo.filtersPanel.date.next7Days',\n  [DateRangePreset.NEXT_THIRTY_DAYS]: 'cairo.filtersPanel.date.next30Days',\n};\n\nexport type DateRangeFilterMode = 'ONLY_PREDEFINED' | 'ONLY_CUSTOM' | 'COMBINE';\nexport type DateRangePredefinedPresetOptions =\n  | 'SEVEN_DAYS'\n  | 'FOURTEEN_DAYS'\n  | 'MONTH'\n  | 'TODAY'\n  | 'TOMORROW'\n  | 'NEXT_THREE_DAYS'\n  | 'NEXT_SEVEN_DAYS'\n  | 'NEXT_THIRTY_DAYS';\nexport type DateRangePresetOptions =\n  | DateRangePredefinedPresetOptions\n  | 'NONE'\n  | 'CUSTOM';\nexport type DateRangeOptions = DateRangePredefinedPresetOptions[];\n"],"mappings":"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","ignoreList":[]}