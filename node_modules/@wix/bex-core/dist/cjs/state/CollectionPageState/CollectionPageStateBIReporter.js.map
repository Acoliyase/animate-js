{"version":3,"names":["_bi","require","_util","CollectionPageStateBIReporter","constructor","params","_defineProperty2","default","collectionPageState","reportBI","init","startTime","performance","now","appLoaded","reportOnLoadStart","withoutDefaults","loadStart","_commonDynamicBiParams","reportOnLoadEnd","Math","round","endTime","loadEnd","loadingTime","url","window","location","href","route","pathname","routerUsage","withinRouter","exports"],"sources":["../../../../src/state/CollectionPageState/CollectionPageStateBIReporter.ts"],"sourcesContent":["import { loadEnd, loadStart } from '../../exports/bi';\nimport { ReportBI } from '../../services';\nimport { withoutDefaults } from '../../util';\nimport { CollectionPageState } from './CollectionPageState';\n\nexport interface CollectionPageStateBIReporterParams {\n  reportBI: ReportBI;\n  collectionPageState: CollectionPageState;\n}\n\nexport class CollectionPageStateBIReporter {\n  readonly collectionPageState: CollectionPageState;\n  readonly reportBI: ReportBI;\n  appLoaded?: () => void;\n\n  constructor(params: CollectionPageStateBIReporterParams) {\n    this.collectionPageState = params.collectionPageState;\n    this.reportBI = params.reportBI;\n  }\n\n  init() {\n    const startTime = performance.now();\n    this.appLoaded = this.reportOnLoadStart(startTime);\n  }\n\n  reportOnLoadStart(startTime: number) {\n    this.reportBI(\n      withoutDefaults(loadStart)({\n        ...this._commonDynamicBiParams(),\n      }),\n    );\n    return () => {\n      this.reportOnLoadEnd(Math.round(performance.now() - startTime));\n    };\n  }\n\n  reportOnLoadEnd(endTime: number) {\n    this.reportBI(\n      withoutDefaults(loadEnd)({\n        ...this._commonDynamicBiParams(),\n        loadingTime: endTime,\n      }),\n    );\n  }\n\n  _commonDynamicBiParams() {\n    return {\n      url: window.location.href,\n      route: window.location.pathname,\n      routerUsage: this.collectionPageState.withinRouter,\n    };\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,GAAA,GAAAC,OAAA;AAEA,IAAAC,KAAA,GAAAD,OAAA;AAQO,MAAME,6BAA6B,CAAC;EAKzCC,WAAWA,CAACC,MAA2C,EAAE;IAAA,IAAAC,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IACvD,IAAI,CAACC,mBAAmB,GAAGH,MAAM,CAACG,mBAAmB;IACrD,IAAI,CAACC,QAAQ,GAAGJ,MAAM,CAACI,QAAQ;EACjC;EAEAC,IAAIA,CAAA,EAAG;IACL,MAAMC,SAAS,GAAGC,WAAW,CAACC,GAAG,CAAC,CAAC;IACnC,IAAI,CAACC,SAAS,GAAG,IAAI,CAACC,iBAAiB,CAACJ,SAAS,CAAC;EACpD;EAEAI,iBAAiBA,CAACJ,SAAiB,EAAE;IACnC,IAAI,CAACF,QAAQ,CACX,IAAAO,qBAAe,EAACC,aAAS,CAAC,CAAC;MACzB,GAAG,IAAI,CAACC,sBAAsB,CAAC;IACjC,CAAC,CACH,CAAC;IACD,OAAO,MAAM;MACX,IAAI,CAACC,eAAe,CAACC,IAAI,CAACC,KAAK,CAACT,WAAW,CAACC,GAAG,CAAC,CAAC,GAAGF,SAAS,CAAC,CAAC;IACjE,CAAC;EACH;EAEAQ,eAAeA,CAACG,OAAe,EAAE;IAC/B,IAAI,CAACb,QAAQ,CACX,IAAAO,qBAAe,EAACO,WAAO,CAAC,CAAC;MACvB,GAAG,IAAI,CAACL,sBAAsB,CAAC,CAAC;MAChCM,WAAW,EAAEF;IACf,CAAC,CACH,CAAC;EACH;EAEAJ,sBAAsBA,CAAA,EAAG;IACvB,OAAO;MACLO,GAAG,EAAEC,MAAM,CAACC,QAAQ,CAACC,IAAI;MACzBC,KAAK,EAAEH,MAAM,CAACC,QAAQ,CAACG,QAAQ;MAC/BC,WAAW,EAAE,IAAI,CAACvB,mBAAmB,CAACwB;IACxC,CAAC;EACH;AACF;AAACC,OAAA,CAAA9B,6BAAA,GAAAA,6BAAA","ignoreList":[]}