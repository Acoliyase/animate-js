{"version":3,"names":["_lodash","require","_InMemoryBackend","_kanbanStaticData","createKanbanItem","chance","createdAt","date","min","Date","now","max","rest","id","guid","name","description","sentence","price","integer","status","pickone","updatedAt","stageId","createKanbanItemsBackend","createOne","params","InMemoryBackend","enableTotal","i","raw","kanbanStaticLoadMoreCardsData","itemKey","item","total","predicate","query","search","filters","rgx","RegExp","escapeRegExp","test","length","indexOf","orderBy","sort","exports"],"sources":["../../../../src/testkit/kanban/createKanbanItemsBackend.ts"],"sourcesContent":["import { escapeRegExp } from 'lodash';\nimport { InMemoryBackend, InMemoryBackendParams } from '../../InMemoryBackend';\nimport { KanbanFilters } from './kanbanFilter';\nimport { MockCard } from './kanban';\nimport { kanbanStaticLoadMoreCardsData } from './kanbanStaticData';\n\nexport function createKanbanItem(\n  chance: Chance.Chance,\n  {\n    createdAt = chance.date({\n      min: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000),\n      max: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),\n    }) as Date,\n    ...rest\n  }: Partial<MockCard> = {},\n): MockCard {\n  return {\n    id: chance.guid(),\n    name: chance.name(),\n    description: chance.sentence(),\n    price: chance.integer({ min: 0, max: 10000 }),\n    status: chance.pickone(['available', 'outOfStock']),\n    createdAt,\n    updatedAt: createdAt,\n    stageId: chance.guid(),\n    ...rest,\n  };\n}\n\nexport const createKanbanItemsBackend = ({\n  createOne,\n  ...params\n}: Partial<InMemoryBackendParams<MockCard, KanbanFilters>> = {}) => {\n  return new InMemoryBackend<MockCard, KanbanFilters>({\n    enableTotal: params?.enableTotal,\n    createOne: (i) => {\n      const raw = kanbanStaticLoadMoreCardsData[i];\n      return {\n        ...raw,\n        createdAt: new Date(raw.createdAt ?? ''),\n        updatedAt: new Date(raw.updatedAt ?? ''),\n      };\n    },\n    itemKey: (item) => item.id,\n    total: 0,\n    predicate: (query) => {\n      const { search } = query;\n      const filters = query.filters ?? {};\n      const rgx = new RegExp(escapeRegExp(search), 'i');\n\n      return (item: MockCard) => {\n        if (search && !rgx.test(item.name)) {\n          return false;\n        }\n\n        if (\n          filters.stageId &&\n          filters.stageId.length &&\n          filters.stageId.indexOf(item.id) === -1\n        ) {\n          return false;\n        }\n\n        return true;\n      };\n    },\n    orderBy: (query) => {\n      return [...(query.sort ?? [])];\n    },\n    ...params,\n  });\n};\n"],"mappings":"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","ignoreList":[]}