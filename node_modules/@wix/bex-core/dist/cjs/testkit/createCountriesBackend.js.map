{"version":3,"names":["_chance","require","_lodash","_InMemoryBackend","createCountriesBackend","createOne","params","chance","Chance","countries","unique","country","bind","full","length","sort","map","name","id","snakeCase","createCountry","index","rest","InMemoryBackend","enableTotal","itemKey","item","total","predicate","search","rgx","RegExp","escapeRegExp","test","exports"],"sources":["../../../src/testkit/createCountriesBackend.ts"],"sourcesContent":["import { Country } from './country';\nimport { Chance } from 'chance';\nimport { snakeCase, escapeRegExp } from 'lodash';\nimport { InMemoryBackend, InMemoryBackendParams } from '../InMemoryBackend';\n\nexport const createCountriesBackend = ({\n  createOne,\n  ...params\n}: Partial<InMemoryBackendParams<Country>> & {\n  enableTotal?: boolean;\n} = {}) => {\n  const chance = new Chance() as Chance.Chance & {\n    countries(): {}[];\n  };\n\n  const countries = chance\n    .unique(\n      chance.country.bind(chance, { full: true }),\n      chance.countries().length,\n    )\n    .sort()\n    .map((name) => ({\n      id: snakeCase(name),\n      name,\n    }));\n\n  function createCountry(\n    index: number,\n    { ...rest }: Partial<Country> = {},\n  ): Country {\n    return {\n      ...countries[index],\n      ...rest,\n    };\n  }\n\n  return new InMemoryBackend<Country>({\n    enableTotal: params?.enableTotal,\n    createOne: createOne ?? ((index) => createCountry(index)),\n    itemKey: (item) => item.id,\n    total: countries.length,\n    predicate: ({ search }) => {\n      const rgx = new RegExp(escapeRegExp(search), 'i');\n\n      return (item) => {\n        if (search && !rgx.test(item.name)) {\n          return false;\n        }\n\n        return true;\n      };\n    },\n    ...params,\n  });\n};\n"],"mappings":";;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAF,OAAA;AAEO,MAAMG,sBAAsB,GAAGA,CAAC;EACrCC,SAAS;EACT,GAAGC;AAGL,CAAC,GAAG,CAAC,CAAC,KAAK;EACT,MAAMC,MAAM,GAAG,IAAIC,cAAM,CAAC,CAEzB;EAED,MAAMC,SAAS,GAAGF,MAAM,CACrBG,MAAM,CACLH,MAAM,CAACI,OAAO,CAACC,IAAI,CAACL,MAAM,EAAE;IAAEM,IAAI,EAAE;EAAK,CAAC,CAAC,EAC3CN,MAAM,CAACE,SAAS,CAAC,CAAC,CAACK,MACrB,CAAC,CACAC,IAAI,CAAC,CAAC,CACNC,GAAG,CAAEC,IAAI,KAAM;IACdC,EAAE,EAAE,IAAAC,iBAAS,EAACF,IAAI,CAAC;IACnBA;EACF,CAAC,CAAC,CAAC;EAEL,SAASG,aAAaA,CACpBC,KAAa,EACb;IAAE,GAAGC;EAAuB,CAAC,GAAG,CAAC,CAAC,EACzB;IACT,OAAO;MACL,GAAGb,SAAS,CAACY,KAAK,CAAC;MACnB,GAAGC;IACL,CAAC;EACH;EAEA,OAAO,IAAIC,gCAAe,CAAU;IAClCC,WAAW,EAAElB,MAAM,oBAANA,MAAM,CAAEkB,WAAW;IAChCnB,SAAS,EAAEA,SAAS,KAAMgB,KAAK,IAAKD,aAAa,CAACC,KAAK,CAAC,CAAC;IACzDI,OAAO,EAAGC,IAAI,IAAKA,IAAI,CAACR,EAAE;IAC1BS,KAAK,EAAElB,SAAS,CAACK,MAAM;IACvBc,SAAS,EAAEA,CAAC;MAAEC;IAAO,CAAC,KAAK;MACzB,MAAMC,GAAG,GAAG,IAAIC,MAAM,CAAC,IAAAC,oBAAY,EAACH,MAAM,CAAC,EAAE,GAAG,CAAC;MAEjD,OAAQH,IAAI,IAAK;QACf,IAAIG,MAAM,IAAI,CAACC,GAAG,CAACG,IAAI,CAACP,IAAI,CAACT,IAAI,CAAC,EAAE;UAClC,OAAO,KAAK;QACd;QAEA,OAAO,IAAI;MACb,CAAC;IACH,CAAC;IACD,GAAGX;EACL,CAAC,CAAC;AACJ,CAAC;AAAC4B,OAAA,CAAA9B,sBAAA,GAAAA,sBAAA","ignoreList":[]}