{"version":3,"names":["_timers","require","flush","iterations","i","Promise","resolve","setImmediate","jest","runOnlyPendingTimers","flushPromise","promise","advance","ms","advanceTimersByTime"],"sources":["../../../src/test-utils/flush.ts"],"sourcesContent":["import { setImmediate } from 'timers';\n\nexport async function flush(iterations = 5) {\n  for (let i = 0; i < iterations; i++) {\n    await new Promise((resolve) => setImmediate(resolve));\n    jest.runOnlyPendingTimers();\n  }\n}\n\nexport async function flushPromise<T>(promise: T, iterations = 3) {\n  for (let i = 0; i < iterations; i++) {\n    await new Promise((resolve) => setImmediate(resolve));\n    jest.runOnlyPendingTimers();\n  }\n\n  return promise;\n}\n\nexport async function advance<T>(ms: number, promise?: T) {\n  await new Promise((resolve) => setImmediate(resolve));\n  jest.advanceTimersByTime(ms);\n  await promise;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEO,eAAeC,KAAKA,CAACC,UAAU,GAAG,CAAC,EAAE;EAC1C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,UAAU,EAAEC,CAAC,EAAE,EAAE;IACnC,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK,IAAAC,oBAAY,EAACD,OAAO,CAAC,CAAC;IACrDE,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAC7B;AACF;AAEO,eAAeC,YAAYA,CAAIC,OAAU,EAAER,UAAU,GAAG,CAAC,EAAE;EAChE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,UAAU,EAAEC,CAAC,EAAE,EAAE;IACnC,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK,IAAAC,oBAAY,EAACD,OAAO,CAAC,CAAC;IACrDE,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAC7B;EAEA,OAAOE,OAAO;AAChB;AAEO,eAAeC,OAAOA,CAAIC,EAAU,EAAEF,OAAW,EAAE;EACxD,MAAM,IAAIN,OAAO,CAAEC,OAAO,IAAK,IAAAC,oBAAY,EAACD,OAAO,CAAC,CAAC;EACrDE,IAAI,CAACM,mBAAmB,CAACD,EAAE,CAAC;EAC5B,MAAMF,OAAO;AACf","ignoreList":[]}