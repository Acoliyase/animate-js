{"version":3,"file":"internal.umd.min.js","mappings":"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","sources":["webpack://_wix_dashboard/webpack/universalModuleDefinition","webpack://_wix_dashboard/../../../node_modules/@wix/sdk-runtime/build/context.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk-runtime/build/host-modules.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk-runtime/build/context-v2.js","webpack://_wix_dashboard/./types/addSitePlugin.ts","webpack://_wix_dashboard/./sdk.ts","webpack://_wix_dashboard/./dashboardHostModule.ts","webpack://_wix_dashboard/../../../node_modules/comlink/dist/esm/comlink.mjs","webpack://_wix_dashboard/../../../communication-channel/dist/esm/serialization.js","webpack://_wix_dashboard/../../../communication-channel/dist/esm/index.js","webpack://_wix_dashboard/../../../node_modules/@wix/monitoring/build/index.js","webpack://_wix_dashboard/../../../node_modules/@wix/monitoring-common-sentry/build/index.js","webpack://_wix_dashboard/../../../node_modules/@wix/monitoring-browser-sentry/build/index.js","webpack://_wix_dashboard/../../../node_modules/@wix/monitoring-browser-panorama/build/index.js","webpack://_wix_dashboard/./helpers/registerHeightReporter.ts","webpack://_wix_dashboard/./helpers/isWixOrigin.ts","webpack://_wix_dashboard/./helpers/essentials.ts","webpack://_wix_dashboard/./hostPlatform.ts","webpack://_wix_dashboard/./helpers/registerOnBeforeUnload.ts","webpack://_wix_dashboard/../../../node_modules/@wix/monitoring-browser-sdk-host/build/index.js","webpack://_wix_dashboard/./index.ts","webpack://_wix_dashboard/../../../node_modules/object-assign/index.js","webpack://_wix_dashboard/../../../node_modules/react/cjs/react.production.min.js","webpack://_wix_dashboard/../../../node_modules/react/index.js","webpack://_wix_dashboard/../../../node_modules/@babel/runtime/helpers/defineProperty.js","webpack://_wix_dashboard/../../../node_modules/@babel/runtime/helpers/extends.js","webpack://_wix_dashboard/../../../node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://_wix_dashboard/../../../node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://_wix_dashboard/../../../node_modules/@babel/runtime/helpers/typeof.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk-context/build/browser/index.mjs","webpack://_wix_dashboard/webpack/bootstrap","webpack://_wix_dashboard/webpack/runtime/compat get default export","webpack://_wix_dashboard/webpack/runtime/define property getters","webpack://_wix_dashboard/webpack/runtime/hasOwnProperty shorthand","webpack://_wix_dashboard/webpack/runtime/make namespace object","webpack://_wix_dashboard/../../../node_modules/@wix/sdk-types/build/browser/index.mjs","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/ambassador-modules.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/common.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/fetch-error.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/bi/biHeaderGenerator.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/node_modules/@wix/sdk-runtime/build/context.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/rest-modules.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/nanoevents.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/event-handlers-modules.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/wixClient.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/service-plugin-modules.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/helpers.js","webpack://_wix_dashboard/../../../node_modules/@wix/sdk/build/host-modules.js","webpack://_wix_dashboard/./internal.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WixDashboardSDK\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WixDashboardSDK\"] = factory();\n\telse\n\t\troot[\"WixDashboardSDK\"] = factory();\n})((typeof self !== 'undefined' ? self : this), () => {\nreturn ","import { wixContext } from '@wix/sdk-context';\nexport function resolveContext() {\n    const oldContext = typeof $wixContext !== 'undefined' && $wixContext.initWixModules\n        ? $wixContext.initWixModules\n        : typeof globalThis.__wix_context__ !== 'undefined' &&\n            globalThis.__wix_context__.initWixModules\n            ? globalThis.__wix_context__.initWixModules\n            : undefined;\n    if (oldContext) {\n        return {\n            // @ts-expect-error\n            initWixModules(modules, elevated) {\n                return runWithoutContext(() => oldContext(modules, elevated));\n            },\n            fetchWithAuth() {\n                throw new Error('fetchWithAuth is not available in this context');\n            },\n            graphql() {\n                throw new Error('graphql is not available in this context');\n            },\n        };\n    }\n    const contextualClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.client\n        : typeof wixContext.client !== 'undefined'\n            ? wixContext.client\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.client\n                : undefined;\n    const elevatedClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.elevatedClient\n        : typeof wixContext.elevatedClient !== 'undefined'\n            ? wixContext.elevatedClient\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.elevatedClient\n                : undefined;\n    if (!contextualClient && !elevatedClient) {\n        return;\n    }\n    return {\n        initWixModules(wixModules, elevated) {\n            if (elevated) {\n                if (!elevatedClient) {\n                    throw new Error('An elevated client is required to use elevated modules. Make sure to initialize the Wix context with an elevated client before using elevated SDK modules');\n                }\n                return runWithoutContext(() => elevatedClient.use(wixModules));\n            }\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return runWithoutContext(() => contextualClient.use(wixModules));\n        },\n        fetchWithAuth: (urlOrRequest, requestInit) => {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.fetchWithAuth(urlOrRequest, requestInit);\n        },\n        async graphql(query, variables, opts) {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.graphql(query, variables, opts);\n        },\n    };\n}\nexport function contextualizeHostModule(hostModule, prop) {\n    return (...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(hostModule)[prop].apply(undefined, args);\n    };\n}\nexport function contextualizeRESTModule(restModule, expectedArgsLength) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context\n            .initWixModules(restModule, args[expectedArgsLength]?.suppressAuth ? true : false)\n            .apply(undefined, args);\n    });\n}\nexport function contextualizeEventDefinitionModule(eventDefinition) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(eventDefinition).apply(undefined, args);\n    });\n}\nexport function contextualizeSerivcePluginModule(servicePlugin) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(servicePlugin).apply(undefined, args);\n    });\n}\nexport * from './context-v2.js';\nexport function runWithoutContext(fn) {\n    const globalContext = globalThis.__wix_context__;\n    const moduleContext = {\n        client: wixContext.client,\n        elevatedClient: wixContext.elevatedClient,\n    };\n    let closureContext;\n    globalThis.__wix_context__ = undefined;\n    wixContext.client = undefined;\n    wixContext.elevatedClient = undefined;\n    if (typeof $wixContext !== 'undefined') {\n        closureContext = {\n            client: $wixContext?.client,\n            elevatedClient: $wixContext?.elevatedClient,\n        };\n        delete $wixContext.client;\n        delete $wixContext.elevatedClient;\n    }\n    try {\n        return fn();\n    }\n    finally {\n        globalThis.__wix_context__ = globalContext;\n        wixContext.client = moduleContext.client;\n        wixContext.elevatedClient = moduleContext.elevatedClient;\n        if (typeof $wixContext !== 'undefined') {\n            $wixContext.client = closureContext.client;\n            $wixContext.elevatedClient = closureContext.elevatedClient;\n        }\n    }\n}\n","import { contextualizeHostModuleV2 } from './context-v2.js';\nexport function createHostModule(hostModuleAPI) {\n    return contextualizeHostModuleV2({\n        __type: 'host',\n        create: (host) => Object.entries(hostModuleAPI).reduce((acc, [key, fn]) => ({\n            ...acc,\n            [key]: fn(host),\n        }), {}),\n    }, Object.keys(hostModuleAPI));\n}\n","import { EventDefinition, ServicePluginDefinition, } from '@wix/sdk-types';\nimport { resolveContext } from './context.js';\nexport { EventDefinition, ServicePluginDefinition, };\nexport function contextualizeHostModuleV2(hostModule, props) {\n    return {\n        ...hostModule,\n        ...Object.fromEntries(props.map((prop) => [\n            prop,\n            (...args) => {\n                const context = resolveContext();\n                if (!context) {\n                    throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n                }\n                return context\n                    .initWixModules(hostModule)[prop].apply(undefined, args);\n            },\n        ])),\n    };\n}\nexport function contextualizeRESTModuleV2(restModule, elevated) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // @ts-expect-error - if there is no context, we want to behave like the original module\n            return restModule.apply(undefined, args);\n        }\n        return (context\n            .initWixModules(restModule, elevated)\n            // @ts-expect-error - we know the args here are meant to be passed to the initalized module\n            .apply(undefined, args));\n    });\n}\nexport function contextualizeEventDefinitionModuleV2(eventDefinition) {\n    const contextualMethod = ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // this line should throw, but this would be a breaking change for older SDK versions\n            // this is because in wixClient there's code that calls any function it detects and checks\n            // if it's an ambassador module (see isAmbassadorModule)\n            return () => { };\n        }\n        return context.initWixModules(eventDefinition).apply(undefined, args);\n    });\n    contextualMethod.__type = eventDefinition.__type;\n    contextualMethod.type = eventDefinition.type;\n    contextualMethod.isDomainEvent = eventDefinition.isDomainEvent;\n    contextualMethod.transformations = eventDefinition.transformations;\n    return contextualMethod;\n}\nexport function contextualizeSerivcePluginModuleV2(servicePlugin) {\n    const contextualMethod = ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // this line should throw, but this would be a breaking change for older SDK versions\n            // this is because in wixClient there's code that calls any function it detects and checks\n            // if it's an ambassador module (see isAmbassadorModule)\n            return () => { };\n        }\n        return context.initWixModules(servicePlugin).apply(undefined, args);\n    });\n    contextualMethod.__type = servicePlugin.__type;\n    contextualMethod.componentType = servicePlugin.componentType;\n    contextualMethod.methods = servicePlugin.methods;\n    return contextualMethod;\n}\n","type SuccessResult = {\n  type: 'SUCCESS';\n};\n\ntype ErrorResult = {\n  type: 'ERROR';\n  data: {\n    error: { message: string; code: number };\n  };\n};\n\nexport type AddSitePluginModalResult = SuccessResult | ErrorResult;\n\nexport class AddSitePluginModalError extends Error {\n  code: number;\n  constructor({ message, code }: { message: string; code: number }) {\n    super(message);\n    this.message = message;\n    this.code = code;\n  }\n}\n\nexport type AddSitePlugin = (\n  pluginId: string,\n  options?: {\n    placement?: {\n      appDefinitionId: string;\n      widgetId: string;\n      slotId: string;\n    };\n  },\n) => Promise<void>;\n","import {\n  CloseModal,\n  GetAccessToken,\n  GetLanguage,\n  GetPageUrl,\n  Host,\n  Navigate,\n  ObserveState,\n  OnBeforeUnload,\n  OpenModal,\n  ShowToast,\n  RequestFeedback,\n  SetPageTitle,\n  NavigateBack,\n  OnLayerStateChange,\n  ProviderOpenModal,\n  OpenMediaManager,\n} from './types';\nimport {\n  AddSitePlugin,\n  AddSitePluginModalError,\n  AddSitePluginModalResult,\n} from './types/addSitePlugin';\nimport { InstallApp } from './types/installApp';\nimport { GetDashboardMenuPlugins, GetDashboardPlugins } from './types/slots';\nimport { GetWidget } from './types/widget';\nimport { GetSiteInfo } from './types/getSiteInfo';\n\nexport const createSDKBuilders = () => {\n  const showToast =\n    ({ channel }: Host): ShowToast =>\n    (...args) => {\n      const handle = channel.showToast(...args);\n      const remove = () => Promise.resolve(handle).then((h) => h.remove());\n      return { remove };\n    };\n\n  const observeState =\n    ({ channel }: Host): ObserveState =>\n    (...args) => {\n      const handle = (channel.observeState as ObserveState)(\n        ...args,\n      ) as ReturnType<Host['channel']['observeState']>; // this temporary casting is needed because it seems that typescript can't handle this by itself.\n      const disconnect = () =>\n        Promise.resolve(handle).then((h) => h.disconnect());\n      return { disconnect };\n    };\n\n  const navigate =\n    ({ channel }: Host): Navigate =>\n    (...args) => {\n      return channel.navigate(...args);\n    };\n\n  const navigateBack =\n    ({ channel }: Host): NavigateBack =>\n    () => {\n      return channel.navigateBack();\n    };\n\n  const openModal =\n    ({ channel }: Host): OpenModal =>\n    (modalInfo, modalParams?) => {\n      const [modalId, params]: Parameters<ProviderOpenModal> =\n        typeof modalInfo === 'string'\n          ? [modalInfo, modalParams]\n          : [modalInfo.modalId, modalInfo.params];\n\n      const handle = channel.openModal(modalId, params);\n      return {\n        modalClosed: Promise.resolve(handle).then((h) => h.modalClosed),\n      };\n    };\n\n  const closeModal =\n    ({ channel }: Host): CloseModal =>\n    (closeData) => {\n      if (closeData === undefined) {\n        return channel.closeModal();\n      }\n      const filteredArg = JSON.parse(JSON.stringify(closeData));\n      return channel.closeModal(filteredArg);\n    };\n\n  const getAccessToken =\n    ({ channel }: Host): GetAccessToken =>\n    () => {\n      return channel.getAccessToken();\n    };\n\n  const getPageUrl =\n    ({ channel }: Host): GetPageUrl =>\n    (...args) => {\n      return channel.getPageUrl(...args);\n    };\n\n  const openMediaManager =\n    ({ channel }: Host): OpenMediaManager =>\n    (...args) => {\n      return channel.openMediaManager(...args);\n    };\n\n  const addSitePlugin =\n    ({ channel }: Host): AddSitePlugin =>\n    (pluginId, options) => {\n      const PLUGINS_DASHBOARD_MODAL_ID = '802c76e4-b381-4bb3-9152-96acabbf3194';\n      const additionalParams = options?.placement || {};\n      const handle = channel.openModal(PLUGINS_DASHBOARD_MODAL_ID, {\n        ...additionalParams,\n        pluginId,\n        action: 'populate',\n      });\n      return Promise.resolve(handle)\n        .then(\n          (h) => h.modalClosed as unknown as Promise<AddSitePluginModalResult>,\n        )\n        .then((resp) => {\n          if (resp?.type === undefined) {\n            throw new AddSitePluginModalError({\n              message: 'Aborted by user',\n              code: 3006,\n            });\n          }\n          if (resp?.type === 'ERROR') {\n            throw new AddSitePluginModalError(resp.data.error);\n          }\n        });\n    };\n\n  const onBeforeUnload =\n    ({ channel }: Host): OnBeforeUnload =>\n    (...args) => {\n      return channel.onBeforeUnload(...args);\n    };\n\n  const setPageTitle =\n    ({ channel }: Host): SetPageTitle =>\n    (pageTitle: string | null) => {\n      return channel.setPageTitle(pageTitle);\n    };\n\n  const getLanguage = (host: Host): GetLanguage => {\n    let language: string | null = null;\n    return async () => {\n      if (language) {\n        return language;\n      }\n      let observeStateResult = null as ReturnType<ObserveState> | null;\n      language = await new Promise<string>((resolve) => {\n        observeStateResult = observeState(host)((_, envState) => {\n          resolve(envState.language);\n        });\n      });\n      observeStateResult?.disconnect();\n      return language;\n    };\n  };\n\n  const requestFeedback =\n    ({ channel }: Host): RequestFeedback =>\n    (...args) => {\n      return channel.requestFeedback(...args);\n    };\n\n  const onLayerStateChange =\n    ({ channel }: Host): OnLayerStateChange =>\n    (...args) => {\n      const resultOrPromise = channel.onLayerStateChange(...args);\n      const remove = () =>\n        Promise.resolve(resultOrPromise).then((h) => h.remove());\n      return { remove };\n    };\n\n  const installApp = ({ channel }: Host): InstallApp => channel.installApp;\n\n  const getWidget =\n    ({ channel }: Host): GetWidget =>\n    (...args) => {\n      if ('getWidget' in channel) {\n        return channel.getWidget(...args);\n      } else {\n        throw new Error('Unsupported');\n      }\n    };\n\n  const getDashboardPlugins =\n    ({ channel }: Host): GetDashboardPlugins =>\n    (...args) => {\n      if ('getDashboardPlugins' in channel) {\n        return channel.getDashboardPlugins(...args);\n      } else {\n        throw new Error('Unsupported');\n      }\n    };\n\n  const getDashboardMenuPlugins =\n    ({ channel }: Host): GetDashboardMenuPlugins =>\n    (...args) => {\n      if ('getDashboardMenuPlugins' in channel) {\n        return channel.getDashboardMenuPlugins(...args);\n      } else {\n        throw new Error('Unsupported');\n      }\n    };\n\n  const getSiteInfo = ({ channel }: Host): GetSiteInfo => channel.getSiteInfo;\n\n  return {\n    showToast,\n    observeState,\n    navigate,\n    navigateBack,\n    openModal,\n    closeModal,\n    getAccessToken,\n    getPageUrl,\n    openMediaManager,\n    addSitePlugin,\n    onBeforeUnload,\n    setPageTitle,\n    getLanguage,\n    requestFeedback,\n    onLayerStateChange,\n    installApp,\n    getSiteInfo,\n    getWidget,\n    getDashboardPlugins,\n    getDashboardMenuPlugins,\n  };\n};\n","import { createHostModule } from '@wix/sdk-runtime/host-modules';\nimport type { AuthenticationStrategy } from '@wix/sdk-types';\nimport { createSDKBuilders } from './sdk';\nimport type { CreateHost, Host, SDK } from './types';\n\nexport const createDashboardModule = ({\n  createHost,\n}: {\n  createHost: CreateHost;\n}) => {\n  const dashboardSDKBuilders = createSDKBuilders();\n  return {\n    ...createHostModule<Host, SDK>(dashboardSDKBuilders),\n    host: createHost,\n    auth: () => {\n      return {\n        getAuthHeaders: async (host) => {\n          const getAccessToken = dashboardSDKBuilders.getAccessToken(host);\n          return {\n            headers: {\n              Authorization: await getAccessToken(),\n            },\n          };\n        },\n      } as AuthenticationStrategy<Host>;\n    },\n  };\n};\n","/**\r\n * Copyright 2019 Google Inc. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst proxyMarker = Symbol(\"Comlink.proxy\");\r\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\r\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\r\nconst throwMarker = Symbol(\"Comlink.thrown\");\r\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\r\n/**\r\n * Internal transfer handle to handle objects marked to proxy.\r\n */\r\nconst proxyTransferHandler = {\r\n    canHandle: (val) => isObject(val) && val[proxyMarker],\r\n    serialize(obj) {\r\n        const { port1, port2 } = new MessageChannel();\r\n        expose(obj, port1);\r\n        return [port2, [port2]];\r\n    },\r\n    deserialize(port) {\r\n        port.start();\r\n        return wrap(port);\r\n    },\r\n};\r\n/**\r\n * Internal transfer handler to handle thrown exceptions.\r\n */\r\nconst throwTransferHandler = {\r\n    canHandle: (value) => isObject(value) && throwMarker in value,\r\n    serialize({ value }) {\r\n        let serialized;\r\n        if (value instanceof Error) {\r\n            serialized = {\r\n                isError: true,\r\n                value: {\r\n                    message: value.message,\r\n                    name: value.name,\r\n                    stack: value.stack,\r\n                },\r\n            };\r\n        }\r\n        else {\r\n            serialized = { isError: false, value };\r\n        }\r\n        return [serialized, []];\r\n    },\r\n    deserialize(serialized) {\r\n        if (serialized.isError) {\r\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\r\n        }\r\n        throw serialized.value;\r\n    },\r\n};\r\n/**\r\n * Allows customizing the serialization of certain values.\r\n */\r\nconst transferHandlers = new Map([\r\n    [\"proxy\", proxyTransferHandler],\r\n    [\"throw\", throwTransferHandler],\r\n]);\r\nfunction expose(obj, ep = self) {\r\n    ep.addEventListener(\"message\", function callback(ev) {\r\n        if (!ev || !ev.data) {\r\n            return;\r\n        }\r\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\r\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\r\n        let returnValue;\r\n        try {\r\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\r\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\r\n            switch (type) {\r\n                case 0 /* GET */:\r\n                    {\r\n                        returnValue = rawValue;\r\n                    }\r\n                    break;\r\n                case 1 /* SET */:\r\n                    {\r\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\r\n                        returnValue = true;\r\n                    }\r\n                    break;\r\n                case 2 /* APPLY */:\r\n                    {\r\n                        returnValue = rawValue.apply(parent, argumentList);\r\n                    }\r\n                    break;\r\n                case 3 /* CONSTRUCT */:\r\n                    {\r\n                        const value = new rawValue(...argumentList);\r\n                        returnValue = proxy(value);\r\n                    }\r\n                    break;\r\n                case 4 /* ENDPOINT */:\r\n                    {\r\n                        const { port1, port2 } = new MessageChannel();\r\n                        expose(obj, port2);\r\n                        returnValue = transfer(port1, [port1]);\r\n                    }\r\n                    break;\r\n                case 5 /* RELEASE */:\r\n                    {\r\n                        returnValue = undefined;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        catch (value) {\r\n            returnValue = { value, [throwMarker]: 0 };\r\n        }\r\n        Promise.resolve(returnValue)\r\n            .catch((value) => {\r\n            return { value, [throwMarker]: 0 };\r\n        })\r\n            .then((returnValue) => {\r\n            const [wireValue, transferables] = toWireValue(returnValue);\r\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\r\n            if (type === 5 /* RELEASE */) {\r\n                // detach and deactive after sending release response above.\r\n                ep.removeEventListener(\"message\", callback);\r\n                closeEndPoint(ep);\r\n            }\r\n        });\r\n    });\r\n    if (ep.start) {\r\n        ep.start();\r\n    }\r\n}\r\nfunction isMessagePort(endpoint) {\r\n    return endpoint.constructor.name === \"MessagePort\";\r\n}\r\nfunction closeEndPoint(endpoint) {\r\n    if (isMessagePort(endpoint))\r\n        endpoint.close();\r\n}\r\nfunction wrap(ep, target) {\r\n    return createProxy(ep, [], target);\r\n}\r\nfunction throwIfProxyReleased(isReleased) {\r\n    if (isReleased) {\r\n        throw new Error(\"Proxy has been released and is not useable\");\r\n    }\r\n}\r\nfunction createProxy(ep, path = [], target = function () { }) {\r\n    let isProxyReleased = false;\r\n    const proxy = new Proxy(target, {\r\n        get(_target, prop) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            if (prop === releaseProxy) {\r\n                return () => {\r\n                    return requestResponseMessage(ep, {\r\n                        type: 5 /* RELEASE */,\r\n                        path: path.map((p) => p.toString()),\r\n                    }).then(() => {\r\n                        closeEndPoint(ep);\r\n                        isProxyReleased = true;\r\n                    });\r\n                };\r\n            }\r\n            if (prop === \"then\") {\r\n                if (path.length === 0) {\r\n                    return { then: () => proxy };\r\n                }\r\n                const r = requestResponseMessage(ep, {\r\n                    type: 0 /* GET */,\r\n                    path: path.map((p) => p.toString()),\r\n                }).then(fromWireValue);\r\n                return r.then.bind(r);\r\n            }\r\n            return createProxy(ep, [...path, prop]);\r\n        },\r\n        set(_target, prop, rawValue) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\r\n            // boolean. To show good will, we return true asynchronously \\_()_/\r\n            const [value, transferables] = toWireValue(rawValue);\r\n            return requestResponseMessage(ep, {\r\n                type: 1 /* SET */,\r\n                path: [...path, prop].map((p) => p.toString()),\r\n                value,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        apply(_target, _thisArg, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const last = path[path.length - 1];\r\n            if (last === createEndpoint) {\r\n                return requestResponseMessage(ep, {\r\n                    type: 4 /* ENDPOINT */,\r\n                }).then(fromWireValue);\r\n            }\r\n            // We just pretend that `bind()` didnt happen.\r\n            if (last === \"bind\") {\r\n                return createProxy(ep, path.slice(0, -1));\r\n            }\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: 2 /* APPLY */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n        construct(_target, rawArgumentList) {\r\n            throwIfProxyReleased(isProxyReleased);\r\n            const [argumentList, transferables] = processArguments(rawArgumentList);\r\n            return requestResponseMessage(ep, {\r\n                type: 3 /* CONSTRUCT */,\r\n                path: path.map((p) => p.toString()),\r\n                argumentList,\r\n            }, transferables).then(fromWireValue);\r\n        },\r\n    });\r\n    return proxy;\r\n}\r\nfunction myFlat(arr) {\r\n    return Array.prototype.concat.apply([], arr);\r\n}\r\nfunction processArguments(argumentList) {\r\n    const processed = argumentList.map(toWireValue);\r\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\r\n}\r\nconst transferCache = new WeakMap();\r\nfunction transfer(obj, transfers) {\r\n    transferCache.set(obj, transfers);\r\n    return obj;\r\n}\r\nfunction proxy(obj) {\r\n    return Object.assign(obj, { [proxyMarker]: true });\r\n}\r\nfunction windowEndpoint(w, context = self, targetOrigin = \"*\") {\r\n    return {\r\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\r\n        addEventListener: context.addEventListener.bind(context),\r\n        removeEventListener: context.removeEventListener.bind(context),\r\n    };\r\n}\r\nfunction toWireValue(value) {\r\n    for (const [name, handler] of transferHandlers) {\r\n        if (handler.canHandle(value)) {\r\n            const [serializedValue, transferables] = handler.serialize(value);\r\n            return [\r\n                {\r\n                    type: 3 /* HANDLER */,\r\n                    name,\r\n                    value: serializedValue,\r\n                },\r\n                transferables,\r\n            ];\r\n        }\r\n    }\r\n    return [\r\n        {\r\n            type: 0 /* RAW */,\r\n            value,\r\n        },\r\n        transferCache.get(value) || [],\r\n    ];\r\n}\r\nfunction fromWireValue(value) {\r\n    switch (value.type) {\r\n        case 3 /* HANDLER */:\r\n            return transferHandlers.get(value.name).deserialize(value.value);\r\n        case 0 /* RAW */:\r\n            return value.value;\r\n    }\r\n}\r\nfunction requestResponseMessage(ep, msg, transfers) {\r\n    return new Promise((resolve) => {\r\n        const id = generateUUID();\r\n        ep.addEventListener(\"message\", function l(ev) {\r\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\r\n                return;\r\n            }\r\n            ep.removeEventListener(\"message\", l);\r\n            resolve(ev.data);\r\n        });\r\n        if (ep.start) {\r\n            ep.start();\r\n        }\r\n        ep.postMessage(Object.assign({ id }, msg), transfers);\r\n    });\r\n}\r\nfunction generateUUID() {\r\n    return new Array(4)\r\n        .fill(0)\r\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\r\n        .join(\"-\");\r\n}\n\nexport { createEndpoint, expose, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","import { proxy } from 'comlink';\nconst proxyCallbackMarker = '__proxyCallbackId__wixSDK__';\nconst proxyPromiseMarker = '__proxyPromiseId__wixSDK__';\nexport const serializeAllMethodsIn = sdk => {\n  return wrapMethodsWithProxy(sdk, originalMethod => {\n    return async function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      const [proxies, argsNoProxies] = extractProxies(args);\n      const originalResult = await originalMethod(proxy(proxies), argsNoProxies);\n      return deserializeReturnValue(originalResult);\n    };\n  });\n};\nexport const deserializeAllMethodsIn = api => {\n  return wrapMethodsWithProxy(api, originalMethod => {\n    return (proxies, args) => {\n      const argsWithProxies = insertProxies(proxies, args);\n      const originalRun = originalMethod(...argsWithProxies);\n      return serializeReturnValue(originalRun);\n    };\n  });\n};\nconst serializeReturnValue = async value => {\n  const [proxies, clonables] = extractProxies(await value);\n  return proxy({\n    proxies,\n    clonables\n  });\n};\nconst deserializeReturnValue = async value => {\n  return insertProxies(value == null ? void 0 : value.proxies, await (value == null ? void 0 : value.clonables));\n};\nconst extractProxies = data => {\n  const walker = (proxies, val) => {\n    if (isPromise(val)) {\n      const proxyId = uniqueId();\n      proxies.promises[proxyId] = val;\n      return {\n        [proxyPromiseMarker]: proxyId\n      };\n    }\n    if (isFunction(val)) {\n      const proxyId = uniqueId();\n      proxies.callbacks[proxyId] = (innerProxies, argsAsArray) => {\n        const argsWithProxies = insertProxies(innerProxies, argsAsArray);\n        const exec = val(...argsWithProxies);\n        return serializeReturnValue(exec);\n      };\n      return {\n        [proxyCallbackMarker]: proxyId\n      };\n    }\n    if (Array.isArray(val)) {\n      return val.map(i => walker(proxies, i));\n    }\n    if (isObject(val)) {\n      return mapObjectValues(val, i => walker(proxies, i));\n    }\n    return val;\n  };\n  const proxies = {\n    promises: {},\n    callbacks: {}\n  };\n  const dataWithoutProxies = walker(proxies, data);\n  return [proxies, dataWithoutProxies];\n};\nconst insertProxies = (proxies, data) => {\n  if (Array.isArray(data)) {\n    return data.map(i => insertProxies(proxies, i));\n  }\n  if (isObject(data) && data.hasOwnProperty(proxyPromiseMarker)) {\n    const promiseId = data[proxyPromiseMarker];\n    return proxies.promises[promiseId];\n  }\n  if (isObject(data) && data.hasOwnProperty(proxyCallbackMarker)) {\n    const callbackId = data[proxyCallbackMarker];\n    // passing args in spread syntax to comlink proxy generates problem when transpiling to old JS version\n    // so pass it as array and handle it on the deserialization level:\n    return async function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      const [innerProxies, argsNoProxies] = extractProxies(args);\n      const exec = await proxies.callbacks[callbackId](proxy(innerProxies), argsNoProxies);\n      return deserializeReturnValue(exec);\n    };\n  }\n  if (isObject(data)) {\n    return mapObjectValues(data, i => insertProxies(proxies, i));\n  }\n  return data;\n};\nconst wrapMethodsWithProxy = (obj, callback) => {\n  return new Proxy(obj, {\n    get(target, prop) {\n      if (!target[prop]) {\n        return () => {\n          throw new Error(`Serialization error occurred while accessing ${prop} property of ${target}`);\n        };\n      }\n      return callback(target[prop]);\n    }\n  });\n};\nconst isPromise = val => val instanceof Promise;\nconst isObject = val => val && typeof val === 'object' && !isPromise(val);\nconst isFunction = val => typeof val === 'function';\nconst mapObjectValues = (obj, callback) => {\n  const mapEntries = _ref => {\n    let [key, value] = _ref;\n    return [key, callback(value)];\n  };\n  return Object.fromEntries(Object.entries(obj).map(mapEntries));\n};\nconst uniqueId = (() => {\n  let counter = 0;\n  return () => ++counter;\n})();\n//# sourceMappingURL=serialization.js.map","import { deserializeAllMethodsIn, serializeAllMethodsIn } from './serialization';\nimport { wrap, expose, releaseProxy } from 'comlink';\nexport const handshakeCode = 'wix-sdk-bo-hello-handshake';\n/**\n * Initializes a new channel with a target.\n * @param postMessage - Target's function to receive messages.\n * @param origin - Target's origin.\n */\nexport const open = _ref => {\n  let {\n    postMessage,\n    origin\n  } = _ref;\n  const {\n    port1: widgetPort,\n    port2: hostPort\n  } = new MessageChannel();\n  const protocolVersion = '1.0.0';\n  const message = {\n    code: handshakeCode,\n    version: protocolVersion,\n    port: hostPort\n  };\n  postMessage(message, origin, [hostPort]);\n  const channel = serializeAllMethodsIn(wrap(widgetPort));\n  return {\n    channel,\n    close: () => channel[releaseProxy]()\n  };\n};\n\n/**\n * Serves api as a response over the communication channel to given port.\n * @param api - The api object that has the methods inside it.\n * @param port - The port on which the channel was initiated and needs to receive the api.\n */\nexport const serve = _ref2 => {\n  let {\n    api,\n    port\n  } = _ref2;\n  expose(deserializeAllMethodsIn(api), port);\n};\n//# sourceMappingURL=index.js.map","// src/context/context-utils.ts\nvar validValue = (value) => value !== void 0 && value !== null && value !== \"\";\nvar pickByValidValues = (obj) => pickBy(obj, validValue);\nfunction pickBy(object, predicate = (value) => !!value) {\n  if (!object) {\n    return {};\n  }\n  const result = {};\n  for (const key in object) {\n    if (predicate(object[key], key)) {\n      result[key] = object[key];\n    }\n  }\n  return result;\n}\nvar generateTagsAndContext = (context) => {\n  const tags = pickByValidValues({\n    \"app.id\": context.appId,\n    \"app.version\": context.appVersion,\n    \"app.instanceId\": context.appInstanceId,\n    \"extension.id\": context.extensionId,\n    \"extension.name\": context.extensionName,\n    \"extension.type\": context.extensionType,\n    platform: context.platform\n  });\n  const contexts = pickBy(\n    {\n      \"extension.data\": pickByValidValues({\n        ...context.extensionData\n      }),\n      site: pickByValidValues({\n        url: context.siteUrl,\n        id: context.tenantType === \"SITE\" ? context.tenantId : void 0\n      }),\n      account: pickByValidValues({\n        id: context.tenantType === \"ACCOUNT\" ? context.tenantId : void 0\n      })\n    },\n    (value) => !!value && Object.keys(value).length > 0\n  );\n  return {\n    tags,\n    contexts\n  };\n};\n\n// src/fallback-client.ts\nvar FallbackMonitoringClient = class {\n  constructor(message) {\n    this.message = message;\n    this.captureException = () => {\n      console.error(this.message);\n    };\n    this.captureMessage = () => {\n      console.error(this.message);\n    };\n    this.startSpan = (spanOptions, callback) => {\n      console.error(this.message);\n      return callback(void 0);\n    };\n    this.startSpanManual = () => {\n      console.error(this.message);\n      return {\n        end: () => {\n        },\n        fail: () => {\n        }\n      };\n    };\n    this.endSpanManual = () => {\n      console.error(this.message);\n    };\n    this.addBreadcrumb = () => {\n      console.error(this.message);\n    };\n  }\n};\nvar createFallbackMonitoringClient = (message) => {\n  return new FallbackMonitoringClient(message);\n};\nexport {\n  createFallbackMonitoringClient,\n  generateTagsAndContext\n};\n","// src/utils.ts\nvar isPromise = (value) => typeof value?.then === \"function\";\nvar runWithMaybePromise = (value, cb) => {\n  if (!cb) {\n    return value;\n  }\n  if (isPromise(value)) {\n    return value.then((res) => {\n      cb(res, true);\n      return res;\n    });\n  } else {\n    cb(value, false);\n    return value;\n  }\n};\nvar runWithMaybeDelay = (cb, maybeTimeCompensation) => {\n  if (!cb) {\n    return;\n  }\n  if (maybeTimeCompensation) {\n    setTimeout(cb, maybeTimeCompensation);\n  } else {\n    cb();\n  }\n};\nvar generateRandomId = () => Date.now() + Math.random();\n\n// src/manual-span.ts\nvar ManualSpanRegistryImpl = class {\n  constructor(options) {\n    this.options = options;\n    this.spanMap = /* @__PURE__ */ new Map();\n  }\n  createSpan(spanOptions, sentryOptionsOrPromise) {\n    let resolveSpan;\n    let rejectSpan;\n    let error;\n    const startTime = Date.now();\n    let maybeDurationCompensation;\n    const maybePromise = runWithMaybePromise(\n      sentryOptionsOrPromise,\n      ({ sentrySDK, scope }, isPromise2) => {\n        if (isPromise2) {\n          maybeDurationCompensation = Date.now() - startTime;\n        }\n        const promise = sentrySDK.startSpan(\n          {\n            ...spanOptions,\n            scope,\n            forceTransaction: this.options.forceTransaction\n          },\n          () => new Promise((resolve, reject) => {\n            resolveSpan = resolve;\n            rejectSpan = reject;\n          })\n        );\n        promise?.catch((e) => {\n          if (e?.message !== error?.message) {\n            throw e;\n          }\n        });\n      }\n    );\n    const endSpan = (cb) => {\n      this.spanMap.delete(spanOptions.name);\n      runWithMaybePromise(maybePromise, () => {\n        runWithMaybeDelay(cb, maybeDurationCompensation);\n      });\n    };\n    const span = {\n      end: () => {\n        endSpan(() => resolveSpan?.());\n      },\n      fail: (_error) => {\n        error = error ?? _error;\n        endSpan(() => rejectSpan?.(_error));\n      }\n    };\n    this.spanMap.set(spanOptions.name, span);\n    return span;\n  }\n  getSpan(spanOptions) {\n    return this.spanMap.get(spanOptions.name);\n  }\n};\nvar createManualSpanRegistry = (options) => new ManualSpanRegistryImpl(options);\nexport {\n  createManualSpanRegistry,\n  generateRandomId,\n  isPromise,\n  runWithMaybeDelay,\n  runWithMaybePromise\n};\n","// src/factory.ts\nimport { createFallbackMonitoringClient } from \"@wix/monitoring\";\n\n// src/browser/client.ts\nimport { isPromise } from \"@wix/monitoring-common-sentry\";\n\n// src/abstract-browser-client.ts\nimport {\n  createManualSpanRegistry\n} from \"@wix/monitoring-common-sentry\";\n\n// src/context-utils.ts\nimport { generateTagsAndContext } from \"@wix/monitoring\";\nvar setTagsAndContextsOnScope = (scope, { tags, contexts }) => {\n  if (tags) {\n    scope.setTags(tags);\n  }\n  if (contexts) {\n    Object.entries(contexts).forEach(\n      ([key, value]) => typeof value !== \"undefined\" && scope.setContext(key, value)\n    );\n  }\n};\nvar setHostContextOnScope = (scope, hostContext) => {\n  if (!hostContext) {\n    return;\n  }\n  const { tags, contexts } = generateTagsAndContext(hostContext);\n  setTagsAndContextsOnScope(scope, { tags, contexts });\n};\n\n// src/abstract-browser-client.ts\nvar MandatorySDKMethods = [\"onLoad\", \"forceLoad\"];\nvar manualSpanRegistryMap = /* @__PURE__ */ new Map();\nvar AbstractSentryBrowserClient = class {\n  constructor(options) {\n    this.options = options;\n    this.resolvedState = null;\n    this.validateOptions = (options) => {\n      const missingSDKMethods = MandatorySDKMethods.filter(\n        (method) => typeof options.sentrySDK?.[method] !== \"function\"\n      );\n      if (missingSDKMethods.length > 0) {\n        throw new Error(\n          `Missing the following options.sentrySDK methods: ${missingSDKMethods.join(\", \")}`\n        );\n      }\n    };\n    this.validateOptions(options);\n    let manualSpanRegistry = manualSpanRegistryMap.get(options.dsn);\n    if (!manualSpanRegistry) {\n      manualSpanRegistry = createManualSpanRegistry({\n        // Force spans to be reported as individual transactions (one http request per one span)\n        forceTransaction: true\n      });\n      manualSpanRegistryMap.set(options.dsn, manualSpanRegistry);\n    }\n    this.manualSpanRegistry = manualSpanRegistry;\n  }\n  isFullSDK() {\n    return typeof this.options.sentrySDK.BrowserClient === \"function\";\n  }\n  init() {\n    if (this.resolvedState) {\n      return this.resolvedState;\n    }\n    const {\n      sentrySDK,\n      transport,\n      hostContext,\n      dsn,\n      release,\n      environment,\n      tracesSampleRate = 1,\n      debug = false\n    } = this.options;\n    const scope = new sentrySDK.Scope();\n    const sentryClient = new sentrySDK.BrowserClient({\n      dsn,\n      transport: transport ?? sentrySDK.makeFetchTransport,\n      integrations: sentrySDK.getDefaultIntegrations({}),\n      stackParser: sentrySDK.defaultStackParser,\n      tracesSampleRate: tracesSampleRate || 1,\n      debug,\n      environment,\n      release\n    });\n    setHostContextOnScope(scope, hostContext);\n    scope.setClient(sentryClient);\n    sentryClient.init();\n    this.resolvedState = {\n      sentrySDK,\n      scope,\n      sentryClient\n    };\n    return this.resolvedState;\n  }\n  loadFullSDK(handler) {\n    if (this.isFullSDK()) {\n      handler?.(this.init());\n      return;\n    }\n    if (this.promise) {\n      this.promise.then(handler);\n      return;\n    }\n    this.promise = new Promise((resolve) => {\n      this.options.sentrySDK.onLoad(() => {\n        if (this.resolvedState) {\n          return;\n        }\n        const resolvedState = this.init();\n        resolve(resolvedState);\n        handler?.(resolvedState);\n      });\n    });\n    this.options.sentrySDK.forceLoad();\n  }\n};\n\n// src/browser/client.ts\nvar SentryBrowserClient = class extends AbstractSentryBrowserClient {\n  constructor() {\n    super(...arguments);\n    /**\n     * Records a new breadcrumb which will be attached to future events.\n     * Breadcrumbs will be added to subsequent events to provide more context on user's actions prior to an error or crash.\n     * @param breadcrumb The breadcrumb to record.\n     */\n    this.addBreadcrumb = (breadcrumb) => {\n      const filteredBreadcrumb = {\n        type: breadcrumb.type,\n        category: breadcrumb.category,\n        message: breadcrumb.message,\n        level: breadcrumb.level,\n        data: breadcrumb.data\n      };\n      this.loadFullSDK(({ scope }) => {\n        scope.addBreadcrumb(filteredBreadcrumb);\n      });\n    };\n    /**\n     * Captures an exception event and sends it to Sentry.\n     * @param error The error to capture\n     * @param captureContext Optional additional data to attach to the Sentry event.\n     */\n    this.captureException = (error, captureContext) => {\n      this.loadFullSDK(({ sentryClient, scope }) => {\n        sentryClient.captureException(\n          error,\n          {\n            captureContext: {\n              level: captureContext?.level ?? \"error\",\n              tags: captureContext?.tags,\n              contexts: captureContext?.contexts\n            }\n          },\n          scope\n        );\n      });\n    };\n    /**\n     * Captures a message event and sends it to Sentry.\n     * @param message The message to capture\n     * @param captureContext Define the level of the message or pass in additional data to attach to the message.\n     */\n    this.captureMessage = (message, captureContext) => {\n      this.loadFullSDK(({ sentryClient, scope }) => {\n        sentryClient.captureMessage(\n          message,\n          captureContext?.level ?? \"error\",\n          {\n            captureContext: {\n              level: captureContext?.level ?? \"error\",\n              tags: captureContext?.tags,\n              contexts: captureContext?.contexts\n            }\n          },\n          scope\n        );\n      });\n    };\n    /**\n     * Wraps a function with a span and finishes the span after the function is done. The created span is the active span and will be used as parent by other spans created inside the function, as long as the function is executed while the scope is active.\n     * @param spanOptions The options for the span\n     * @param callback The function to wrap with a span\n     * @returns The return value of the callback\n     */\n    this.startSpan = (spanOptions, callback) => {\n      if (this.isFullSDK()) {\n        const { sentrySDK, scope } = this.init();\n        return sentrySDK.startSpan({ ...spanOptions, scope }, callback);\n      }\n      this.loadFullSDK();\n      const simulateAndReportSuccessfulSpan = (callbackResult2, startTime2) => {\n        const spanDuration = Date.now() - startTime2;\n        const simulatedCallback = () => {\n          return new Promise(\n            (resolve) => setTimeout(() => resolve(callbackResult2), spanDuration)\n          );\n        };\n        this.loadFullSDK(async ({ sentrySDK, scope }) => {\n          return sentrySDK.startSpan(\n            { ...spanOptions, scope },\n            simulatedCallback\n          );\n        });\n      };\n      const simulateAndReportFailedSpan = async (error2, startTime2) => {\n        const spanDuration = Date.now() - startTime2;\n        const simulatedCallback = () => {\n          return new Promise(\n            (_, reject) => setTimeout(() => reject(error2), spanDuration)\n          );\n        };\n        this.loadFullSDK(async ({ sentrySDK, scope }) => {\n          try {\n            await sentrySDK.startSpan(\n              { ...spanOptions, scope },\n              simulatedCallback\n            );\n          } catch (e) {\n            if (e?.message !== error2?.message) {\n              throw e;\n            }\n          }\n        });\n      };\n      const startTime = Date.now();\n      let callbackResult;\n      let error;\n      try {\n        callbackResult = callback();\n      } catch (e) {\n        error = e;\n      }\n      if (error) {\n        simulateAndReportFailedSpan(error, startTime);\n        throw error;\n      } else {\n        if (isPromise(callbackResult)) {\n          callbackResult.then((res) => simulateAndReportSuccessfulSpan(res, startTime)).catch((e) => simulateAndReportFailedSpan(e, startTime));\n        } else {\n          simulateAndReportSuccessfulSpan(callbackResult, startTime);\n        }\n        return callbackResult;\n      }\n    };\n    this.startSpanManual = (spanOptions) => {\n      const resolvedStateOrPromise = this.isFullSDK() ? this.init() : new Promise((resolve) => this.loadFullSDK(resolve));\n      const span = this.manualSpanRegistry.createSpan(\n        spanOptions,\n        resolvedStateOrPromise\n      );\n      return span;\n    };\n    this.endSpanManual = (spanOptions) => {\n      const span = this.manualSpanRegistry.getSpan(spanOptions);\n      span?.end();\n    };\n  }\n};\n\n// src/factory.ts\nvar unsupportedEnvironmentMessage = (version) => `Sentry SDK version \"${version}\" is not supported. Please make sure to use monitoring SDK only in supported environments.`;\nvar major = (version) => {\n  try {\n    return parseInt(version.split(\".\")[0], 10);\n  } catch {\n    console.warn(\"Failed to parse Sentry SDK version\");\n    return void 0;\n  }\n};\nvar createSentryBrowserClient = ({\n  sentrySDK,\n  dsn,\n  ...options\n}) => {\n  if (!sentrySDK) {\n    return createFallbackMonitoringClient(\n      \"Unsupported environment - Sentry SDK is not loaded into the environment. Please make sure to use monitoring SDK only in supported environments.\"\n    );\n  }\n  if (!dsn) {\n    return createFallbackMonitoringClient(\n      \"Missing Sentry DSN in the app's monitoring configuration. Please make sure to set it.\"\n    );\n  }\n  try {\n    const sentrySdkMajorVersion = sentrySDK.SDK_VERSION && major(sentrySDK.SDK_VERSION);\n    if (sentrySdkMajorVersion && sentrySdkMajorVersion < 7) {\n      return createFallbackMonitoringClient(\n        unsupportedEnvironmentMessage(sentrySDK.SDK_VERSION)\n      );\n    }\n    return new SentryBrowserClient({ ...options, dsn, sentrySDK });\n  } catch (e) {\n    return createFallbackMonitoringClient(\n      `Failed to initialize monitoring client: ${e.message}`\n    );\n  }\n};\nexport {\n  createSentryBrowserClient\n};\n","// src/client.ts\nimport { generateRandomId, isPromise } from \"@wix/monitoring-common-sentry\";\nvar PanoramaBrowserClient = class {\n  constructor(options) {\n    this.options = options;\n    this.captureException = (error, captureContext) => {\n      const { panoramaClient } = this.options;\n      if (!(error instanceof Error)) {\n        error = new Error(error);\n      }\n      panoramaClient.errorMonitor().reportError(error, this.contextToData(captureContext));\n    };\n    this.captureMessage = (message, captureContext) => {\n      const { panoramaClient } = this.options;\n      const logger = panoramaClient.logger();\n      let loggerByLevel;\n      switch (captureContext?.level) {\n        case \"error\":\n          loggerByLevel = logger.error;\n          break;\n        case \"warning\":\n          loggerByLevel = logger.warn;\n          break;\n        default:\n          loggerByLevel = logger.info;\n      }\n      loggerByLevel(message, this.contextToData(captureContext));\n    };\n    this.startSpan = (spanOptions, callback) => {\n      const { panoramaClient } = this.options;\n      const { name } = spanOptions;\n      let res;\n      const transaction = panoramaClient.transaction(name, {\n        id: generateRandomId()\n      });\n      const data = this.contextToData(spanOptions);\n      transaction.start(data);\n      try {\n        res = callback();\n        if (isPromise(res)) {\n          res = res.then((_res) => {\n            transaction.finish(data);\n            return _res;\n          }).catch((e) => {\n            this.reportErrorInContextOfSpan(e, spanOptions);\n            throw e;\n          });\n        } else {\n          transaction.finish(data);\n        }\n      } catch (e) {\n        this.reportErrorInContextOfSpan(e, spanOptions);\n        throw e;\n      }\n      return res;\n    };\n    this.addBreadcrumb = (breadcrumb) => {\n      const { panoramaClient } = this.options;\n      panoramaClient.errorMonitor().addBreadcrumb(breadcrumb);\n    };\n  }\n  contextToData(captureContext) {\n    return captureContext && {\n      ...captureContext?.tags && { tags: captureContext.tags },\n      ...captureContext?.contexts && { context: captureContext.contexts },\n      ...captureContext?.level && {\n        severity: captureContext.level\n      }\n    };\n  }\n  reportErrorInContextOfSpan(error, spanOptions) {\n    const { panoramaClient } = this.options;\n    const { name } = spanOptions;\n    const data = this.contextToData({\n      ...spanOptions,\n      contexts: { transaction: { name } }\n    });\n    panoramaClient.errorMonitor().reportError(error, data);\n  }\n  startSpanManual(spanOptions) {\n    const { panoramaClient } = this.options;\n    const { name } = spanOptions;\n    const transaction = panoramaClient.transaction(name, {\n      id: generateRandomId()\n    });\n    const data = this.contextToData(spanOptions);\n    transaction.start(data);\n    let reported = false;\n    const reportOnce = (cb) => {\n      if (reported) {\n        return;\n      }\n      reported = true;\n      cb();\n    };\n    return {\n      end: () => {\n        reportOnce(() => transaction.finish(data));\n      },\n      fail: (error) => {\n        reportOnce(() => this.reportErrorInContextOfSpan(error, spanOptions));\n      }\n    };\n  }\n  endSpanManual(spanOptions) {\n    const { panoramaClient } = this.options;\n    const { name } = spanOptions;\n    panoramaClient.transaction(name).finish();\n  }\n};\n\n// src/factory.ts\nimport { createFallbackMonitoringClient } from \"@wix/monitoring\";\nvar createPanoramaBrowserClient = (options) => {\n  const { panoramaClient } = options;\n  if (!panoramaClient) {\n    return createFallbackMonitoringClient(\"Missing Panorama client\");\n  }\n  return new PanoramaBrowserClient(options);\n};\nexport {\n  createPanoramaBrowserClient\n};\n","import { ProviderAPI } from '../types';\nimport { OpenedChannel } from '@wix/communication-channel';\n\nexport const registerHeightReporter = (\n  bridge: OpenedChannel<ProviderAPI>,\n  container: HTMLElement,\n) => {\n  const update = () => bridge.updateHeight(container.offsetHeight);\n  const resizeObserver = new ResizeObserver(update);\n  resizeObserver.observe(container);\n  return () => resizeObserver.disconnect();\n};\n","const origins = ['https://manage.wix.com', 'https://manage.editorx.com'];\nconst allowedOrigins = new Set(origins);\nexport const isWixOrigin = (origin: string) => allowedOrigins.has(origin);\n","function safeParseEssentials(essentials?: string | null) {\n  if (!essentials) {\n    return undefined;\n  }\n  try {\n    return JSON.parse(decodeURIComponent(essentials));\n  } catch (e) {\n    console.warn(\n      'Failed to parse \"essentials\" query parameter. Make sure to run the code inside a supported Wix App extension.',\n      e,\n    );\n    return undefined;\n  }\n}\n\nexport function getEssentialsFromQueryParams(queryParams: URLSearchParams) {\n  return queryParams.has('essentials')\n    ? safeParseEssentials(queryParams.get('essentials'))\n    : undefined;\n}\n","import { open } from '@wix/communication-channel';\nimport { getMonitoringClientFunction } from '@wix/monitoring-browser-sdk-host';\nimport { CreateHost, ProviderAPI, OnBeforeUnload } from './types';\nimport { registerHeightReporter } from './helpers/registerHeightReporter';\nimport { isWixOrigin } from './helpers/isWixOrigin';\nimport { registerBeforeUnloadHandler } from './helpers/registerOnBeforeUnload';\nimport { getEssentialsFromQueryParams } from './helpers/essentials';\nimport { GetSiteInfo } from './types/getSiteInfo';\n\ndeclare global {\n  interface Window {\n    Sentry?: any;\n  }\n}\n\nexport const createHost: CreateHost = function (config = {}) {\n  // when full url is provided (worker case) use it and ignore own location search\n  const searchString =\n    (config.fullUrl && new URL(config.fullUrl).search) ||\n    (typeof window !== 'undefined' && window.location.search) ||\n    '';\n  const queryParams = new URLSearchParams(searchString);\n  const origin = config.origin || queryParams.get('origin') || '';\n  const postMessage =\n    config.postMessage || window.parent.postMessage.bind(window.parent);\n\n  if (!isWixOrigin(origin)) {\n    throw new Error(\n      `Wix Dashboard SDK: Unable to establish a connection with the Wix dashboard. Please ensure that you are running your app within the Wix dashboard.`,\n    );\n  }\n\n  const { channel, close } = open<ProviderAPI>({ postMessage, origin });\n  const closeMethods = [close];\n\n  if (config.autoHeightUpdate === undefined || config.autoHeightUpdate) {\n    const element = config.autoHeightElement || document.documentElement;\n    const clearHeightReport = registerHeightReporter(channel, element);\n    closeMethods.push(() => clearHeightReport());\n  }\n\n  const { onBeforeUnload, clearBeforeUnloadHandler } =\n    registerBeforeUnloadHandler(channel);\n  closeMethods.push(clearBeforeUnloadHandler);\n\n  const siteInfo = parseSiteInfo(queryParams.get('siteInfo') || '');\n  const getSiteInfoSync: GetSiteInfo = () => siteInfo;\n\n  const channelProxy = new Proxy(channel, {\n    get(target, prop, receiver) {\n      if (prop === 'onBeforeUnload') {\n        return onBeforeUnload;\n      }\n      if (prop === 'getSiteInfo') {\n        return getSiteInfoSync;\n      }\n      return Reflect.get(target, prop, receiver);\n    },\n  }) as typeof channel & {\n    onBeforeUnload: OnBeforeUnload;\n    getSiteInfo: GetSiteInfo; // keeping it sync\n  };\n\n  const { monitoring, ...essentials } =\n    getEssentialsFromQueryParams(queryParams) || {};\n\n  const getMonitoringClient = getMonitoringClientFunction({\n    hostContext: monitoring?.context,\n    monitoringConfig: monitoring?.config,\n    sentrySDK: typeof window !== 'undefined' ? window.Sentry : undefined,\n  });\n\n  return {\n    channel: channelProxy,\n    close: () => closeMethods.forEach((method) => method()),\n    getMonitoringClient,\n    essentials,\n  };\n};\n\nconst parseSiteInfo = (siteInfo: string) => {\n  try {\n    return JSON.parse(decodeURIComponent(siteInfo));\n  } catch (e) {\n    console.warn(\n      'Failed to parse \"siteInfo\" query parameter. Make sure to run the code inside a supported Wix App extension.',\n      e,\n    );\n    return {};\n  }\n};\n","import { OpenedChannel } from '@wix/communication-channel';\nimport { ProviderAPI, OnBeforeUnload } from '../types';\n\nexport const registerBeforeUnloadHandler = (\n  channel: OpenedChannel<ProviderAPI>,\n) => {\n  const eventTarget = new EventTarget();\n  const isInWorker = typeof window === 'undefined';\n\n  const onIframeBeforeUnload = (event: BeforeUnloadEvent) => {\n    const shouldUnloadWithoutConfirmation = eventTarget.dispatchEvent(\n      new CustomEvent('beforeunload', {\n        cancelable: true,\n      }),\n    );\n\n    if (!shouldUnloadWithoutConfirmation) {\n      event.preventDefault();\n      event.returnValue = true; // Chrome requires returnValue to be set\n    }\n  };\n\n  const onBeforeUnloadHandle = channel.onBeforeUnload(onIframeBeforeUnload);\n\n  const clearBeforeUnloadHandler = () => {\n    if (!isInWorker) {\n      window.removeEventListener('beforeunload', onIframeBeforeUnload);\n    }\n    onBeforeUnloadHandle.then(({ remove }) => remove());\n  };\n  if (!isInWorker) {\n    window.addEventListener('beforeunload', onIframeBeforeUnload);\n    window.addEventListener('unload', clearBeforeUnloadHandler);\n  }\n\n  const onBeforeUnload: OnBeforeUnload = (callback) => {\n    eventTarget.addEventListener('beforeunload', callback);\n\n    const remove = () => {\n      eventTarget.removeEventListener('beforeunload', callback);\n    };\n\n    return { remove };\n  };\n\n  return { onBeforeUnload, clearBeforeUnloadHandler };\n};\n","// src/monitoring-client.ts\nimport { createFallbackMonitoringClient } from \"@wix/monitoring\";\nimport { createSentryBrowserClient } from \"@wix/monitoring-browser-sentry\";\nimport {\n  createPanoramaBrowserClient\n} from \"@wix/monitoring-browser-panorama\";\nvar isSentryConfig = (monitoringConfig) => monitoringConfig?.type === \"SENTRY\";\nvar isPanoramaConfig = (monitoringConfig) => monitoringConfig?.type === \"PANORAMA\";\nvar getMonitoringClientFunction = ({\n  sentrySDK,\n  sentryTransport,\n  panoramaClient,\n  monitoringConfig,\n  hostContext\n}) => {\n  if (isSentryConfig(monitoringConfig)) {\n    const { sentryOptions } = monitoringConfig;\n    return () => createSentryBrowserClient({\n      dsn: sentryOptions?.dsn,\n      hostContext,\n      sentrySDK,\n      transport: sentryTransport\n    });\n  } else if (isPanoramaConfig(monitoringConfig)) {\n    return () => createPanoramaBrowserClient({ panoramaClient });\n  }\n  return () => createFallbackMonitoringClient(\n    \"Invalid monitoring configuration. Please check the monitoring setup of your application.\"\n  );\n};\nexport {\n  getMonitoringClientFunction\n};\n","import { createDashboardModule } from './dashboardHostModule';\nimport { createHost } from './hostPlatform';\n\nexport const dashboard = createDashboardModule({\n  createHost,\n});\n\nexport * from './types';\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v16.14.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var l=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,z=n?Symbol.for(\"react.memo\"):60115,A=n?Symbol.for(\"react.lazy\"):\n60116,B=\"function\"===typeof Symbol&&Symbol.iterator;function C(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction G(){}G.prototype=F.prototype;function H(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps,f)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}\nfunction N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();d.result=a;d.keyPrefix=b;d.func=c;d.context=e;d.count=0;return d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}\nfunction S(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>Q.length&&Q.push(a)}\nfunction T(a,b,c,e){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,\"\"===b?\".\"+U(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+U(d,k);g+=T(d,f,c,e)}else if(null===a||\"object\"!==typeof a?f=null:(f=B&&a[B]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(d=a.next()).done;)d=d.value,f=b+U(d,k++),g+=T(d,f,c,e);else if(\"object\"===d)throw c=\"\"+a,Error(C(31,\"[object Object]\"===c?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":c,\"\"));return g}function V(a,b,c){return null==a?0:T(a,\"\",b,c)}function U(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}\nfunction aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?X(a,e,c,function(a){return a}):null!=a&&(O(a)&&(a=N(a,d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(P,\"$&/\")+\"/\")+c)),e.push(a))}function X(a,b,c,e,d){var g=\"\";null!=c&&(g=(\"\"+c).replace(P,\"$&/\")+\"/\");b=R(b,g,e,d);V(a,aa,b);S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}\nvar ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];X(a,e,null,b,c);return e},forEach:function(a,b,c){if(null==a)return a;b=R(null,null,b,c);V(a,W,b);S(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];X(a,b,null,function(a){return a});return b},only:function(a){if(!O(a))throw Error(C(143));return a}};\nexports.Component=F;exports.Fragment=r;exports.Profiler=u;exports.PureComponent=H;exports.StrictMode=t;exports.Suspense=y;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=J.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,\nkey:d,ref:g,props:e,_owner:k}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:x,render:a}};exports.isValidElement=O;\nexports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}};exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return Z().useCallback(a,b)};exports.useContext=function(a,b){return Z().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return Z().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return Z().useMemo(a,b)};exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)};exports.useRef=function(a){return Z().useRef(a)};exports.useState=function(a){return Z().useState(a)};exports.version=\"16.14.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _extends() {\n  return module.exports = _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _extends.apply(null, arguments);\n}\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// src/index.ts\nvar wixContext = {};\nexport {\n  wixContext\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// src/event-handlers-modules.ts\nfunction EventDefinition(type, isDomainEvent = false, transformations = (x) => x) {\n  return () => ({\n    __type: \"event-definition\",\n    type,\n    isDomainEvent,\n    transformations\n  });\n}\n\n// src/service-plugins.ts\nfunction ServicePluginDefinition(componentType, methods) {\n  return {\n    __type: \"service-plugin-definition\",\n    componentType,\n    methods\n  };\n}\nvar SERVICE_PLUGIN_ERROR_TYPE = \"wix_spi_error\";\nexport {\n  EventDefinition,\n  SERVICE_PLUGIN_ERROR_TYPE,\n  ServicePluginDefinition\n};\n","const parseMethod = (method) => {\n    switch (method) {\n        case 'get':\n        case 'GET':\n            return 'GET';\n        case 'post':\n        case 'POST':\n            return 'POST';\n        case 'put':\n        case 'PUT':\n            return 'PUT';\n        case 'delete':\n        case 'DELETE':\n            return 'DELETE';\n        case 'patch':\n        case 'PATCH':\n            return 'PATCH';\n        case 'head':\n        case 'HEAD':\n            return 'HEAD';\n        case 'options':\n        case 'OPTIONS':\n            return 'OPTIONS';\n        default:\n            throw new Error(`Unknown method: ${method}`);\n    }\n};\nexport const toHTTPModule = (factory) => (httpClient) => async (payload) => {\n    let requestOptions;\n    const HTTPFactory = (context) => {\n        requestOptions = factory(payload)(context);\n        if (requestOptions.url === undefined) {\n            throw new Error('Url was not successfully created for this request, please reach out to support channels for assistance.');\n        }\n        const { method, url, params } = requestOptions;\n        return {\n            ...requestOptions,\n            method: parseMethod(method),\n            url,\n            data: requestOptions.data,\n            params,\n        };\n    };\n    try {\n        const response = await httpClient.request(HTTPFactory);\n        if (requestOptions === undefined) {\n            throw new Error('Request options were not created for this request, please reach out to support channels for assistance.');\n        }\n        const transformations = Array.isArray(requestOptions.transformResponse)\n            ? requestOptions.transformResponse\n            : [requestOptions.transformResponse];\n        /**\n         * Based on Axios implementation:\n         * https://github.com/axios/axios/blob/3f53eb6960f05a1f88409c4b731a40de595cb825/lib/core/transformData.js#L22\n         */\n        let data = response.data;\n        transformations.forEach((transform) => {\n            if (transform) {\n                data = transform(response.data, response.headers);\n            }\n        });\n        return data;\n    }\n    catch (e) {\n        if (typeof e === 'object' &&\n            e !== null &&\n            'response' in e &&\n            typeof e.response === 'object' &&\n            e.response !== null &&\n            'data' in e.response) {\n            throw e.response.data;\n        }\n        throw e;\n    }\n};\n/*\n * Because of issues with tree-shaking, we cant really put static parameter on module.\n * We still have check for __isAmbassador for backward compatibility\n */\nexport const isAmbassadorModule = (module) => {\n    if (module.__isAmbassador) {\n        return true;\n    }\n    const fn = module();\n    return Boolean(fn.__isAmbassador);\n};\n","export const PUBLIC_METADATA_KEY = '__metadata';\nexport const DEFAULT_API_URL = 'www.wixapis.com';\nexport const DEFAULT_EDGE_API_URL = 'edge.wixapis.com';\nexport const FORCE_WRITE_API_URLS = ['/ecom/v1/carts/current'];\n","export class FetchErrorResponse extends Error {\n    message;\n    response;\n    constructor(message, response) {\n        super(message);\n        this.message = message;\n        this.response = response;\n    }\n    async details() {\n        const dataError = await this.response.json();\n        return errorBuilder(this.response.status, dataError?.message, dataError?.details, {\n            requestId: this.response.headers.get('X-Wix-Request-Id'),\n            details: dataError,\n        });\n    }\n}\nconst errorBuilder = (code, description, details, data) => {\n    return {\n        details: {\n            ...(!details?.validationError && {\n                applicationError: {\n                    description,\n                    code,\n                    data,\n                },\n            }),\n            ...details,\n        },\n        message: description,\n        requestId: data?.requestId,\n    };\n};\n","export const WixBIHeaderName = 'x-wix-bi-gateway';\nexport function biHeaderGenerator(apiMetadata, publicMetadata, environment) {\n    return {\n        [WixBIHeaderName]: objectToKeyValue({\n            environment: `js-sdk${environment ? `-${environment}` : ``}`,\n            'package-name': apiMetadata.packageName ?? publicMetadata?.PACKAGE_NAME,\n            'method-fqn': apiMetadata.methodFqn,\n            entity: apiMetadata.entityFqdn,\n        }),\n    };\n}\nfunction objectToKeyValue(input) {\n    return Object.entries(input)\n        .filter(([_, value]) => Boolean(value))\n        .map(([key, value]) => `${key}=${value}`)\n        .join(',');\n}\n","import { wixContext } from '@wix/sdk-context';\nexport function resolveContext() {\n    const oldContext = typeof $wixContext !== 'undefined' && $wixContext.initWixModules\n        ? $wixContext.initWixModules\n        : typeof globalThis.__wix_context__ !== 'undefined' &&\n            globalThis.__wix_context__.initWixModules\n            ? globalThis.__wix_context__.initWixModules\n            : undefined;\n    if (oldContext) {\n        return {\n            // @ts-expect-error\n            initWixModules(modules, elevated) {\n                return runWithoutContext(() => oldContext(modules, elevated));\n            },\n            fetchWithAuth() {\n                throw new Error('fetchWithAuth is not available in this context');\n            },\n            graphql() {\n                throw new Error('graphql is not available in this context');\n            },\n        };\n    }\n    const contextualClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.client\n        : typeof wixContext.client !== 'undefined'\n            ? wixContext.client\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.client\n                : undefined;\n    const elevatedClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.elevatedClient\n        : typeof wixContext.elevatedClient !== 'undefined'\n            ? wixContext.elevatedClient\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.elevatedClient\n                : undefined;\n    if (!contextualClient && !elevatedClient) {\n        return;\n    }\n    return {\n        initWixModules(wixModules, elevated) {\n            if (elevated) {\n                if (!elevatedClient) {\n                    throw new Error('An elevated client is required to use elevated modules. Make sure to initialize the Wix context with an elevated client before using elevated SDK modules');\n                }\n                return runWithoutContext(() => elevatedClient.use(wixModules));\n            }\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return runWithoutContext(() => contextualClient.use(wixModules));\n        },\n        fetchWithAuth: (urlOrRequest, requestInit) => {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.fetchWithAuth(urlOrRequest, requestInit);\n        },\n        async graphql(query, variables, opts) {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.graphql(query, variables, opts);\n        },\n    };\n}\nexport function contextualizeHostModule(hostModule, prop) {\n    return (...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(hostModule)[prop].apply(undefined, args);\n    };\n}\nexport function contextualizeRESTModule(restModule, expectedArgsLength) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context\n            .initWixModules(restModule, args[expectedArgsLength]?.suppressAuth ? true : false)\n            .apply(undefined, args);\n    });\n}\nexport function contextualizeEventDefinitionModule(eventDefinition) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(eventDefinition).apply(undefined, args);\n    });\n}\nexport function contextualizeSerivcePluginModule(servicePlugin) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(servicePlugin).apply(undefined, args);\n    });\n}\nexport * from './context-v2.js';\nexport function runWithoutContext(fn) {\n    const globalContext = globalThis.__wix_context__;\n    const moduleContext = {\n        client: wixContext.client,\n        elevatedClient: wixContext.elevatedClient,\n    };\n    let closureContext;\n    globalThis.__wix_context__ = undefined;\n    wixContext.client = undefined;\n    wixContext.elevatedClient = undefined;\n    if (typeof $wixContext !== 'undefined') {\n        closureContext = {\n            client: $wixContext?.client,\n            elevatedClient: $wixContext?.elevatedClient,\n        };\n        delete $wixContext.client;\n        delete $wixContext.elevatedClient;\n    }\n    try {\n        return fn();\n    }\n    finally {\n        globalThis.__wix_context__ = globalContext;\n        wixContext.client = moduleContext.client;\n        wixContext.elevatedClient = moduleContext.elevatedClient;\n        if (typeof $wixContext !== 'undefined') {\n            $wixContext.client = closureContext.client;\n            $wixContext.elevatedClient = closureContext.elevatedClient;\n        }\n    }\n}\n","import { biHeaderGenerator } from './bi/biHeaderGenerator.js';\nimport { DEFAULT_API_URL, DEFAULT_EDGE_API_URL } from './common.js';\nimport { runWithoutContext } from '@wix/sdk-runtime/context';\nexport function buildRESTDescriptor(origFunc, publicMetadata, boundFetch, wixAPIFetch, getActiveToken, options, hostName, useCDN) {\n    return runWithoutContext(() => origFunc({\n        request: async (factory) => {\n            const requestOptions = factory({\n                host: options?.HTTPHost || DEFAULT_API_URL,\n            });\n            let request = requestOptions;\n            if (request.method === 'GET' &&\n                request.fallback?.length &&\n                request.params.toString().length > 4000) {\n                request = requestOptions.fallback[0];\n            }\n            const domain = options?.HTTPHost ?? DEFAULT_API_URL;\n            let url = `https://${useCDN ? DEFAULT_EDGE_API_URL : domain}${request.url}`;\n            if (request.params && request.params.toString()) {\n                url += `?${request.params.toString()}`;\n            }\n            try {\n                const biHeader = biHeaderGenerator(requestOptions, publicMetadata, hostName);\n                const res = await boundFetch(url, {\n                    method: request.method,\n                    ...(request.data && {\n                        body: JSON.stringify(request.data),\n                    }),\n                    headers: {\n                        ...biHeader,\n                    },\n                });\n                if (res.status !== 200) {\n                    let dataError = null;\n                    try {\n                        dataError = await res.json();\n                    }\n                    catch (e) {\n                        //\n                    }\n                    throw errorBuilder(res.status, dataError?.message, dataError?.details, {\n                        requestId: res.headers.get('X-Wix-Request-Id'),\n                        details: dataError,\n                    });\n                }\n                const data = await res.json();\n                return {\n                    data,\n                    headers: res.headers,\n                    status: res.status,\n                    statusText: res.statusText,\n                };\n            }\n            catch (e) {\n                if (e.message?.includes('fetch is not defined')) {\n                    console.error('Node.js v18+ is required');\n                }\n                throw e;\n            }\n        },\n        fetchWithAuth: boundFetch,\n        wixAPIFetch,\n        getActiveToken,\n    }));\n}\nconst errorBuilder = (code, description, details, data) => {\n    return {\n        response: {\n            data: {\n                details: {\n                    ...(!details?.validationError && {\n                        applicationError: {\n                            description,\n                            code,\n                            data,\n                        },\n                    }),\n                    ...details,\n                },\n                message: description,\n            },\n            status: code,\n        },\n        requestId: data?.requestId,\n    };\n};\n","// Inlined from https://github.com/ai/nanoevents/blob/main/index.js\n/**\n * Create event emitter.\n *\n * ```js\n * import { createNanoEvents } from 'nanoevents'\n *\n * class Ticker {\n * constructor() {\n * this.emitter = createNanoEvents()\n * }\n * on(...args) {\n * return this.emitter.on(...args)\n * }\n * tick() {\n * this.emitter.emit('tick')\n * }\n * }\n * ```\n * @returns Event emitter.\n */\nexport function createNanoEvents() {\n    return {\n        emit(event, ...args) {\n            for (let i = 0, callbacks = this.events[event] || [], length = callbacks.length; i < length; i++) {\n                callbacks[i](...args);\n            }\n        },\n        events: {},\n        on(event, cb) {\n            (this.events[event] ||= []).push(cb);\n            return () => {\n                this.events[event] = this.events[event]?.filter((i) => cb !== i);\n            };\n        },\n    };\n}\n","import { EventDefinition, } from '@wix/sdk-types';\nimport { createNanoEvents } from './nanoevents.js';\nexport const isEventHandlerModule = (val) => val.__type === 'event-definition';\nexport function buildEventDefinition(eventDefinition, registerHandler) {\n    return (handler) => {\n        registerHandler(eventDefinition, handler);\n    };\n}\nfunction runHandler(eventDefinition, handler, payload, baseEventMetadata) {\n    let envelope;\n    if (eventDefinition.isDomainEvent) {\n        const domainEventPayload = payload;\n        const { deletedEvent, actionEvent, createdEvent, updatedEvent, ...domainEventMetadata } = domainEventPayload;\n        const metadata = {\n            ...baseEventMetadata,\n            ...domainEventMetadata,\n        };\n        if (deletedEvent) {\n            if (deletedEvent?.deletedEntity) {\n                envelope = {\n                    entity: deletedEvent?.deletedEntity,\n                    metadata,\n                };\n            }\n            else {\n                envelope = { metadata };\n            }\n        }\n        else if (actionEvent) {\n            envelope = {\n                data: actionEvent.body,\n                metadata,\n            };\n        }\n        else {\n            envelope = {\n                entity: createdEvent?.entity ?? updatedEvent?.currentEntity,\n                metadata,\n            };\n        }\n    }\n    else {\n        envelope = {\n            data: payload,\n            metadata: baseEventMetadata,\n        };\n    }\n    const transformFromRESTFn = eventDefinition.transformations ?? ((x) => x);\n    return handler(transformFromRESTFn(envelope));\n}\nexport function eventHandlersModules(authStrategy) {\n    const eventHandlers = new Map();\n    const webhooksEmitter = createNanoEvents();\n    const client = {\n        ...webhooksEmitter,\n        getRegisteredEvents: () => eventHandlers,\n        async process(jwt, opts = {\n            expectedEvents: [],\n        }) {\n            const { eventType, identity, instanceId, payload } = await this.parseJWT(jwt);\n            const allExpectedEvents = [\n                ...opts.expectedEvents,\n                ...Array.from(eventHandlers.keys()).map((type) => ({ type })),\n            ];\n            if (allExpectedEvents.length > 0 &&\n                !allExpectedEvents.some(({ type }) => type === eventType)) {\n                throw new Error(`Unexpected event type: ${eventType}. Expected one of: ${allExpectedEvents\n                    .map((x) => x.type)\n                    .join(', ')}`);\n            }\n            const handlers = eventHandlers.get(eventType) ?? [];\n            await Promise.all(handlers.map(({ eventDefinition, handler }) => runHandler(eventDefinition, handler, payload, {\n                instanceId,\n                identity,\n            })));\n            return {\n                instanceId,\n                eventType,\n                payload,\n                identity,\n            };\n        },\n        async processRequest(request, opts) {\n            const body = await request.text();\n            return this.process(body, opts);\n        },\n        async parseJWT(jwt) {\n            if (!authStrategy.decodeJWT) {\n                throw new Error('decodeJWT is not supported by the authentication strategy');\n            }\n            const { decoded, valid } = await authStrategy.decodeJWT(jwt);\n            if (!valid) {\n                throw new Error('JWT is not valid');\n            }\n            if (typeof decoded.data !== 'string') {\n                throw new Error(`Unexpected type of JWT data: expected string, got ${typeof decoded.data}`);\n            }\n            const parsedDecoded = JSON.parse(decoded.data);\n            const eventType = parsedDecoded.eventType;\n            const instanceId = parsedDecoded.instanceId;\n            const identity = parsedDecoded.identity\n                ? JSON.parse(parsedDecoded.identity)\n                : undefined;\n            const payload = JSON.parse(parsedDecoded.data);\n            return {\n                instanceId,\n                eventType,\n                payload,\n                identity,\n            };\n        },\n        async parseRequest(request) {\n            const jwt = await request.text();\n            return this.parseJWT(jwt);\n        },\n        async executeHandlers(event) {\n            const allExpectedEvents = Array.from(eventHandlers.keys()).map((type) => ({ type }));\n            if (allExpectedEvents.length > 0 &&\n                !allExpectedEvents.some(({ type }) => type === event.eventType)) {\n                throw new Error(`Unexpected event type: ${event.eventType}. Expected one of: ${allExpectedEvents\n                    .map((x) => x.type)\n                    .join(', ')}`);\n            }\n            const handlers = eventHandlers.get(event.eventType) ?? [];\n            await Promise.all(handlers.map(({ eventDefinition, handler }) => runHandler(eventDefinition, handler, event.payload, {\n                instanceId: event.instanceId,\n                identity: event.identity,\n            })));\n        },\n        apps: {\n            AppInstalled: EventDefinition('AppInstalled')(),\n            AppRemoved: EventDefinition('AppRemoved')(),\n        },\n    };\n    return {\n        initModule(eventDefinition) {\n            return (handler) => {\n                const handlers = eventHandlers.get(eventDefinition.type) ?? [];\n                handlers.push({ eventDefinition, handler });\n                eventHandlers.set(eventDefinition.type, handlers);\n                webhooksEmitter.emit('registered', eventDefinition);\n            };\n        },\n        client,\n    };\n}\n","import { wixContext } from '@wix/sdk-context';\nimport { SERVICE_PLUGIN_ERROR_TYPE, } from '@wix/sdk-types';\nimport { isAmbassadorModule, toHTTPModule } from './ambassador-modules.js';\nimport { DEFAULT_API_URL, PUBLIC_METADATA_KEY } from './common.js';\nimport { FetchErrorResponse } from './fetch-error.js';\nimport { getDefaultContentHeader, isObject } from './helpers.js';\nimport { buildHostModule, isHostModule } from './host-modules.js';\nimport { buildRESTDescriptor } from './rest-modules.js';\nimport { eventHandlersModules, isEventHandlerModule, } from './event-handlers-modules.js';\nimport { isServicePluginModule, servicePluginsModules, } from './service-plugin-modules.js';\nimport { runWithoutContext } from '@wix/sdk-runtime/context';\nexport const X_WIX_CONSISTENT_HEADER = 'X-Wix-Consistent';\nexport function createClient(config) {\n    const _headers = config.headers || { Authorization: '' };\n    const authStrategy = config.auth ||\n        {\n            getAuthHeaders: (_) => Promise.resolve({ headers: {} }),\n        };\n    const boundGetAuthHeaders = authStrategy.getAuthHeaders.bind(undefined, config.host);\n    authStrategy.getAuthHeaders = boundGetAuthHeaders;\n    const fetchWithAuth = async (urlOrRequest, requestInit) => {\n        const authHeaders = await boundGetAuthHeaders();\n        const headers = {\n            ...(requestInit?.headers ?? {}),\n            ...authHeaders.headers,\n            ...(_headers[X_WIX_CONSISTENT_HEADER]\n                ? { [X_WIX_CONSISTENT_HEADER]: _headers[X_WIX_CONSISTENT_HEADER] }\n                : {}),\n        };\n        if (typeof urlOrRequest === 'string' || urlOrRequest instanceof URL) {\n            const response = await fetch(urlOrRequest, {\n                ...requestInit,\n                headers,\n            });\n            const consistentHeader = findConsistentHeader(response);\n            if (consistentHeader) {\n                _headers[X_WIX_CONSISTENT_HEADER] = consistentHeader;\n            }\n            return response;\n        }\n        else {\n            for (const [k, v] of Object.entries(headers)) {\n                if (typeof v === 'string') {\n                    urlOrRequest.headers.set(k, v);\n                }\n            }\n            const response = await fetch(urlOrRequest, requestInit);\n            const consistentHeader = findConsistentHeader(response);\n            if (consistentHeader) {\n                _headers[X_WIX_CONSISTENT_HEADER] = consistentHeader;\n            }\n            return response;\n        }\n    };\n    const { client: servicePluginsClient, initModule: initServicePluginModule } = servicePluginsModules(authStrategy);\n    const { client: eventHandlersClient, initModule: initEventHandlerModule } = eventHandlersModules(authStrategy);\n    const boundFetch = async (url, options) => {\n        const authHeaders = await boundGetAuthHeaders();\n        const defaultContentTypeHeader = getDefaultContentHeader(options);\n        const response = await fetch(url, {\n            ...options,\n            headers: {\n                ...defaultContentTypeHeader,\n                ..._headers,\n                ...authHeaders?.headers,\n                ...options?.headers,\n                ...config.host?.essentials?.passThroughHeaders,\n            },\n        });\n        const consistentHeader = findConsistentHeader(response);\n        if (consistentHeader) {\n            _headers[X_WIX_CONSISTENT_HEADER] = consistentHeader;\n        }\n        return response;\n    };\n    // This is typed as `any` because when trying to properly type it as defined\n    // on the WixClient, typescript starts failing with `Type instantiation is\n    // excessively deep and possibly infinite.`\n    const use = (modules, metadata) => {\n        if (isEventHandlerModule(modules)) {\n            return initEventHandlerModule(modules);\n        }\n        else if (isServicePluginModule(modules)) {\n            return initServicePluginModule(modules);\n        }\n        else if (isHostModule(modules) && config.host) {\n            return buildHostModule(modules, config.host);\n        }\n        else if (typeof modules === 'function') {\n            // The generated namespaces all have the error classes on them and\n            // a class is also a function, so we need to explicitly ignore these\n            // error classes using a static field that exists on them.\n            if ('__type' in modules && modules.__type === SERVICE_PLUGIN_ERROR_TYPE) {\n                return modules;\n            }\n            const apiBaseUrl = config.host?.apiBaseUrl ?? DEFAULT_API_URL;\n            const shouldUseCDN = config.useCDN === undefined ? config.auth?.shouldUseCDN : config.useCDN;\n            return buildRESTDescriptor(runWithoutContext(() => isAmbassadorModule(modules))\n                ? toHTTPModule(modules)\n                : modules, metadata ?? {}, boundFetch, (relativeUrl, fetchOptions) => {\n                const finalUrl = new URL(relativeUrl, `https://${apiBaseUrl}`);\n                finalUrl.host = apiBaseUrl;\n                finalUrl.protocol = 'https';\n                return boundFetch(finalUrl.toString(), fetchOptions);\n            }, authStrategy.getActiveToken, { HTTPHost: apiBaseUrl }, config.host?.name, shouldUseCDN);\n        }\n        else if (isObject(modules)) {\n            return Object.fromEntries(Object.entries(modules).map(([key, value]) => {\n                return [key, use(value, modules[PUBLIC_METADATA_KEY])];\n            }));\n        }\n        else {\n            return modules;\n        }\n    };\n    const setHeaders = (headers) => {\n        for (const k in headers) {\n            _headers[k] = headers[k];\n        }\n    };\n    const wrappedModules = config.modules\n        ? use(config.modules)\n        : {};\n    return {\n        ...wrappedModules,\n        auth: authStrategy,\n        setHeaders,\n        use,\n        enableContext(contextType, opts = { elevated: false }) {\n            if (contextType === 'global') {\n                if (globalThis.__wix_context__ != null) {\n                    if (opts.elevated) {\n                        globalThis.__wix_context__.elevatedClient = this;\n                    }\n                    else {\n                        globalThis.__wix_context__.client = this;\n                    }\n                }\n                else {\n                    if (opts.elevated) {\n                        globalThis.__wix_context__ = { elevatedClient: this };\n                    }\n                    else {\n                        globalThis.__wix_context__ = { client: this };\n                    }\n                }\n            }\n            else {\n                if (opts.elevated) {\n                    wixContext.elevatedClient = this;\n                }\n                else {\n                    wixContext.client = this;\n                }\n            }\n        },\n        /**\n         * @param relativeUrl The URL to fetch relative to the API base URL\n         * @param options The fetch options\n         * @returns The fetch Response object\n         * @deprecated Use `fetchWithAuth` instead\n         */\n        fetch: (relativeUrl, options) => {\n            const apiBaseUrl = config.host?.apiBaseUrl ?? DEFAULT_API_URL;\n            const finalUrl = new URL(relativeUrl, `https://${apiBaseUrl}`);\n            finalUrl.host = apiBaseUrl;\n            finalUrl.protocol = 'https';\n            return boundFetch(finalUrl.toString(), options);\n        },\n        fetchWithAuth,\n        async graphql(query, variables, opts = {\n            apiVersion: 'alpha',\n        }) {\n            const apiBaseUrl = config?.host?.apiBaseUrl ?? DEFAULT_API_URL;\n            const res = await boundFetch(`https://${apiBaseUrl}/graphql/${opts.apiVersion}`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ query, variables }),\n            });\n            if (res.status !== 200) {\n                throw new FetchErrorResponse(`GraphQL request failed with status ${res.status}`, res);\n            }\n            const { data, errors } = await res.json();\n            return { data: data ?? {}, errors };\n        },\n        webhooks: eventHandlersClient,\n        servicePlugins: servicePluginsClient,\n    };\n}\nfunction findConsistentHeader(response) {\n    return (response.headers?.get(X_WIX_CONSISTENT_HEADER) ??\n        response.headers?.get(X_WIX_CONSISTENT_HEADER.toLowerCase()));\n}\n","import { createNanoEvents } from './nanoevents.js';\nexport const isServicePluginModule = (val) => val.__type === 'service-plugin-definition';\nexport function servicePluginsModules(authStrategy) {\n    const servicePluginsImplementations = new Map();\n    const servicePluginsEmitter = createNanoEvents();\n    const client = {\n        ...servicePluginsEmitter,\n        getRegisteredServicePlugins: () => servicePluginsImplementations,\n        async parseJWT(jwt) {\n            if (!authStrategy.decodeJWT) {\n                throw new Error('decodeJWT is not supported by the authentication strategy');\n            }\n            const { decoded, valid } = await authStrategy.decodeJWT(jwt, true);\n            if (!valid) {\n                throw new Error('JWT is not valid');\n            }\n            if (typeof decoded.data !== 'object' ||\n                decoded.data === null ||\n                !('metadata' in decoded.data) ||\n                typeof decoded.data.metadata !== 'object' ||\n                decoded.data.metadata === null ||\n                !('appExtensionType' in decoded.data.metadata) ||\n                typeof decoded.data.metadata.appExtensionType !== 'string') {\n                throw new Error('Unexpected JWT data: expected object with metadata.appExtensionType string');\n            }\n            return decoded.data;\n        },\n        async process(request) {\n            const servicePluginRequest = await this.parseJWT(request.body);\n            return this.executeHandler(servicePluginRequest, request.url);\n        },\n        async parseRequest(request) {\n            const body = await request.text();\n            return this.parseJWT(body);\n        },\n        async processRequest(request) {\n            const url = request.url;\n            const body = await request.text();\n            try {\n                const implMethodResult = await this.process({ url, body });\n                return Response.json(implMethodResult);\n            }\n            catch (err) {\n                if (err.errorType === 'SPI' && err.applicationCode && err.httpCode) {\n                    return Response.json({ applicationError: { code: err.applicationCode, data: err.data } }, { status: err.httpCode });\n                }\n                throw err;\n            }\n        },\n        async executeHandler(servicePluginRequest, url) {\n            const componentType = servicePluginRequest.metadata.appExtensionType.toLowerCase();\n            const implementations = servicePluginsImplementations.get(componentType) ?? [];\n            if (implementations.length === 0) {\n                throw new Error(`No service plugin implementations found for component type ${componentType}`);\n            }\n            else if (implementations.length > 1) {\n                throw new Error(`Multiple service plugin implementations found for component type ${componentType}. This is currently not supported`);\n            }\n            const { implementation: impl, servicePluginDefinition } = implementations[0];\n            const method = servicePluginDefinition.methods.find((m) => url.endsWith(m.primaryHttpMappingPath));\n            if (!method) {\n                throw new Error('Unexpect request: request url did not match any method: ' + url);\n            }\n            const implMethod = impl[method.name];\n            if (!implMethod) {\n                throw new Error(`Got request for service plugin method ${method.name} but no implementation was provided. Available methods: ${Object.keys(impl).join(', ')}`);\n            }\n            return method.transformations.toREST(await implMethod(method.transformations.fromREST(servicePluginRequest)));\n        },\n    };\n    return {\n        initModule(servicePluginDefinition) {\n            return (implementation) => {\n                const implementations = servicePluginsImplementations.get(servicePluginDefinition.componentType.toLowerCase()) ?? [];\n                implementations.push({ servicePluginDefinition, implementation });\n                servicePluginsImplementations.set(servicePluginDefinition.componentType.toLowerCase(), implementations);\n                servicePluginsEmitter.emit('registered', servicePluginDefinition);\n            };\n        },\n        client,\n    };\n}\n","// we follow a simplified version of the axios convention\n// https://github.com/axios/axios/blob/649d739288c8e2c55829ac60e2345a0f3439c730/lib/defaults/index.js#L65\nexport const getDefaultContentHeader = (options) => {\n    if (options?.method &&\n        ['post', 'put', 'patch'].includes(options.method.toLocaleLowerCase()) &&\n        options.body) {\n        return { 'Content-Type': 'application/json' };\n    }\n    return {};\n};\nexport const isObject = (val) => val && typeof val === 'object' && !Array.isArray(val);\nexport function parsePublicKeyIfEncoded(publicKey) {\n    if (publicKey.includes('\\n') || publicKey.includes('\\r')) {\n        // publicKey is multi-line string, can be used as is\n        return publicKey.trim();\n    }\n    else {\n        // publicKey is base64 encoded\n        return typeof atob !== 'undefined'\n            ? atob(publicKey)\n            : Buffer.from(publicKey, 'base64').toString('utf-8');\n    }\n}\n","export const isHostModule = (val) => val.__type === 'host';\nexport function buildHostModule(val, host) {\n    return val.create(host);\n}\n","// eslint-disable-next-line import/no-extraneous-dependencies\nimport React, { ComponentType, useEffect, useState } from 'react';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport { createClient } from '@wix/sdk';\nimport { dashboard, type RemoteHost, type LocalHost } from './index';\n\nconst useBeforeRenderEffect = <T extends unknown>(\n  effect: () => T,\n  effectCondition: (lastEffectResult: T) => boolean,\n): T => {\n  const [lastEffectResult, setState] = useState(() => effect());\n  if (effectCondition(lastEffectResult)) {\n    setState(effect());\n  }\n  return lastEffectResult;\n};\n\nexport const withContextualWixClient = <P extends {} = {}>(\n  Component: ComponentType<P>,\n): ComponentType<P & { host?: LocalHost }> => {\n  return (ownPropsWithHost) => {\n    const { host, compProps } = useHostAndProps(ownPropsWithHost);\n\n    useBeforeRenderEffect(\n      () => {\n        createClient({\n          auth: dashboard.auth(),\n          host,\n        }).enableContext('module');\n        return host;\n      },\n      (lastHost) => lastHost !== host,\n    );\n\n    return compProps ? <Component host={host} {...compProps} /> : null;\n  };\n};\n\nconst useHostAndProps = <P extends {}>(\n  ownPropsWithHost: P & { host?: LocalHost },\n):\n  | { host: LocalHost; compProps: P }\n  | {\n      host: RemoteHost;\n      compProps: P | undefined;\n    } => {\n  const { host: maybeLocalHost, ...ownProps } = ownPropsWithHost;\n\n  const { host, hostType } = useBeforeRenderEffect(\n    () =>\n      maybeLocalHost\n        ? { host: maybeLocalHost, hostType: 'local' as const }\n        : { host: dashboard.host(), hostType: 'remote' as const },\n    (lastResult) => !!maybeLocalHost && maybeLocalHost !== lastResult.host,\n  );\n\n  const [hostProps, setHostProps] = useState<P | undefined>(undefined);\n\n  useEffect(() => {\n    if (hostType === 'local') {\n      return;\n    }\n\n    const observeResult = host.channel.observeState((newPropsFromHost: any) => {\n      setHostProps((newPropsFromHost || {}) as P);\n    });\n\n    const cleanup = async () => {\n      (await observeResult).disconnect();\n      host.close();\n    };\n\n    return () => {\n      cleanup();\n    };\n  }, [host, hostType]);\n\n  return hostType === 'local'\n    ? { host, compProps: ownProps as P }\n    : {\n        host,\n        compProps: hostProps ? { ...hostProps, ...ownProps } : undefined,\n      };\n};\n"],"names":["root","factory","exports","module","define","amd","self","this","oldContext","$wixContext","initWixModules","globalThis","__wix_context__","undefined","modules","elevated","runWithoutContext","fetchWithAuth","Error","graphql","contextualClient","client","elevatedClient","wixModules","use","urlOrRequest","requestInit","async","query","variables","opts","fn","globalContext","moduleContext","closureContext","createHostModule","hostModuleAPI","hostModule","__type","create","host","Object","entries","reduce","acc","key","props","keys","fromEntries","map","prop","args","context","apply","AddSitePluginModalError","constructor","_ref","message","code","super","_defineProperty","createDashboardModule","createHost","dashboardSDKBuilders","createSDKBuilders","observeState","_ref2","channel","handle","arguments","disconnect","Promise","resolve","then","h","showToast","remove","navigate","_ref3","navigateBack","_ref4","openModal","_ref5","modalInfo","modalParams","modalId","params","modalClosed","closeModal","_ref6","closeData","filteredArg","JSON","parse","stringify","getAccessToken","_ref7","getPageUrl","_ref8","openMediaManager","_ref9","addSitePlugin","_ref10","pluginId","options","additionalParams","placement","action","resp","type","data","error","onBeforeUnload","_ref11","setPageTitle","_ref12","pageTitle","getLanguage","language","_observeStateResult","observeStateResult","_","envState","requestFeedback","_ref13","onLayerStateChange","_ref14","resultOrPromise","installApp","_ref15","getSiteInfo","_ref19","getWidget","_ref16","getDashboardPlugins","_ref17","getDashboardMenuPlugins","_ref18","auth","getAuthHeaders","headers","Authorization","proxyMarker","Symbol","createEndpoint","releaseProxy","throwMarker","isObject","val","transferHandlers","Map","canHandle","serialize","obj","port1","port2","MessageChannel","deserialize","port","start","wrap","value","serialized","isError","name","stack","assign","ep","addEventListener","callback","ev","id","path","argumentList","fromWireValue","returnValue","parent","slice","rawValue","proxy","transfers","transferCache","set","transfer","catch","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","endpoint","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","Proxy","get","_target","requestResponseMessage","p","toString","length","r","bind","_thisArg","rawArgumentList","last","processArguments","construct","processed","v","arr","Array","prototype","concat","WeakMap","handler","serializedValue","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","l","proxyCallbackMarker","proxyPromiseMarker","serializeReturnValue","proxies","clonables","extractProxies","deserializeReturnValue","insertProxies","walker","isPromise","proxyId","uniqueId","promises","isFunction","callbacks","innerProxies","argsAsArray","argsWithProxies","exec","isArray","i","mapObjectValues","hasOwnProperty","promiseId","callbackId","_len2","_key2","argsNoProxies","wrapMethodsWithProxy","counter","origin","widgetPort","hostPort","version","sdk","originalMethod","_len","_key","originalResult","validValue","pickByValidValues","pickBy","object","predicate","result","createFallbackMonitoringClient","captureException","console","captureMessage","startSpan","spanOptions","startSpanManual","end","fail","endSpanManual","addBreadcrumb","runWithMaybePromise","cb","res","generateRandomId","Date","now","createManualSpanRegistry","spanMap","createSpan","sentryOptionsOrPromise","resolveSpan","rejectSpan","startTime","maybeDurationCompensation","maybePromise","sentrySDK","scope","isPromise2","promise","forceTransaction","reject","e","endSpan","delete","maybeTimeCompensation","setTimeout","runWithMaybeDelay","span","_error","getSpan","setHostContextOnScope","hostContext","tags","contexts","appId","appVersion","appInstanceId","extensionId","extensionName","extensionType","platform","extensionData","site","url","siteUrl","tenantType","tenantId","account","setTags","forEach","setContext","setTagsAndContextsOnScope","MandatorySDKMethods","manualSpanRegistryMap","AbstractSentryBrowserClient","resolvedState","validateOptions","missingSDKMethods","filter","method","manualSpanRegistry","dsn","isFullSDK","BrowserClient","init","transport","release","environment","tracesSampleRate","debug","Scope","sentryClient","makeFetchTransport","integrations","getDefaultIntegrations","stackParser","defaultStackParser","setClient","loadFullSDK","onLoad","forceLoad","SentryBrowserClient","breadcrumb","filteredBreadcrumb","category","level","captureContext","simulateAndReportSuccessfulSpan","callbackResult2","startTime2","spanDuration","simulatedCallback","simulateAndReportFailedSpan","error2","callbackResult","resolvedStateOrPromise","createSentryBrowserClient","sentrySdkMajorVersion","SDK_VERSION","parseInt","split","warn","major","createPanoramaBrowserClient","panoramaClient","errorMonitor","reportError","contextToData","logger","loggerByLevel","info","transaction","_res","finish","reportErrorInContextOfSpan","severity","reported","reportOnce","allowedOrigins","Set","getEssentialsFromQueryParams","queryParams","has","essentials","decodeURIComponent","safeParseEssentials","config","searchString","fullUrl","URL","search","window","location","URLSearchParams","isWixOrigin","open","closeMethods","autoHeightUpdate","clearHeightReport","registerHeightReporter","bridge","container","resizeObserver","ResizeObserver","update","updateHeight","offsetHeight","observe","autoHeightElement","document","documentElement","push","clearBeforeUnloadHandler","eventTarget","EventTarget","isInWorker","onIframeBeforeUnload","event","dispatchEvent","CustomEvent","cancelable","preventDefault","onBeforeUnloadHandle","registerBeforeUnloadHandler","siteInfo","parseSiteInfo","getSiteInfoSync","channelProxy","receiver","Reflect","monitoring","getMonitoringClient","sentryTransport","monitoringConfig","isSentryConfig","sentryOptions","isPanoramaConfig","getMonitoringClientFunction","Sentry","dashboard","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","String","getOwnPropertyNames","test2","fromCharCode","n","test3","letter","err","shouldUseNative","source","from","symbols","to","TypeError","toObject","s","call","for","q","t","u","w","x","y","z","A","B","iterator","C","a","b","c","encodeURIComponent","D","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","E","F","refs","updater","G","H","isReactComponent","setState","forceUpdate","I","isPureReactComponent","J","current","K","L","ref","__self","__source","M","d","g","k","f","children","m","defaultProps","$$typeof","_owner","O","P","Q","R","pop","keyPrefix","func","count","S","T","U","next","done","V","replace","escape","W","aa","X","N","Y","Z","ba","ReactCurrentDispatcher","ReactCurrentBatchConfig","suspense","ReactCurrentOwner","IsSomeRendererActing","Children","toArray","only","Component","Fragment","Profiler","PureComponent","StrictMode","Suspense","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","createElement","createFactory","createRef","forwardRef","render","isValidElement","lazy","_ctor","_status","_result","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","toPropertyKey","defineProperty","enumerable","configurable","writable","__esModule","_extends","_typeof","toPrimitive","o","wixContext","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","toStringTag","EventDefinition","isDomainEvent","transformations","parseMethod","DEFAULT_API_URL","DEFAULT_EDGE_API_URL","FetchErrorResponse","response","dataError","json","errorBuilder","status","details","requestId","description","validationError","applicationError","WixBIHeaderName","buildRESTDescriptor","origFunc","publicMetadata","boundFetch","wixAPIFetch","getActiveToken","hostName","useCDN","request","requestOptions","HTTPHost","fallback","biHeader","apiMetadata","input","packageName","PACKAGE_NAME","methodFqn","entity","entityFqdn","Boolean","biHeaderGenerator","body","statusText","includes","createNanoEvents","emit","events","on","runHandler","eventDefinition","payload","baseEventMetadata","envelope","domainEventPayload","deletedEvent","actionEvent","createdEvent","updatedEvent","domainEventMetadata","metadata","deletedEntity","currentEntity","X_WIX_CONSISTENT_HEADER","createClient","_headers","authStrategy","boundGetAuthHeaders","servicePluginsClient","initModule","initServicePluginModule","servicePluginsImplementations","servicePluginsEmitter","servicePluginDefinition","implementation","implementations","componentType","toLowerCase","getRegisteredServicePlugins","jwt","decodeJWT","decoded","valid","appExtensionType","servicePluginRequest","parseJWT","executeHandler","text","implMethodResult","process","Response","errorType","applicationCode","httpCode","impl","methods","find","endsWith","primaryHttpMappingPath","implMethod","toREST","fromREST","servicePluginsModules","eventHandlersClient","initEventHandlerModule","eventHandlers","webhooksEmitter","handlers","getRegisteredEvents","expectedEvents","eventType","identity","instanceId","allExpectedEvents","some","all","parsedDecoded","apps","AppInstalled","AppRemoved","eventHandlersModules","authHeaders","defaultContentTypeHeader","toLocaleLowerCase","getDefaultContentHeader","fetch","passThroughHeaders","consistentHeader","findConsistentHeader","isServicePluginModule","isHostModule","buildHostModule","apiBaseUrl","shouldUseCDN","__isAmbassador","isAmbassadorModule","httpClient","HTTPFactory","transformResponse","transform","relativeUrl","fetchOptions","finalUrl","protocol","setHeaders","enableContext","contextType","apiVersion","errors","webhooks","servicePlugins","useBeforeRenderEffect","effect","effectCondition","lastEffectResult","withContextualWixClient","ownPropsWithHost","compProps","useHostAndProps","lastHost","React","maybeLocalHost","ownProps","hostType","lastResult","hostProps","setHostProps","observeResult","newPropsFromHost","cleanup"],"sourceRoot":""}