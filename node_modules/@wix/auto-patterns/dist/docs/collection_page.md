# Collection Page Configuration

## ⚠️ Collection Page Rules

- **Components array inside collectionPage must contain exactly one component with a layout array**
- **All collection pages with tables/grids must reference their corresponding entity page via `entityPageId`** in the collection configuration
- **Enable `customColumns` only based on strict logic** - enable if more than 5 columns are defined OR user explicitly requests it, otherwise disable
- **Row click behavior**: By default, clicking a table row navigates to the entity page. Use `onRowClick` configuration only when custom row click behavior is explicitly required
- **When generating config for first time, select up to 3 columns from the schema that best represent the entity**

## Components Array

* Must include **exactly one item**.
* Each component must have:
  * `collection`: Collection configuration with `collectionId` and `entityTypeSource: 'cms'`
  * `layout`: Array of layout items that determine what components to render

## Layout Array

The `layout` array contains the rendering components for the collection. Each layout item has:
* `type`: Either 'Table' or 'Grid'
* Component-specific configuration (`table` or `grid` object)

### Layout Item Types:

1. **Table Layout Item** (`type: 'Table'`):
   * `table` field contains table-specific configuration
   * Used for displaying collection in a **table view**
   * Includes columns, actionCell, bulkActionToolbar, etc.

2. **Grid Layout Item** (`type: 'Grid'`):
   * `grid` field contains grid-specific configuration
   * Used for **grid (card) view** of collection
   * Includes item configuration for title/subtitle/image fields

### Table/Grid View Switch Behavior:
* When **both** Table and Grid layout items are present in the layout array, AutoPatterns automatically adds a Table/Grid view switch control so users can toggle between the two views
* Users can toggle between table and grid views

## Table Configuration

* Used for displaying collection in a **table view**.
* **customColumns.enabled** logic:
  * Enable if:
    * More than **5 columns** are defined
    * OR user **explicitly** requests it
  * Otherwise, **disable** (false)

## Grid Configuration

* Used for **grid (card) view** of collection.
* `item.title`, `item.subtitle`, `item.image` fields are **Field IDs** from the schema.
* If the user does not specify, **select the most relevant fields automatically**.
* For grid components, it is strongly recommended to implement a primary action cell with an `update` action that navigates to the entity page. This provides users with an intuitive way to access detailed information and edit individual entities directly from the grid view.
