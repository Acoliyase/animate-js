# Entity Page Configuration

## ⚠️ Entity Page Requirements

All entity pages must have:
- **A route path with descriptive segment and dynamic parameter** (e.g., `/product/:entityId`, `/pet/:entityId`) - **never just `/:entityId`** as this conflicts with collection page routing
- **A matching `route.params` configuration** that maps the dynamic parameter
- **A reference to their parent collection page via `parentPageId`**

## Overview

* Displays details for a **single entity**.
* Always tied to a single Wix collection.
* `entityTypeSource` is always `'cms'`.

> The custom actions must be defined inside the `moreActions` array.

> Note: You do not need to define a custom action to navigate to the entity page. This behavior is built-in — clicking on a row in the collection table automatically navigates to the corresponding entity page.

## Entity Page Layout Configuration

### Grid System

- **12-Column Grid**: The layout uses a 12-column grid system.
- The `span` property controls how many columns an item occupies (1-12).
- When items in a row exceed 12 columns total, the next item wraps to a new line.
- Example: If an item has `span: 8` and the next has `span: 5`, the second item will start a new line.

### Layout Structure

- **Main Section**: Contains primary entity information and most important fields.
- **Sidebar Section**: Contains secondary information, metadata, or supporting content.
- Both sections support cards that can contain fields, containers, and components.

### Detailed Layout Content Types

1. **Field Type**:
   ```typescript
   {
     type: 'field';
     field: {
       span?: number; // How many columns this field occupies (1-12)
       fieldId: string; // Must match a valid field ID from the collection schema
     };
   }
   ```

2. **Container Type** (for grouping related fields):
   ```typescript
   {
     type: 'container';
     container: {
       span?: number; // How many columns this container occupies (1-12)
       children: LayoutContent[]; // Can nest fields, other containers, or components
     };
   }
   ```

3. **Component Type** (for custom rendering):
   ```typescript
   {
     type: 'component';
     component: {
       span?: number; // How many columns this component occupies (1-12)
       componentId: string; // ID matching a component override implementation
     };
   }
   ```

### Layout Best Practices

1. **Field Grouping**:
   - Group related fields using containers
   - Place frequently used fields at the top
   - Consider the natural flow of data entry

2. **Main vs. Sidebar Usage**:
   - Main section: Put primary entity information
   - Sidebar: Place secondary information and metadata

3. **Responsive Considerations**:
   - Use appropriate spans for different field types
   - Text fields often benefit from larger spans
   - Boolean fields can use smaller spans

4. **Nested Containers**:
   - Use containers to create logical groupings
   - Don't nest containers too deeply for clarity
   - Consider using cards for major sections instead of deeply nested containers

5. **Image Handling**:
   - For image fields, consider providing more space (larger span)
   - Images are automatically rendered with proper controls when using the field type

## ⚠️ Common Entity Page Layout Mistakes to Avoid

- Using incorrect span values causing unexpected layout breaks
- Referencing non-existent field IDs in the layout
- Creating overly complex nested container structures
- Failing to properly register component overrides
- Confusing main and sidebar section usage (putting main content in sidebar)
- Exceeding 12 total columns in a row without realizing content will wrap
- Forgetting to specify the `collectionPagePath` value
- Missing required `type: 'card'` structure in layout sections
