{"version":3,"names":["addSortToDataQuery","dataQuery","query","fields","dataQueryWithSort","sort","forEach","sortField","fieldName","order","fieldDefinition","capabilities","sortable","ascending","descending"],"sources":["../../../../src/dataSourceAdapters/cms/sortUtils.ts"],"sourcesContent":["import { items } from '@wix/data';\nimport { SchemaConfig } from '../../types';\nimport { ComputedQuery } from '@wix/patterns';\n\nexport function addSortToDataQuery({\n  dataQuery,\n  query,\n  fields,\n}: {\n  dataQuery: items.WixDataQuery;\n  query: ComputedQuery<any>;\n  fields: SchemaConfig['fields'];\n}) {\n  let dataQueryWithSort = dataQuery;\n  const { sort } = query;\n  sort?.forEach((sortField) => {\n    const { fieldName, order } = sortField;\n    if (fieldName && order) {\n      const fieldDefinition = fields[fieldName];\n      if (fieldDefinition?.capabilities.sortable) {\n        if (order === 'asc') {\n          dataQueryWithSort = dataQueryWithSort.ascending(fieldName);\n        } else if (order === 'desc') {\n          dataQueryWithSort = dataQueryWithSort.descending(fieldName);\n        }\n      }\n    }\n  });\n\n  return dataQueryWithSort;\n}\n"],"mappings":";;;;AAIO,SAASA,kBAAkBA,CAAC;EACjCC,SAAS;EACTC,KAAK;EACLC;AAKF,CAAC,EAAE;EACD,IAAIC,iBAAiB,GAAGH,SAAS;EACjC,MAAM;IAAEI;EAAK,CAAC,GAAGH,KAAK;EACtBG,IAAI,YAAJA,IAAI,CAAEC,OAAO,CAAEC,SAAS,IAAK;IAC3B,MAAM;MAAEC,SAAS;MAAEC;IAAM,CAAC,GAAGF,SAAS;IACtC,IAAIC,SAAS,IAAIC,KAAK,EAAE;MACtB,MAAMC,eAAe,GAAGP,MAAM,CAACK,SAAS,CAAC;MACzC,IAAIE,eAAe,YAAfA,eAAe,CAAEC,YAAY,CAACC,QAAQ,EAAE;QAC1C,IAAIH,KAAK,KAAK,KAAK,EAAE;UACnBL,iBAAiB,GAAGA,iBAAiB,CAACS,SAAS,CAACL,SAAS,CAAC;QAC5D,CAAC,MAAM,IAAIC,KAAK,KAAK,MAAM,EAAE;UAC3BL,iBAAiB,GAAGA,iBAAiB,CAACU,UAAU,CAACN,SAAS,CAAC;QAC7D;MACF;IACF;EACF,CAAC,CAAC;EAEF,OAAOJ,iBAAiB;AAC1B","ignoreList":[]}