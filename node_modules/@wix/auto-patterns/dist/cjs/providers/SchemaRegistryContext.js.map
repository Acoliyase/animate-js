{"version":3,"names":["_react","_interopRequireWildcard","require","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","SchemaRegistryContext","createContext","getSchema","undefined","addSchema","SchemaRegistryProvider","children","registry","setRegistry","useState","useCallback","collectionId","schema","prevRegistry","contextValue","useMemo","createElement","Provider","value","__self","__source","fileName","lineNumber","columnNumber","exports","useSchemaRegistry","context","useContext","Error"],"sources":["../../../src/providers/SchemaRegistryContext.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useState,\n  ReactNode,\n  useCallback,\n  useMemo,\n} from 'react';\n\nimport { SchemaConfig } from '../types';\n\nexport interface SchemaRegistryContextValue {\n  getSchema: (collectionId: string) => SchemaConfig | undefined;\n  addSchema: (collectionId: string, schema: SchemaConfig) => void;\n}\n\nexport type SchemaRegistry = Record<string, SchemaConfig>;\n\nconst SchemaRegistryContext = createContext<SchemaRegistryContextValue>({\n  getSchema: () => undefined,\n  addSchema: () => {},\n});\n\nexport interface SchemaRegistryProviderProps {\n  children: ReactNode;\n}\n\nexport const SchemaRegistryProvider = ({\n  children,\n}: SchemaRegistryProviderProps) => {\n  const [registry, setRegistry] = useState<SchemaRegistry>({});\n\n  const addSchema = useCallback(\n    (collectionId: string, schema: SchemaConfig) => {\n      setRegistry((prevRegistry) => ({\n        ...prevRegistry,\n        [collectionId]: schema,\n      }));\n    },\n    [],\n  );\n\n  const getSchema = useCallback(\n    (collectionId: string) => {\n      return registry?.[collectionId];\n    },\n    [registry],\n  );\n\n  const contextValue = useMemo(\n    () => ({\n      getSchema,\n      addSchema,\n    }),\n    [getSchema, addSchema],\n  );\n\n  return (\n    <SchemaRegistryContext.Provider value={contextValue}>\n      {children}\n    </SchemaRegistryContext.Provider>\n  );\n};\n\nexport const useSchemaRegistry = (): SchemaRegistryContextValue => {\n  const context = useContext(SchemaRegistryContext);\n  if (!context) {\n    throw new Error(\n      'useSchemaRegistry must be used within a UseRegistryProvider',\n    );\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]}