{"version":3,"names":["_wixUiIconsCommon","require","_react","_interopRequireDefault","_jsxFileName","deleteAction","params","action","sdk","actionParams","modal","modalParams","delete","getOptimisticActions","collectionId","api","optimisticActions","onClick","_modalParams$actions","_modalParams$actions2","openConfirmDeleteModal","title","text","primaryButtonOnClick","_modalParams$feedback","schema","getSchema","Error","deleteOne","item","successToast","feedback","errorToast","_modalParams$feedback2","submit","result","actions","idField","primaryButtonText","cancel","secondaryButtonText","description","content","label","icon","default","createElement","Delete","__self","__source","fileName","lineNumber","columnNumber","exports"],"sources":["../../../../src/utils/actions/deleteAction.tsx"],"sourcesContent":["import { DeleteActionParams } from './types';\nimport { Delete } from '@wix/wix-ui-icons-common';\nimport React from 'react';\n\nexport const deleteAction = (params: DeleteActionParams) => {\n  const { action, sdk, actionParams } = params;\n  const { modal: modalParams } = action.delete;\n  const { getOptimisticActions, collectionId } = sdk;\n  const { api } = actionParams;\n  const optimisticActions = getOptimisticActions(collectionId);\n\n  return {\n    onClick: () => {\n      api.openConfirmDeleteModal({\n        ...(modalParams.title ? { title: modalParams.title.text } : {}),\n        primaryButtonOnClick: () => {\n          const schema = sdk.getSchema(sdk.collectionId);\n          if (!schema) {\n            throw new Error('Schema not found');\n          }\n          optimisticActions?.deleteOne(actionParams.item, {\n            successToast:\n              modalParams.feedback?.successToast?.text ||\n              'Item deleted successfully',\n            errorToast: () =>\n              modalParams.feedback?.errorToast?.text || 'Failed to delete item',\n            submit: async () => {\n              const result = await schema.actions.delete(\n                actionParams.item[schema.idField],\n              );\n              return [result];\n            },\n          });\n        },\n        ...(modalParams.actions?.submit\n          ? {\n              primaryButtonText: modalParams.actions.submit.text,\n            }\n          : {}),\n        ...(modalParams.actions?.cancel\n          ? {\n              secondaryButtonText: modalParams.actions.cancel.text,\n            }\n          : {}),\n        ...(modalParams.description\n          ? { content: modalParams.description.text }\n          : {}),\n      });\n    },\n    label: 'Delete',\n    icon: <Delete />,\n  };\n};\n"],"mappings":"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","ignoreList":[]}