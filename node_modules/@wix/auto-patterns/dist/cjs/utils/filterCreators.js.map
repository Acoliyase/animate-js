{"version":3,"names":["_patterns","require","_constants","createDateTimeFilter","id","fieldId","commonFilterProps","config","key","filter","dateRangeFilter","component","DateRangeFilter","props","mode","dateRangeOptions","presets","filterByTime","includeTime","exports","createBooleanFilter","idNameArrayFilter","matches","fieldValue","filterValue","some","v","BooleanFilters","checked","unchecked","RadioGroupFilter","data","name","trueLabel","falseLabel","createNumberFilter","numberRangeFilter","NumberRangeFilter","min","max","decimal","allowedDecimals","createEnumFilter","options","selectionMode","optionType","map","option","value","label","inlineComponentThreshold","length","AutoCompleteFilter","MultiSelectCheckboxFilter","MultiInlineCheckboxFilter","MultiSelectCollectionFilter","collectionData","createReferenceFilter","additionalParams","collectionId","referencedSchema"],"sources":["../../../src/utils/filterCreators.ts"],"sourcesContent":["import {\n  dateRangeFilter,\n  idNameArrayFilter,\n  numberRangeFilter,\n  DateRangeFilter,\n  RadioGroupFilter,\n  NumberRangeFilter,\n  AutoCompleteFilter,\n  MultiSelectCheckboxFilter,\n  MultiInlineCheckboxFilter,\n  MultiSelectCollectionFilter,\n} from '@wix/patterns';\nimport { BooleanFilters } from '../dataSourceAdapters/constants';\nimport { FilterOptions } from '../hooks/useFilters';\nimport { SchemaConfig } from '../types';\n\ninterface FilterOption {\n  value: string;\n  label: string;\n}\n\ninterface BaseFilterParams {\n  id: string;\n  fieldId: string;\n  commonFilterProps: Record<string, any>;\n}\n\nexport const createDateTimeFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    mode?: 'ONLY_PREDEFINED' | 'ONLY_CUSTOM' | 'COMBINE';\n    presets?: string[];\n    includeTime?: boolean;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: dateRangeFilter(),\n  component: DateRangeFilter,\n  props: {\n    ...commonFilterProps,\n    mode: config?.mode,\n    dateRangeOptions: config?.presets,\n    filterByTime: config?.includeTime,\n  },\n});\n\nexport const createBooleanFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    trueLabel?: string;\n    falseLabel?: string;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: idNameArrayFilter({\n    matches: (fieldValue, filterValue) => {\n      if (fieldValue) {\n        return filterValue.some((v) => v.id === BooleanFilters.checked);\n      }\n      return filterValue.some((v) => v.id === BooleanFilters.unchecked);\n    },\n  }),\n  component: RadioGroupFilter,\n  props: {\n    ...commonFilterProps,\n    data: [\n      {\n        id: 'checked',\n        name: config?.trueLabel || 'Yes',\n      },\n      {\n        id: 'unchecked',\n        name: config?.falseLabel || 'No',\n      },\n    ],\n  },\n});\n\nexport const createNumberFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    min?: number;\n    max?: number;\n    allowedDecimals?: boolean;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: numberRangeFilter(),\n  component: NumberRangeFilter,\n  props: {\n    ...commonFilterProps,\n    min: config?.min,\n    max: config?.max,\n    decimal: config?.allowedDecimals,\n  },\n});\n\nexport const createEnumFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config: {\n    options?: FilterOption[];\n    selectionMode?: 'single' | 'multiple';\n    optionType?: 'select' | 'radio' | 'checkbox' | 'inlineCheckbox';\n  };\n}): FilterOptions => {\n  const { options, selectionMode, optionType } = config;\n  const data =\n    options?.map((option: FilterOption) => ({\n      id: option.value,\n      name: option.label,\n    })) ?? [];\n\n  const inlineComponentThreshold = 5;\n\n  let component;\n\n  if (selectionMode === 'single') {\n    component =\n      data.length > inlineComponentThreshold\n        ? AutoCompleteFilter\n        : RadioGroupFilter;\n    if (optionType === 'select') {\n      component = AutoCompleteFilter;\n    } else if (optionType === 'radio') {\n      component = RadioGroupFilter;\n    }\n  } else {\n    component =\n      data.length > inlineComponentThreshold\n        ? MultiSelectCheckboxFilter\n        : MultiInlineCheckboxFilter;\n    if (optionType === 'select') {\n      component = MultiSelectCollectionFilter;\n    } else if (optionType === 'inlineCheckbox') {\n      component = MultiInlineCheckboxFilter;\n    } else if (optionType === 'checkbox') {\n      component = MultiSelectCheckboxFilter;\n    }\n  }\n\n  return {\n    key: id,\n    fieldId,\n    filter: idNameArrayFilter(),\n    component,\n    collectionData: data,\n    props: { ...commonFilterProps, data },\n  };\n};\n\nexport const createReferenceFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n  additionalParams,\n}: BaseFilterParams & {\n  config?: {\n    selectionMode?: 'single' | 'multiple';\n  };\n  additionalParams: {\n    referencedSchema: SchemaConfig;\n  };\n}): FilterOptions => {\n  const component =\n    config?.selectionMode === 'single'\n      ? AutoCompleteFilter\n      : MultiSelectCollectionFilter;\n\n  return {\n    key: id,\n    fieldId,\n    filter: idNameArrayFilter(),\n    component,\n    collectionId: additionalParams.referencedSchema.id,\n    props: commonFilterProps,\n  };\n};\n"],"mappings":"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","ignoreList":[]}