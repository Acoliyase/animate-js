{"version":3,"names":["_designSystem","require","_react","_interopRequireWildcard","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","EditModal","sdk","modalParams","actionParams","_modalParams$title","_modalParams$actions","_modalParams$actions2","values","setValues","useState","fields","reduce","acc","field","id","item","closeModal","getOptimisticActions","collectionId","optimisticActions","createElement","Modal","isOpen","onRequestClose","__self","__source","fileName","lineNumber","columnNumber","CustomModalLayout","title","text","onCloseButtonClick","primaryButtonOnClick","_modalParams$feedback","schema","getSchema","updatedItem","updateOne","successToast","feedback","errorToast","_modalParams$feedback2","submit","Error","result","actions","update","secondaryButtonOnClick","primaryButtonText","secondaryButtonText","cancel","content","Box","direction","width","gap","paddingTop","paddingBottom","map","key","Text","label","Input","value","onChange","prev","target","exports"],"sources":["../../../../../src/components/modals/actions/EditModal.tsx"],"sourcesContent":["import { Box, CustomModalLayout, Input, Modal, Text } from '@wix/design-system';\nimport React, { useState } from 'react';\nimport { UpdateActionModal } from '../../../types';\nimport { ActionModalProps } from './types';\n\nexport interface EditModalProps extends ActionModalProps {\n  modalParams: UpdateActionModal;\n  actionParams: { item: any };\n}\n\nexport const EditModal = ({\n  sdk,\n  modalParams,\n  actionParams,\n}: EditModalProps) => {\n  const [values, setValues] = useState(\n    modalParams.fields.reduce((acc, field) => {\n      acc[field.id] = actionParams.item[field.id];\n      return acc;\n    }, {} as Record<string, any>),\n  );\n  const { closeModal } = sdk;\n  const { getOptimisticActions, collectionId } = sdk;\n  const optimisticActions = getOptimisticActions(collectionId);\n\n  return (\n    <Modal isOpen onRequestClose={closeModal}>\n      <CustomModalLayout\n        title={modalParams.title?.text || 'Edit'}\n        onCloseButtonClick={() => {\n          closeModal();\n        }}\n        primaryButtonOnClick={() => {\n          const schema = sdk.getSchema(sdk.collectionId);\n          const updatedItem = { ...actionParams.item, ...values };\n          optimisticActions?.updateOne(updatedItem, {\n            successToast:\n              modalParams.feedback?.successToast?.text ||\n              'Item updated successfully',\n            errorToast: () =>\n              modalParams.feedback?.errorToast?.text || 'Failed to update item',\n            submit: async () => {\n              if (!schema) {\n                throw new Error('Schema not found');\n              }\n\n              const result = await schema.actions.update(updatedItem);\n              return [result];\n            },\n          });\n          closeModal();\n        }}\n        secondaryButtonOnClick={() => {\n          closeModal();\n        }}\n        primaryButtonText={modalParams.actions?.submit?.text || 'Save'}\n        secondaryButtonText={modalParams.actions?.cancel?.text || 'Cancel'}\n        content={\n          <Box\n            direction=\"vertical\"\n            width=\"552px\"\n            gap=\"SP2\"\n            paddingTop=\"SP1\"\n            paddingBottom=\"SP1\"\n          >\n            {modalParams.fields.map((field) => {\n              return (\n                <Box key={field.id} direction=\"vertical\" width=\"100%\" gap=\"SP2\">\n                  <Box>\n                    <Text>{field.label}</Text>\n                  </Box>\n                  <Box>\n                    <Input\n                      value={values[field.id]}\n                      onChange={(e) => {\n                        setValues((prev) => ({\n                          ...prev,\n                          [field.id]: e.target.value,\n                        }));\n                      }}\n                    />\n                  </Box>\n                </Box>\n              );\n            })}\n          </Box>\n        }\n      />\n    </Modal>\n  );\n};\n"],"mappings":"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","ignoreList":[]}