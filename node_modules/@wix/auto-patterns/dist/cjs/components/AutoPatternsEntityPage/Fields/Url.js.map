{"version":3,"names":["_react","_interopRequireDefault","require","_designSystem","_wixUiIconsCommon","_patterns","_form","_jsxFileName","Url","props","_pageState$entity","_field$validation2","_controller$fieldStat","field","dataHook","translate","t","container","useWixPatternsContainer","useSelector","initTask","status","pageState","useEntityPageContext","uriPattern","controller","useController","name","id","control","form","defaultValue","entity","rules","validate","value","_field$validation","validation","required","undefined","test","default","createElement","FormField","label","displayName","fieldState","error","statusMessage","message","__self","__source","fileName","lineNumber","columnNumber","Input","prefix","IconAffix","Link","placeholder","onChange","e","target","onBlur","ref","exports"],"sources":["../../../../../src/components/AutoPatternsEntityPage/Fields/Url.tsx"],"sourcesContent":["import React from 'react';\nimport { FormField, Input } from '@wix/design-system';\nimport { BaseInputProps } from './types';\nimport { Link } from '@wix/wix-ui-icons-common';\nimport {\n  useEntityPageContext,\n  useSelector,\n  useWixPatternsContainer,\n} from '@wix/patterns';\nimport { useController } from '@wix/patterns/form';\n\nexport interface UrlProps extends BaseInputProps<string> {}\n\nexport const Url = (props: UrlProps) => {\n  const { field, dataHook } = props;\n  const { translate: t, ...container } = useWixPatternsContainer();\n  useSelector(() => container.initTask.status);\n  const pageState = useEntityPageContext();\n\n  // Same regex as data-extensions https://github.com/wix-private/server-infra/blob/a6c3009d39bbb0312c929f68ee81c559e1eb5b4e/iptf/dataextensions/src/main/scala/com/wixpress/infra/dataextensions/runtime/validator/Formats.scala#L31\n  const uriPattern =\n    // eslint-disable-next-line no-useless-escape\n    /^[A-Za-z][A-Za-z0-9+.-]*:(\\/\\/([A-Za-z0-9._~\\-%!$&'()*+,;=:]*@)?[A-Za-z0-9._~\\-!$&'()*+,;=%:\\[\\]]*(:[0-9]*)?)?[A-Za-z0-9._~\\-%!$&'()*+,;=:@\\/]*([?][A-Za-z0-9._~\\-%!$&'()*+,;=:@\\/?]*)?([#][A-Za-z0-9._~\\-%!$&'()*+,;=:@\\/?]*)?$/;\n\n  const controller = useController({\n    name: field?.id ?? '',\n    control: pageState.form.control,\n    defaultValue: (pageState.entity as any)?.[field?.id ?? ''],\n    rules: {\n      validate: (value: string | null | undefined) => {\n        if (\n          field.validation?.required &&\n          (value === null || value === undefined || value === '')\n        ) {\n          return t('cairo.fieldValidation.requiredField');\n        } else if (value) {\n          return (\n            uriPattern.test(value) || t('cairo.customFields.url-input.error')\n          );\n        }\n        return true;\n      },\n    },\n  });\n\n  return (\n    <FormField\n      label={field.displayName}\n      required={field.validation?.required}\n      dataHook={dataHook}\n      status={controller.fieldState.error ? 'error' : undefined}\n      statusMessage={controller.fieldState.error?.message}\n    >\n      <Input\n        prefix={\n          <Input.IconAffix>\n            <Link />\n          </Input.IconAffix>\n        }\n        placeholder={t('cairo.customFields.url-input.placeholder')}\n        dataHook={`url-${field.id}`}\n        value={controller.field.value}\n        onChange={(e) => controller.field.onChange?.(e.target.value)}\n        onBlur={controller.field.onBlur}\n        ref={controller.field.ref}\n      />\n    </FormField>\n  );\n};\n"],"mappings":"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","ignoreList":[]}