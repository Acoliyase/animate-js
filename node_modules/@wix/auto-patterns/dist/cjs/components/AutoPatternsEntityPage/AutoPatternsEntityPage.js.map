{"version":3,"names":["_react","_interopRequireWildcard","require","_patterns","_form","_designSystem","_reactRouterDom","_SchemaContext","_FormFieldInput","_hooks","_providers","_useEntityPageMoreActions","_useActionsSDK","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","RenderLayoutContent","content","level","sectionId","cardIndex","contentIndex","setInputRef","_content$container$ch","_overrides$components","schema","useSchema","overrides","usePatternsWizardOverridesContext","pageState","useEntityPageContext","type","field","fieldId","fields","createElement","Cell","span","__self","__source","fileName","lineNumber","columnNumber","FormFieldInput","key","inputRef","ref","container","children","length","Layout","map","child","index","component","componentId","Component","components","form","entity","RenderLayoutCard","layout","_layout$card$subtitle","EntityPage","Card","minHeight","Header","title","card","text","subtitle","Divider","Content","AutoPatternsEntityPage","configuration","_pageLayout$main","_pageLayout$sidebar","pageLayout","parentPageId","route","moreActions","collectionId","useForm","mode","params","useParams","entityId","id","isCreateMode","inputRefs","useRef","input","current","validate","invalidFieldId","keys","find","_inputRefs$current$fi","invalid","_inputRefs$current$in","focus","Error","getParentPagePath","useNavigation","parentPath","useMemo","state","useEntityPage","onSave","formValues","getValues","baseEntity","updatedEntity","newEntity","actions","update","create","fetch","undefined","useEntity","useEntityPageHeaderTexts","config","entityDisplayName","displayField","sdk","useActionsSDK","resolvedMoreActions","useEntityPageMoreActions","dataHook","MoreActions","items","MainContent","main","layoutIndex","sidebar","AdditionalContent","exports"],"sources":["../../../../src/components/AutoPatternsEntityPage/AutoPatternsEntityPage.tsx"],"sourcesContent":["import React, { useMemo, useRef } from 'react';\nimport { CardLayout, EntityPageConfig, LayoutContent } from '../../types';\nimport {\n  EntityPage,\n  EntityPageState,\n  useEntity,\n  useEntityPage,\n  useEntityPageContext,\n  MoreActions,\n} from '@wix/patterns';\nimport { useForm } from '@wix/patterns/form';\nimport { Card, Cell, Layout } from '@wix/design-system';\nimport { useParams } from 'react-router-dom';\nimport { useSchema } from '../../providers/SchemaContext';\nimport { BaseInputRef } from './Fields/types';\nimport { FormFieldInput } from './Fields/FormFieldInput';\nimport { useEntityPageHeaderTexts, useNavigation } from '../../hooks';\nimport { usePatternsWizardOverridesContext } from '../../providers';\nimport { useEntityPageMoreActions } from '../../hooks/useEntityPageMoreActions';\nimport { useActionsSDK } from '../../hooks/useActionsSDK';\n\nconst RenderLayoutContent: React.FC<{\n  content: LayoutContent;\n  level: number;\n  sectionId: string;\n  cardIndex: number;\n  contentIndex: number;\n  setInputRef: (id: string, input: BaseInputRef) => void;\n}> = ({ content, level, sectionId, cardIndex, contentIndex, setInputRef }) => {\n  const schema = useSchema();\n  const overrides = usePatternsWizardOverridesContext();\n  const pageState = useEntityPageContext();\n\n  switch (content.type) {\n    case 'field':\n      if (!content.field.fieldId) {\n        return null;\n      }\n\n      const field = schema.fields[content.field.fieldId];\n\n      if (!field) {\n        return null;\n      }\n\n      return (\n        <Cell span={content.field.span}>\n          <FormFieldInput\n            key={content.field.fieldId}\n            field={field}\n            inputRef={(ref) => setInputRef(content.field.fieldId, ref)}\n          />\n        </Cell>\n      );\n\n    case 'container':\n      if (!content.container.children?.length) {\n        return null;\n      }\n\n      return (\n        <Cell span={content.container.span}>\n          <Layout>\n            {content.container.children.map((child, index) => (\n              <RenderLayoutContent\n                key={`${sectionId}-card-${cardIndex}-content-${contentIndex}-level-${level}-child-${index}`}\n                content={child}\n                level={level + 1}\n                sectionId={sectionId}\n                cardIndex={cardIndex}\n                contentIndex={index}\n                setInputRef={setInputRef}\n              />\n            ))}\n          </Layout>\n        </Cell>\n      );\n\n    case 'component':\n      if (!content.component.componentId) {\n        return null;\n      }\n\n      const Component = overrides?.components?.[content.component.componentId];\n\n      if (!Component) {\n        return null;\n      }\n\n      return (\n        <Cell span={content.component.span}>\n          <Component\n            form={pageState.form as any}\n            entity={pageState.entity as any as Record<string, any>}\n          />\n        </Cell>\n      );\n\n    default:\n      return null;\n  }\n};\n\nconst RenderLayoutCard: React.FC<{\n  layout: CardLayout;\n  sectionId: string;\n  cardIndex: number;\n  setInputRef: (id: string, input: BaseInputRef) => void;\n}> = ({ layout, sectionId, cardIndex, setInputRef }) => {\n  switch (layout.type) {\n    case 'card':\n      return (\n        <EntityPage.Card minHeight=\"50px\">\n          <Card.Header\n            title={layout.card.title.text}\n            subtitle={layout.card.subtitle?.text}\n          />\n          <Card.Divider />\n          <Card.Content>\n            <Layout>\n              {layout.card.children.map((child, index: number) => (\n                <RenderLayoutContent\n                  key={`${sectionId}-card-${cardIndex}-content-${index}`}\n                  content={child}\n                  level={0}\n                  sectionId={sectionId}\n                  cardIndex={cardIndex}\n                  contentIndex={index}\n                  setInputRef={setInputRef}\n                />\n              ))}\n            </Layout>\n          </Card.Content>\n        </EntityPage.Card>\n      );\n    default:\n      return null;\n  }\n};\n\nexport interface AutoPatternsEntityPageProps {\n  configuration: EntityPageConfig;\n}\n\nexport const AutoPatternsEntityPage: React.FC<AutoPatternsEntityPageProps> = ({\n  configuration,\n}) => {\n  const {\n    layout: pageLayout,\n    parentPageId,\n    route,\n    moreActions,\n    collectionId,\n  } = configuration;\n\n  const form = useForm<any>({\n    mode: 'onChange',\n  });\n  const params = useParams();\n  const entityId = params[route.params.id];\n  const schema = useSchema();\n  const isCreateMode = !entityId;\n\n  const inputRefs = useRef<{ [fieldId: string]: BaseInputRef }>({});\n\n  const setInputRef = (id: string, input: BaseInputRef) => {\n    inputRefs.current[id] = input;\n  };\n\n  const validate = () => {\n    const invalidFieldId = Object.keys(inputRefs.current).find((fieldId) => {\n      return inputRefs.current[fieldId]?.invalid;\n    });\n\n    if (invalidFieldId) {\n      inputRefs.current[invalidFieldId]?.focus?.();\n      throw new Error('Invalid form');\n    }\n  };\n  const { getParentPagePath } = useNavigation();\n\n  const parentPath = useMemo(\n    () => getParentPagePath(parentPageId),\n    [parentPageId, getParentPagePath],\n  );\n\n  const state: EntityPageState<any> = useEntityPage<any, any>({\n    parentPath,\n    form,\n    onSave: async () => {\n      validate();\n\n      const formValues = form.getValues();\n      const baseEntity = state.entity || {};\n      const updatedEntity = {\n        ...baseEntity,\n        ...formValues,\n      };\n\n      const newEntity = entityId\n        ? await schema.actions.update(updatedEntity)\n        : await schema.actions.create(updatedEntity);\n\n      return { updatedEntity: newEntity };\n    },\n    fetch: async () => {\n      if (!entityId) {\n        return { entity: undefined };\n      }\n      const entity = await schema.actions.get(entityId);\n      return { entity };\n    },\n  });\n\n  const entity = useEntity(state);\n\n  const { title, subtitle } = useEntityPageHeaderTexts({\n    config: configuration,\n    isCreateMode,\n    entityDisplayName: entity?.[schema.displayField],\n  });\n\n  const sdk = useActionsSDK({\n    collectionId,\n  });\n\n  const resolvedMoreActions = useEntityPageMoreActions(\n    moreActions,\n    entity,\n    sdk,\n    form,\n  );\n\n  return (\n    <EntityPage state={state} dataHook=\"auto-patterns-entity-page\">\n      <EntityPage.Header\n        title={title}\n        subtitle={subtitle}\n        moreActions={\n          resolvedMoreActions.length > 0 ? (\n            <MoreActions items={resolvedMoreActions} />\n          ) : undefined\n        }\n      />\n      <EntityPage.Content>\n        <EntityPage.MainContent dataHook=\"entity-page-main-content\">\n          {pageLayout?.main?.map((layout, layoutIndex) => (\n            <RenderLayoutCard\n              key={`main-section-card-${layoutIndex}`}\n              layout={layout}\n              sectionId=\"main\"\n              cardIndex={layoutIndex}\n              setInputRef={setInputRef}\n            />\n          ))}\n        </EntityPage.MainContent>\n        {pageLayout?.sidebar ? (\n          <EntityPage.AdditionalContent>\n            {pageLayout.sidebar?.map((layout, layoutIndex) => (\n              <RenderLayoutCard\n                key={`sidebar-section-card-${layoutIndex}`}\n                layout={layout}\n                sectionId=\"sidebar\"\n                cardIndex={layoutIndex}\n                setInputRef={setInputRef}\n              />\n            ))}\n          </EntityPage.AdditionalContent>\n        ) : null}\n      </EntityPage.Content>\n    </EntityPage>\n  );\n};\n\n/*\n  Key structure explanation:\n\n  Main cards: main-section-card-{layoutIndex}\n  Sidebar cards: sidebar-section-card-{layoutIndex}\n\n  Layout content:\n  {sectionId}-card-{cardIndex}-content-{contentIndex}\n\n  Nested children:\n  {sectionId}-card-{cardIndex}-content-{parentContentIndex}-level-{level}-child-{childIndex}\n\n  This ensures uniqueness across all levels and sections.\n*/\n"],"mappings":"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","ignoreList":[]}