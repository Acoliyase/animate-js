{"version":3,"names":["_react","require","_useActionsSDK","_actions","cleanupActionsWithDividers","actions","inlineCount","clean","a","filter","x","i","ar","_ar","divider","length","slice","useActionCell","config","collectionId","sdk","useActionsSDK","buildCellActions","useCallback","item","index","api","_config$primaryAction","_config$secondaryActi","_config$secondaryActi2","_config$secondaryActi3","_config$secondaryActi4","buildAction","actionConfig","type","actionToResolve","baseParams","actionParams","updateAction","action","deleteAction","customAction","resolvedAction","resolveAction","label","tooltip","resolvedActionProps","text","disabledDescription","primaryAction","undefined","rawSecondaryActions","secondaryActions","items","map","Boolean","numOfVisibleSecondaryActions","alwaysShowSecondaryActions","inlineAlwaysVisible","exports"],"sources":["../../../src/hooks/useActionCell.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport {\n  ActionCellConfig,\n  ActionCellItemConfig,\n  ResolvedAction,\n} from '../types';\nimport { useActionsSDK } from './useActionsSDK';\nimport {\n  updateAction,\n  customAction,\n  resolveAction,\n  deleteAction,\n} from '../utils/actions';\nimport { DividerActionConfig } from '../types/actions/base';\n\nexport interface useActionCellParams {\n  config?: ActionCellConfig;\n  collectionId: string;\n}\n\nconst cleanupActionsWithDividers = (\n  actions: any[],\n  inlineCount?: number,\n): any[] => {\n  const clean = (a: any[]) =>\n    a.filter(\n      (x, i, ar) =>\n        x?.divider !== true ||\n        (i > 0 && i < ar.length - 1 && ar[i - 1]?.divider !== true),\n    );\n  return !actions?.length || !inlineCount || inlineCount >= actions.length\n    ? clean(actions || [])\n    : [\n        ...clean(actions.slice(0, inlineCount)),\n        ...clean(actions.slice(inlineCount)),\n      ];\n};\n\nexport const useActionCell = ({\n  config,\n  collectionId,\n}: useActionCellParams) => {\n  const sdk = useActionsSDK({\n    collectionId,\n  });\n\n  const buildCellActions = useCallback(\n    (item, index, api) => {\n      const buildAction = (\n        actionConfig: ActionCellItemConfig | DividerActionConfig,\n      ) => {\n        if (actionConfig.type === 'divider') {\n          return { divider: true };\n        }\n\n        let actionToResolve: Partial<ResolvedAction> | null = null;\n\n        const baseParams = {\n          actionParams: { item, index, api },\n          sdk,\n        };\n\n        switch (actionConfig.type) {\n          case 'update':\n            actionToResolve = updateAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          case 'delete':\n            actionToResolve = deleteAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          case 'custom':\n            actionToResolve = customAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          default:\n            return null;\n        }\n\n        if (!actionToResolve) {\n          return null;\n        }\n\n        const resolvedAction = resolveAction(actionConfig, actionToResolve);\n        const { label, tooltip, ...resolvedActionProps } = resolvedAction;\n\n        return {\n          ...resolvedActionProps,\n          text: resolvedAction.label,\n          disabledDescription: resolvedAction.tooltip,\n        };\n      };\n\n      const primaryAction = config?.primaryAction?.item\n        ? buildAction(config.primaryAction.item)\n        : undefined;\n\n      const rawSecondaryActions = config?.secondaryActions?.items.length\n        ? config.secondaryActions.items.map(buildAction).filter(Boolean)\n        : [];\n\n      // Process secondary actions with inline count consideration\n      const secondaryActions = cleanupActionsWithDividers(\n        rawSecondaryActions,\n        config?.secondaryActions?.inlineCount,\n      );\n\n      const numOfVisibleSecondaryActions =\n        config?.secondaryActions?.inlineCount;\n      const alwaysShowSecondaryActions =\n        config?.secondaryActions?.inlineAlwaysVisible;\n\n      if (!primaryAction && !secondaryActions.length) {\n        return {};\n      }\n\n      return {\n        ...(primaryAction ? { primaryAction } : { primaryAction: undefined }),\n        ...(secondaryActions.length && { secondaryActions }),\n        numOfVisibleSecondaryActions,\n        alwaysShowSecondaryActions,\n      };\n    },\n    [config, sdk],\n  );\n\n  return buildCellActions;\n};\n"],"mappings":"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","ignoreList":[]}