{"version":3,"names":["_react","require","_router","_providers","_reactRouterDom","_usePagePath","useNavigation","navigateToEntityPage","navigateToEntityPagePatterns","usePatternsNavigate","appConfig","useAppConfigContext","getSchema","useSchemaRegistry","getPagePath","usePagePath","useCallback","item","entityPageId","_route$params","entityPage","pages","find","page","id","route","collectionId","schema","path","params","generatePath","idField","entity","getParentPagePath","parentPageId","exports"],"sources":["../../../src/hooks/useNavigationUtils.tsx"],"sourcesContent":["import { useCallback } from 'react';\nimport { usePatternsNavigate } from '@wix/patterns/router';\nimport { useAppConfigContext, useSchemaRegistry } from '../providers';\nimport { generatePath } from 'react-router-dom';\nimport { EntityPageConfig } from '../types';\nimport { usePagePath } from './usePagePath';\n\nexport type NavigateToEntityPageFunc = (args: {\n  item: any;\n  entityPageId?: string;\n}) => void;\n\nexport const useNavigation = () => {\n  const { navigateToEntityPage: navigateToEntityPagePatterns } =\n    usePatternsNavigate();\n  const appConfig = useAppConfigContext();\n  const { getSchema } = useSchemaRegistry();\n  const { getPagePath } = usePagePath(appConfig);\n\n  const navigateToEntityPage = useCallback(\n    ({ item, entityPageId }) => {\n      const entityPage = entityPageId\n        ? appConfig.pages.find((page) => page.id === entityPageId)\n        : null;\n\n      if (!entityPage) {\n        return;\n      }\n\n      const { route, collectionId } = entityPage.entityPage as EntityPageConfig;\n      const schema = getSchema(collectionId);\n      if (route.path && route.params?.id && schema) {\n        const path = generatePath(route.path, {\n          [route.params.id]: item?.[schema.idField] ?? '',\n        });\n        navigateToEntityPagePatterns({\n          path,\n          entity: item,\n        });\n      }\n    },\n    [appConfig, navigateToEntityPagePatterns, getSchema],\n  );\n\n  const getParentPagePath = useCallback(\n    (parentPageId?: string): string | undefined => {\n      return getPagePath(parentPageId);\n    },\n    [getPagePath],\n  );\n\n  return {\n    navigateToEntityPage,\n    getParentPagePath,\n    getPagePath,\n  };\n};\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AACA,IAAAG,eAAA,GAAAH,OAAA;AAEA,IAAAI,YAAA,GAAAJ,OAAA;AAOO,MAAMK,aAAa,GAAGA,CAAA,KAAM;EACjC,MAAM;IAAEC,oBAAoB,EAAEC;EAA6B,CAAC,GAC1D,IAAAC,2BAAmB,EAAC,CAAC;EACvB,MAAMC,SAAS,GAAG,IAAAC,8BAAmB,EAAC,CAAC;EACvC,MAAM;IAAEC;EAAU,CAAC,GAAG,IAAAC,4BAAiB,EAAC,CAAC;EACzC,MAAM;IAAEC;EAAY,CAAC,GAAG,IAAAC,wBAAW,EAACL,SAAS,CAAC;EAE9C,MAAMH,oBAAoB,GAAG,IAAAS,kBAAW,EACtC,CAAC;IAAEC,IAAI;IAAEC;EAAa,CAAC,KAAK;IAAA,IAAAC,aAAA;IAC1B,MAAMC,UAAU,GAAGF,YAAY,GAC3BR,SAAS,CAACW,KAAK,CAACC,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKN,YAAY,CAAC,GACxD,IAAI;IAER,IAAI,CAACE,UAAU,EAAE;MACf;IACF;IAEA,MAAM;MAAEK,KAAK;MAAEC;IAAa,CAAC,GAAGN,UAAU,CAACA,UAA8B;IACzE,MAAMO,MAAM,GAAGf,SAAS,CAACc,YAAY,CAAC;IACtC,IAAID,KAAK,CAACG,IAAI,KAAAT,aAAA,GAAIM,KAAK,CAACI,MAAM,aAAZV,aAAA,CAAcK,EAAE,IAAIG,MAAM,EAAE;MAC5C,MAAMC,IAAI,GAAG,IAAAE,4BAAY,EAACL,KAAK,CAACG,IAAI,EAAE;QACpC,CAACH,KAAK,CAACI,MAAM,CAACL,EAAE,GAAG,CAAAP,IAAI,oBAAJA,IAAI,CAAGU,MAAM,CAACI,OAAO,CAAC,KAAI;MAC/C,CAAC,CAAC;MACFvB,4BAA4B,CAAC;QAC3BoB,IAAI;QACJI,MAAM,EAAEf;MACV,CAAC,CAAC;IACJ;EACF,CAAC,EACD,CAACP,SAAS,EAAEF,4BAA4B,EAAEI,SAAS,CACrD,CAAC;EAED,MAAMqB,iBAAiB,GAAG,IAAAjB,kBAAW,EAClCkB,YAAqB,IAAyB;IAC7C,OAAOpB,WAAW,CAACoB,YAAY,CAAC;EAClC,CAAC,EACD,CAACpB,WAAW,CACd,CAAC;EAED,OAAO;IACLP,oBAAoB;IACpB0B,iBAAiB;IACjBnB;EACF,CAAC;AACH,CAAC;AAACqB,OAAA,CAAA7B,aAAA,GAAAA,aAAA","ignoreList":[]}