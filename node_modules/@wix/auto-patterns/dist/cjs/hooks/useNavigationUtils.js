"use strict";

exports.__esModule = true;
exports.useNavigation = void 0;
var _react = require("react");
var _router = require("@wix/patterns/router");
var _providers = require("../providers");
var _reactRouterDom = require("react-router-dom");
var _usePagePath = require("./usePagePath");
const useNavigation = () => {
  const {
    navigateToEntityPage: navigateToEntityPagePatterns
  } = (0, _router.usePatternsNavigate)();
  const appConfig = (0, _providers.useAppConfigContext)();
  const {
    getSchema
  } = (0, _providers.useSchemaRegistry)();
  const {
    getPagePath
  } = (0, _usePagePath.usePagePath)(appConfig);
  const navigateToEntityPage = (0, _react.useCallback)(({
    item,
    entityPageId
  }) => {
    var _route$params;
    const entityPage = entityPageId ? appConfig.pages.find(page => page.id === entityPageId) : null;
    if (!entityPage) {
      return;
    }
    const {
      route,
      collectionId
    } = entityPage.entityPage;
    const schema = getSchema(collectionId);
    if (route.path && (_route$params = route.params) != null && _route$params.id && schema) {
      const path = (0, _reactRouterDom.generatePath)(route.path, {
        [route.params.id]: (item == null ? void 0 : item[schema.idField]) ?? ''
      });
      navigateToEntityPagePatterns({
        path,
        entity: item
      });
    }
  }, [appConfig, navigateToEntityPagePatterns, getSchema]);
  const getParentPagePath = (0, _react.useCallback)(parentPageId => {
    return getPagePath(parentPageId);
  }, [getPagePath]);
  return {
    navigateToEntityPage,
    getParentPagePath,
    getPagePath
  };
};
exports.useNavigation = useNavigation;
//# sourceMappingURL=useNavigationUtils.js.map