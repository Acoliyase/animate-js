{"version":3,"names":["_useFetchData","require","_patterns","_useCommonCollectionFeatures","_useFilters","_SchemaContext","_useAutoPatternsOptimisticActions","_useBaseTableFeatures","useTableFeatures","configuration","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","filterComponent","filtersObject","filterFieldMapping","useFilters","filters","customColumns","visibleFieldIds","columns","onRowClick","stickyColumns","stickySelectionColumn","useBaseTableFeatures","fetchData","useFetchData","searchableFieldIds","schema","useSchema","state","useTableCollection","queryName","itemKey","item","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","useAutoPatternsOptimisticActions","commonFeatures","useCommonCollectionFeatures","exports"],"sources":["../../../src/hooks/useTableFeatures.tsx"],"sourcesContent":["import { TableConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useTableCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseTableFeatures } from './useBaseTableFeatures';\n\nexport const useTableFeatures = (configuration: TableConfig) => {\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = configuration.collection;\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    configuration.filters,\n  );\n  const {\n    customColumns,\n    visibleFieldIds,\n    columns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  } = useBaseTableFeatures(configuration);\n\n  const { fetchData } = useFetchData({\n    searchableFieldIds: visibleFieldIds,\n    filterFieldMapping,\n  });\n\n  const schema = useSchema();\n\n  const state = useTableCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (item) => item[schema.idField],\n    itemName: (item) => item[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (item) => item.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...configuration,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    columns,\n    filters: filterComponent,\n    optimisticActions,\n    customColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  };\n};\n"],"mappings":";;;;AACA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,4BAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,cAAA,GAAAJ,OAAA;AACA,IAAAK,iCAAA,GAAAL,OAAA;AACA,IAAAM,qBAAA,GAAAN,OAAA;AAEO,MAAMO,gBAAgB,GAAIC,aAA0B,IAAK;EAC9D,MAAM;IACJC,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGL,aAAa,CAACM,UAAU;EAE5B,MAAM;IAAEC,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAG,IAAAC,sBAAU,EACvEV,aAAa,CAACW,OAChB,CAAC;EACD,MAAM;IACJC,aAAa;IACbC,eAAe;IACfC,OAAO;IACPC,UAAU;IACVC,aAAa;IACbC;EACF,CAAC,GAAG,IAAAC,0CAAoB,EAAClB,aAAa,CAAC;EAEvC,MAAM;IAAEmB;EAAU,CAAC,GAAG,IAAAC,0BAAY,EAAC;IACjCC,kBAAkB,EAAER,eAAe;IACnCJ;EACF,CAAC,CAAC;EAEF,MAAMa,MAAM,GAAG,IAAAC,wBAAS,EAAC,CAAC;EAE1B,MAAMC,KAAK,GAAG,IAAAC,4BAAkB,EAAM;IACpCC,SAAS,EAAE,GAAGzB,YAAY,EAAE;IAC5B0B,OAAO,EAAGC,IAAI,IAAKA,IAAI,CAACN,MAAM,CAACO,OAAO,CAAC;IACvCC,QAAQ,EAAGF,IAAI,IAAKA,IAAI,CAACN,MAAM,CAACS,YAAY,CAAC;IAC7CpB,OAAO,EAAEH,aAAa;IACtBwB,gBAAgB,EAAGJ,IAAI,IAAKA,IAAI,CAACK,cAAc;IAC/CC,iBAAiB,EAAEA,CAAC;MAAEC;IAAI,CAAC,KAAKC,MAAM,CAACD,GAAG,CAAC;IAC3ChB,SAAS;IACTjB,KAAK;IACLmC,iBAAiB,EAAElC,iBAAiB;IACpCmC,yBAAyB,EAAElC,cAAc,KAAK,MAAM;IACpDmC,wBAAwB,EAAElC;EAC5B,CAAC,CAAC;EAEF,MAAMmC,iBAAiB,GAAG,IAAAC,kEAAgC,EACxDxC,YAAY,EACZuB,KAAK,CAAClB,UACR,CAAC;EAED,MAAMoC,cAAc,GAAG,IAAAC,wDAA2B,EAAC;IACjD,GAAG3C,aAAa;IAChBwC;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGE,cAAc;IACjBlB,KAAK;IACLV,OAAO;IACPH,OAAO,EAAEJ,eAAe;IACxBiC,iBAAiB;IACjB5B,aAAa;IACbG,UAAU;IACVC,aAAa;IACbC;EACF,CAAC;AACH,CAAC;AAAC2B,OAAA,CAAA7C,gBAAA,GAAAA,gBAAA","ignoreList":[]}