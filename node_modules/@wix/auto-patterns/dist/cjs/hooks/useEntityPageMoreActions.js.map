{"version":3,"names":["_actions","require","_react","useEntityPageMoreActions","moreActions","entity","sdk","form","buildEntityPageActions","useCallback","buildAction","actionConfig","actionToResolve","baseParams","actionParams","type","customAction","action","resolved","resolveAction","onClick","text","label","prefixIcon","icon","disabled","actionGroups","groupActions","map","group","filter","Boolean","length"],"sources":["../../../src/hooks/useEntityPageMoreActions.ts"],"sourcesContent":["import { ActionsSDK, ResolvedAction } from '../types';\nimport { EntityPageMoreActions } from '../types/actions';\nimport { customAction, resolveAction, groupActions } from '../utils/actions';\nimport { useCallback } from 'react';\nimport { MoreActionsItem } from '@wix/patterns';\nimport { FieldValues, UseFormReturn } from '@wix/patterns/form';\nimport { CustomActionConfig } from '../types/actions/base';\n\nexport function useEntityPageMoreActions(\n  moreActions: EntityPageMoreActions | undefined,\n  entity: Record<string, any>,\n  sdk: ActionsSDK,\n  form: UseFormReturn<FieldValues, any, undefined>,\n) {\n  const buildEntityPageActions = useCallback(() => {\n    if (!moreActions) {\n      return;\n    }\n\n    const buildAction = (\n      actionConfig: CustomActionConfig,\n    ): MoreActionsItem | null => {\n      let actionToResolve: Partial<ResolvedAction> | null = null;\n      const baseParams = {\n        actionParams: { entity, form },\n        sdk,\n      };\n\n      switch (actionConfig.type) {\n        case 'custom':\n          actionToResolve = customAction({\n            action: actionConfig,\n            ...baseParams,\n          });\n          break;\n        default:\n          return null;\n      }\n\n      if (!actionToResolve) {\n        return null;\n      }\n\n      const resolved = resolveAction(\n        actionConfig,\n        actionToResolve,\n      ) as ResolvedAction;\n\n      return {\n        onClick: resolved.onClick,\n        text: resolved.label,\n        prefixIcon: resolved.icon,\n        disabled: resolved.disabled,\n      };\n    };\n\n    const actionGroups = groupActions(moreActions);\n    return actionGroups\n      .map((group) =>\n        group\n          .map(buildAction)\n          .filter((action): action is MoreActionsItem => Boolean(action)),\n      )\n      .filter((group) => group.length > 0);\n  }, [moreActions, sdk, entity, form]);\n\n  return buildEntityPageActions() ?? [];\n}\n"],"mappings":";;;;AAEA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAKO,SAASE,wBAAwBA,CACtCC,WAA8C,EAC9CC,MAA2B,EAC3BC,GAAe,EACfC,IAAgD,EAChD;EACA,MAAMC,sBAAsB,GAAG,IAAAC,kBAAW,EAAC,MAAM;IAC/C,IAAI,CAACL,WAAW,EAAE;MAChB;IACF;IAEA,MAAMM,WAAW,GACfC,YAAgC,IACL;MAC3B,IAAIC,eAA+C,GAAG,IAAI;MAC1D,MAAMC,UAAU,GAAG;QACjBC,YAAY,EAAE;UAAET,MAAM;UAAEE;QAAK,CAAC;QAC9BD;MACF,CAAC;MAED,QAAQK,YAAY,CAACI,IAAI;QACvB,KAAK,QAAQ;UACXH,eAAe,GAAG,IAAAI,qBAAY,EAAC;YAC7BC,MAAM,EAAEN,YAAY;YACpB,GAAGE;UACL,CAAC,CAAC;UACF;QACF;UACE,OAAO,IAAI;MACf;MAEA,IAAI,CAACD,eAAe,EAAE;QACpB,OAAO,IAAI;MACb;MAEA,MAAMM,QAAQ,GAAG,IAAAC,sBAAa,EAC5BR,YAAY,EACZC,eACF,CAAmB;MAEnB,OAAO;QACLQ,OAAO,EAAEF,QAAQ,CAACE,OAAO;QACzBC,IAAI,EAAEH,QAAQ,CAACI,KAAK;QACpBC,UAAU,EAAEL,QAAQ,CAACM,IAAI;QACzBC,QAAQ,EAAEP,QAAQ,CAACO;MACrB,CAAC;IACH,CAAC;IAED,MAAMC,YAAY,GAAG,IAAAC,qBAAY,EAACvB,WAAW,CAAC;IAC9C,OAAOsB,YAAY,CAChBE,GAAG,CAAEC,KAAK,IACTA,KAAK,CACFD,GAAG,CAAClB,WAAW,CAAC,CAChBoB,MAAM,CAAEb,MAAM,IAAgCc,OAAO,CAACd,MAAM,CAAC,CAClE,CAAC,CACAa,MAAM,CAAED,KAAK,IAAKA,KAAK,CAACG,MAAM,GAAG,CAAC,CAAC;EACxC,CAAC,EAAE,CAAC5B,WAAW,EAAEE,GAAG,EAAED,MAAM,EAAEE,IAAI,CAAC,CAAC;EAEpC,OAAOC,sBAAsB,CAAC,CAAC,IAAI,EAAE;AACvC","ignoreList":[]}