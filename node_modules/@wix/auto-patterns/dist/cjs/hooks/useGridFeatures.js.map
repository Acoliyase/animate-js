{"version":3,"names":["_useFetchData","require","_patterns","_useCommonCollectionFeatures","_useFilters","_SchemaContext","_useAutoPatternsOptimisticActions","_useBaseGridFeatures","useGridFeatures","configuration","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","renderItem","imagePlacement","preset","visibleFieldIds","useBaseGridFeatures","filterComponent","filtersObject","filterFieldMapping","useFilters","filters","fetchData","useFetchData","searchableFieldIds","schema","useSchema","state","useGridCollection","queryName","itemKey","gridItem","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","useAutoPatternsOptimisticActions","commonFeatures","useCommonCollectionFeatures","exports"],"sources":["../../../src/hooks/useGridFeatures.tsx"],"sourcesContent":["import { GridConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useGridCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseGridFeatures } from './useBaseGridFeatures';\n\nexport const useGridFeatures = (configuration: GridConfig) => {\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = configuration.collection;\n\n  const { renderItem, imagePlacement, preset, visibleFieldIds } =\n    useBaseGridFeatures(configuration);\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    configuration.filters,\n  );\n\n  const { fetchData } = useFetchData({\n    searchableFieldIds: visibleFieldIds,\n    filterFieldMapping,\n  });\n\n  const schema = useSchema();\n\n  const state = useGridCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (gridItem) => gridItem[schema.idField],\n    itemName: (gridItem) => gridItem[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (gridItem) => gridItem.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...configuration,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    imagePlacement,\n    preset,\n    optimisticActions,\n    renderItem,\n    filters: filterComponent,\n  };\n};\n"],"mappings":";;;;AACA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,4BAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,cAAA,GAAAJ,OAAA;AACA,IAAAK,iCAAA,GAAAL,OAAA;AACA,IAAAM,oBAAA,GAAAN,OAAA;AAEO,MAAMO,eAAe,GAAIC,aAAyB,IAAK;EAC5D,MAAM;IACJC,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGL,aAAa,CAACM,UAAU;EAE5B,MAAM;IAAEC,UAAU;IAAEC,cAAc;IAAEC,MAAM;IAAEC;EAAgB,CAAC,GAC3D,IAAAC,wCAAmB,EAACX,aAAa,CAAC;EAEpC,MAAM;IAAEY,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAG,IAAAC,sBAAU,EACvEf,aAAa,CAACgB,OAChB,CAAC;EAED,MAAM;IAAEC;EAAU,CAAC,GAAG,IAAAC,0BAAY,EAAC;IACjCC,kBAAkB,EAAET,eAAe;IACnCI;EACF,CAAC,CAAC;EAEF,MAAMM,MAAM,GAAG,IAAAC,wBAAS,EAAC,CAAC;EAE1B,MAAMC,KAAK,GAAG,IAAAC,2BAAiB,EAAM;IACnCC,SAAS,EAAE,GAAGvB,YAAY,EAAE;IAC5BwB,OAAO,EAAGC,QAAQ,IAAKA,QAAQ,CAACN,MAAM,CAACO,OAAO,CAAC;IAC/CC,QAAQ,EAAGF,QAAQ,IAAKA,QAAQ,CAACN,MAAM,CAACS,YAAY,CAAC;IACrDb,OAAO,EAAEH,aAAa;IACtBiB,gBAAgB,EAAGJ,QAAQ,IAAKA,QAAQ,CAACK,cAAc;IACvDC,iBAAiB,EAAEA,CAAC;MAAEC;IAAI,CAAC,KAAKC,MAAM,CAACD,GAAG,CAAC;IAC3ChB,SAAS;IACTf,KAAK;IACLiC,iBAAiB,EAAEhC,iBAAiB;IACpCiC,yBAAyB,EAAEhC,cAAc,KAAK,MAAM;IACpDiC,wBAAwB,EAAEhC;EAC5B,CAAC,CAAC;EAEF,MAAMiC,iBAAiB,GAAG,IAAAC,kEAAgC,EACxDtC,YAAY,EACZqB,KAAK,CAAChB,UACR,CAAC;EAED,MAAMkC,cAAc,GAAG,IAAAC,wDAA2B,EAAC;IACjD,GAAGzC,aAAa;IAChBsC;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGE,cAAc;IACjBlB,KAAK;IACLd,cAAc;IACdC,MAAM;IACN6B,iBAAiB;IACjB/B,UAAU;IACVS,OAAO,EAAEJ;EACX,CAAC;AACH,CAAC;AAAC8B,OAAA,CAAA3C,eAAA,GAAAA,eAAA","ignoreList":[]}