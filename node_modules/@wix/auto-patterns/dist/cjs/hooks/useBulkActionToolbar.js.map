{"version":3,"names":["_react","_interopRequireWildcard","require","_useActionsSDK","_patterns","_actions","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","useBulkActionToolbar","config","collectionId","sdk","useActionsSDK","bulkActionToolbar","useCallback","param","buildAction","actionConfig","actionToResolve","baseParams","actionParams","type","bulkDeleteAction","action","customAction","resolvedAction","resolveAction","icon","resolvedActionParams","prefixIcon","React","isValidElement","undefined","dataHook","id","buildPrimaryActions","primaryActions","map","primaryItem","index","item","actionGroups","groupActions","menu","items","subItems","group","filter","Boolean","length","label","primaryActionItems","secondaryActionItems","secondaryActions","createElement","MultiBulkActionToolbar","__self","__source","fileName","lineNumber","columnNumber","hasPrimaryActions","hasSecondaryActions","exports"],"sources":["../../../src/hooks/useBulkActionToolbar.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport {\n  BulkActionItemConfig,\n  BulkActionsConfig,\n  ResolvedAction,\n} from '../types';\nimport { useActionsSDK } from './useActionsSDK';\nimport {\n  TableProps,\n  MultiBulkActionToolbar,\n  ActionSubitem,\n} from '@wix/patterns';\nimport {\n  bulkDeleteAction,\n  customAction,\n  resolveAction,\n  groupActions,\n} from '../utils/actions';\n\nexport type BulkActionToolbarRenderProp = Parameters<\n  NonNullable<TableProps<any, any>['bulkActionToolbar']>\n>[0];\n\nexport interface useBulkActionToolbarParams {\n  config?: BulkActionsConfig;\n  collectionId: string;\n}\n\nexport const useBulkActionToolbar = ({\n  config,\n  collectionId,\n}: useBulkActionToolbarParams) => {\n  const sdk = useActionsSDK({\n    collectionId,\n  });\n\n  const bulkActionToolbar = useCallback(\n    (param: BulkActionToolbarRenderProp) => {\n      const buildAction = (\n        actionConfig: BulkActionItemConfig,\n      ): ActionSubitem | null => {\n        let actionToResolve: Partial<ResolvedAction> | null = null;\n\n        const baseParams = {\n          actionParams: param,\n          sdk,\n        };\n\n        switch (actionConfig.type) {\n          case 'bulkDelete':\n            actionToResolve = bulkDeleteAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          case 'custom':\n            actionToResolve = customAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          default:\n            return null;\n        }\n\n        if (!actionToResolve) {\n          return null;\n        }\n\n        const resolvedAction = resolveAction(actionConfig, actionToResolve);\n        const { icon, ...resolvedActionParams } = resolvedAction;\n\n        return {\n          prefixIcon: React.isValidElement(icon) ? icon : undefined,\n          dataHook: actionConfig.id,\n          ...resolvedActionParams,\n        };\n      };\n\n      const buildPrimaryActions = (): ActionSubitem[] => {\n        if (!config?.primaryActions) {\n          return [];\n        }\n\n        return config.primaryActions\n          .map((primaryItem, index) => {\n            if (primaryItem.type === 'action') {\n              return buildAction(primaryItem.action.item);\n            }\n\n            if (primaryItem.type === 'menu') {\n              const actionGroups = groupActions(primaryItem.menu.items);\n              const subItems = actionGroups\n                .map((group) =>\n                  group\n                    .map(buildAction)\n                    .filter((action): action is ActionSubitem =>\n                      Boolean(action),\n                    ),\n                )\n                .filter((group) => group.length > 0);\n\n              if (subItems.length === 0) {\n                return null;\n              }\n\n              return {\n                label: primaryItem.menu.label,\n                subItems,\n                dataHook: `bulk-multi-action-${index}`,\n              };\n            }\n\n            return null;\n          })\n          .filter((action): action is ActionSubitem => Boolean(action));\n      };\n\n      const primaryActionItems = buildPrimaryActions();\n\n      const secondaryActionItems = config?.secondaryActions\n        ? groupActions(config.secondaryActions)\n            .map((group) =>\n              group\n                .map(buildAction)\n                .filter((action): action is ActionSubitem => Boolean(action)),\n            )\n            .filter((group) => group.length > 0)\n        : [];\n\n      return (\n        <MultiBulkActionToolbar\n          primaryActionItems={primaryActionItems}\n          secondaryActionItems={secondaryActionItems}\n        />\n      );\n    },\n    [config, sdk],\n  );\n\n  if (!config) {\n    return undefined;\n  }\n\n  const hasPrimaryActions =\n    config.primaryActions && config.primaryActions.length > 0;\n\n  const hasSecondaryActions =\n    config.secondaryActions && config.secondaryActions.length > 0;\n\n  if (!hasPrimaryActions && !hasSecondaryActions) {\n    return undefined;\n  }\n\n  return bulkActionToolbar;\n};\n"],"mappings":"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","ignoreList":[]}