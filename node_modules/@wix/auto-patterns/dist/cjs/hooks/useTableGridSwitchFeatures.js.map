{"version":3,"names":["_useFetchData","require","_patterns","_useCommonCollectionFeatures","_useFilters","_SchemaContext","_useAutoPatternsOptimisticActions","_useBaseGridFeatures","_useBaseTableFeatures","useTableGridSwitchFeatures","config","schema","useSchema","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","filterComponent","filtersObject","filterFieldMapping","useFilters","filters","preset","imagePlacement","visibleFieldIds","gridVisibleFieldIds","renderItem","useBaseGridFeatures","customColumns","tableVisibleFieldIds","columns","tableColumns","onRowClick","stickyColumns","stickySelectionColumn","useBaseTableFeatures","fetchData","tableFetchData","useFetchData","searchableFieldIds","Array","from","Set","state","useTableGridSwitchCollection","queryName","itemKey","item","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","useAutoPatternsOptimisticActions","commonFeatures","useCommonCollectionFeatures","horizontalScroll","exports"],"sources":["../../../src/hooks/useTableGridSwitchFeatures.tsx"],"sourcesContent":["import { TableGridSwitchConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useTableGridSwitchCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseGridFeatures } from './useBaseGridFeatures';\nimport { useBaseTableFeatures } from './useBaseTableFeatures';\n\nexport const useTableGridSwitchFeatures = (config: TableGridSwitchConfig) => {\n  const schema = useSchema();\n\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = config.collection;\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    config.filters,\n  );\n\n  const {\n    preset,\n    imagePlacement,\n    visibleFieldIds: gridVisibleFieldIds,\n    renderItem,\n  } = useBaseGridFeatures(config);\n\n  const {\n    customColumns,\n    visibleFieldIds: tableVisibleFieldIds,\n    columns: tableColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  } = useBaseTableFeatures(config);\n\n  const { fetchData: tableFetchData } = useFetchData({\n    searchableFieldIds: Array.from(\n      new Set([...tableVisibleFieldIds, ...gridVisibleFieldIds]),\n    ),\n    filterFieldMapping,\n  });\n\n  const state = useTableGridSwitchCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (item) => item[schema.idField],\n    itemName: (item) => item[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (item) => item.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData: tableFetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...config,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    columns: tableColumns,\n    filters: filterComponent,\n    optimisticActions,\n    customColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n    horizontalScroll: true,\n    // Grid specific features\n    imagePlacement,\n    preset,\n    renderItem,\n  };\n};\n"],"mappings":";;;;AACA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,4BAAA,GAAAF,OAAA;AACA,IAAAG,WAAA,GAAAH,OAAA;AACA,IAAAI,cAAA,GAAAJ,OAAA;AACA,IAAAK,iCAAA,GAAAL,OAAA;AACA,IAAAM,oBAAA,GAAAN,OAAA;AACA,IAAAO,qBAAA,GAAAP,OAAA;AAEO,MAAMQ,0BAA0B,GAAIC,MAA6B,IAAK;EAC3E,MAAMC,MAAM,GAAG,IAAAC,wBAAS,EAAC,CAAC;EAE1B,MAAM;IACJC,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGP,MAAM,CAACQ,UAAU;EAErB,MAAM;IAAEC,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAG,IAAAC,sBAAU,EACvEZ,MAAM,CAACa,OACT,CAAC;EAED,MAAM;IACJC,MAAM;IACNC,cAAc;IACdC,eAAe,EAAEC,mBAAmB;IACpCC;EACF,CAAC,GAAG,IAAAC,wCAAmB,EAACnB,MAAM,CAAC;EAE/B,MAAM;IACJoB,aAAa;IACbJ,eAAe,EAAEK,oBAAoB;IACrCC,OAAO,EAAEC,YAAY;IACrBC,UAAU;IACVC,aAAa;IACbC;EACF,CAAC,GAAG,IAAAC,0CAAoB,EAAC3B,MAAM,CAAC;EAEhC,MAAM;IAAE4B,SAAS,EAAEC;EAAe,CAAC,GAAG,IAAAC,0BAAY,EAAC;IACjDC,kBAAkB,EAAEC,KAAK,CAACC,IAAI,CAC5B,IAAIC,GAAG,CAAC,CAAC,GAAGb,oBAAoB,EAAE,GAAGJ,mBAAmB,CAAC,CAC3D,CAAC;IACDN;EACF,CAAC,CAAC;EAEF,MAAMwB,KAAK,GAAG,IAAAC,sCAA4B,EAAM;IAC9CC,SAAS,EAAE,GAAGlC,YAAY,EAAE;IAC5BmC,OAAO,EAAGC,IAAI,IAAKA,IAAI,CAACtC,MAAM,CAACuC,OAAO,CAAC;IACvCC,QAAQ,EAAGF,IAAI,IAAKA,IAAI,CAACtC,MAAM,CAACyC,YAAY,CAAC;IAC7C7B,OAAO,EAAEH,aAAa;IACtBiC,gBAAgB,EAAGJ,IAAI,IAAKA,IAAI,CAACK,cAAc;IAC/CC,iBAAiB,EAAEA,CAAC;MAAEC;IAAI,CAAC,KAAKC,MAAM,CAACD,GAAG,CAAC;IAC3ClB,SAAS,EAAEC,cAAc;IACzBzB,KAAK;IACL4C,iBAAiB,EAAE3C,iBAAiB;IACpC4C,yBAAyB,EAAE3C,cAAc,KAAK,MAAM;IACpD4C,wBAAwB,EAAE3C;EAC5B,CAAC,CAAC;EAEF,MAAM4C,iBAAiB,GAAG,IAAAC,kEAAgC,EACxDjD,YAAY,EACZgC,KAAK,CAAC3B,UACR,CAAC;EAED,MAAM6C,cAAc,GAAG,IAAAC,wDAA2B,EAAC;IACjD,GAAGtD,MAAM;IACTmD;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGE,cAAc;IACjBlB,KAAK;IACLb,OAAO,EAAEC,YAAY;IACrBV,OAAO,EAAEJ,eAAe;IACxB0C,iBAAiB;IACjB/B,aAAa;IACbI,UAAU;IACVC,aAAa;IACbC,qBAAqB;IACrB6B,gBAAgB,EAAE,IAAI;IACtB;IACAxC,cAAc;IACdD,MAAM;IACNI;EACF,CAAC;AACH,CAAC;AAACsC,OAAA,CAAAzD,0BAAA,GAAAA,0BAAA","ignoreList":[]}