{"version":3,"names":["Box","CustomModalLayout","Input","Modal","Text","React","useState","EditModal","_ref","_modalParams$title","_modalParams$actions","_modalParams$actions2","sdk","modalParams","actionParams","values","setValues","fields","reduce","acc","field","id","item","closeModal","getOptimisticActions","collectionId","optimisticActions","createElement","isOpen","onRequestClose","title","text","onCloseButtonClick","primaryButtonOnClick","_modalParams$feedback","schema","getSchema","updatedItem","updateOne","successToast","feedback","errorToast","_modalParams$feedback2","submit","Error","result","actions","update","secondaryButtonOnClick","primaryButtonText","secondaryButtonText","cancel","content","direction","width","gap","paddingTop","paddingBottom","map","key","label","value","onChange","e","prev","target"],"sources":["../../../../../src/components/modals/actions/EditModal.tsx"],"sourcesContent":["import { Box, CustomModalLayout, Input, Modal, Text } from '@wix/design-system';\nimport React, { useState } from 'react';\nimport { UpdateActionModal } from '../../../types';\nimport { ActionModalProps } from './types';\n\nexport interface EditModalProps extends ActionModalProps {\n  modalParams: UpdateActionModal;\n  actionParams: { item: any };\n}\n\nexport const EditModal = ({\n  sdk,\n  modalParams,\n  actionParams,\n}: EditModalProps) => {\n  const [values, setValues] = useState(\n    modalParams.fields.reduce((acc, field) => {\n      acc[field.id] = actionParams.item[field.id];\n      return acc;\n    }, {} as Record<string, any>),\n  );\n  const { closeModal } = sdk;\n  const { getOptimisticActions, collectionId } = sdk;\n  const optimisticActions = getOptimisticActions(collectionId);\n\n  return (\n    <Modal isOpen onRequestClose={closeModal}>\n      <CustomModalLayout\n        title={modalParams.title?.text || 'Edit'}\n        onCloseButtonClick={() => {\n          closeModal();\n        }}\n        primaryButtonOnClick={() => {\n          const schema = sdk.getSchema(sdk.collectionId);\n          const updatedItem = { ...actionParams.item, ...values };\n          optimisticActions?.updateOne(updatedItem, {\n            successToast:\n              modalParams.feedback?.successToast?.text ||\n              'Item updated successfully',\n            errorToast: () =>\n              modalParams.feedback?.errorToast?.text || 'Failed to update item',\n            submit: async () => {\n              if (!schema) {\n                throw new Error('Schema not found');\n              }\n\n              const result = await schema.actions.update(updatedItem);\n              return [result];\n            },\n          });\n          closeModal();\n        }}\n        secondaryButtonOnClick={() => {\n          closeModal();\n        }}\n        primaryButtonText={modalParams.actions?.submit?.text || 'Save'}\n        secondaryButtonText={modalParams.actions?.cancel?.text || 'Cancel'}\n        content={\n          <Box\n            direction=\"vertical\"\n            width=\"552px\"\n            gap=\"SP2\"\n            paddingTop=\"SP1\"\n            paddingBottom=\"SP1\"\n          >\n            {modalParams.fields.map((field) => {\n              return (\n                <Box key={field.id} direction=\"vertical\" width=\"100%\" gap=\"SP2\">\n                  <Box>\n                    <Text>{field.label}</Text>\n                  </Box>\n                  <Box>\n                    <Input\n                      value={values[field.id]}\n                      onChange={(e) => {\n                        setValues((prev) => ({\n                          ...prev,\n                          [field.id]: e.target.value,\n                        }));\n                      }}\n                    />\n                  </Box>\n                </Box>\n              );\n            })}\n          </Box>\n        }\n      />\n    </Modal>\n  );\n};\n"],"mappings":"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","ignoreList":[]}