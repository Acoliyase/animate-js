{"version":3,"names":["React","FormField","NumberInput","useEntityPageContext","useSelector","useWixPatternsContainer","useController","Number","props","_field$validation","_pageState$entity","_field$validation3","_controller$fieldStat","field","dataHook","translate","t","container","initTask","status","pageState","numberRange","validation","min","max","controller","name","id","control","form","defaultValue","entity","rules","validate","value","_field$validation2","required","undefined","minAmount","maxAmount","createElement","label","displayName","fieldState","error","statusMessage","message","onChange","e","onBlur","inputRef","ref"],"sources":["../../../../../src/components/AutoPatternsEntityPage/Fields/Number.tsx"],"sourcesContent":["import React from 'react';\nimport { FormField, NumberInput } from '@wix/design-system';\nimport { BaseInputProps } from './types';\nimport {\n  useEntityPageContext,\n  useSelector,\n  useWixPatternsContainer,\n} from '@wix/patterns';\nimport { useController } from '@wix/patterns/form';\n\nexport interface NumberProps extends BaseInputProps<number | null> {}\n\nexport const Number = (props: NumberProps) => {\n  const { field, dataHook } = props;\n\n  const { translate: t, ...container } = useWixPatternsContainer();\n  useSelector(() => container.initTask.status);\n\n  const pageState = useEntityPageContext();\n\n  const numberRange = field.validation?.numberRange;\n  const min = numberRange?.min;\n  const max = numberRange?.max;\n\n  const controller = useController({\n    name: field?.id ?? '',\n    control: pageState.form.control,\n    defaultValue: (pageState.entity as any)?.[field?.id ?? ''],\n    rules: {\n      validate: (value) => {\n        if (\n          field.validation?.required &&\n          (value === null || value === undefined || value === '')\n        ) {\n          return t('cairo.fieldValidation.requiredField');\n        }\n\n        if (value !== null && value !== undefined) {\n          if (min !== undefined && value < min) {\n            return t('cairo.fieldValidation.minNumber', {\n              minAmount: min,\n            });\n          }\n          if (max !== undefined && value > max) {\n            return t('cairo.fieldValidation.maxNumber', {\n              maxAmount: max,\n            });\n          }\n        }\n\n        return true;\n      },\n    },\n  });\n\n  return (\n    <FormField\n      label={field.displayName}\n      required={field.validation?.required}\n      status={controller.fieldState.error ? 'error' : undefined}\n      statusMessage={controller.fieldState.error?.message}\n      dataHook={dataHook}\n    >\n      <NumberInput\n        value={controller.field.value ?? undefined}\n        onChange={(e) => controller.field.onChange(e)}\n        onBlur={controller.field.onBlur}\n        inputRef={controller.field.ref}\n        dataHook={`number-${field.id}`}\n      />\n    </FormField>\n  );\n};\n"],"mappings":"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","ignoreList":[]}