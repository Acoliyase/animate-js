{"version":3,"names":["React","FormField","Input","useEntityPageContext","useSelector","useWixPatternsContainer","useController","ShortText","props","_field$validation","_pageState$entity","_controller$field$val","_field$validation3","_controller$fieldStat","field","dataHook","translate","t","container","initTask","status","pageState","stringLengthRange","validation","minLength","maxLength","controller","name","id","control","form","defaultValue","entity","rules","validate","value","_field$validation2","required","undefined","length","charMin","charMax","charCount","createElement","label","displayName","fieldState","error","statusMessage","message","onChange","e","target","onBlur","ref"],"sources":["../../../../../src/components/AutoPatternsEntityPage/Fields/ShortText.tsx"],"sourcesContent":["import React from 'react';\nimport { FormField, Input } from '@wix/design-system';\nimport { BaseInputProps } from './types';\nimport {\n  useEntityPageContext,\n  useSelector,\n  useWixPatternsContainer,\n} from '@wix/patterns';\nimport { useController } from '@wix/patterns/form';\n\nexport interface ShortTextProps extends BaseInputProps<string> {}\n\nexport const ShortText = (props: ShortTextProps) => {\n  const { field, dataHook } = props;\n\n  const { translate: t, ...container } = useWixPatternsContainer();\n  useSelector(() => container.initTask.status);\n\n  const pageState = useEntityPageContext();\n\n  const stringLengthRange = field.validation?.stringLengthRange;\n  const minLength = stringLengthRange?.minLength;\n  const maxLength = stringLengthRange?.maxLength;\n\n  const controller = useController({\n    name: field?.id ?? '',\n    control: pageState.form.control,\n    defaultValue: (pageState.entity as any)?.[field?.id ?? ''],\n    rules: {\n      validate: (value) => {\n        if (\n          field.validation?.required &&\n          (value === null || value === undefined || value === '')\n        ) {\n          return t('cairo.fieldValidation.requiredField');\n        }\n\n        if (minLength && value && value.length < minLength) {\n          return t('cairo.fieldValidation.minCharacter', {\n            charMin: minLength,\n          });\n        } else if (maxLength && value && value.length > maxLength) {\n          return t('cairo.fieldValidation.maxCharacter', {\n            charMax: maxLength,\n          });\n        }\n\n        return true;\n      },\n    },\n  });\n\n  const charCount = maxLength\n    ? maxLength - controller.field.value?.length\n    : undefined;\n\n  return (\n    <FormField\n      label={field.displayName}\n      required={field.validation?.required}\n      charCount={charCount}\n      status={controller.fieldState.error ? 'error' : undefined}\n      statusMessage={controller.fieldState.error?.message}\n      dataHook={dataHook}\n    >\n      <Input\n        value={controller.field.value}\n        onChange={(e) => controller.field.onChange?.(e.target.value)}\n        onBlur={controller.field.onBlur}\n        dataHook={`short-text-${field.id}`}\n        ref={controller.field.ref}\n      />\n    </FormField>\n  );\n};\n"],"mappings":"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","ignoreList":[]}