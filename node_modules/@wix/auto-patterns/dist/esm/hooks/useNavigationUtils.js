import { useCallback } from 'react';
import { usePatternsNavigate } from '@wix/patterns/router';
import { useAppConfigContext, useSchemaRegistry } from '../providers';
import { generatePath } from 'react-router-dom';
import { usePagePath } from './usePagePath';
export const useNavigation = () => {
  const {
    navigateToEntityPage: navigateToEntityPagePatterns
  } = usePatternsNavigate();
  const appConfig = useAppConfigContext();
  const {
    getSchema
  } = useSchemaRegistry();
  const {
    getPagePath
  } = usePagePath(appConfig);
  const navigateToEntityPage = useCallback(_ref => {
    var _route$params;
    let {
      item,
      entityPageId
    } = _ref;
    const entityPage = entityPageId ? appConfig.pages.find(page => page.id === entityPageId) : null;
    if (!entityPage) {
      return;
    }
    const {
      route,
      collectionId
    } = entityPage.entityPage;
    const schema = getSchema(collectionId);
    if (route.path && (_route$params = route.params) != null && _route$params.id && schema) {
      const path = generatePath(route.path, {
        [route.params.id]: (item == null ? void 0 : item[schema.idField]) ?? ''
      });
      navigateToEntityPagePatterns({
        path,
        entity: item
      });
    }
  }, [appConfig, navigateToEntityPagePatterns, getSchema]);
  const getParentPagePath = useCallback(parentPageId => {
    return getPagePath(parentPageId);
  }, [getPagePath]);
  return {
    navigateToEntityPage,
    getParentPagePath,
    getPagePath
  };
};
//# sourceMappingURL=useNavigationUtils.js.map