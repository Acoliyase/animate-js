{"version":3,"names":["useFetchData","useTableGridSwitchCollection","useCommonCollectionFeatures","useFilters","useSchema","useAutoPatternsOptimisticActions","useBaseGridFeatures","useBaseTableFeatures","useTableGridSwitchFeatures","config","schema","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","filterComponent","filtersObject","filterFieldMapping","filters","preset","imagePlacement","visibleFieldIds","gridVisibleFieldIds","renderItem","customColumns","tableVisibleFieldIds","columns","tableColumns","onRowClick","stickyColumns","stickySelectionColumn","fetchData","tableFetchData","searchableFieldIds","Array","from","Set","state","queryName","itemKey","item","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","_ref","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","commonFeatures","horizontalScroll"],"sources":["../../../src/hooks/useTableGridSwitchFeatures.tsx"],"sourcesContent":["import { TableGridSwitchConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useTableGridSwitchCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseGridFeatures } from './useBaseGridFeatures';\nimport { useBaseTableFeatures } from './useBaseTableFeatures';\n\nexport const useTableGridSwitchFeatures = (config: TableGridSwitchConfig) => {\n  const schema = useSchema();\n\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = config.collection;\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    config.filters,\n  );\n\n  const {\n    preset,\n    imagePlacement,\n    visibleFieldIds: gridVisibleFieldIds,\n    renderItem,\n  } = useBaseGridFeatures(config);\n\n  const {\n    customColumns,\n    visibleFieldIds: tableVisibleFieldIds,\n    columns: tableColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  } = useBaseTableFeatures(config);\n\n  const { fetchData: tableFetchData } = useFetchData({\n    searchableFieldIds: Array.from(\n      new Set([...tableVisibleFieldIds, ...gridVisibleFieldIds]),\n    ),\n    filterFieldMapping,\n  });\n\n  const state = useTableGridSwitchCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (item) => item[schema.idField],\n    itemName: (item) => item[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (item) => item.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData: tableFetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...config,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    columns: tableColumns,\n    filters: filterComponent,\n    optimisticActions,\n    customColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n    horizontalScroll: true,\n    // Grid specific features\n    imagePlacement,\n    preset,\n    renderItem,\n  };\n};\n"],"mappings":"AACA,SAASA,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,4BAA4B,QAAQ,eAAe;AAC5D,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,gCAAgC,QAAQ,oCAAoC;AACrF,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,SAASC,oBAAoB,QAAQ,wBAAwB;AAE7D,OAAO,MAAMC,0BAA0B,GAAIC,MAA6B,IAAK;EAC3E,MAAMC,MAAM,GAAGN,SAAS,CAAC,CAAC;EAE1B,MAAM;IACJO,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGN,MAAM,CAACO,UAAU;EAErB,MAAM;IAAEC,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAGhB,UAAU,CACvEM,MAAM,CAACW,OACT,CAAC;EAED,MAAM;IACJC,MAAM;IACNC,cAAc;IACdC,eAAe,EAAEC,mBAAmB;IACpCC;EACF,CAAC,GAAGnB,mBAAmB,CAACG,MAAM,CAAC;EAE/B,MAAM;IACJiB,aAAa;IACbH,eAAe,EAAEI,oBAAoB;IACrCC,OAAO,EAAEC,YAAY;IACrBC,UAAU;IACVC,aAAa;IACbC;EACF,CAAC,GAAGzB,oBAAoB,CAACE,MAAM,CAAC;EAEhC,MAAM;IAAEwB,SAAS,EAAEC;EAAe,CAAC,GAAGlC,YAAY,CAAC;IACjDmC,kBAAkB,EAAEC,KAAK,CAACC,IAAI,CAC5B,IAAIC,GAAG,CAAC,CAAC,GAAGX,oBAAoB,EAAE,GAAGH,mBAAmB,CAAC,CAC3D,CAAC;IACDL;EACF,CAAC,CAAC;EAEF,MAAMoB,KAAK,GAAGtC,4BAA4B,CAAM;IAC9CuC,SAAS,EAAE,GAAG7B,YAAY,EAAE;IAC5B8B,OAAO,EAAGC,IAAI,IAAKA,IAAI,CAAChC,MAAM,CAACiC,OAAO,CAAC;IACvCC,QAAQ,EAAGF,IAAI,IAAKA,IAAI,CAAChC,MAAM,CAACmC,YAAY,CAAC;IAC7CzB,OAAO,EAAEF,aAAa;IACtB4B,gBAAgB,EAAGJ,IAAI,IAAKA,IAAI,CAACK,cAAc;IAC/CC,iBAAiB,EAAEC,IAAA;MAAA,IAAC;QAAEC;MAAI,CAAC,GAAAD,IAAA;MAAA,OAAKE,MAAM,CAACD,GAAG,CAAC;IAAA;IAC3CjB,SAAS,EAAEC,cAAc;IACzBtB,KAAK;IACLwC,iBAAiB,EAAEvC,iBAAiB;IACpCwC,yBAAyB,EAAEvC,cAAc,KAAK,MAAM;IACpDwC,wBAAwB,EAAEvC;EAC5B,CAAC,CAAC;EAEF,MAAMwC,iBAAiB,GAAGlD,gCAAgC,CACxDM,YAAY,EACZ4B,KAAK,CAACvB,UACR,CAAC;EAED,MAAMwC,cAAc,GAAGtD,2BAA2B,CAAC;IACjD,GAAGO,MAAM;IACT8C;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGC,cAAc;IACjBjB,KAAK;IACLX,OAAO,EAAEC,YAAY;IACrBT,OAAO,EAAEH,eAAe;IACxBsC,iBAAiB;IACjB7B,aAAa;IACbI,UAAU;IACVC,aAAa;IACbC,qBAAqB;IACrByB,gBAAgB,EAAE,IAAI;IACtB;IACAnC,cAAc;IACdD,MAAM;IACNI;EACF,CAAC;AACH,CAAC","ignoreList":[]}