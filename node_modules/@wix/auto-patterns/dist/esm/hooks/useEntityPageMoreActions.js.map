{"version":3,"names":["customAction","resolveAction","groupActions","useCallback","useEntityPageMoreActions","moreActions","entity","sdk","form","buildEntityPageActions","buildAction","actionConfig","actionToResolve","baseParams","actionParams","type","action","resolved","onClick","text","label","prefixIcon","icon","disabled","actionGroups","map","group","filter","Boolean","length"],"sources":["../../../src/hooks/useEntityPageMoreActions.ts"],"sourcesContent":["import { ActionsSDK, ResolvedAction } from '../types';\nimport { EntityPageMoreActions } from '../types/actions';\nimport { customAction, resolveAction, groupActions } from '../utils/actions';\nimport { useCallback } from 'react';\nimport { MoreActionsItem } from '@wix/patterns';\nimport { FieldValues, UseFormReturn } from '@wix/patterns/form';\nimport { CustomActionConfig } from '../types/actions/base';\n\nexport function useEntityPageMoreActions(\n  moreActions: EntityPageMoreActions | undefined,\n  entity: Record<string, any>,\n  sdk: ActionsSDK,\n  form: UseFormReturn<FieldValues, any, undefined>,\n) {\n  const buildEntityPageActions = useCallback(() => {\n    if (!moreActions) {\n      return;\n    }\n\n    const buildAction = (\n      actionConfig: CustomActionConfig,\n    ): MoreActionsItem | null => {\n      let actionToResolve: Partial<ResolvedAction> | null = null;\n      const baseParams = {\n        actionParams: { entity, form },\n        sdk,\n      };\n\n      switch (actionConfig.type) {\n        case 'custom':\n          actionToResolve = customAction({\n            action: actionConfig,\n            ...baseParams,\n          });\n          break;\n        default:\n          return null;\n      }\n\n      if (!actionToResolve) {\n        return null;\n      }\n\n      const resolved = resolveAction(\n        actionConfig,\n        actionToResolve,\n      ) as ResolvedAction;\n\n      return {\n        onClick: resolved.onClick,\n        text: resolved.label,\n        prefixIcon: resolved.icon,\n        disabled: resolved.disabled,\n      };\n    };\n\n    const actionGroups = groupActions(moreActions);\n    return actionGroups\n      .map((group) =>\n        group\n          .map(buildAction)\n          .filter((action): action is MoreActionsItem => Boolean(action)),\n      )\n      .filter((group) => group.length > 0);\n  }, [moreActions, sdk, entity, form]);\n\n  return buildEntityPageActions() ?? [];\n}\n"],"mappings":"AAEA,SAASA,YAAY,EAAEC,aAAa,EAAEC,YAAY,QAAQ,kBAAkB;AAC5E,SAASC,WAAW,QAAQ,OAAO;AAKnC,OAAO,SAASC,wBAAwBA,CACtCC,WAA8C,EAC9CC,MAA2B,EAC3BC,GAAe,EACfC,IAAgD,EAChD;EACA,MAAMC,sBAAsB,GAAGN,WAAW,CAAC,MAAM;IAC/C,IAAI,CAACE,WAAW,EAAE;MAChB;IACF;IAEA,MAAMK,WAAW,GACfC,YAAgC,IACL;MAC3B,IAAIC,eAA+C,GAAG,IAAI;MAC1D,MAAMC,UAAU,GAAG;QACjBC,YAAY,EAAE;UAAER,MAAM;UAAEE;QAAK,CAAC;QAC9BD;MACF,CAAC;MAED,QAAQI,YAAY,CAACI,IAAI;QACvB,KAAK,QAAQ;UACXH,eAAe,GAAGZ,YAAY,CAAC;YAC7BgB,MAAM,EAAEL,YAAY;YACpB,GAAGE;UACL,CAAC,CAAC;UACF;QACF;UACE,OAAO,IAAI;MACf;MAEA,IAAI,CAACD,eAAe,EAAE;QACpB,OAAO,IAAI;MACb;MAEA,MAAMK,QAAQ,GAAGhB,aAAa,CAC5BU,YAAY,EACZC,eACF,CAAmB;MAEnB,OAAO;QACLM,OAAO,EAAED,QAAQ,CAACC,OAAO;QACzBC,IAAI,EAAEF,QAAQ,CAACG,KAAK;QACpBC,UAAU,EAAEJ,QAAQ,CAACK,IAAI;QACzBC,QAAQ,EAAEN,QAAQ,CAACM;MACrB,CAAC;IACH,CAAC;IAED,MAAMC,YAAY,GAAGtB,YAAY,CAACG,WAAW,CAAC;IAC9C,OAAOmB,YAAY,CAChBC,GAAG,CAAEC,KAAK,IACTA,KAAK,CACFD,GAAG,CAACf,WAAW,CAAC,CAChBiB,MAAM,CAAEX,MAAM,IAAgCY,OAAO,CAACZ,MAAM,CAAC,CAClE,CAAC,CACAW,MAAM,CAAED,KAAK,IAAKA,KAAK,CAACG,MAAM,GAAG,CAAC,CAAC;EACxC,CAAC,EAAE,CAACxB,WAAW,EAAEE,GAAG,EAAED,MAAM,EAAEE,IAAI,CAAC,CAAC;EAEpC,OAAOC,sBAAsB,CAAC,CAAC,IAAI,EAAE;AACvC","ignoreList":[]}