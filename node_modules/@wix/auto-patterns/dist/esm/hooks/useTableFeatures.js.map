{"version":3,"names":["useFetchData","useTableCollection","useCommonCollectionFeatures","useFilters","useSchema","useAutoPatternsOptimisticActions","useBaseTableFeatures","useTableFeatures","configuration","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","filterComponent","filtersObject","filterFieldMapping","filters","customColumns","visibleFieldIds","columns","onRowClick","stickyColumns","stickySelectionColumn","fetchData","searchableFieldIds","schema","state","queryName","itemKey","item","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","_ref","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","commonFeatures"],"sources":["../../../src/hooks/useTableFeatures.tsx"],"sourcesContent":["import { TableConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useTableCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseTableFeatures } from './useBaseTableFeatures';\n\nexport const useTableFeatures = (configuration: TableConfig) => {\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = configuration.collection;\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    configuration.filters,\n  );\n  const {\n    customColumns,\n    visibleFieldIds,\n    columns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  } = useBaseTableFeatures(configuration);\n\n  const { fetchData } = useFetchData({\n    searchableFieldIds: visibleFieldIds,\n    filterFieldMapping,\n  });\n\n  const schema = useSchema();\n\n  const state = useTableCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (item) => item[schema.idField],\n    itemName: (item) => item[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (item) => item.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...configuration,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    columns,\n    filters: filterComponent,\n    optimisticActions,\n    customColumns,\n    onRowClick,\n    stickyColumns,\n    stickySelectionColumn,\n  };\n};\n"],"mappings":"AACA,SAASA,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,kBAAkB,QAAQ,eAAe;AAClD,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,gCAAgC,QAAQ,oCAAoC;AACrF,SAASC,oBAAoB,QAAQ,wBAAwB;AAE7D,OAAO,MAAMC,gBAAgB,GAAIC,aAA0B,IAAK;EAC9D,MAAM;IACJC,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGL,aAAa,CAACM,UAAU;EAE5B,MAAM;IAAEC,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAGd,UAAU,CACvEK,aAAa,CAACU,OAChB,CAAC;EACD,MAAM;IACJC,aAAa;IACbC,eAAe;IACfC,OAAO;IACPC,UAAU;IACVC,aAAa;IACbC;EACF,CAAC,GAAGlB,oBAAoB,CAACE,aAAa,CAAC;EAEvC,MAAM;IAAEiB;EAAU,CAAC,GAAGzB,YAAY,CAAC;IACjC0B,kBAAkB,EAAEN,eAAe;IACnCH;EACF,CAAC,CAAC;EAEF,MAAMU,MAAM,GAAGvB,SAAS,CAAC,CAAC;EAE1B,MAAMwB,KAAK,GAAG3B,kBAAkB,CAAM;IACpC4B,SAAS,EAAE,GAAGpB,YAAY,EAAE;IAC5BqB,OAAO,EAAGC,IAAI,IAAKA,IAAI,CAACJ,MAAM,CAACK,OAAO,CAAC;IACvCC,QAAQ,EAAGF,IAAI,IAAKA,IAAI,CAACJ,MAAM,CAACO,YAAY,CAAC;IAC7ChB,OAAO,EAAEF,aAAa;IACtBmB,gBAAgB,EAAGJ,IAAI,IAAKA,IAAI,CAACK,cAAc;IAC/CC,iBAAiB,EAAEC,IAAA;MAAA,IAAC;QAAEC;MAAI,CAAC,GAAAD,IAAA;MAAA,OAAKE,MAAM,CAACD,GAAG,CAAC;IAAA;IAC3Cd,SAAS;IACTf,KAAK;IACL+B,iBAAiB,EAAE9B,iBAAiB;IACpC+B,yBAAyB,EAAE9B,cAAc,KAAK,MAAM;IACpD+B,wBAAwB,EAAE9B;EAC5B,CAAC,CAAC;EAEF,MAAM+B,iBAAiB,GAAGvC,gCAAgC,CACxDI,YAAY,EACZmB,KAAK,CAACd,UACR,CAAC;EAED,MAAM+B,cAAc,GAAG3C,2BAA2B,CAAC;IACjD,GAAGM,aAAa;IAChBoC;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGC,cAAc;IACjBjB,KAAK;IACLP,OAAO;IACPH,OAAO,EAAEH,eAAe;IACxB6B,iBAAiB;IACjBzB,aAAa;IACbG,UAAU;IACVC,aAAa;IACbC;EACF,CAAC;AACH,CAAC","ignoreList":[]}