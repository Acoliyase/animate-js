{"version":3,"names":["React","useCallback","useMemo","useActionsSDK","createAction","customAction","resolveAction","groupActions","PrimaryActions","SecondaryActions","useCollectionPageActions","_ref","collectionPageActions","sdk","collectionId","buildCollectionPageActions","buildAction","actionConfig","actionToResolve","baseParams","actionParams","collection","type","action","resolvedAction","tooltip","icon","resolvedActionProps","prefixIcon","disabledDescription","handleActionsType","actions","item","actionGroups","menu","items","subItems","map","group","filter","length","label","primaryActions","secondaryActions","createElement","undefined"],"sources":["../../../src/hooks/useCollectionPageActions.tsx"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport {\n  CollectionPageActionConfig,\n  CollectionPageConfig,\n  CollectionPagePrimaryActions,\n  CollectionPageSecondaryActions,\n  ResolvedAction,\n} from '../types';\nimport { useActionsSDK } from './useActionsSDK';\nimport {\n  createAction,\n  customAction,\n  resolveAction,\n  groupActions,\n} from '../utils/actions';\nimport { IconElement } from '@wix/design-system';\nimport { PrimaryActions, SecondaryActions } from '@wix/patterns';\n\nexport interface UseCollectionPageActionsParams {\n  collectionPageActions: CollectionPageConfig['actions'];\n}\n\nexport const useCollectionPageActions = ({\n  collectionPageActions,\n}: UseCollectionPageActionsParams) => {\n  const sdk = useActionsSDK({\n    collectionId: '',\n  });\n\n  const buildCollectionPageActions = useCallback(() => {\n    if (!collectionPageActions) {\n      return;\n    }\n\n    const buildAction = (actionConfig: CollectionPageActionConfig) => {\n      let actionToResolve: Partial<ResolvedAction> | null = null;\n\n      const baseParams = {\n        actionParams: {\n          collectionId: actionConfig.collection.collectionId,\n        },\n        sdk,\n      };\n\n      switch (actionConfig.type) {\n        case 'create':\n          actionToResolve = createAction({\n            action: actionConfig,\n            ...baseParams,\n          });\n          break;\n\n        case 'custom':\n          actionToResolve = customAction({\n            action: actionConfig,\n            ...baseParams,\n          });\n          break;\n\n        default:\n          return null;\n      }\n\n      if (!actionToResolve) {\n        return null;\n      }\n\n      const resolvedAction = resolveAction(actionConfig, actionToResolve);\n      const { tooltip, icon, ...resolvedActionProps } = resolvedAction;\n\n      return {\n        ...resolvedActionProps,\n        prefixIcon: icon as IconElement,\n        disabledDescription: resolvedAction.tooltip,\n      };\n    };\n\n    const handleActionsType = (\n      actions: CollectionPagePrimaryActions | CollectionPageSecondaryActions,\n    ) => {\n      if (actions.type === 'action') {\n        return buildAction(actions.action.item);\n      }\n\n      if (actions.type === 'menu') {\n        const actionGroups = groupActions(actions.menu.items);\n        const subItems = actionGroups\n          .map((group) =>\n            group.map(buildAction).filter((action) => action !== null),\n          )\n          .filter((group) => group.length > 0);\n\n        if (!subItems.length) {\n          return null;\n        }\n\n        return {\n          label: actions.menu.label,\n          subItems,\n        };\n      }\n\n      return null;\n    };\n\n    const primaryActions =\n      collectionPageActions?.primaryActions &&\n      handleActionsType(collectionPageActions.primaryActions);\n\n    const secondaryActions =\n      collectionPageActions?.secondaryActions &&\n      handleActionsType(collectionPageActions.secondaryActions);\n\n    if (!primaryActions && !secondaryActions) {\n      return;\n    }\n\n    return {\n      primaryActions: primaryActions ? (\n        <PrimaryActions {...primaryActions} />\n      ) : undefined,\n      secondaryActions: secondaryActions ? (\n        <SecondaryActions {...secondaryActions} />\n      ) : undefined,\n    };\n  }, [collectionPageActions, sdk]);\n\n  const actions = useMemo(() => {\n    return {\n      primaryActions: undefined,\n      secondaryActions: undefined,\n    };\n  }, []);\n\n  if (\n    !collectionPageActions?.primaryActions &&\n    !collectionPageActions?.secondaryActions\n  ) {\n    return { ...actions };\n  }\n\n  return buildCollectionPageActions() ?? { ...actions };\n};\n"],"mappings":"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","ignoreList":[]}