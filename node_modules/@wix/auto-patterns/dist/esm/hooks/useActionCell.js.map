{"version":3,"names":["useCallback","useActionsSDK","updateAction","customAction","resolveAction","deleteAction","cleanupActionsWithDividers","actions","inlineCount","clean","a","filter","x","i","ar","_ar","divider","length","slice","useActionCell","_ref","config","collectionId","sdk","buildCellActions","item","index","api","_config$primaryAction","_config$secondaryActi","_config$secondaryActi2","_config$secondaryActi3","_config$secondaryActi4","buildAction","actionConfig","type","actionToResolve","baseParams","actionParams","action","resolvedAction","label","tooltip","resolvedActionProps","text","disabledDescription","primaryAction","undefined","rawSecondaryActions","secondaryActions","items","map","Boolean","numOfVisibleSecondaryActions","alwaysShowSecondaryActions","inlineAlwaysVisible"],"sources":["../../../src/hooks/useActionCell.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport {\n  ActionCellConfig,\n  ActionCellItemConfig,\n  ResolvedAction,\n} from '../types';\nimport { useActionsSDK } from './useActionsSDK';\nimport {\n  updateAction,\n  customAction,\n  resolveAction,\n  deleteAction,\n} from '../utils/actions';\nimport { DividerActionConfig } from '../types/actions/base';\n\nexport interface useActionCellParams {\n  config?: ActionCellConfig;\n  collectionId: string;\n}\n\nconst cleanupActionsWithDividers = (\n  actions: any[],\n  inlineCount?: number,\n): any[] => {\n  const clean = (a: any[]) =>\n    a.filter(\n      (x, i, ar) =>\n        x?.divider !== true ||\n        (i > 0 && i < ar.length - 1 && ar[i - 1]?.divider !== true),\n    );\n  return !actions?.length || !inlineCount || inlineCount >= actions.length\n    ? clean(actions || [])\n    : [\n        ...clean(actions.slice(0, inlineCount)),\n        ...clean(actions.slice(inlineCount)),\n      ];\n};\n\nexport const useActionCell = ({\n  config,\n  collectionId,\n}: useActionCellParams) => {\n  const sdk = useActionsSDK({\n    collectionId,\n  });\n\n  const buildCellActions = useCallback(\n    (item, index, api) => {\n      const buildAction = (\n        actionConfig: ActionCellItemConfig | DividerActionConfig,\n      ) => {\n        if (actionConfig.type === 'divider') {\n          return { divider: true };\n        }\n\n        let actionToResolve: Partial<ResolvedAction> | null = null;\n\n        const baseParams = {\n          actionParams: { item, index, api },\n          sdk,\n        };\n\n        switch (actionConfig.type) {\n          case 'update':\n            actionToResolve = updateAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          case 'delete':\n            actionToResolve = deleteAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          case 'custom':\n            actionToResolve = customAction({\n              action: actionConfig,\n              ...baseParams,\n            });\n            break;\n\n          default:\n            return null;\n        }\n\n        if (!actionToResolve) {\n          return null;\n        }\n\n        const resolvedAction = resolveAction(actionConfig, actionToResolve);\n        const { label, tooltip, ...resolvedActionProps } = resolvedAction;\n\n        return {\n          ...resolvedActionProps,\n          text: resolvedAction.label,\n          disabledDescription: resolvedAction.tooltip,\n        };\n      };\n\n      const primaryAction = config?.primaryAction?.item\n        ? buildAction(config.primaryAction.item)\n        : undefined;\n\n      const rawSecondaryActions = config?.secondaryActions?.items.length\n        ? config.secondaryActions.items.map(buildAction).filter(Boolean)\n        : [];\n\n      // Process secondary actions with inline count consideration\n      const secondaryActions = cleanupActionsWithDividers(\n        rawSecondaryActions,\n        config?.secondaryActions?.inlineCount,\n      );\n\n      const numOfVisibleSecondaryActions =\n        config?.secondaryActions?.inlineCount;\n      const alwaysShowSecondaryActions =\n        config?.secondaryActions?.inlineAlwaysVisible;\n\n      if (!primaryAction && !secondaryActions.length) {\n        return {};\n      }\n\n      return {\n        ...(primaryAction ? { primaryAction } : { primaryAction: undefined }),\n        ...(secondaryActions.length && { secondaryActions }),\n        numOfVisibleSecondaryActions,\n        alwaysShowSecondaryActions,\n      };\n    },\n    [config, sdk],\n  );\n\n  return buildCellActions;\n};\n"],"mappings":"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","ignoreList":[]}