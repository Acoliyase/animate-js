{"version":3,"names":["useFetchData","useGridCollection","useCommonCollectionFeatures","useFilters","useSchema","useAutoPatternsOptimisticActions","useBaseGridFeatures","useGridFeatures","configuration","collectionId","limit","reflectQueryInUrl","selectAllScope","selectionUpdateMode","collection","renderItem","imagePlacement","preset","visibleFieldIds","filterComponent","filtersObject","filterFieldMapping","filters","fetchData","searchableFieldIds","schema","state","queryName","itemKey","gridItem","idField","itemName","displayField","toExtendedFields","extendedFields","fetchErrorMessage","_ref","err","String","persistQueryToUrl","disableAutoSelectAllCount","selectionConsistencyMode","optimisticActions","commonFeatures"],"sources":["../../../src/hooks/useGridFeatures.tsx"],"sourcesContent":["import { GridConfig } from '../types';\nimport { useFetchData } from './useFetchData';\nimport { useGridCollection } from '@wix/patterns';\nimport { useCommonCollectionFeatures } from './useCommonCollectionFeatures';\nimport { useFilters } from './useFilters';\nimport { useSchema } from '../providers/SchemaContext';\nimport { useAutoPatternsOptimisticActions } from './useAutoPatternsOptimisticActions';\nimport { useBaseGridFeatures } from './useBaseGridFeatures';\n\nexport const useGridFeatures = (configuration: GridConfig) => {\n  const {\n    collectionId,\n    limit,\n    reflectQueryInUrl,\n    selectAllScope,\n    selectionUpdateMode,\n  } = configuration.collection;\n\n  const { renderItem, imagePlacement, preset, visibleFieldIds } =\n    useBaseGridFeatures(configuration);\n\n  const { filterComponent, filtersObject, filterFieldMapping } = useFilters(\n    configuration.filters,\n  );\n\n  const { fetchData } = useFetchData({\n    searchableFieldIds: visibleFieldIds,\n    filterFieldMapping,\n  });\n\n  const schema = useSchema();\n\n  const state = useGridCollection<any>({\n    queryName: `${collectionId}`,\n    itemKey: (gridItem) => gridItem[schema.idField],\n    itemName: (gridItem) => gridItem[schema.displayField],\n    filters: filtersObject,\n    toExtendedFields: (gridItem) => gridItem.extendedFields,\n    fetchErrorMessage: ({ err }) => String(err),\n    fetchData,\n    limit,\n    persistQueryToUrl: reflectQueryInUrl,\n    disableAutoSelectAllCount: selectAllScope === 'page',\n    selectionConsistencyMode: selectionUpdateMode,\n  });\n\n  const optimisticActions = useAutoPatternsOptimisticActions(\n    collectionId,\n    state.collection,\n  );\n\n  const commonFeatures = useCommonCollectionFeatures({\n    ...configuration,\n    optimisticActions,\n  });\n\n  return {\n    ...commonFeatures,\n    state,\n    imagePlacement,\n    preset,\n    optimisticActions,\n    renderItem,\n    filters: filterComponent,\n  };\n};\n"],"mappings":"AACA,SAASA,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,iBAAiB,QAAQ,eAAe;AACjD,SAASC,2BAA2B,QAAQ,+BAA+B;AAC3E,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,SAAS,QAAQ,4BAA4B;AACtD,SAASC,gCAAgC,QAAQ,oCAAoC;AACrF,SAASC,mBAAmB,QAAQ,uBAAuB;AAE3D,OAAO,MAAMC,eAAe,GAAIC,aAAyB,IAAK;EAC5D,MAAM;IACJC,YAAY;IACZC,KAAK;IACLC,iBAAiB;IACjBC,cAAc;IACdC;EACF,CAAC,GAAGL,aAAa,CAACM,UAAU;EAE5B,MAAM;IAAEC,UAAU;IAAEC,cAAc;IAAEC,MAAM;IAAEC;EAAgB,CAAC,GAC3DZ,mBAAmB,CAACE,aAAa,CAAC;EAEpC,MAAM;IAAEW,eAAe;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAGlB,UAAU,CACvEK,aAAa,CAACc,OAChB,CAAC;EAED,MAAM;IAAEC;EAAU,CAAC,GAAGvB,YAAY,CAAC;IACjCwB,kBAAkB,EAAEN,eAAe;IACnCG;EACF,CAAC,CAAC;EAEF,MAAMI,MAAM,GAAGrB,SAAS,CAAC,CAAC;EAE1B,MAAMsB,KAAK,GAAGzB,iBAAiB,CAAM;IACnC0B,SAAS,EAAE,GAAGlB,YAAY,EAAE;IAC5BmB,OAAO,EAAGC,QAAQ,IAAKA,QAAQ,CAACJ,MAAM,CAACK,OAAO,CAAC;IAC/CC,QAAQ,EAAGF,QAAQ,IAAKA,QAAQ,CAACJ,MAAM,CAACO,YAAY,CAAC;IACrDV,OAAO,EAAEF,aAAa;IACtBa,gBAAgB,EAAGJ,QAAQ,IAAKA,QAAQ,CAACK,cAAc;IACvDC,iBAAiB,EAAEC,IAAA;MAAA,IAAC;QAAEC;MAAI,CAAC,GAAAD,IAAA;MAAA,OAAKE,MAAM,CAACD,GAAG,CAAC;IAAA;IAC3Cd,SAAS;IACTb,KAAK;IACL6B,iBAAiB,EAAE5B,iBAAiB;IACpC6B,yBAAyB,EAAE5B,cAAc,KAAK,MAAM;IACpD6B,wBAAwB,EAAE5B;EAC5B,CAAC,CAAC;EAEF,MAAM6B,iBAAiB,GAAGrC,gCAAgC,CACxDI,YAAY,EACZiB,KAAK,CAACZ,UACR,CAAC;EAED,MAAM6B,cAAc,GAAGzC,2BAA2B,CAAC;IACjD,GAAGM,aAAa;IAChBkC;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGC,cAAc;IACjBjB,KAAK;IACLV,cAAc;IACdC,MAAM;IACNyB,iBAAiB;IACjB3B,UAAU;IACVO,OAAO,EAAEH;EACX,CAAC;AACH,CAAC","ignoreList":[]}