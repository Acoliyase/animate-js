{"version":3,"names":["React","createContext","useCallback","useContext","useState","OptimisticActionsContext","undefined","OptimisticActionsProvider","_ref","children","optimisticActionsMap","setOptimisticActionsMap","registerOptimisticActions","collectionId","actions","prev","getOptimisticActions","createElement","Provider","value","useOptimisticActionsContext","context","Error"],"sources":["../../../src/providers/OptimisticActionsContext.tsx"],"sourcesContent":["import React, { createContext, useCallback, useContext, useState } from 'react';\nimport { CollectionOptimisticActions } from '@wix/patterns';\n\ninterface OptimisticActionsContextValue {\n  registerOptimisticActions: (\n    collectionId: string,\n    actions: CollectionOptimisticActions<any, any>,\n  ) => void;\n  getOptimisticActions: (\n    collectionId: string,\n  ) => CollectionOptimisticActions<any, any>;\n}\n\nconst OptimisticActionsContext = createContext<\n  OptimisticActionsContextValue | undefined\n>(undefined);\n\nexport const OptimisticActionsProvider: React.FC<{\n  children: React.ReactNode;\n}> = ({ children }) => {\n  const [optimisticActionsMap, setOptimisticActionsMap] = useState<\n    Record<string, CollectionOptimisticActions<any, any>>\n  >({});\n\n  const registerOptimisticActions = useCallback(\n    (collectionId: string, actions: CollectionOptimisticActions<any, any>) => {\n      setOptimisticActionsMap((prev) => ({\n        ...prev,\n        [collectionId]: actions,\n      }));\n    },\n    [],\n  );\n\n  const getOptimisticActions = useCallback(\n    (collectionId: string) => optimisticActionsMap[collectionId],\n    [optimisticActionsMap],\n  );\n\n  return (\n    <OptimisticActionsContext.Provider\n      value={{ registerOptimisticActions, getOptimisticActions }}\n    >\n      {children}\n    </OptimisticActionsContext.Provider>\n  );\n};\n\nexport const useOptimisticActionsContext = () => {\n  const context = useContext(OptimisticActionsContext);\n  if (!context) {\n    throw new Error(\n      'useOptimisticActionsContext must be used within an OptimisticActionsProvider',\n    );\n  }\n  return context;\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,WAAW,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAa/E,MAAMC,wBAAwB,gBAAGJ,aAAa,CAE5CK,SAAS,CAAC;AAEZ,OAAO,MAAMC,yBAEX,GAAGC,IAAA,IAAkB;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAD,IAAA;EAChB,MAAM,CAACE,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGP,QAAQ,CAE9D,CAAC,CAAC,CAAC;EAEL,MAAMQ,yBAAyB,GAAGV,WAAW,CAC3C,CAACW,YAAoB,EAAEC,OAA8C,KAAK;IACxEH,uBAAuB,CAAEI,IAAI,KAAM;MACjC,GAAGA,IAAI;MACP,CAACF,YAAY,GAAGC;IAClB,CAAC,CAAC,CAAC;EACL,CAAC,EACD,EACF,CAAC;EAED,MAAME,oBAAoB,GAAGd,WAAW,CACrCW,YAAoB,IAAKH,oBAAoB,CAACG,YAAY,CAAC,EAC5D,CAACH,oBAAoB,CACvB,CAAC;EAED,oBACEV,KAAA,CAAAiB,aAAA,CAACZ,wBAAwB,CAACa,QAAQ;IAChCC,KAAK,EAAE;MAAEP,yBAAyB;MAAEI;IAAqB;EAAE,GAE1DP,QACgC,CAAC;AAExC,CAAC;AAED,OAAO,MAAMW,2BAA2B,GAAGA,CAAA,KAAM;EAC/C,MAAMC,OAAO,GAAGlB,UAAU,CAACE,wBAAwB,CAAC;EACpD,IAAI,CAACgB,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CACb,8EACF,CAAC;EACH;EACA,OAAOD,OAAO;AAChB,CAAC","ignoreList":[]}