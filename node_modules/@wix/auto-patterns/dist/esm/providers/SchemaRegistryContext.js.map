{"version":3,"names":["React","createContext","useContext","useState","useCallback","useMemo","SchemaRegistryContext","getSchema","undefined","addSchema","SchemaRegistryProvider","_ref","children","registry","setRegistry","collectionId","schema","prevRegistry","contextValue","createElement","Provider","value","useSchemaRegistry","context","Error"],"sources":["../../../src/providers/SchemaRegistryContext.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useState,\n  ReactNode,\n  useCallback,\n  useMemo,\n} from 'react';\n\nimport { SchemaConfig } from '../types';\n\nexport interface SchemaRegistryContextValue {\n  getSchema: (collectionId: string) => SchemaConfig | undefined;\n  addSchema: (collectionId: string, schema: SchemaConfig) => void;\n}\n\nexport type SchemaRegistry = Record<string, SchemaConfig>;\n\nconst SchemaRegistryContext = createContext<SchemaRegistryContextValue>({\n  getSchema: () => undefined,\n  addSchema: () => {},\n});\n\nexport interface SchemaRegistryProviderProps {\n  children: ReactNode;\n}\n\nexport const SchemaRegistryProvider = ({\n  children,\n}: SchemaRegistryProviderProps) => {\n  const [registry, setRegistry] = useState<SchemaRegistry>({});\n\n  const addSchema = useCallback(\n    (collectionId: string, schema: SchemaConfig) => {\n      setRegistry((prevRegistry) => ({\n        ...prevRegistry,\n        [collectionId]: schema,\n      }));\n    },\n    [],\n  );\n\n  const getSchema = useCallback(\n    (collectionId: string) => {\n      return registry?.[collectionId];\n    },\n    [registry],\n  );\n\n  const contextValue = useMemo(\n    () => ({\n      getSchema,\n      addSchema,\n    }),\n    [getSchema, addSchema],\n  );\n\n  return (\n    <SchemaRegistryContext.Provider value={contextValue}>\n      {children}\n    </SchemaRegistryContext.Provider>\n  );\n};\n\nexport const useSchemaRegistry = (): SchemaRegistryContextValue => {\n  const context = useContext(SchemaRegistryContext);\n  if (!context) {\n    throw new Error(\n      'useSchemaRegistry must be used within a UseRegistryProvider',\n    );\n  }\n  return context;\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IACVC,aAAa,EACbC,UAAU,EACVC,QAAQ,EAERC,WAAW,EACXC,OAAO,QACF,OAAO;AAWd,MAAMC,qBAAqB,gBAAGL,aAAa,CAA6B;EACtEM,SAAS,EAAEA,CAAA,KAAMC,SAAS;EAC1BC,SAAS,EAAEA,CAAA,KAAM,CAAC;AACpB,CAAC,CAAC;AAMF,OAAO,MAAMC,sBAAsB,GAAGC,IAAA,IAEH;EAAA,IAFI;IACrCC;EAC2B,CAAC,GAAAD,IAAA;EAC5B,MAAM,CAACE,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAiB,CAAC,CAAC,CAAC;EAE5D,MAAMM,SAAS,GAAGL,WAAW,CAC3B,CAACW,YAAoB,EAAEC,MAAoB,KAAK;IAC9CF,WAAW,CAAEG,YAAY,KAAM;MAC7B,GAAGA,YAAY;MACf,CAACF,YAAY,GAAGC;IAClB,CAAC,CAAC,CAAC;EACL,CAAC,EACD,EACF,CAAC;EAED,MAAMT,SAAS,GAAGH,WAAW,CAC1BW,YAAoB,IAAK;IACxB,OAAOF,QAAQ,oBAARA,QAAQ,CAAGE,YAAY,CAAC;EACjC,CAAC,EACD,CAACF,QAAQ,CACX,CAAC;EAED,MAAMK,YAAY,GAAGb,OAAO,CAC1B,OAAO;IACLE,SAAS;IACTE;EACF,CAAC,CAAC,EACF,CAACF,SAAS,EAAEE,SAAS,CACvB,CAAC;EAED,oBACET,KAAA,CAAAmB,aAAA,CAACb,qBAAqB,CAACc,QAAQ;IAACC,KAAK,EAAEH;EAAa,GACjDN,QAC6B,CAAC;AAErC,CAAC;AAED,OAAO,MAAMU,iBAAiB,GAAGA,CAAA,KAAkC;EACjE,MAAMC,OAAO,GAAGrB,UAAU,CAACI,qBAAqB,CAAC;EACjD,IAAI,CAACiB,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CACb,6DACF,CAAC;EACH;EACA,OAAOD,OAAO;AAChB,CAAC","ignoreList":[]}