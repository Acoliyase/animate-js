{"version":3,"names":["dateRangeFilter","idNameArrayFilter","numberRangeFilter","DateRangeFilter","RadioGroupFilter","NumberRangeFilter","AutoCompleteFilter","MultiSelectCheckboxFilter","MultiInlineCheckboxFilter","MultiSelectCollectionFilter","BooleanFilters","createDateTimeFilter","_ref","id","fieldId","commonFilterProps","config","key","filter","component","props","mode","dateRangeOptions","presets","filterByTime","includeTime","createBooleanFilter","_ref2","matches","fieldValue","filterValue","some","v","checked","unchecked","data","name","trueLabel","falseLabel","createNumberFilter","_ref3","min","max","decimal","allowedDecimals","createEnumFilter","_ref4","options","selectionMode","optionType","map","option","value","label","inlineComponentThreshold","length","collectionData","createReferenceFilter","_ref5","additionalParams","collectionId","referencedSchema"],"sources":["../../../src/utils/filterCreators.ts"],"sourcesContent":["import {\n  dateRangeFilter,\n  idNameArrayFilter,\n  numberRangeFilter,\n  DateRangeFilter,\n  RadioGroupFilter,\n  NumberRangeFilter,\n  AutoCompleteFilter,\n  MultiSelectCheckboxFilter,\n  MultiInlineCheckboxFilter,\n  MultiSelectCollectionFilter,\n} from '@wix/patterns';\nimport { BooleanFilters } from '../dataSourceAdapters/constants';\nimport { FilterOptions } from '../hooks/useFilters';\nimport { SchemaConfig } from '../types';\n\ninterface FilterOption {\n  value: string;\n  label: string;\n}\n\ninterface BaseFilterParams {\n  id: string;\n  fieldId: string;\n  commonFilterProps: Record<string, any>;\n}\n\nexport const createDateTimeFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    mode?: 'ONLY_PREDEFINED' | 'ONLY_CUSTOM' | 'COMBINE';\n    presets?: string[];\n    includeTime?: boolean;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: dateRangeFilter(),\n  component: DateRangeFilter,\n  props: {\n    ...commonFilterProps,\n    mode: config?.mode,\n    dateRangeOptions: config?.presets,\n    filterByTime: config?.includeTime,\n  },\n});\n\nexport const createBooleanFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    trueLabel?: string;\n    falseLabel?: string;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: idNameArrayFilter({\n    matches: (fieldValue, filterValue) => {\n      if (fieldValue) {\n        return filterValue.some((v) => v.id === BooleanFilters.checked);\n      }\n      return filterValue.some((v) => v.id === BooleanFilters.unchecked);\n    },\n  }),\n  component: RadioGroupFilter,\n  props: {\n    ...commonFilterProps,\n    data: [\n      {\n        id: 'checked',\n        name: config?.trueLabel || 'Yes',\n      },\n      {\n        id: 'unchecked',\n        name: config?.falseLabel || 'No',\n      },\n    ],\n  },\n});\n\nexport const createNumberFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config?: {\n    min?: number;\n    max?: number;\n    allowedDecimals?: boolean;\n  };\n}): FilterOptions => ({\n  key: id,\n  fieldId,\n  filter: numberRangeFilter(),\n  component: NumberRangeFilter,\n  props: {\n    ...commonFilterProps,\n    min: config?.min,\n    max: config?.max,\n    decimal: config?.allowedDecimals,\n  },\n});\n\nexport const createEnumFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n}: BaseFilterParams & {\n  config: {\n    options?: FilterOption[];\n    selectionMode?: 'single' | 'multiple';\n    optionType?: 'select' | 'radio' | 'checkbox' | 'inlineCheckbox';\n  };\n}): FilterOptions => {\n  const { options, selectionMode, optionType } = config;\n  const data =\n    options?.map((option: FilterOption) => ({\n      id: option.value,\n      name: option.label,\n    })) ?? [];\n\n  const inlineComponentThreshold = 5;\n\n  let component;\n\n  if (selectionMode === 'single') {\n    component =\n      data.length > inlineComponentThreshold\n        ? AutoCompleteFilter\n        : RadioGroupFilter;\n    if (optionType === 'select') {\n      component = AutoCompleteFilter;\n    } else if (optionType === 'radio') {\n      component = RadioGroupFilter;\n    }\n  } else {\n    component =\n      data.length > inlineComponentThreshold\n        ? MultiSelectCheckboxFilter\n        : MultiInlineCheckboxFilter;\n    if (optionType === 'select') {\n      component = MultiSelectCollectionFilter;\n    } else if (optionType === 'inlineCheckbox') {\n      component = MultiInlineCheckboxFilter;\n    } else if (optionType === 'checkbox') {\n      component = MultiSelectCheckboxFilter;\n    }\n  }\n\n  return {\n    key: id,\n    fieldId,\n    filter: idNameArrayFilter(),\n    component,\n    collectionData: data,\n    props: { ...commonFilterProps, data },\n  };\n};\n\nexport const createReferenceFilter = ({\n  id,\n  fieldId,\n  commonFilterProps,\n  config,\n  additionalParams,\n}: BaseFilterParams & {\n  config?: {\n    selectionMode?: 'single' | 'multiple';\n  };\n  additionalParams: {\n    referencedSchema: SchemaConfig;\n  };\n}): FilterOptions => {\n  const component =\n    config?.selectionMode === 'single'\n      ? AutoCompleteFilter\n      : MultiSelectCollectionFilter;\n\n  return {\n    key: id,\n    fieldId,\n    filter: idNameArrayFilter(),\n    component,\n    collectionId: additionalParams.referencedSchema.id,\n    props: commonFilterProps,\n  };\n};\n"],"mappings":"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","ignoreList":[]}