import React, { useState } from 'react';
import { TodoAppItem } from './TodoAppItem';
export const TodoApp = (props) => {
    const { inputDisabled, inputReadOnly } = props;
    const [item, setItem] = useState(props.initialText ?? '');
    const [items, setItems] = useState(props.items ?? []);
    const [activeItem, setActiveItem] = useState(-1);
    const completedCount = items.filter((i) => i.completed).length;
    const onAdd = () => {
        setItems([...items, { completed: false, label: item }]);
        setItem('');
    };
    return (React.createElement("div", { className: "todo-app" },
        React.createElement("header", null,
            React.createElement("input", { disabled: inputDisabled, onChange: (e) => {
                    setItem(e.target.value);
                }, placeholder: "this is a placeholder", readOnly: inputReadOnly, value: item }),
            React.createElement("button", { className: "add", onClick: onAdd, onKeyDown: (e) => {
                    e.preventDefault();
                    if (e.key === 'Enter') {
                        onAdd();
                    }
                } }, "Add")),
        React.createElement("main", null, items.map((_item, idx) => {
            return (React.createElement(TodoAppItem, { isActive: idx === activeItem, item: _item, key: idx, onBlur: () => {
                    setActiveItem(-1);
                }, onHover: () => {
                    setActiveItem(idx);
                }, onToggle: () => {
                    setItems(items.map((i, itemIdx) => {
                        return idx === itemIdx ? { ...i, completed: !items[idx]?.completed } : i;
                    }));
                } }));
        })),
        React.createElement("footer", null,
            "Items count: ",
            React.createElement("span", { className: "count" }, items.length),
            "Done progress:",
            ' ',
            React.createElement("meter", { max: items.length, min: 0, value: completedCount }, completedCount))));
};
//# sourceMappingURL=TodoApp.js.map