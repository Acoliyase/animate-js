"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TodoApp = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importStar(require("react"));
const TodoAppItem_1 = require("./TodoAppItem");
const TodoApp = (props) => {
    const { inputDisabled, inputReadOnly } = props;
    const [item, setItem] = (0, react_1.useState)(props.initialText ?? '');
    const [items, setItems] = (0, react_1.useState)(props.items ?? []);
    const [activeItem, setActiveItem] = (0, react_1.useState)(-1);
    const completedCount = items.filter((i) => i.completed).length;
    const onAdd = () => {
        setItems([...items, { completed: false, label: item }]);
        setItem('');
    };
    return (react_1.default.createElement("div", { className: "todo-app" },
        react_1.default.createElement("header", null,
            react_1.default.createElement("input", { disabled: inputDisabled, onChange: (e) => {
                    setItem(e.target.value);
                }, placeholder: "this is a placeholder", readOnly: inputReadOnly, value: item }),
            react_1.default.createElement("button", { className: "add", onClick: onAdd, onKeyDown: (e) => {
                    e.preventDefault();
                    if (e.key === 'Enter') {
                        onAdd();
                    }
                } }, "Add")),
        react_1.default.createElement("main", null, items.map((_item, idx) => {
            return (react_1.default.createElement(TodoAppItem_1.TodoAppItem, { isActive: idx === activeItem, item: _item, key: idx, onBlur: () => {
                    setActiveItem(-1);
                }, onHover: () => {
                    setActiveItem(idx);
                }, onToggle: () => {
                    setItems(items.map((i, itemIdx) => {
                        return idx === itemIdx ? { ...i, completed: !items[idx]?.completed } : i;
                    }));
                } }));
        })),
        react_1.default.createElement("footer", null,
            "Items count: ",
            react_1.default.createElement("span", { className: "count" }, items.length),
            "Done progress:",
            ' ',
            react_1.default.createElement("meter", { max: items.length, min: 0, value: completedCount }, completedCount))));
};
exports.TodoApp = TodoApp;
//# sourceMappingURL=TodoApp.js.map