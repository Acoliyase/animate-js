"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const react_1 = require("@testing-library/react");
const react_2 = tslib_1.__importDefault(require("react"));
const testUniDriver_1 = require("../../../__tests__/TestUniDriver/testUniDriver");
const isOfType_1 = require("../isOfType");
const vitest_1 = require("vitest");
describe('isOfType', () => {
    const isTestUniDriver = (driver) => {
        return (0, isOfType_1.isOfType)(driver, 'jsdom-react');
    };
    it('should narrow driver type to specific one', async () => {
        const { container } = (0, react_1.render)(react_2.default.createElement("div", null));
        const driver = (0, testUniDriver_1.testUniDriver)(container);
        // @ts-expect-error - should not allow to call driver-specific method without type narrowing first
        // eslint-disable-next-line @typescript-eslint/no-unsafe-call
        driver.driverSpecificMethod?.();
        if (isTestUniDriver(driver)) {
            driver.driverSpecificMethod();
            const unwrap = await driver.unwrap();
            (0, vitest_1.assertType)(unwrap);
            const native = await driver.getNative();
            (0, vitest_1.assertType)(native);
            (0, vitest_1.expect)(unwrap).toBeDefined();
            (0, vitest_1.expect)(native).toBeDefined();
        }
        else {
            (0, vitest_1.expect)(true).toBe(false);
        }
    });
});
//# sourceMappingURL=tests.spec.js.map