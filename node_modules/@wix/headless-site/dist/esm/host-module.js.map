{"version":3,"names":["createVeloMonitoringClient","getPassThroughHeaders","resolveAuthToken","createHostModule","__type","create","host","_temp","essentials","passThroughHeaders","language","_window$essentials","window","locale","_window$essentials2","timezone","_window$essentials3","timeZone","getMonitoringClient","producer","req","document","location","href","Request","namespace","getAuthToken"],"sources":["../../src/host-module.ts"],"sourcesContent":["import type { HostModule, Host } from '@wix/sdk-types';\nimport { createVeloMonitoringClient } from '@wix/monitoring-velo';\nimport { getPassThroughHeaders } from './headers';\nimport { resolveAuthToken } from './utils/auth-utils';\nimport type { SDK, SDKOptions } from './types';\n\nexport const createHostModule = (): HostModule<SDK, Host> & {\n  host: (options: SDKOptions) => Host;\n} => {\n  return {\n    __type: 'host',\n    create: () => {\n      return {};\n    },\n    host: ({ essentials }: SDKOptions = {}) => {\n      return {\n        essentials: {\n          get passThroughHeaders() {\n            return getPassThroughHeaders();\n          },\n          get language() {\n            return essentials?.language ?? window.essentials?.language ?? 'en';\n          },\n          get locale() {\n            return essentials?.locale ?? window.essentials?.locale ?? 'en-US';\n          },\n          get timezone() {\n            return essentials?.timezone ?? window.essentials?.timeZone ?? 'UTC';\n          },\n        },\n        getMonitoringClient: () => {\n          let producer = 'unknown';\n          let req: Request | undefined;\n\n          if (typeof document !== 'undefined') {\n            producer = document.location.href;\n            req = new Request(document.location.href);\n          }\n\n          return createVeloMonitoringClient({\n            namespace: 'Headless',\n            producer,\n            getAuthToken: async () => resolveAuthToken(),\n            req,\n          });\n        },\n      };\n    },\n  };\n};\n"],"mappings":"AACA,SAASA,0BAA0B,QAAQ,sBAAsB;AACjE,SAASC,qBAAqB,QAAQ,WAAW;AACjD,SAASC,gBAAgB,QAAQ,oBAAoB;AAGrD,OAAO,MAAMC,gBAAgB,GAAGA,CAAA,KAE3B;EACH,OAAO;IACLC,MAAM,EAAE,MAAM;IACdC,MAAM,EAAEA,CAAA,KAAM;MACZ,OAAO,CAAC,CAAC;IACX,CAAC;IACDC,IAAI,EAAE,SAAAA,CAAAC,KAAA,EAAqC;MAAA,IAApC;QAAEC;MAAuB,CAAC,GAAAD,KAAA,cAAG,CAAC,CAAC,GAAAA,KAAA;MACpC,OAAO;QACLC,UAAU,EAAE;UACV,IAAIC,kBAAkBA,CAAA,EAAG;YACvB,OAAOR,qBAAqB,CAAC,CAAC;UAChC,CAAC;UACD,IAAIS,QAAQA,CAAA,EAAG;YAAA,IAAAC,kBAAA;YACb,OAAO,CAAAH,UAAU,oBAAVA,UAAU,CAAEE,QAAQ,OAAAC,kBAAA,GAAIC,MAAM,CAACJ,UAAU,qBAAjBG,kBAAA,CAAmBD,QAAQ,KAAI,IAAI;UACpE,CAAC;UACD,IAAIG,MAAMA,CAAA,EAAG;YAAA,IAAAC,mBAAA;YACX,OAAO,CAAAN,UAAU,oBAAVA,UAAU,CAAEK,MAAM,OAAAC,mBAAA,GAAIF,MAAM,CAACJ,UAAU,qBAAjBM,mBAAA,CAAmBD,MAAM,KAAI,OAAO;UACnE,CAAC;UACD,IAAIE,QAAQA,CAAA,EAAG;YAAA,IAAAC,mBAAA;YACb,OAAO,CAAAR,UAAU,oBAAVA,UAAU,CAAEO,QAAQ,OAAAC,mBAAA,GAAIJ,MAAM,CAACJ,UAAU,qBAAjBQ,mBAAA,CAAmBC,QAAQ,KAAI,KAAK;UACrE;QACF,CAAC;QACDC,mBAAmB,EAAEA,CAAA,KAAM;UACzB,IAAIC,QAAQ,GAAG,SAAS;UACxB,IAAIC,GAAwB;UAE5B,IAAI,OAAOC,QAAQ,KAAK,WAAW,EAAE;YACnCF,QAAQ,GAAGE,QAAQ,CAACC,QAAQ,CAACC,IAAI;YACjCH,GAAG,GAAG,IAAII,OAAO,CAACH,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAAC;UAC3C;UAEA,OAAOvB,0BAA0B,CAAC;YAChCyB,SAAS,EAAE,UAAU;YACrBN,QAAQ;YACRO,YAAY,EAAE,MAAAA,CAAA,KAAYxB,gBAAgB,CAAC,CAAC;YAC5CkB;UACF,CAAC,CAAC;QACJ;MACF,CAAC;IACH;EACF,CAAC;AACH,CAAC","ignoreList":[]}