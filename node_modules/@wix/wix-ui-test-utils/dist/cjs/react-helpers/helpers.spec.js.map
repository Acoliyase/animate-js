{"version":3,"names":["React","_interopRequireWildcard","require","_react2","_","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","describe","classes","element","document","createElement","className","split","forEach","it","expect","isClassExists","toBe","undefined","previousTime","Date","now","sleep","toBeGreaterThanOrEqual","UncontrolledInput","props","_extends2","__self","__source","fileName","lineNumber","columnNumber","ControlledInput","makeControlled","initialValue","render","value","inputElement","screen","getByRole","toHaveValue","onChange","jest","fn","enteredValue","input","fireEvent","change","target","toHaveBeenCalledTimes","mock","calls","NotifyOnEnter","onEnter","passedProps","onKeyDown","key","setState","keyDown"],"sources":["../../../src/react-helpers/helpers.spec.tsx"],"sourcesContent":["import * as React from 'react';\nimport { fireEvent, render, screen } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { isClassExists, makeControlled, sleep } from '.';\n\ndescribe('helpers', () => {\n  describe('isClassExists function', () => {\n    const classes = 'class class2 class3';\n    const element = document.createElement('div');\n    element.className = classes;\n\n    describe('existing class', () => {\n      classes.split(' ').forEach((className) =>\n        it(`should return true for className ${className}`, () => {\n          expect(isClassExists(element, className)).toBe(true);\n        }),\n      );\n    });\n\n    describe('none existing classes', () => {\n      [undefined, 'cla', 'class4'].forEach((className) =>\n        it(`should return false for className ${className}`, () => {\n          expect(isClassExists(element, className as String)).toBe(false);\n        }),\n      );\n    });\n  });\n\n  describe('sleep helper', () => {\n    it('sleeps', async () => {\n      const previousTime = Date.now();\n      await sleep(50);\n      expect(Date.now()).toBeGreaterThanOrEqual(previousTime + 50);\n    });\n  });\n\n  describe('makeControlled function', () => {\n    const UncontrolledInput = (\n      props: React.InputHTMLAttributes<HTMLInputElement>,\n    ) => <input {...props} />;\n\n    it('should init uncontrolled component with initial value', () => {\n      const ControlledInput = makeControlled(UncontrolledInput);\n      const initialValue = 'some value';\n\n      render(<ControlledInput value={initialValue} />);\n\n      const inputElement = screen.getByRole('textbox');\n      expect(inputElement).toHaveValue(initialValue);\n    });\n\n    it('should invoke onChange callback', () => {\n      const onChange = jest.fn();\n      const ControlledInput = makeControlled(UncontrolledInput);\n\n      render(<ControlledInput onChange={onChange} />);\n\n      const enteredValue = 'some value';\n      const input = screen.getByRole('textbox');\n\n      fireEvent.change(input, { target: { value: enteredValue } });\n\n      expect(onChange).toHaveBeenCalledTimes(1);\n      expect(onChange.mock.calls[0][0].target.value).toBe(enteredValue);\n      expect(input).toHaveValue(enteredValue);\n    });\n\n    it('should bind passed prop-functions to *this*', () => {\n      const NotifyOnEnter: React.FC<{ value: string; onEnter: () => void }> = ({\n        onEnter,\n        ...passedProps\n      }) => (\n        <UncontrolledInput\n          {...passedProps}\n          onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) =>\n            e.key === 'Enter' && onEnter()\n          }\n        />\n      );\n\n      const ControlledInput = makeControlled(NotifyOnEnter);\n\n      render(\n        <ControlledInput\n          value=\"some value\"\n          onEnter={function (this: any) {\n            // NOTE: don't use arrow functions by purpose\n            this.setState({ value: '' });\n          }}\n        />,\n      );\n\n      const input = screen.getByRole('textbox');\n      fireEvent.keyDown(input, { key: 'Enter' });\n      expect(input).toHaveValue('');\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}