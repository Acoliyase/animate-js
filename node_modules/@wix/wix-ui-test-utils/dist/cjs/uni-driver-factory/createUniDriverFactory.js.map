{"version":3,"names":["_client","require","_unidriverJsdomReactLegacy","componentFactory","Component","wrapperDiv","document","createElement","root","createRoot","render","base","jsdomReactUniDriver","childNodes","createUniDriverFactory","driverFactory","body"],"sources":["../../../src/uni-driver-factory/createUniDriverFactory.tsx"],"sourcesContent":["import * as React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { BaseUniDriver } from '../base-driver';\nimport { UniDriver } from '@wix/unidriver-core';\nimport { jsdomReactUniDriver } from '@wix/unidriver-jsdom-react-legacy';\n\nexport type UniDriverFactory<TDriver extends BaseUniDriver> = (\n  base: UniDriver,\n  body?: UniDriver,\n) => TDriver;\n\nfunction componentFactory(Component: React.ReactElement<any>): UniDriver {\n  const wrapperDiv = document.createElement('div');\n  const root = createRoot(wrapperDiv!);\n  root.render(Component);\n  const base = jsdomReactUniDriver(wrapperDiv.childNodes[0] as Element);\n  return base;\n}\n\nexport function createUniDriverFactory<TDriver extends BaseUniDriver>(\n  driverFactory: UniDriverFactory<TDriver>,\n) {\n  const body = jsdomReactUniDriver(document.body);\n  return (Component: React.ReactElement<any>) =>\n    driverFactory(componentFactory(Component), body);\n}\n"],"mappings":";;;;AACA,IAAAA,OAAA,GAAAC,OAAA;AAGA,IAAAC,0BAAA,GAAAD,OAAA;AAOA,SAASE,gBAAgBA,CAACC,SAAkC,EAAa;EACvE,MAAMC,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAChD,MAAMC,IAAI,GAAG,IAAAC,kBAAU,EAACJ,UAAW,CAAC;EACpCG,IAAI,CAACE,MAAM,CAACN,SAAS,CAAC;EACtB,MAAMO,IAAI,GAAG,IAAAC,8CAAmB,EAACP,UAAU,CAACQ,UAAU,CAAC,CAAC,CAAY,CAAC;EACrE,OAAOF,IAAI;AACb;AAEO,SAASG,sBAAsBA,CACpCC,aAAwC,EACxC;EACA,MAAMC,IAAI,GAAG,IAAAJ,8CAAmB,EAACN,QAAQ,CAACU,IAAI,CAAC;EAC/C,OAAQZ,SAAkC,IACxCW,aAAa,CAACZ,gBAAgB,CAACC,SAAS,CAAC,EAAEY,IAAI,CAAC;AACpD","ignoreList":[]}