{"version":3,"names":["_unidriverPuppeteer","require","puppeteerTestkitFactoryCreator","driverFactory","obj","page","$","dataHook","puppeteerUniTestkitFactoryCreator","wrapper","element","selector","base","pupUniDriver","body"],"sources":["../../../src/puppeteer/puppeteer.ts"],"sourcesContent":["import { pupUniDriver } from '@wix/unidriver-puppeteer';\nimport { UniDriver } from '@wix/unidriver-core';\nimport { BaseUniDriver } from '../base-driver';\n\ninterface DriverFactoryOptions {\n  dataHook: string;\n}\n\n/** @DEPRECATED please use `puppeteerUniTestkitFactoryCreator` */\nexport function puppeteerTestkitFactoryCreator<T>(\n  driverFactory: (e: any, page: any, options: DriverFactoryOptions) => T,\n) {\n  return async (obj: { dataHook: string; page: any }) =>\n    driverFactory(await obj.page.$(`[data-hook='${obj.dataHook}']`), obj.page, {\n      dataHook: obj.dataHook,\n    });\n}\n\nexport function puppeteerUniTestkitFactoryCreator<T extends BaseUniDriver>(\n  driverFactory: (\n    base: UniDriver,\n    body: UniDriver,\n    options: DriverFactoryOptions,\n  ) => T,\n) {\n  return async (obj: { dataHook: string; page: any; wrapper?: any }) => {\n    const { dataHook, wrapper: element, page } = obj; // destructuring `wrapper` so that type inference works well\n    const selector = `[data-hook='${dataHook}']`;\n\n    const base = element\n      ? pupUniDriver(async () => ({\n          element: await element.$(selector),\n          page,\n          selector,\n        }))\n      : pupUniDriver({ page, selector });\n\n    const body = pupUniDriver({ page, selector: 'body' });\n    return driverFactory(base, body, { dataHook });\n  };\n}\n"],"mappings":";;;;;AAAA,IAAAA,mBAAA,GAAAC,OAAA;AAQA;AACO,SAASC,8BAA8BA,CAC5CC,aAAsE,EACtE;EACA,OAAO,MAAOC,GAAoC,IAChDD,aAAa,CAAC,MAAMC,GAAG,CAACC,IAAI,CAACC,CAAC,CAAC,eAAeF,GAAG,CAACG,QAAQ,IAAI,CAAC,EAAEH,GAAG,CAACC,IAAI,EAAE;IACzEE,QAAQ,EAAEH,GAAG,CAACG;EAChB,CAAC,CAAC;AACN;AAEO,SAASC,iCAAiCA,CAC/CL,aAIM,EACN;EACA,OAAO,MAAOC,GAAmD,IAAK;IACpE,MAAM;MAAEG,QAAQ;MAAEE,OAAO,EAAEC,OAAO;MAAEL;IAAK,CAAC,GAAGD,GAAG,CAAC,CAAC;IAClD,MAAMO,QAAQ,GAAG,eAAeJ,QAAQ,IAAI;IAE5C,MAAMK,IAAI,GAAGF,OAAO,GAChB,IAAAG,gCAAY,EAAC,aAAa;MACxBH,OAAO,EAAE,MAAMA,OAAO,CAACJ,CAAC,CAACK,QAAQ,CAAC;MAClCN,IAAI;MACJM;IACF,CAAC,CAAC,CAAC,GACH,IAAAE,gCAAY,EAAC;MAAER,IAAI;MAAEM;IAAS,CAAC,CAAC;IAEpC,MAAMG,IAAI,GAAG,IAAAD,gCAAY,EAAC;MAAER,IAAI;MAAEM,QAAQ,EAAE;IAAO,CAAC,CAAC;IACrD,OAAOR,aAAa,CAACS,IAAI,EAAEE,IAAI,EAAE;MAAEP;IAAS,CAAC,CAAC;EAChD,CAAC;AACH","ignoreList":[]}