"use strict";

exports.__esModule = true;
exports.getCommonConfigHeader = void 0;
const COMMON_CONFIG_HEADER_NAME = 'commonConfig';
const BSI_COOKIE_NAME = 'bSession';
const getCommonConfigHeader = req => {
  let value = req.headers.get(COMMON_CONFIG_HEADER_NAME);
  if (!value) {
    const cookies = req.headers.get('cookie');
    const bsiCookie = cookies == null ? void 0 : cookies.split(';').find(keyValue => keyValue.trim().startsWith(`${BSI_COOKIE_NAME}=`));
    value = bsiCookie ? encodeURIComponent(JSON.stringify({
      BSI: bsiCookie.split('=')[1]
    })) : '';
  }
  return {
    [COMMON_CONFIG_HEADER_NAME]: value
  };
};
exports.getCommonConfigHeader = getCommonConfigHeader;
//# sourceMappingURL=common-config-header.js.map