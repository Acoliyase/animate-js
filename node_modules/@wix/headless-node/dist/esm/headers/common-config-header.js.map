{"version":3,"names":["COMMON_CONFIG_HEADER_NAME","BSI_COOKIE_NAME","getCommonConfigHeader","req","value","headers","get","cookies","bsiCookie","split","find","keyValue","trim","startsWith","encodeURIComponent","JSON","stringify","BSI"],"sources":["../../../src/headers/common-config-header.ts"],"sourcesContent":["const COMMON_CONFIG_HEADER_NAME = 'commonConfig';\nconst BSI_COOKIE_NAME = 'bSession';\n\nexport const getCommonConfigHeader = (req: Pick<Request, 'headers'>) => {\n  let value = req.headers.get(COMMON_CONFIG_HEADER_NAME);\n\n  if (!value) {\n    const cookies = req.headers.get('cookie');\n\n    const bsiCookie = cookies\n      ?.split(';')\n      .find((keyValue) => keyValue.trim().startsWith(`${BSI_COOKIE_NAME}=`));\n\n    value = bsiCookie\n      ? encodeURIComponent(JSON.stringify({ BSI: bsiCookie.split('=')[1] }))\n      : '';\n  }\n\n  return {\n    [COMMON_CONFIG_HEADER_NAME]: value,\n  };\n};\n"],"mappings":"AAAA,MAAMA,yBAAyB,GAAG,cAAc;AAChD,MAAMC,eAAe,GAAG,UAAU;AAElC,OAAO,MAAMC,qBAAqB,GAAIC,GAA6B,IAAK;EACtE,IAAIC,KAAK,GAAGD,GAAG,CAACE,OAAO,CAACC,GAAG,CAACN,yBAAyB,CAAC;EAEtD,IAAI,CAACI,KAAK,EAAE;IACV,MAAMG,OAAO,GAAGJ,GAAG,CAACE,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IAEzC,MAAME,SAAS,GAAGD,OAAO,oBAAPA,OAAO,CACrBE,KAAK,CAAC,GAAG,CAAC,CACXC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAACC,UAAU,CAAC,GAAGZ,eAAe,GAAG,CAAC,CAAC;IAExEG,KAAK,GAAGI,SAAS,GACbM,kBAAkB,CAACC,IAAI,CAACC,SAAS,CAAC;MAAEC,GAAG,EAAET,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,CAAC,GACpE,EAAE;EACR;EAEA,OAAO;IACL,CAACT,yBAAyB,GAAGI;EAC/B,CAAC;AACH,CAAC","ignoreList":[]}