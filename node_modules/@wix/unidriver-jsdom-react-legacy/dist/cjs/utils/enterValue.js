"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.enterValue = void 0;
const test_utils_1 = require("react-dom/test-utils");
const actCompat_1 = require("../actCompat");
const slowType_1 = require("./slowType");
const enterValue = async (base, value, options) => {
    const shouldClear = options?.shouldClear ?? true;
    // Don't do anything if element is disabled or readOnly
    if (base.disabled || base.readOnly) {
        return;
    }
    const { name, type, onChange } = base;
    // Set native value for uncontrolled component
    if (!onChange && shouldClear) {
        base.value = value;
    }
    if (options?.delay) {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
        await (0, slowType_1.slowType)(base, value, options.delay);
    }
    /* eslint-disable @typescript-eslint/no-misused-promises */
    await (0, actCompat_1.act)(async () => {
        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
        test_utils_1.Simulate.change(base, {
            target: { name, type, value: shouldClear ? value : String(base.value) + value },
        });
    });
};
exports.enterValue = enterValue;
//# sourceMappingURL=enterValue.js.map