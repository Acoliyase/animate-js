import { observer } from 'mobx-react-lite';
import React from 'react';
import { Box, Card, Heading } from '@wix/design-system';
import { CustomFieldsViewWidgetContent } from './CustomFieldsViewWidgetContent';
import { useCustomFieldsViewWidget } from './useCustomFieldsViewWidget';
import { CustomFieldsViewWidgetInline } from './CustomFieldsViewWidgetInline';
import { CardContainer } from '../CardContainer';
import { useWidgetPageStatus } from '../useWidgetPageStatus';
import { EmptyStateViewContent } from './EmptyStateViewContent';
const _CustomFieldsViewWidget = ({ dataHook, fqdn, extendedFields, title, userFieldsTitle, extensionPoint, theme = 'card', }) => {
    const customFieldsViewWidget = useCustomFieldsViewWidget({
        fqdn,
        extendedFields,
        extensionPoint,
        theme,
    });
    const { state, userCustomFields, appsCustomFields, container, areAllCustomFieldsEmpty, } = customFieldsViewWidget;
    const { translate: t } = container;
    const { status } = useWidgetPageStatus(state.initTask.status.status);
    if (!state.isLoading &&
        !state.isError &&
        !userCustomFields.length &&
        !appsCustomFields.length) {
        return null;
    }
    if (theme === 'inline') {
        return (React.createElement(CustomFieldsViewWidgetInline, { dataHook: dataHook, extendedFields: extendedFields, userFieldsTitle: userFieldsTitle, ...customFieldsViewWidget }));
    }
    return (React.createElement(CardContainer, { stretchVertically: true, dataHook: dataHook, status: status, errorState: {
            dataHook: 'error-state',
            action: {
                text: t('cairo.entityPage.widgetError.TPAconnectionFail.CTA'),
                onClick: () => state.retry(),
            },
        } },
        React.createElement(Card.Header, { dataHook: "custom-fields-view-widget-header", title: React.createElement(HeaderTitle, { title: title ?? t('cairo.customFields.entityPage.title') }) }),
        React.createElement(Card.Divider, null),
        React.createElement(Card.Content, { dataHook: "custom-fields-view-widget-content" }, areAllCustomFieldsEmpty ? (React.createElement(EmptyStateViewContent, { title: t('cairo.customFields.entityPage.emptyState.title'), subtitle: t('cairo.customFields.entityPage.emptyState.subtitle') })) : (React.createElement(CustomFieldsViewWidgetContent, { state: state, extendedFields: extendedFields, userFieldsTitle: userFieldsTitle })))));
};
export const CustomFieldsViewWidget = observer(_CustomFieldsViewWidget);
const HeaderTitle = ({ title }) => {
    return (React.createElement(Box, { gap: "SP1" },
        React.createElement(Heading, { size: "medium" }, title)));
};
//# sourceMappingURL=CustomFieldsViewWidget.js.map