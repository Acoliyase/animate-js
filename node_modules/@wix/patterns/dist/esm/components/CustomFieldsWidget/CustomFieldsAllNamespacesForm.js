import { observer } from 'mobx-react-lite';
import { CustomFieldsAllNamespacesFormState, } from '../../state';
import React, { useState } from 'react';
import { Box } from '@wix/design-system';
import { CustomFieldsNamespaceSectionForm } from './CustomFieldsNamespaceSectionForm';
import { CustomFieldsNamespaceForm } from './CustomFieldsNamespaceForm';
import { EmptyStateContent } from './EmptyStateContent';
function _CustomFieldsAllNamespacesForm(props) {
    const { state: customFieldsWidgetState, onChange, emptyStateOverrides, } = props;
    const { _userFieldsNamespace } = customFieldsWidgetState;
    const [state] = useState(() => (customFieldsWidgetState._formState ??=
        new CustomFieldsAllNamespacesFormState({
            customFieldsWidgetState,
        })));
    const { schemasSections, tpaFieldsExist } = state;
    if (!schemasSections.length) {
        return (React.createElement(EmptyStateContent, { state: customFieldsWidgetState, emptyStateOverrides: emptyStateOverrides }));
    }
    let child;
    if (tpaFieldsExist) {
        child = (React.createElement(React.Fragment, null, schemasSections.map((schema, index) => (React.createElement(CustomFieldsNamespaceSectionForm, { key: schema.namespace, state: state, namespace: schema.namespace, index: index, onChange: onChange })))));
    }
    else {
        child = (React.createElement(CustomFieldsNamespaceForm, { state: state, namespace: _userFieldsNamespace, onChange: onChange }));
    }
    return (React.createElement(Box, { direction: "vertical", width: "100%", gap: "SP3", dataHook: "custom-fields-form" }, child));
}
export const CustomFieldsAllNamespacesForm = observer(_CustomFieldsAllNamespacesForm);
//# sourceMappingURL=CustomFieldsAllNamespacesForm.js.map