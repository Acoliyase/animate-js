import { Box, Divider } from '@wix/design-system';
import React from 'react';
import { CustomFieldsViewWidgetSection } from './CustomFieldsViewWidgetSection';
import { observer } from 'mobx-react-lite';
import { useWixPatternsContainer } from '@wix/bex-core/react';
const _CustomFieldsViewWidgetContent = ({ state, extendedFields, userFieldsTitle, }) => {
    const { translate: t } = useWixPatternsContainer();
    const getSections = () => {
        return state.dataExtension.allNamespaces
            .map((namespace) => {
            const relevantCustomFields = state.getExtendedFieldsToDisplayForNamespace(namespace, extendedFields);
            if (relevantCustomFields.length === 0) {
                return null;
            }
            const title = namespace === state.userFieldsNamespace
                ? userFieldsTitle || t('cairo.customFields.entityPage.sectionTitle')
                : state.getAppName(namespace);
            return (React.createElement(Box, { marginBottom: "SP1" },
                React.createElement(CustomFieldsViewWidgetSection, { title: title, customFields: relevantCustomFields, namespace: namespace, fieldValues: extendedFields?.namespaces?.[namespace] || {} })));
        })
            .filter(Boolean);
    };
    const sectionsWithDividers = (sections) => {
        return sections.map((section, index) => (React.createElement(React.Fragment, { key: index },
            section,
            index < sections.length - 1 && (React.createElement(Box, { marginTop: "SP4", marginBottom: "SP4" },
                React.createElement(Divider, null))))));
    };
    const renderCustomFields = () => {
        const sections = getSections();
        return sectionsWithDividers(sections);
    };
    return (React.createElement(Box, { direction: "vertical", dataHook: "fields-content" }, renderCustomFields()));
};
export const CustomFieldsViewWidgetContent = observer(_CustomFieldsViewWidgetContent);
//# sourceMappingURL=CustomFieldsViewWidgetContent.js.map