import { PopoverMenu, Button } from '@wix/design-system';
import React, { useMemo } from 'react';
import { ChevronDown } from '@wix/wix-ui-icons-common';
import { DisabledTooltip } from '../DisabledTooltip';
export function ActionPopover(props) {
    const { actionItem, size, priority, onPopoverClick, fullWidth } = props;
    const { dataHook, subItems, popoverMenuProps } = actionItem;
    const allActions = useMemo(() => {
        return subItems
            ?.filter((subItemGroup) => subItemGroup?.length)
            .reduce((result, group, index, array) => {
            return [
                ...result,
                ...group.map((item) => {
                    return (React.createElement(PopoverMenu.MenuItem, { prefixIcon: item.prefixIcon, disabled: item.disabled, text: item.label, key: item.label, subtitle: item.subtitle, dataHook: item.dataHook, onClick: item.onClick }));
                }),
                ...(index !== array.length - 1
                    ? [React.createElement(PopoverMenu.Divider, { key: index })]
                    : []),
            ];
        }, []);
    }, [subItems]);
    return (React.createElement(PopoverMenu, { ...popoverMenuProps, dataHook: dataHook ? `${dataHook}-popover` : undefined, triggerElement: ({ toggle }) => (React.createElement(DisabledTooltip, { content: actionItem.tooltip, dataHook: dataHook ? `${dataHook}-tooltip` : undefined },
            React.createElement(Button, { skin: "standard", priority: priority, size: size, fullWidth: fullWidth, dataHook: actionItem.dataHook, onClick: () => {
                    onPopoverClick?.();
                    toggle();
                }, ellipsis: true, prefixIcon: actionItem.prefixIcon, disabled: actionItem.disabled, suffixIcon: React.createElement(ChevronDown, null) }, actionItem.label))) }, allActions));
}
//# sourceMappingURL=ActionPopover.js.map