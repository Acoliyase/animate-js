import React, { useEffect, useRef, useState } from 'react';
import { useFormPageContext } from '../../providers';
import { observer } from 'mobx-react-lite';
import { CardContainer } from '../CardContainer';
import { withFocusable } from '@wix/bex-utils';
export function _FormPageCard(props) {
    const { status: statusProp, id, registerScrollableItem, ...rest } = props;
    const pageState = useFormPageContext();
    const status = !pageState || pageState.isFetching ? 'loading' : statusProp;
    const [highlight, setHighlight] = useState();
    const timeoutRef = useRef();
    useEffect(() => {
        return () => {
            window.clearTimeout(timeoutRef.current);
        };
    });
    return (React.createElement("div", { id: id, ref: (ref) => {
            if (id && ref) {
                registerScrollableItem({
                    ref,
                    itemName: id,
                    containerName: id,
                    afterScroll: () => {
                        setHighlight('focus');
                        timeoutRef.current = window.setTimeout(() => {
                            setHighlight(undefined);
                        }, 3000);
                    },
                });
            }
        } },
        React.createElement(CardContainer, { status: status, ...rest, highlight: highlight })));
}
_FormPageCard.displayName = 'FormPageCard';
export const FormPageCard = withFocusable(observer(_FormPageCard));
//# sourceMappingURL=FormPageCard.js.map