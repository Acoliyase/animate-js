import React, { useCallback } from 'react';
import { observer } from 'mobx-react-lite';
import { Cell, Layout } from '@wix/design-system';
import { EDITABLE_INPUT_ELEMENTS, FormFieldInput } from '../FormFieldInput';
import { CustomFieldsFormContextProvider } from '../CustomFieldsFormContext';
const toCellSpan = (type) => {
    switch (type) {
        case 'longText':
        case 'checkbox':
        case 'shortText':
        case 'url':
        case 'dateTime':
            return 12;
        default:
            return 6;
    }
};
const _CustomFieldsForm = ({ state, onChange }) => {
    const { _namespace } = state;
    const renderFieldInput = useCallback((field) => {
        if (!field) {
            return null;
        }
        if (!EDITABLE_INPUT_ELEMENTS.hasOwnProperty(field.type)) {
            return null;
        }
        const span = toCellSpan(field.type);
        return (React.createElement(React.Fragment, { key: field.id },
            React.createElement(Cell, { span: span },
                React.createElement(FormFieldInput, { dataHook: `field-${field.id}`, state: state, schema: field, initialValue: state.getInitialValue(field.id), onChange: (newValue) => state.setValue({ id: field.id, value: newValue, onChange }), inputRef: (inputRef) => {
                        state.setInputRef(field.id, inputRef);
                    } })),
            span !== 12 && React.createElement(Cell, { span: 12 - span })));
    }, []);
    const { writeableFields } = state;
    return (React.createElement(CustomFieldsFormContextProvider, { value: state },
        React.createElement(Layout, { dataHook: `custom-fields-form-${_namespace}`, gap: "SP3" }, writeableFields.map(renderFieldInput))));
};
export const CustomFieldsForm = observer(_CustomFieldsForm);
//# sourceMappingURL=CustomFieldsForm.js.map