import { SidePanel } from '@wix/design-system';
import React, { useEffect } from 'react';
import { withoutDefaults } from '@wix/bex-core';
import { observer } from 'mobx-react-lite';
import { useWixPatternsContainer } from '@wix/bex-core/react';
import { ColumnsList } from './ColumnsList';
import { useRafRender } from '../../hooks/useRafRender';
import { cairoFiltersPanelUsed } from '@wix/bex-core/bi';
import { ScrollableContent } from '../ScrollableContent';
export function _CustomColumnsPanel({ state, }) {
    const container = useWixPatternsContainer();
    const { translate: t } = container;
    const entered = useRafRender();
    const { table, dragAndDrop } = state;
    const { sidePanel, collectionDataExtension } = table;
    useEffect(() => state.init(), []);
    if (!entered) {
        return null;
    }
    return (React.createElement(SidePanel, { dataHook: "custom-columns-panel", width: "100%", onCloseButtonClick: () => {
            table.reportBi(withoutDefaults(cairoFiltersPanelUsed)({
                isOpened: false,
                feature: 'Custom Columns',
                origin: 'X Button',
            }));
            sidePanel.close();
        } },
        React.createElement(SidePanel.Header, { title: t('cairo.table.custom-columns.title'), subtitle: dragAndDrop
                ? t('cairo.table.custom-columns.dragAndDrop.subtitle')
                : t('cairo.table.custom-columns.subtitle') }),
        React.createElement(ScrollableContent, { overflowY: true, dataHook: "custom-columns-panel-scroll-container", ref: (e) => {
                if (state.dragAndDrop) {
                    state.dragAndDrop.listRect.element = e;
                }
            } },
            React.createElement(ColumnsList, { state: state })),
        collectionDataExtension?.DataExtension
            ?.CustomColumnsAddCustomFieldCTAButton && (React.createElement(collectionDataExtension.DataExtension.CustomColumnsAddCustomFieldCTAButton, null))));
}
export const CustomColumnsPanel = observer(_CustomColumnsPanel);
//# sourceMappingURL=CustomColumnsPanel.js.map