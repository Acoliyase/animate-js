import React, { Children, isValidElement } from 'react';
import { Card } from '@wix/design-system';
import { observer } from 'mobx-react-lite';
import { SkeletonCard } from '../SkeletonCard';
import { ErrorCard } from '../ErrorCard';
import { useWixPatternsContainer } from '@wix/bex-core/react';
import { Refresh as RefreshIcon } from '@wix/wix-ui-icons-common';
import { st, classes } from './CardContainer.st.css.js';
import { useIsMobile } from '../../hooks/useIsMobile';
export function _CardContainer(props) {
    const { status, minHeight, children, errorState, ...rest } = props;
    const { translate: t } = useWixPatternsContainer();
    const isMobile = useIsMobile();
    const className = st(classes.root, { mobile: isMobile });
    if (status === 'idle' || status === 'loading') {
        return React.createElement(SkeletonCard, { minHeight: minHeight, ...rest });
    }
    if (status === 'error') {
        const hasCardHeader = Children.toArray(children).some((el) => isValidElement(el) && el.type?.displayName === 'Card.Header');
        return (React.createElement(ErrorCard, { className: className, title: errorState?.title ??
                (!hasCardHeader
                    ? t('cairo.entityPage.widgetError.TPAconnectionFail.title')
                    : undefined), subtitle: errorState?.subtitle ??
                t('cairo.entityPage.widgetError.TPAconnectionFail.description'), action: {
                onClick: () => { },
                text: t('cairo.entityPage.widgetError.TPAconnectionFail.CTA'),
                prefixIcon: React.createElement(RefreshIcon, null),
                ...errorState?.action,
            }, ...rest }, children));
    }
    return (React.createElement(Card, { ...rest, className: className }, children));
}
_CardContainer.displayName = 'CardContainer';
export const CardContainer = observer(_CardContainer);
//# sourceMappingURL=CardContainer.js.map