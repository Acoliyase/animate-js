"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
exports.__esModule = true;
exports.ExtensionsState = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _bexCore = require("@wix/bex-core");
var _mobx = require("mobx");
class ExtensionsState {
  constructor(params) {
    (0, _defineProperty2.default)(this, "_container", void 0);
    (0, _defineProperty2.default)(this, "_containerId", void 0);
    (0, _defineProperty2.default)(this, "_containerProps", void 0);
    (0, _defineProperty2.default)(this, "initTask", new _bexCore.TaskState());
    this._container = params.container;
    this._containerId = params.containerId;
    this._containerProps = params.containerProps;
    (0, _mobx.makeObservable)(this, {
      items: _mobx.computed
    });
  }
  get items() {
    return this.initTask.status.data || [];
  }
  init() {
    const {
      initTask
    } = this;
    initTask.runOnce(async () => {
      const {
        _container: {
          getHostContainer
        },
        _containerId
      } = this;
      if (!getHostContainer || !_containerId) {
        return [];
      }
      const hostContainer = getHostContainer(_containerId);
      const items = await hostContainer.getExtensions(); // it's not really async, here for backwards compatibility with old biz types and eventually can be replaced with getContainerMenuItems

      return items;
    });
  }
}
exports.ExtensionsState = ExtensionsState;
//# sourceMappingURL=ExtensionsState.js.map