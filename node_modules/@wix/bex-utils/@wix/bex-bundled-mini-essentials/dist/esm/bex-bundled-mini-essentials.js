import {
  define_process_env_default,
  init_define_process_env
} from "./chunk-U24CPPEA.js";
import {
  __commonJS,
  __esm,
  __export,
  __require,
  __toCommonJS,
  __toESM
} from "./chunk-PLDDJCW6.js";

// ../../node_modules/base-64/base64.js
var require_base64 = __commonJS({
  "../../node_modules/base-64/base64.js"(exports, module) {
    "use strict";
    init_define_process_env();
    (function(root) {
      var freeExports = typeof exports == "object" && exports;
      var freeModule = typeof module == "object" && module && module.exports == freeExports && module;
      var freeGlobal = typeof global == "object" && global;
      if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {
        root = freeGlobal;
      }
      var InvalidCharacterError = function(message) {
        this.message = message;
      };
      InvalidCharacterError.prototype = new Error();
      InvalidCharacterError.prototype.name = "InvalidCharacterError";
      var error = function(message) {
        throw new InvalidCharacterError(message);
      };
      var TABLE = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      var REGEX_SPACE_CHARACTERS = /[\t\n\f\r ]/g;
      var decode = function(input) {
        input = String(input).replace(REGEX_SPACE_CHARACTERS, "");
        var length = input.length;
        if (length % 4 == 0) {
          input = input.replace(/==?$/, "");
          length = input.length;
        }
        if (length % 4 == 1 || // http://whatwg.org/C#alphanumeric-ascii-characters
        /[^+a-zA-Z0-9/]/.test(input)) {
          error(
            "Invalid character: the string to be decoded is not correctly encoded."
          );
        }
        var bitCounter = 0;
        var bitStorage;
        var buffer;
        var output = "";
        var position = -1;
        while (++position < length) {
          buffer = TABLE.indexOf(input.charAt(position));
          bitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;
          if (bitCounter++ % 4) {
            output += String.fromCharCode(
              255 & bitStorage >> (-2 * bitCounter & 6)
            );
          }
        }
        return output;
      };
      var encode = function(input) {
        input = String(input);
        if (/[^\0-\xFF]/.test(input)) {
          error(
            "The string to be encoded contains characters outside of the Latin1 range."
          );
        }
        var padding = input.length % 3;
        var output = "";
        var position = -1;
        var a;
        var b;
        var c;
        var buffer;
        var length = input.length - padding;
        while (++position < length) {
          a = input.charCodeAt(position) << 16;
          b = input.charCodeAt(++position) << 8;
          c = input.charCodeAt(++position);
          buffer = a + b + c;
          output += TABLE.charAt(buffer >> 18 & 63) + TABLE.charAt(buffer >> 12 & 63) + TABLE.charAt(buffer >> 6 & 63) + TABLE.charAt(buffer & 63);
        }
        if (padding == 2) {
          a = input.charCodeAt(position) << 8;
          b = input.charCodeAt(++position);
          buffer = a + b;
          output += TABLE.charAt(buffer >> 10) + TABLE.charAt(buffer >> 4 & 63) + TABLE.charAt(buffer << 2 & 63) + "=";
        } else if (padding == 1) {
          buffer = input.charCodeAt(position);
          output += TABLE.charAt(buffer >> 2) + TABLE.charAt(buffer << 4 & 63) + "==";
        }
        return output;
      };
      var base642 = {
        "encode": encode,
        "decode": decode,
        "version": "1.0.0"
      };
      if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
        define(function() {
          return base642;
        });
      } else if (freeExports && !freeExports.nodeType) {
        if (freeModule) {
          freeModule.exports = base642;
        } else {
          for (var key in base642) {
            base642.hasOwnProperty(key) && (freeExports[key] = base642[key]);
          }
        }
      } else {
        root.base64 = base642;
      }
    })(exports);
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/bind.js
var require_bind = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/bind.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function bind(fn, thisArg) {
      return function wrap() {
        var args = new Array(arguments.length);
        for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i];
        }
        return fn.apply(thisArg, args);
      };
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/utils.js
var require_utils = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/utils.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var bind = require_bind();
    var toString = Object.prototype.toString;
    function isArray3(val) {
      return toString.call(val) === "[object Array]";
    }
    function isUndefined(val) {
      return typeof val === "undefined";
    }
    function isBuffer(val) {
      return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && typeof val.constructor.isBuffer === "function" && val.constructor.isBuffer(val);
    }
    function isArrayBuffer(val) {
      return toString.call(val) === "[object ArrayBuffer]";
    }
    function isFormData(val) {
      return typeof FormData !== "undefined" && val instanceof FormData;
    }
    function isArrayBufferView(val) {
      var result;
      if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
        result = ArrayBuffer.isView(val);
      } else {
        result = val && val.buffer && val.buffer instanceof ArrayBuffer;
      }
      return result;
    }
    function isString(val) {
      return typeof val === "string";
    }
    function isNumber3(val) {
      return typeof val === "number";
    }
    function isObject3(val) {
      return val !== null && typeof val === "object";
    }
    function isPlainObject(val) {
      if (toString.call(val) !== "[object Object]") {
        return false;
      }
      var prototype = Object.getPrototypeOf(val);
      return prototype === null || prototype === Object.prototype;
    }
    function isDate(val) {
      return toString.call(val) === "[object Date]";
    }
    function isFile(val) {
      return toString.call(val) === "[object File]";
    }
    function isBlob(val) {
      return toString.call(val) === "[object Blob]";
    }
    function isFunction(val) {
      return toString.call(val) === "[object Function]";
    }
    function isStream(val) {
      return isObject3(val) && isFunction(val.pipe);
    }
    function isURLSearchParams(val) {
      return typeof URLSearchParams !== "undefined" && val instanceof URLSearchParams;
    }
    function trim(str) {
      return str.trim ? str.trim() : str.replace(/^\s+|\s+$/g, "");
    }
    function isStandardBrowserEnv() {
      if (typeof navigator !== "undefined" && (navigator.product === "ReactNative" || navigator.product === "NativeScript" || navigator.product === "NS")) {
        return false;
      }
      return typeof window !== "undefined" && typeof document !== "undefined";
    }
    function forEach(obj, fn) {
      if (obj === null || typeof obj === "undefined") {
        return;
      }
      if (typeof obj !== "object") {
        obj = [obj];
      }
      if (isArray3(obj)) {
        for (var i = 0, l = obj.length; i < l; i++) {
          fn.call(null, obj[i], i, obj);
        }
      } else {
        for (var key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            fn.call(null, obj[key], key, obj);
          }
        }
      }
    }
    function merge() {
      var result = {};
      function assignValue(val, key) {
        if (isPlainObject(result[key]) && isPlainObject(val)) {
          result[key] = merge(result[key], val);
        } else if (isPlainObject(val)) {
          result[key] = merge({}, val);
        } else if (isArray3(val)) {
          result[key] = val.slice();
        } else {
          result[key] = val;
        }
      }
      for (var i = 0, l = arguments.length; i < l; i++) {
        forEach(arguments[i], assignValue);
      }
      return result;
    }
    function extend(a, b, thisArg) {
      forEach(b, function assignValue(val, key) {
        if (thisArg && typeof val === "function") {
          a[key] = bind(val, thisArg);
        } else {
          a[key] = val;
        }
      });
      return a;
    }
    function stripBOM(content) {
      if (content.charCodeAt(0) === 65279) {
        content = content.slice(1);
      }
      return content;
    }
    module.exports = {
      isArray: isArray3,
      isArrayBuffer,
      isBuffer,
      isFormData,
      isArrayBufferView,
      isString,
      isNumber: isNumber3,
      isObject: isObject3,
      isPlainObject,
      isUndefined,
      isDate,
      isFile,
      isBlob,
      isFunction,
      isStream,
      isURLSearchParams,
      isStandardBrowserEnv,
      forEach,
      merge,
      extend,
      trim,
      stripBOM
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/buildURL.js
var require_buildURL = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/buildURL.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    function encode(val) {
      return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
    }
    module.exports = function buildURL(url, params, paramsSerializer) {
      if (!params) {
        return url;
      }
      var serializedParams;
      if (paramsSerializer) {
        serializedParams = paramsSerializer(params);
      } else if (utils.isURLSearchParams(params)) {
        serializedParams = params.toString();
      } else {
        var parts = [];
        utils.forEach(params, function serialize(val, key) {
          if (val === null || typeof val === "undefined") {
            return;
          }
          if (utils.isArray(val)) {
            key = key + "[]";
          } else {
            val = [val];
          }
          utils.forEach(val, function parseValue(v) {
            if (utils.isDate(v)) {
              v = v.toISOString();
            } else if (utils.isObject(v)) {
              v = JSON.stringify(v);
            }
            parts.push(encode(key) + "=" + encode(v));
          });
        });
        serializedParams = parts.join("&");
      }
      if (serializedParams) {
        var hashmarkIndex = url.indexOf("#");
        if (hashmarkIndex !== -1) {
          url = url.slice(0, hashmarkIndex);
        }
        url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
      }
      return url;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/InterceptorManager.js
var require_InterceptorManager = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/InterceptorManager.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    function InterceptorManager() {
      this.handlers = [];
    }
    InterceptorManager.prototype.use = function use(fulfilled, rejected, options) {
      this.handlers.push({
        fulfilled,
        rejected,
        synchronous: options ? options.synchronous : false,
        runWhen: options ? options.runWhen : null
      });
      return this.handlers.length - 1;
    };
    InterceptorManager.prototype.eject = function eject(id) {
      if (this.handlers[id]) {
        this.handlers[id] = null;
      }
    };
    InterceptorManager.prototype.forEach = function forEach(fn) {
      utils.forEach(this.handlers, function forEachHandler(h) {
        if (h !== null) {
          fn(h);
        }
      });
    };
    module.exports = InterceptorManager;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/normalizeHeaderName.js
var require_normalizeHeaderName = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/normalizeHeaderName.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    module.exports = function normalizeHeaderName(headers, normalizedName) {
      utils.forEach(headers, function processHeader(value, name) {
        if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
          headers[normalizedName] = value;
          delete headers[name];
        }
      });
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/enhanceError.js
var require_enhanceError = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/enhanceError.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function enhanceError(error, config, code, request, response) {
      error.config = config;
      if (code) {
        error.code = code;
      }
      error.request = request;
      error.response = response;
      error.isAxiosError = true;
      error.toJSON = function toJSON() {
        return {
          // Standard
          message: this.message,
          name: this.name,
          // Microsoft
          description: this.description,
          number: this.number,
          // Mozilla
          fileName: this.fileName,
          lineNumber: this.lineNumber,
          columnNumber: this.columnNumber,
          stack: this.stack,
          // Axios
          config: this.config,
          code: this.code
        };
      };
      return error;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/createError.js
var require_createError = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/createError.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var enhanceError = require_enhanceError();
    module.exports = function createError(message, config, code, request, response) {
      var error = new Error(message);
      return enhanceError(error, config, code, request, response);
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/settle.js
var require_settle = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/settle.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var createError = require_createError();
    module.exports = function settle(resolve, reject, response) {
      var validateStatus = response.config.validateStatus;
      if (!response.status || !validateStatus || validateStatus(response.status)) {
        resolve(response);
      } else {
        reject(createError(
          "Request failed with status code " + response.status,
          response.config,
          null,
          response.request,
          response
        ));
      }
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/cookies.js
var require_cookies = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/cookies.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    module.exports = utils.isStandardBrowserEnv() ? (
      // Standard browser envs support document.cookie
      /* @__PURE__ */ function standardBrowserEnv() {
        return {
          write: function write(name, value, expires, path, domain, secure) {
            var cookie = [];
            cookie.push(name + "=" + encodeURIComponent(value));
            if (utils.isNumber(expires)) {
              cookie.push("expires=" + new Date(expires).toGMTString());
            }
            if (utils.isString(path)) {
              cookie.push("path=" + path);
            }
            if (utils.isString(domain)) {
              cookie.push("domain=" + domain);
            }
            if (secure === true) {
              cookie.push("secure");
            }
            document.cookie = cookie.join("; ");
          },
          read: function read(name) {
            var match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
            return match ? decodeURIComponent(match[3]) : null;
          },
          remove: function remove(name) {
            this.write(name, "", Date.now() - 864e5);
          }
        };
      }()
    ) : (
      // Non standard browser env (web workers, react-native) lack needed support.
      /* @__PURE__ */ function nonStandardBrowserEnv() {
        return {
          write: function write() {
          },
          read: function read() {
            return null;
          },
          remove: function remove() {
          }
        };
      }()
    );
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isAbsoluteURL.js
var require_isAbsoluteURL = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isAbsoluteURL.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function isAbsoluteURL(url) {
      return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/combineURLs.js
var require_combineURLs = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/combineURLs.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function combineURLs(baseURL, relativeURL) {
      return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/buildFullPath.js
var require_buildFullPath = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/buildFullPath.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var isAbsoluteURL = require_isAbsoluteURL();
    var combineURLs = require_combineURLs();
    module.exports = function buildFullPath(baseURL, requestedURL) {
      if (baseURL && !isAbsoluteURL(requestedURL)) {
        return combineURLs(baseURL, requestedURL);
      }
      return requestedURL;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/parseHeaders.js
var require_parseHeaders = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/parseHeaders.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var ignoreDuplicateOf = [
      "age",
      "authorization",
      "content-length",
      "content-type",
      "etag",
      "expires",
      "from",
      "host",
      "if-modified-since",
      "if-unmodified-since",
      "last-modified",
      "location",
      "max-forwards",
      "proxy-authorization",
      "referer",
      "retry-after",
      "user-agent"
    ];
    module.exports = function parseHeaders(headers) {
      var parsed = {};
      var key;
      var val;
      var i;
      if (!headers) {
        return parsed;
      }
      utils.forEach(headers.split("\n"), function parser(line) {
        i = line.indexOf(":");
        key = utils.trim(line.substr(0, i)).toLowerCase();
        val = utils.trim(line.substr(i + 1));
        if (key) {
          if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
            return;
          }
          if (key === "set-cookie") {
            parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
          } else {
            parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
          }
        }
      });
      return parsed;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isURLSameOrigin.js
var require_isURLSameOrigin = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isURLSameOrigin.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    module.exports = utils.isStandardBrowserEnv() ? (
      // Standard browser envs have full support of the APIs needed to test
      // whether the request URL is of the same origin as current location.
      function standardBrowserEnv() {
        var msie = /(msie|trident)/i.test(navigator.userAgent);
        var urlParsingNode = document.createElement("a");
        var originURL;
        function resolveURL(url) {
          var href = url;
          if (msie) {
            urlParsingNode.setAttribute("href", href);
            href = urlParsingNode.href;
          }
          urlParsingNode.setAttribute("href", href);
          return {
            href: urlParsingNode.href,
            protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
            host: urlParsingNode.host,
            search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
            hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
            hostname: urlParsingNode.hostname,
            port: urlParsingNode.port,
            pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
          };
        }
        originURL = resolveURL(window.location.href);
        return function isURLSameOrigin(requestURL) {
          var parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
          return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
        };
      }()
    ) : (
      // Non standard browser envs (web workers, react-native) lack needed support.
      /* @__PURE__ */ function nonStandardBrowserEnv() {
        return function isURLSameOrigin() {
          return true;
        };
      }()
    );
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/adapters/xhr.js
var require_xhr = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/adapters/xhr.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var settle = require_settle();
    var cookies = require_cookies();
    var buildURL = require_buildURL();
    var buildFullPath = require_buildFullPath();
    var parseHeaders = require_parseHeaders();
    var isURLSameOrigin = require_isURLSameOrigin();
    var createError = require_createError();
    module.exports = function xhrAdapter2(config) {
      return new Promise(function dispatchXhrRequest(resolve, reject) {
        var requestData = config.data;
        var requestHeaders = config.headers;
        var responseType = config.responseType;
        if (utils.isFormData(requestData)) {
          delete requestHeaders["Content-Type"];
        }
        var request = new XMLHttpRequest();
        if (config.auth) {
          var username = config.auth.username || "";
          var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : "";
          requestHeaders.Authorization = "Basic " + btoa(username + ":" + password);
        }
        var fullPath = buildFullPath(config.baseURL, config.url);
        request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);
        request.timeout = config.timeout;
        function onloadend() {
          if (!request) {
            return;
          }
          var responseHeaders = "getAllResponseHeaders" in request ? parseHeaders(request.getAllResponseHeaders()) : null;
          var responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
          var response = {
            data: responseData,
            status: request.status,
            statusText: request.statusText,
            headers: responseHeaders,
            config,
            request
          };
          settle(resolve, reject, response);
          request = null;
        }
        if ("onloadend" in request) {
          request.onloadend = onloadend;
        } else {
          request.onreadystatechange = function handleLoad() {
            if (!request || request.readyState !== 4) {
              return;
            }
            if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
              return;
            }
            setTimeout(onloadend);
          };
        }
        request.onabort = function handleAbort() {
          if (!request) {
            return;
          }
          reject(createError("Request aborted", config, "ECONNABORTED", request));
          request = null;
        };
        request.onerror = function handleError() {
          reject(createError("Network Error", config, null, request));
          request = null;
        };
        request.ontimeout = function handleTimeout() {
          var timeoutErrorMessage = "timeout of " + config.timeout + "ms exceeded";
          if (config.timeoutErrorMessage) {
            timeoutErrorMessage = config.timeoutErrorMessage;
          }
          reject(createError(
            timeoutErrorMessage,
            config,
            config.transitional && config.transitional.clarifyTimeoutError ? "ETIMEDOUT" : "ECONNABORTED",
            request
          ));
          request = null;
        };
        if (utils.isStandardBrowserEnv()) {
          var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ? cookies.read(config.xsrfCookieName) : void 0;
          if (xsrfValue) {
            requestHeaders[config.xsrfHeaderName] = xsrfValue;
          }
        }
        if ("setRequestHeader" in request) {
          utils.forEach(requestHeaders, function setRequestHeader(val, key) {
            if (typeof requestData === "undefined" && key.toLowerCase() === "content-type") {
              delete requestHeaders[key];
            } else {
              request.setRequestHeader(key, val);
            }
          });
        }
        if (!utils.isUndefined(config.withCredentials)) {
          request.withCredentials = !!config.withCredentials;
        }
        if (responseType && responseType !== "json") {
          request.responseType = config.responseType;
        }
        if (typeof config.onDownloadProgress === "function") {
          request.addEventListener("progress", config.onDownloadProgress);
        }
        if (typeof config.onUploadProgress === "function" && request.upload) {
          request.upload.addEventListener("progress", config.onUploadProgress);
        }
        if (config.cancelToken) {
          config.cancelToken.promise.then(function onCanceled(cancel) {
            if (!request) {
              return;
            }
            request.abort();
            reject(cancel);
            request = null;
          });
        }
        if (!requestData) {
          requestData = null;
        }
        request.send(requestData);
      });
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/defaults.js
var require_defaults = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/defaults.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var normalizeHeaderName = require_normalizeHeaderName();
    var enhanceError = require_enhanceError();
    var DEFAULT_CONTENT_TYPE = {
      "Content-Type": "application/x-www-form-urlencoded"
    };
    function setContentTypeIfUnset(headers, value) {
      if (!utils.isUndefined(headers) && utils.isUndefined(headers["Content-Type"])) {
        headers["Content-Type"] = value;
      }
    }
    function getDefaultAdapter() {
      var adapter;
      if (typeof XMLHttpRequest !== "undefined") {
        adapter = require_xhr();
      } else if (typeof process !== "undefined" && Object.prototype.toString.call(process) === "[object process]") {
        adapter = require_xhr();
      }
      return adapter;
    }
    function stringifySafely(rawValue, parser, encoder) {
      if (utils.isString(rawValue)) {
        try {
          (parser || JSON.parse)(rawValue);
          return utils.trim(rawValue);
        } catch (e) {
          if (e.name !== "SyntaxError") {
            throw e;
          }
        }
      }
      return (encoder || JSON.stringify)(rawValue);
    }
    var defaults2 = {
      transitional: {
        silentJSONParsing: true,
        forcedJSONParsing: true,
        clarifyTimeoutError: false
      },
      adapter: getDefaultAdapter(),
      transformRequest: [function transformRequest(data, headers) {
        normalizeHeaderName(headers, "Accept");
        normalizeHeaderName(headers, "Content-Type");
        if (utils.isFormData(data) || utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
          return data;
        }
        if (utils.isArrayBufferView(data)) {
          return data.buffer;
        }
        if (utils.isURLSearchParams(data)) {
          setContentTypeIfUnset(headers, "application/x-www-form-urlencoded;charset=utf-8");
          return data.toString();
        }
        if (utils.isObject(data) || headers && headers["Content-Type"] === "application/json") {
          setContentTypeIfUnset(headers, "application/json");
          return stringifySafely(data);
        }
        return data;
      }],
      transformResponse: [function transformResponse(data) {
        var transitional = this.transitional;
        var silentJSONParsing = transitional && transitional.silentJSONParsing;
        var forcedJSONParsing = transitional && transitional.forcedJSONParsing;
        var strictJSONParsing = !silentJSONParsing && this.responseType === "json";
        if (strictJSONParsing || forcedJSONParsing && utils.isString(data) && data.length) {
          try {
            return JSON.parse(data);
          } catch (e) {
            if (strictJSONParsing) {
              if (e.name === "SyntaxError") {
                throw enhanceError(e, this, "E_JSON_PARSE");
              }
              throw e;
            }
          }
        }
        return data;
      }],
      /**
       * A timeout in milliseconds to abort a request. If set to 0 (default) a
       * timeout is not created.
       */
      timeout: 0,
      xsrfCookieName: "XSRF-TOKEN",
      xsrfHeaderName: "X-XSRF-TOKEN",
      maxContentLength: -1,
      maxBodyLength: -1,
      validateStatus: function validateStatus(status) {
        return status >= 200 && status < 300;
      }
    };
    defaults2.headers = {
      common: {
        "Accept": "application/json, text/plain, */*"
      }
    };
    utils.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
      defaults2.headers[method] = {};
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      defaults2.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
    });
    module.exports = defaults2;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/transformData.js
var require_transformData = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/transformData.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var defaults2 = require_defaults();
    module.exports = function transformData2(data, headers, fns) {
      var context = this || defaults2;
      utils.forEach(fns, function transform(fn) {
        data = fn.call(context, data, headers);
      });
      return data;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/isCancel.js
var require_isCancel = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/isCancel.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function isCancel(value) {
      return !!(value && value.__CANCEL__);
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/dispatchRequest.js
var require_dispatchRequest = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/dispatchRequest.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var transformData2 = require_transformData();
    var isCancel = require_isCancel();
    var defaults2 = require_defaults();
    function throwIfCancellationRequested(config) {
      if (config.cancelToken) {
        config.cancelToken.throwIfRequested();
      }
    }
    module.exports = function dispatchRequest(config) {
      throwIfCancellationRequested(config);
      config.headers = config.headers || {};
      config.data = transformData2.call(
        config,
        config.data,
        config.headers,
        config.transformRequest
      );
      config.headers = utils.merge(
        config.headers.common || {},
        config.headers[config.method] || {},
        config.headers
      );
      utils.forEach(
        ["delete", "get", "head", "post", "put", "patch", "common"],
        function cleanHeaderConfig(method) {
          delete config.headers[method];
        }
      );
      var adapter = config.adapter || defaults2.adapter;
      return adapter(config).then(function onAdapterResolution(response) {
        throwIfCancellationRequested(config);
        response.data = transformData2.call(
          config,
          response.data,
          response.headers,
          config.transformResponse
        );
        return response;
      }, function onAdapterRejection(reason) {
        if (!isCancel(reason)) {
          throwIfCancellationRequested(config);
          if (reason && reason.response) {
            reason.response.data = transformData2.call(
              config,
              reason.response.data,
              reason.response.headers,
              config.transformResponse
            );
          }
        }
        return Promise.reject(reason);
      });
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/mergeConfig.js
var require_mergeConfig = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/mergeConfig.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    module.exports = function mergeConfig(config1, config2) {
      config2 = config2 || {};
      var config = {};
      var valueFromConfig2Keys = ["url", "method", "data"];
      var mergeDeepPropertiesKeys = ["headers", "auth", "proxy", "params"];
      var defaultToConfig2Keys = [
        "baseURL",
        "transformRequest",
        "transformResponse",
        "paramsSerializer",
        "timeout",
        "timeoutMessage",
        "withCredentials",
        "adapter",
        "responseType",
        "xsrfCookieName",
        "xsrfHeaderName",
        "onUploadProgress",
        "onDownloadProgress",
        "decompress",
        "maxContentLength",
        "maxBodyLength",
        "maxRedirects",
        "transport",
        "httpAgent",
        "httpsAgent",
        "cancelToken",
        "socketPath",
        "responseEncoding"
      ];
      var directMergeKeys = ["validateStatus"];
      function getMergedValue(target, source) {
        if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
          return utils.merge(target, source);
        } else if (utils.isPlainObject(source)) {
          return utils.merge({}, source);
        } else if (utils.isArray(source)) {
          return source.slice();
        }
        return source;
      }
      function mergeDeepProperties(prop) {
        if (!utils.isUndefined(config2[prop])) {
          config[prop] = getMergedValue(config1[prop], config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          config[prop] = getMergedValue(void 0, config1[prop]);
        }
      }
      utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          config[prop] = getMergedValue(void 0, config2[prop]);
        }
      });
      utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);
      utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {
        if (!utils.isUndefined(config2[prop])) {
          config[prop] = getMergedValue(void 0, config2[prop]);
        } else if (!utils.isUndefined(config1[prop])) {
          config[prop] = getMergedValue(void 0, config1[prop]);
        }
      });
      utils.forEach(directMergeKeys, function merge(prop) {
        if (prop in config2) {
          config[prop] = getMergedValue(config1[prop], config2[prop]);
        } else if (prop in config1) {
          config[prop] = getMergedValue(void 0, config1[prop]);
        }
      });
      var axiosKeys = valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys).concat(directMergeKeys);
      var otherKeys = Object.keys(config1).concat(Object.keys(config2)).filter(function filterAxiosKeys(key) {
        return axiosKeys.indexOf(key) === -1;
      });
      utils.forEach(otherKeys, mergeDeepProperties);
      return config;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/package.json
var require_package = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/package.json"(exports, module) {
    module.exports = {
      name: "axios",
      version: "0.21.4",
      description: "Promise based HTTP client for the browser and node.js",
      main: "index.js",
      scripts: {
        test: "grunt test",
        start: "node ./sandbox/server.js",
        build: "NODE_ENV=production grunt build",
        preversion: "npm test",
        version: "npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",
        postversion: "git push && git push --tags",
        examples: "node ./examples/server.js",
        coveralls: "cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",
        fix: "eslint --fix lib/**/*.js"
      },
      repository: {
        type: "git",
        url: "https://github.com/axios/axios.git"
      },
      keywords: [
        "xhr",
        "http",
        "ajax",
        "promise",
        "node"
      ],
      author: "Matt Zabriskie",
      license: "MIT",
      bugs: {
        url: "https://github.com/axios/axios/issues"
      },
      homepage: "https://axios-http.com",
      devDependencies: {
        coveralls: "^3.0.0",
        "es6-promise": "^4.2.4",
        grunt: "^1.3.0",
        "grunt-banner": "^0.6.0",
        "grunt-cli": "^1.2.0",
        "grunt-contrib-clean": "^1.1.0",
        "grunt-contrib-watch": "^1.0.0",
        "grunt-eslint": "^23.0.0",
        "grunt-karma": "^4.0.0",
        "grunt-mocha-test": "^0.13.3",
        "grunt-ts": "^6.0.0-beta.19",
        "grunt-webpack": "^4.0.2",
        "istanbul-instrumenter-loader": "^1.0.0",
        "jasmine-core": "^2.4.1",
        karma: "^6.3.2",
        "karma-chrome-launcher": "^3.1.0",
        "karma-firefox-launcher": "^2.1.0",
        "karma-jasmine": "^1.1.1",
        "karma-jasmine-ajax": "^0.1.13",
        "karma-safari-launcher": "^1.0.0",
        "karma-sauce-launcher": "^4.3.6",
        "karma-sinon": "^1.0.5",
        "karma-sourcemap-loader": "^0.3.8",
        "karma-webpack": "^4.0.2",
        "load-grunt-tasks": "^3.5.2",
        minimist: "^1.2.0",
        mocha: "^8.2.1",
        sinon: "^4.5.0",
        "terser-webpack-plugin": "^4.2.3",
        typescript: "^4.0.5",
        "url-search-params": "^0.10.0",
        webpack: "^4.44.2",
        "webpack-dev-server": "^3.11.0"
      },
      browser: {
        "./lib/adapters/http.js": "./lib/adapters/xhr.js"
      },
      jsdelivr: "dist/axios.min.js",
      unpkg: "dist/axios.min.js",
      typings: "./index.d.ts",
      dependencies: {
        "follow-redirects": "^1.14.0"
      },
      bundlesize: [
        {
          path: "./dist/axios.min.js",
          threshold: "5kB"
        }
      ]
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/validator.js
var require_validator = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/validator.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var pkg = require_package();
    var validators = {};
    ["object", "boolean", "number", "function", "string", "symbol"].forEach(function(type, i) {
      validators[type] = function validator(thing) {
        return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
      };
    });
    var deprecatedWarnings = {};
    var currentVerArr = pkg.version.split(".");
    function isOlderVersion(version, thanVersion) {
      var pkgVersionArr = thanVersion ? thanVersion.split(".") : currentVerArr;
      var destVer = version.split(".");
      for (var i = 0; i < 3; i++) {
        if (pkgVersionArr[i] > destVer[i]) {
          return true;
        } else if (pkgVersionArr[i] < destVer[i]) {
          return false;
        }
      }
      return false;
    }
    validators.transitional = function transitional(validator, version, message) {
      var isDeprecated = version && isOlderVersion(version);
      function formatMessage(opt, desc) {
        return "[Axios v" + pkg.version + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
      }
      return function(value, opt, opts) {
        if (validator === false) {
          throw new Error(formatMessage(opt, " has been removed in " + version));
        }
        if (isDeprecated && !deprecatedWarnings[opt]) {
          deprecatedWarnings[opt] = true;
          console.warn(
            formatMessage(
              opt,
              " has been deprecated since v" + version + " and will be removed in the near future"
            )
          );
        }
        return validator ? validator(value, opt, opts) : true;
      };
    };
    function assertOptions(options, schema, allowUnknown) {
      if (typeof options !== "object") {
        throw new TypeError("options must be an object");
      }
      var keys = Object.keys(options);
      var i = keys.length;
      while (i-- > 0) {
        var opt = keys[i];
        var validator = schema[opt];
        if (validator) {
          var value = options[opt];
          var result = value === void 0 || validator(value, opt, options);
          if (result !== true) {
            throw new TypeError("option " + opt + " must be " + result);
          }
          continue;
        }
        if (allowUnknown !== true) {
          throw Error("Unknown option " + opt);
        }
      }
    }
    module.exports = {
      isOlderVersion,
      assertOptions,
      validators
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/Axios.js
var require_Axios = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/core/Axios.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var buildURL = require_buildURL();
    var InterceptorManager = require_InterceptorManager();
    var dispatchRequest = require_dispatchRequest();
    var mergeConfig = require_mergeConfig();
    var validator = require_validator();
    var validators = validator.validators;
    function Axios(instanceConfig) {
      this.defaults = instanceConfig;
      this.interceptors = {
        request: new InterceptorManager(),
        response: new InterceptorManager()
      };
    }
    Axios.prototype.request = function request(config) {
      if (typeof config === "string") {
        config = arguments[1] || {};
        config.url = arguments[0];
      } else {
        config = config || {};
      }
      config = mergeConfig(this.defaults, config);
      if (config.method) {
        config.method = config.method.toLowerCase();
      } else if (this.defaults.method) {
        config.method = this.defaults.method.toLowerCase();
      } else {
        config.method = "get";
      }
      var transitional = config.transitional;
      if (transitional !== void 0) {
        validator.assertOptions(transitional, {
          silentJSONParsing: validators.transitional(validators.boolean, "1.0.0"),
          forcedJSONParsing: validators.transitional(validators.boolean, "1.0.0"),
          clarifyTimeoutError: validators.transitional(validators.boolean, "1.0.0")
        }, false);
      }
      var requestInterceptorChain = [];
      var synchronousRequestInterceptors = true;
      this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
        if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
          return;
        }
        synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
        requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
      });
      var responseInterceptorChain = [];
      this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
        responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
      });
      var promise;
      if (!synchronousRequestInterceptors) {
        var chain = [dispatchRequest, void 0];
        Array.prototype.unshift.apply(chain, requestInterceptorChain);
        chain = chain.concat(responseInterceptorChain);
        promise = Promise.resolve(config);
        while (chain.length) {
          promise = promise.then(chain.shift(), chain.shift());
        }
        return promise;
      }
      var newConfig = config;
      while (requestInterceptorChain.length) {
        var onFulfilled = requestInterceptorChain.shift();
        var onRejected = requestInterceptorChain.shift();
        try {
          newConfig = onFulfilled(newConfig);
        } catch (error) {
          onRejected(error);
          break;
        }
      }
      try {
        promise = dispatchRequest(newConfig);
      } catch (error) {
        return Promise.reject(error);
      }
      while (responseInterceptorChain.length) {
        promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());
      }
      return promise;
    };
    Axios.prototype.getUri = function getUri(config) {
      config = mergeConfig(this.defaults, config);
      return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, "");
    };
    utils.forEach(["delete", "get", "head", "options"], function forEachMethodNoData(method) {
      Axios.prototype[method] = function(url, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data: (config || {}).data
        }));
      };
    });
    utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
      Axios.prototype[method] = function(url, data, config) {
        return this.request(mergeConfig(config || {}, {
          method,
          url,
          data
        }));
      };
    });
    module.exports = Axios;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/Cancel.js
var require_Cancel = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/Cancel.js"(exports, module) {
    "use strict";
    init_define_process_env();
    function Cancel(message) {
      this.message = message;
    }
    Cancel.prototype.toString = function toString() {
      return "Cancel" + (this.message ? ": " + this.message : "");
    };
    Cancel.prototype.__CANCEL__ = true;
    module.exports = Cancel;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/CancelToken.js
var require_CancelToken = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/cancel/CancelToken.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var Cancel = require_Cancel();
    function CancelToken(executor) {
      if (typeof executor !== "function") {
        throw new TypeError("executor must be a function.");
      }
      var resolvePromise;
      this.promise = new Promise(function promiseExecutor(resolve) {
        resolvePromise = resolve;
      });
      var token = this;
      executor(function cancel(message) {
        if (token.reason) {
          return;
        }
        token.reason = new Cancel(message);
        resolvePromise(token.reason);
      });
    }
    CancelToken.prototype.throwIfRequested = function throwIfRequested() {
      if (this.reason) {
        throw this.reason;
      }
    };
    CancelToken.source = function source() {
      var cancel;
      var token = new CancelToken(function executor(c) {
        cancel = c;
      });
      return {
        token,
        cancel
      };
    };
    module.exports = CancelToken;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/spread.js
var require_spread = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/spread.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function spread(callback) {
      return function wrap(arr2) {
        return callback.apply(null, arr2);
      };
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isAxiosError.js
var require_isAxiosError = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/helpers/isAxiosError.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = function isAxiosError2(payload) {
      return typeof payload === "object" && payload.isAxiosError === true;
    };
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/lib/axios.js
var require_axios = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/lib/axios.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var utils = require_utils();
    var bind = require_bind();
    var Axios = require_Axios();
    var mergeConfig = require_mergeConfig();
    var defaults2 = require_defaults();
    function createInstance(defaultConfig) {
      var context = new Axios(defaultConfig);
      var instance = bind(Axios.prototype.request, context);
      utils.extend(instance, Axios.prototype, context);
      utils.extend(instance, context);
      return instance;
    }
    var axios2 = createInstance(defaults2);
    axios2.Axios = Axios;
    axios2.create = function create3(instanceConfig) {
      return createInstance(mergeConfig(axios2.defaults, instanceConfig));
    };
    axios2.Cancel = require_Cancel();
    axios2.CancelToken = require_CancelToken();
    axios2.isCancel = require_isCancel();
    axios2.all = function all(promises) {
      return Promise.all(promises);
    };
    axios2.spread = require_spread();
    axios2.isAxiosError = require_isAxiosError();
    module.exports = axios2;
    module.exports.default = axios2;
  }
});

// ../../node_modules/@wix/fe-essentials/node_modules/axios/index.js
var require_axios2 = __commonJS({
  "../../node_modules/@wix/fe-essentials/node_modules/axios/index.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = require_axios();
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/assert.js
var require_assert = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/assert.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    function _possibleConstructorReturn(self2, call) {
      if (!self2) {
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      }
      return call && (typeof call === "object" || typeof call === "function") ? call : self2;
    }
    function _inherits(subClass, superClass) {
      if (typeof superClass !== "function" && superClass !== null) {
        throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
      }
      subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
    }
    var AssertionError = function(_Error) {
      _inherits(AssertionError2, _Error);
      function AssertionError2(message) {
        _classCallCheck(this, AssertionError2);
        var _this = _possibleConstructorReturn(this, (AssertionError2.__proto__ || Object.getPrototypeOf(AssertionError2)).call(this, message));
        _this.name = _this.constructor.name;
        return _this;
      }
      return AssertionError2;
    }(Error);
    function assertDefined(target, message) {
      if (target === void 0) {
        throw new AssertionError(message);
      }
    }
    function assertObject(target, message) {
      if (target !== void 0 && ((typeof target === "undefined" ? "undefined" : _typeof2(target)) !== "object" || Array.isArray(target) || target === null)) {
        throw new AssertionError(message);
      }
    }
    function assertOk(target, message) {
      if (!target) {
        throw new AssertionError(message);
      }
    }
    function assertFunc(target, message) {
      if (target !== void 0 && typeof target !== "function") {
        throw new AssertionError(message);
      }
    }
    function assertBoolean2(target, message) {
      if (target !== void 0 && typeof target !== "boolean") {
        throw new AssertionError(message);
      }
    }
    function assertNumber(target, message) {
      if (target !== void 0 && typeof target !== "number") {
        throw new AssertionError(message);
      }
    }
    function assertArray(target, message) {
      if (typeof Array.isArray === "function") {
        if (!Array.isArray(target)) {
          throw new AssertionError(message);
        }
      } else if (Object.prototype.toString.call(target) !== "[object Array]") {
        throw new AssertionError(message);
      }
    }
    module.exports.defined = assertDefined;
    module.exports.object = assertObject;
    module.exports.ok = assertOk;
    module.exports.func = assertFunc;
    module.exports.boolean = assertBoolean2;
    module.exports.number = assertNumber;
    module.exports.array = assertArray;
    module.exports.AssertionError = AssertionError;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/collections.js
var require_collections = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/collections.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports.mapValues = function(collection, iteratee) {
      if (!collection) {
        return {};
      }
      return Object.keys(collection).reduce(function(acc, key) {
        acc[key] = iteratee(collection[key], key, collection);
        return acc;
      }, {});
    };
    module.exports.filterValues = function(collection, iteratee) {
      if (!collection) {
        return {};
      }
      return Object.keys(collection).reduce(function(acc, key) {
        var keep = iteratee(collection[key], key, collection);
        if (keep) {
          acc[key] = collection[key];
        }
        return acc;
      }, {});
    };
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/promise.js
var require_promise = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/promise.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports.timedPromise = function(promise, _ref) {
      var message = _ref.message, timeout = _ref.timeout;
      var timeoutPromise = new Promise(function(resolve, reject) {
        setTimeout(reject, timeout, message ? "Timeout: " + message : "Timeout");
      });
      return Promise.race([promise, timeoutPromise]);
    };
    module.exports.allAsObject = function(promiseObject) {
      var keys = Object.keys(promiseObject);
      return Promise.all(keys.map(function(key) {
        return promiseObject[key];
      })).then(function(resolved) {
        return resolved.reduce(function(acc, value, i) {
          acc[keys[i]] = value;
          return acc;
        }, {});
      });
    };
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/log.js
var require_log = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/log.js"(exports, module) {
    "use strict";
    init_define_process_env();
    module.exports = {
      error: function error() {
        if (console && console.error) {
          var _console;
          (_console = console).error.apply(_console, arguments);
        }
      }
    };
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/debounce.js
var require_debounce = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/debounce.js"(exports, module) {
    "use strict";
    init_define_process_env();
    function debounce(func, wait, immediate) {
      var timeout = void 0;
      return function() {
        var context = this;
        var args = arguments;
        var later = function later2() {
          timeout = null;
          if (!immediate) {
            func.apply(context, args);
          }
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) {
          func.apply(context, args);
        }
      };
    }
    module.exports = debounce;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/throttle.js
var require_throttle = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/throttle.js"(exports, module) {
    "use strict";
    init_define_process_env();
    function throttle(func, wait) {
      var timeout = void 0;
      return function() {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        if (!timeout) {
          timeout = setTimeout(function() {
            func.apply(void 0, args);
            timeout = null;
          }, wait);
        }
      };
    }
    module.exports = throttle;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/utils/batch-queue.js
var require_batch_queue = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/utils/batch-queue.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var _createClass2 = /* @__PURE__ */ function() {
      function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor) descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
      };
    }();
    var _slicedToArray = /* @__PURE__ */ function() {
      function sliceIterator(arr2, i) {
        var _arr = [];
        var _n = true;
        var _d = false;
        var _e = void 0;
        try {
          for (var _i = arr2[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
            _arr.push(_s.value);
            if (i && _arr.length === i) break;
          }
        } catch (err) {
          _d = true;
          _e = err;
        } finally {
          try {
            if (!_n && _i["return"]) _i["return"]();
          } finally {
            if (_d) throw _e;
          }
        }
        return _arr;
      }
      return function(arr2, i) {
        if (Array.isArray(arr2)) {
          return arr2;
        } else if (Symbol.iterator in Object(arr2)) {
          return sliceIterator(arr2, i);
        } else {
          throw new TypeError("Invalid attempt to destructure non-iterable instance");
        }
      };
    }();
    var _extends = Object.assign || function(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];
        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }
      return target;
    };
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    var debounce = require_debounce();
    var throttle = require_throttle();
    var createEvent = function createEvent2(event, context, startTime) {
      return {
        dt: Date.now() - startTime,
        f: event,
        context
      };
    };
    var createBatch = function createBatch2(events, startTime) {
      return {
        dt: Date.now() - startTime,
        e: events,
        g: {}
      };
    };
    var optimizeBatch = function optimizeBatch2(batch) {
      var fieldCounts = {};
      var batchLen = batch.e.length;
      var events = batch.e.map(function(event) {
        var fields = Object.keys(event.f).map(function(field) {
          var value = event.f[field];
          var key = field + "|" + value;
          fieldCounts[key] = fieldCounts[key] || 0;
          fieldCounts[key]++;
          return [field, value, key];
        });
        return _extends({}, event, {
          f: fields
        });
      });
      var globalFields = {};
      events = events.map(function(event) {
        var fields = event.f.reduce(function(res, _ref) {
          var _ref2 = _slicedToArray(_ref, 3), field = _ref2[0], value = _ref2[1], key = _ref2[2];
          if (fieldCounts[key] === batchLen) {
            globalFields[field] = value;
          } else {
            res[field] = value;
          }
          return res;
        }, {});
        return _extends({}, event, {
          f: fields
        });
      });
      return _extends({}, batch, {
        e: events,
        g: globalFields
      });
    };
    var BatchQueue = function() {
      function BatchQueue2() {
        _classCallCheck(this, BatchQueue2);
        this._initilized = false;
      }
      _createClass2(BatchQueue2, [{
        key: "_reset",
        value: function _reset() {
          var _this = this;
          this._startTime = Date.now();
          this._resolve = null;
          this._promise = new Promise(function(resolve) {
            return _this._resolve = resolve;
          });
        }
      }, {
        key: "init",
        value: function init(_ref3, flushHandler) {
          var _this2 = this;
          var delayMs = _ref3.delayMs, maxBatchSize = _ref3.maxBatchSize, useThrottle = _ref3.useThrottle, optimizeBatch2 = _ref3.optimizeBatch;
          if (this._initilized) {
            return;
          }
          this._maxBatchSize = maxBatchSize;
          this._optimizeBatch = optimizeBatch2;
          this._queue = [];
          this._flushHandler = flushHandler;
          this._flushDebounced = useThrottle ? throttle(function() {
            return _this2.flush();
          }, delayMs) : debounce(function() {
            return _this2.flush();
          }, delayMs);
          this._initilized = true;
          this._reset();
        }
      }, {
        key: "flush",
        value: function flush() {
          if (!this._queue.length) {
            return Promise.resolve();
          }
          var events = this._queue.splice(0, this._queue.length);
          var resolve = this._resolve;
          var startTime = this._startTime;
          this._reset();
          var batch = createBatch(events, startTime);
          if (this._optimizeBatch) {
            batch = optimizeBatch(batch);
          }
          return this._flushHandler(batch).then(resolve);
        }
      }, {
        key: "feed",
        value: function feed(event, context) {
          this._queue.push(createEvent(event, context, this._startTime));
          if (this._queue.length === this._maxBatchSize) {
            return this.flush();
          }
          this._flushDebounced();
          return this._promise;
        }
      }]);
      return BatchQueue2;
    }();
    module.exports = BatchQueue;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/consent-policy.js
var require_consent_policy = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/consent-policy.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var DefaultConsentPolicy = {
      functional: true,
      analytics: true,
      __default: true
    };
    var getPolicy = function getPolicy2(consentPolicyGetter) {
      return typeof consentPolicyGetter === "function" && consentPolicyGetter() || DefaultConsentPolicy;
    };
    var shouldMuteNonEssentials = function shouldMuteNonEssentials2(policy) {
      return policy.functional === false || policy.analytics === false;
    };
    var shouldMuteByCategory = function shouldMuteByCategory2(policy, category) {
      if (category === "essential") {
        return false;
      }
      if (category === "functional" || category === "analytics") {
        return policy[category] === false;
      }
      return shouldMuteNonEssentials(policy);
    };
    module.exports = {
      shouldMuteNonEssentials,
      shouldMuteByCategory,
      getPolicy
    };
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger.js
var require_bi_logger = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var _extends = Object.assign || function(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];
        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }
      return target;
    };
    var _createClass2 = /* @__PURE__ */ function() {
      function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor) descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
      };
    }();
    function _objectWithoutProperties(obj, keys) {
      var target = {};
      for (var i in obj) {
        if (keys.indexOf(i) >= 0) continue;
        if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;
        target[i] = obj[i];
      }
      return target;
    }
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    var assert = require_assert();
    var _require = require_collections();
    var mapValues = _require.mapValues;
    var filterValues = _require.filterValues;
    var promise = require_promise();
    var log = require_log();
    var BatchQueue = require_batch_queue();
    var _require2 = require_consent_policy();
    var shouldMuteByCategory = _require2.shouldMuteByCategory;
    var shouldMuteNonEssentials = _require2.shouldMuteNonEssentials;
    var getPolicy = _require2.getPolicy;
    var BiLogger = function() {
      function BiLogger2(options, context) {
        _classCallCheck(this, BiLogger2);
        this._publishers = options.publishers;
        this._validators = options.validators || [];
        this._defaults = options.defaults;
        this._ownDefaults = {};
        this._events = options.events || {};
        this._context = context || {};
        this._defaultValueTimeout = options.defaultValueTimeout || 5e3;
        this._defaultContinueOnFail = options.defaultContinueOnFail || false;
        this._onPublisherFailHandler = options.onPublisherFailHandler || BiLogger2._defaultPublisherFailHandler;
        this._isMuted = options.isMuted || function() {
          return false;
        };
        this._eventTransformer = options.eventTransformer || function(event) {
          return event;
        };
        this._payloadTransformer = options.payloadTransformer || function(payload) {
          return payload;
        };
        this._consentPolicyGetter = options.consentPolicyGetter || function() {
          return null;
        };
        this._nonEssentialDefaults = options.nonEssentialDefaults || {};
        this._maxBatchSize = options.maxBatchSize || 100;
        this._globalBatchQueue = options.globalBatchQueue;
      }
      _createClass2(BiLogger2, [{
        key: "report",
        value: function report(data) {
          assert.defined(data, "Data must be provided");
          assert.object(data, "Data must be an object");
          var src = data.src, evid = data.evid, params = data.params, context = _objectWithoutProperties(data, ["src", "evid", "params"]);
          return this.log(_extends({ src, evid }, params), context);
        }
      }, {
        key: "log",
        value: function log2(eventOrKey, eventOrContextOrUndefined, contextOrUndefined) {
          var _this = this;
          assert.defined(eventOrKey, "Event object or event key must be provided.");
          var _extractEventAndConte = this._extractEventAndContext(eventOrKey, eventOrContextOrUndefined, contextOrUndefined), event = _extractEventAndConte.event, context = _extractEventAndConte.context;
          var policy = getPolicy(this._consentPolicyGetter);
          var fullContext = _extends({}, this._context, context);
          if (this._isMuted() || shouldMuteByCategory(policy, fullContext.category)) {
            return Promise.resolve();
          }
          if (fullContext.useBatch) {
            var queue = this._initQueue(fullContext, policy);
            var transformAndQueue = function transformAndQueue2(_event) {
              var transformedEvent = _this._eventTransformer(_event, fullContext);
              return queue.feed(transformedEvent, fullContext);
            };
            if (this._globalBatchQueue) {
              return this._getDefaults(this._defaults).then(function(defaults2) {
                var fullEvent2 = _extends({}, defaults2, _this._getDynamicNonEssentialDefaults(policy), _this._getStaticNonEssentialDefaults(policy), event, _this._getPolicyFields(policy, fullContext.category));
                return transformAndQueue(fullEvent2);
              });
            } else {
              var fullEvent = _extends({}, this._getDynamicDefaults(this._defaults), this._getDynamicNonEssentialDefaults(policy), event, this._getPolicyFields(policy, fullContext.category));
              return transformAndQueue(fullEvent);
            }
          }
          return this._getDefaults(this._defaults).then(function(defaults2) {
            var fullEvent2 = Object.assign(defaults2, _this._getDynamicNonEssentialDefaults(policy), _this._getStaticNonEssentialDefaults(policy), event, _this._getPolicyFields(policy, fullContext.category));
            var validatorsResult = _this._validators.length === 0 ? true : _this._validators.some(function(validator) {
              return validator.match(fullEvent2) && (validator.execute(fullEvent2) || true);
            });
            if (!validatorsResult) {
              throw new Error("No validator accepted the event. Source: " + fullEvent2.src + " Evid: " + (fullEvent2.evid || fullEvent2.evtId));
            }
            var transformedEvent = _this._eventTransformer(fullEvent2, fullContext);
            transformedEvent = _this._payloadTransformer(transformedEvent, fullContext);
            return _this._send(transformedEvent, fullContext);
          });
        }
      }, {
        key: "flush",
        value: function flush() {
          if (!this._queue) {
            return Promise.resolve();
          }
          return this._queue.flush();
        }
      }, {
        key: "updateDefaults",
        value: function updateDefaults(defaults2) {
          assert.defined(defaults2, "Defaults must be provided");
          assert.object(defaults2, "Defaults must be an object");
          Object.assign(this._ownDefaults, defaults2);
          return this;
        }
      }, {
        key: "_send",
        value: function _send(payload) {
          var _this2 = this;
          var context = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          return Promise.all(this._publishers.map(function(publisher) {
            var cloned = _extends({}, payload);
            return Promise.resolve().then(function() {
              return publisher(cloned, context);
            }).catch(function(error) {
              return _this2._onPublisherFailHandler(error, {
                publisherName: publisher.name,
                payload
              });
            });
          })).then(function() {
            return void 0;
          });
        }
      }, {
        key: "_extractEventAndContext",
        value: function _extractEventAndContext(eventOrKey, eventOrContextOrUndefined, contextOrUndefined) {
          var event = void 0;
          var context = {};
          if (typeof eventOrKey !== "string") {
            event = eventOrKey;
            context = eventOrContextOrUndefined || context;
          } else {
            event = this._events[eventOrKey];
            if (!event) {
              throw new assert.AssertionError("Event with key '" + eventOrKey + "' not found in event map.");
            }
            if (eventOrContextOrUndefined) {
              event = _extends({}, event, eventOrContextOrUndefined);
              context = contextOrUndefined || context;
            }
          }
          return { event, context };
        }
      }, {
        key: "_initQueue",
        value: function _initQueue(context, policy) {
          var _this3 = this;
          if (this._queue) {
            return this._queue;
          }
          this._queue = this._globalBatchQueue || new BatchQueue();
          var onFlush = function onFlush2(batch) {
            if (!_this3._globalBatchQueue) {
              batch.g = Object.assign(_this3._getStaticDefaults(_this3._defaults), _this3._getStaticNonEssentialDefaults(policy));
            }
            var transformedPayload = _this3._payloadTransformer(batch, context);
            return _this3._send(transformedPayload, context);
          };
          this._queue.init({
            delayMs: context.useBatch === true ? 300 : context.useBatch,
            maxBatchSize: this._maxBatchSize,
            useThrottle: !!this._globalBatchQueue,
            optimizeBatch: !!this._globalBatchQueue
          }, onFlush);
          return this._queue;
        }
      }, {
        key: "_handleDefaultsError",
        value: function _handleDefaultsError(err) {
          if (this._defaultContinueOnFail) {
            log.error(err);
            return null;
          }
          return Promise.reject(err);
        }
      }, {
        key: "_getDynamicNonEssentialDefaults",
        value: function _getDynamicNonEssentialDefaults(policy) {
          if (!shouldMuteNonEssentials(policy)) {
            return this._getDynamicDefaults(this._nonEssentialDefaults);
          }
        }
      }, {
        key: "_getStaticNonEssentialDefaults",
        value: function _getStaticNonEssentialDefaults(policy) {
          if (!shouldMuteNonEssentials(policy)) {
            return this._getStaticDefaults(this._nonEssentialDefaults);
          }
        }
      }, {
        key: "_withOwnDefaults",
        value: function _withOwnDefaults(defaults2) {
          return Object.assign({}, defaults2, this._ownDefaults);
        }
      }, {
        key: "_getDynamicDefaults",
        value: function _getDynamicDefaults(defaults2) {
          defaults2 = this._withOwnDefaults(defaults2);
          var dynamicDefaults = filterValues(defaults2, function(v) {
            return typeof v === "function";
          });
          return mapValues(dynamicDefaults, function(v) {
            return v();
          });
        }
      }, {
        key: "_getStaticDefaults",
        value: function _getStaticDefaults(defaults2) {
          defaults2 = this._withOwnDefaults(defaults2);
          var staticDefaults = filterValues(defaults2, function(v) {
            return typeof v !== "function";
          });
          return staticDefaults;
        }
      }, {
        key: "_getDefaults",
        value: function _getDefaults(defaults2) {
          var _this4 = this;
          defaults2 = this._withOwnDefaults(defaults2);
          if (!defaults2) {
            return Promise.resolve({});
          }
          var promises = mapValues(defaults2, function(value, key) {
            if (typeof value === "function") {
              try {
                value = value();
              } catch (err) {
                return _this4._handleDefaultsError(err);
              }
            }
            if (value && typeof value.then === "function") {
              return promise.timedPromise(value, {
                message: "Cannot get default value '" + key + " for BI Event'",
                timeout: _this4._defaultValueTimeout
              }).catch(function(err) {
                return _this4._handleDefaultsError(err);
              });
            }
            return value;
          });
          return promise.allAsObject(promises);
        }
      }, {
        key: "_encodePolicyValue",
        value: function _encodePolicyValue(policy, key) {
          if (!policy) {
            return 1;
          }
          if (typeof policy[key] === "boolean") {
            return policy[key] ? 1 : 0;
          }
          return policy[key];
        }
      }, {
        key: "_getPolicyFields",
        value: function _getPolicyFields(policy, category) {
          return {
            _isca: this._encodePolicyValue(policy, "analytics"),
            _iscf: this._encodePolicyValue(policy, "functional"),
            _ispd: policy.__default ? 1 : 0,
            _ise: category === "essential" ? 1 : 0
          };
        }
      }], [{
        key: "_defaultPublisherFailHandler",
        value: function _defaultPublisherFailHandler(error, _ref) {
          var publisherName = _ref.publisherName;
          return publisherName;
        }
      }]);
      return BiLogger2;
    }();
    module.exports = BiLogger;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger-manager.js
var require_bi_logger_manager = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger-manager.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var _createClass2 = /* @__PURE__ */ function() {
      function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor) descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
      };
    }();
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    var assert = require_assert();
    var BiLoggerManager = function() {
      function BiLoggerManager2() {
        _classCallCheck(this, BiLoggerManager2);
        this.reset();
      }
      _createClass2(BiLoggerManager2, [{
        key: "reset",
        value: function reset() {
          this._handlers = [];
        }
      }, {
        key: "onLoggerCreated",
        value: function onLoggerCreated(handler) {
          var _this = this;
          assert.defined(handler, "Handler must be provided.");
          assert.func(handler, "Handler must be a function.");
          this._handlers.push(handler);
          return function() {
            var index = _this._handlers.indexOf(handler);
            if (index !== -1) {
              _this._handlers.splice(index, 1);
            }
          };
        }
      }, {
        key: "notifyLoggerCreated",
        value: function notifyLoggerCreated(logger) {
          this._handlers.forEach(function(handler) {
            return handler(logger);
          });
        }
      }]);
      return BiLoggerManager2;
    }();
    module.exports = {
      manager: new BiLoggerManager(),
      BiLoggerManager
    };
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger-factory.js
var require_bi_logger_factory = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/bi-logger-factory.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
      return typeof obj;
    } : function(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
    var _createClass2 = /* @__PURE__ */ function() {
      function defineProperties(target, props) {
        for (var i = 0; i < props.length; i++) {
          var descriptor = props[i];
          descriptor.enumerable = descriptor.enumerable || false;
          descriptor.configurable = true;
          if ("value" in descriptor) descriptor.writable = true;
          Object.defineProperty(target, descriptor.key, descriptor);
        }
      }
      return function(Constructor, protoProps, staticProps) {
        if (protoProps) defineProperties(Constructor.prototype, protoProps);
        if (staticProps) defineProperties(Constructor, staticProps);
        return Constructor;
      };
    }();
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    var assert = require_assert();
    var BiLogger = require_bi_logger();
    var biLoggerManager = require_bi_logger_manager();
    var BatchQueue = require_batch_queue();
    var BiLoggerFactory = function() {
      function BiLoggerFactory2() {
        _classCallCheck(this, BiLoggerFactory2);
        this._publishers = [];
        this._validators = [];
        this._defaults = {};
        this._nonEssentialDefaults = {};
        this._events = {};
        this._isMuted = false;
        this._eventTransformer = null;
        this._payloadTransformer = null;
        this._consentPolicyGetter = null;
        this._maxBatchSize = null;
        this._batchQueue = null;
      }
      _createClass2(BiLoggerFactory2, [{
        key: "addPublisher",
        value: function addPublisher(publisher) {
          assert.defined(publisher, "Publisher must be provided");
          assert.ok(typeof publisher === "function", "Expected a publisher function");
          this._publishers.push(publisher);
          return this;
        }
      }, {
        key: "addValidator",
        value: function addValidator(validator) {
          assert.defined(validator, "Validator must be provided");
          assert.ok((typeof validator === "undefined" ? "undefined" : _typeof2(validator)) === "object" && validator, "Expected a validator object");
          assert.ok(validator.execute && validator.match, "Provided validator does not match the interface");
          this._validators.push(validator);
          return this;
        }
      }, {
        key: "setDefaults",
        value: function setDefaults(defaults2) {
          assert.defined(defaults2, "Defaults must be provided");
          assert.object(defaults2, "Defaults must be an object");
          this._defaults = defaults2;
          return this;
        }
      }, {
        key: "updateDefaults",
        value: function updateDefaults(defaults2) {
          assert.defined(defaults2, "Defaults must be provided");
          assert.object(defaults2, "Defaults must be an object");
          Object.assign(this._defaults, defaults2);
          return this;
        }
      }, {
        key: "updateNonEssentialDefaults",
        value: function updateNonEssentialDefaults(defaults2) {
          assert.defined(defaults2, "Non-essential Defaults must be provided");
          assert.object(defaults2, "Non-essential Defaults must be an object");
          Object.assign(this._nonEssentialDefaults, defaults2);
          return this;
        }
      }, {
        key: "setEvents",
        value: function setEvents(events) {
          assert.defined(events, "Events must be provided");
          assert.object(events, "Events must be an object");
          this._events = events;
          return this;
        }
      }, {
        key: "setDefaultValueTimeout",
        value: function setDefaultValueTimeout(defaultValueTimeout) {
          assert.defined(defaultValueTimeout, "Default Value Timeout must be provided");
          this._defaultValueTimeout = defaultValueTimeout;
          return this;
        }
      }, {
        key: "setDefaultContinueOnFail",
        value: function setDefaultContinueOnFail(defaultContinueOnFail) {
          assert.defined(defaultContinueOnFail, "Default Continue On Fail must be provided");
          this._defaultContinueOnFail = defaultContinueOnFail;
          return this;
        }
      }, {
        key: "setPublisherFailHandler",
        value: function setPublisherFailHandler(onPublisherFailHandler) {
          assert.defined(onPublisherFailHandler, "Publisher Fail Handler must be provided");
          this._onPublisherFailHandler = onPublisherFailHandler;
          return this;
        }
      }, {
        key: "setMuted",
        value: function setMuted(isMuted) {
          assert.defined(isMuted, "Is Muted must be provided");
          assert.boolean(isMuted, "Is Muted must be a boolean");
          this._isMuted = isMuted;
          return this;
        }
      }, {
        key: "setMaxBatchSize",
        value: function setMaxBatchSize(maxBatchSize) {
          assert.defined(maxBatchSize, "Max Batch Size must be provided");
          assert.number(maxBatchSize, "Max Batch Size must be a number");
          assert.ok(maxBatchSize > 0, "Max Batch Size must be higher than 0");
          this._maxBatchSize = maxBatchSize;
          return this;
        }
      }, {
        key: "setGlobalBatchQueue",
        value: function setGlobalBatchQueue(batchQueue) {
          assert.defined(batchQueue, "Global Batch Queue must be provided");
          assert.ok(batchQueue instanceof BatchQueue, "Global Batch Queue must be an instance of BatchQueue");
          this._globalBatchQueue = batchQueue;
          return this;
        }
      }, {
        key: "withEventTransformer",
        value: function withEventTransformer(transformer) {
          assert.defined(transformer, "Event Transformer must be provided");
          assert.func(transformer, "Event Transformer must be a function");
          this._eventTransformer = transformer;
          return this;
        }
      }, {
        key: "withPayloadTransformer",
        value: function withPayloadTransformer(transformer) {
          assert.defined(transformer, "Payload Transformer must be provided");
          assert.func(transformer, "Payload Transformer must be a function");
          this._payloadTransformer = transformer;
          return this;
        }
      }, {
        key: "withConsentPolicyGetter",
        value: function withConsentPolicyGetter(getter) {
          assert.defined(getter, "Consent Policy Getter must be provided");
          assert.func(getter, "Consent Policy Getter must be a function");
          this._consentPolicyGetter = getter;
          return this;
        }
      }, {
        key: "logger",
        value: function logger(context) {
          var _this = this;
          var logger2 = new BiLogger({
            publishers: this._publishers,
            validators: this._validators,
            defaults: this._defaults,
            events: this._events,
            defaultValueTimeout: this._defaultValueTimeout,
            defaultContinueOnFail: this._defaultContinueOnFail,
            onPublisherFailHandler: this._onPublisherFailHandler,
            isMuted: function isMuted() {
              return _this._isMuted;
            },
            eventTransformer: this._eventTransformer,
            payloadTransformer: this._payloadTransformer,
            consentPolicyGetter: this._consentPolicyGetter,
            nonEssentialDefaults: this._nonEssentialDefaults,
            maxBatchSize: this._maxBatchSize,
            globalBatchQueue: this._globalBatchQueue
          }, context);
          biLoggerManager.manager.notifyLoggerCreated(logger2);
          return logger2;
        }
      }]);
      return BiLoggerFactory2;
    }();
    module.exports = BiLoggerFactory;
  }
});

// ../../node_modules/@wix/wix-bi-logger-client/dist/index.js
var require_dist = __commonJS({
  "../../node_modules/@wix/wix-bi-logger-client/dist/index.js"(exports, module) {
    "use strict";
    init_define_process_env();
    var BiLoggerClientFactory = require_bi_logger_factory();
    var BiLogger = require_bi_logger();
    var biLoggerManager = require_bi_logger_manager();
    var BatchQueue = require_batch_queue();
    module.exports.BiLoggerFactory = BiLoggerClientFactory;
    module.exports.BiLogger = BiLogger;
    module.exports.BiLoggerManager = biLoggerManager.BiLoggerManager;
    module.exports.factory = function() {
      return new BiLoggerClientFactory();
    };
    module.exports.manager = biLoggerManager.manager;
    module.exports.createBatchQueue = function() {
      return new BatchQueue();
    };
  }
});

// ../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/consts.js
var METHODS, PROPS_ACCESS, ALLOW_ALL_POLICY;
var init_consts = __esm({
  "../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/consts.js"() {
    "use strict";
    init_define_process_env();
    METHODS = {
      policy: "getCurrentConsentPolicy",
      header: "_getConsentPolicyHeader",
      isMethod: true
    };
    PROPS_ACCESS = {
      policy: "consentPolicy",
      header: "consentPolicyHeader",
      isMethod: false
    };
    ALLOW_ALL_POLICY = {
      essential: true,
      dataToThirdParty: true,
      advertising: true,
      functional: true,
      analytics: true
    };
  }
});

// ../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/consent-policy-accessor.js
function getGlobalAccessor() {
  [getGlobalThis, getGlobal, getSelf, getWindow].forEach(function(globalAccessFunc) {
    try {
      if (!globalContext) {
        globalContext = globalAccessFunc();
      }
    } catch (e) {
    }
  });
  return globalContext;
}
function getWindow() {
  return window;
}
function getSelf() {
  return self;
}
function getGlobal() {
  return global;
}
function getGlobalThis() {
  return globalThis;
}
function getConsentPolicyManager(env3) {
  if (env3 === void 0) {
    env3 = void 0;
  }
  if (env3) {
    globalContext = env3;
  }
  if (!globalContext && !env3) {
    globalContext = getGlobalAccessor();
  }
  var consentPolicyManager2;
  try {
    if (typeof globalContext.commonConfig === "object" && globalContext.commonConfig.consentPolicy) {
      consentPolicyManager2 = wrapConsentPolicy(globalContext.commonConfig, PROPS_ACCESS);
    }
    if (!consentPolicyManager2 && typeof globalContext.consentPolicyManager === "object") {
      consentPolicyManager2 = wrapConsentPolicy(globalContext.consentPolicyManager, METHODS);
    }
    if (!consentPolicyManager2 && typeof globalContext.Wix === "object" && typeof globalContext.Wix.Utils === "object" && typeof globalContext.Wix.Utils.getCurrentConsentPolicy === "function") {
      consentPolicyManager2 = wrapConsentPolicy(globalContext.Wix.Utils, METHODS);
    }
  } catch (e) {
  }
  return consentPolicyManager2;
}
function wrapConsentPolicy(accessor, conf) {
  return {
    getCurrentConsentPolicy: function() {
      var extractor = accessor[conf.policy];
      return conf.isMethod ? extractor() : extractor;
    },
    _getConsentPolicyHeader: function() {
      var extractor = accessor[conf.header];
      return conf.isMethod ? extractor() : extractor;
    },
    deleteReference: !conf.isMethod
    // If it is an object pointer, there is no promise the same object will be updated.
  };
}
var globalContext;
var init_consent_policy_accessor = __esm({
  "../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/consent-policy-accessor.js"() {
    "use strict";
    init_define_process_env();
    init_consts();
  }
});

// ../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/index.js
var src_exports = {};
__export(src_exports, {
  ConsentPolicyAccessor: () => ConsentPolicyAccessor
});
var ConsentPolicyAccessor;
var init_src = __esm({
  "../../node_modules/@wix/consent-policy-client-accessor/dist/es/src/index.js"() {
    "use strict";
    init_define_process_env();
    init_consent_policy_accessor();
    init_consts();
    ConsentPolicyAccessor = /** @class */
    function() {
      function ConsentPolicyAccessor2(env3) {
        if (env3) {
          this.env = env3;
        }
        this.consentPolicyAccess = getConsentPolicyManager(this.env);
      }
      ConsentPolicyAccessor2.prototype.clearReference = function() {
        if (this.consentPolicyAccess && this.consentPolicyAccess.deleteReference) {
          this.consentPolicyAccess = void 0;
        }
      };
      ConsentPolicyAccessor2.prototype.getCurrentConsentPolicy = function() {
        if (!this.consentPolicyAccess) {
          this.consentPolicyAccess = getConsentPolicyManager(this.env);
        }
        var policyObj = this.consentPolicyAccess && this.consentPolicyAccess.getCurrentConsentPolicy() || ALLOW_ALL_POLICY;
        this.clearReference();
        return policyObj.policy ? policyObj.policy : policyObj;
      };
      ConsentPolicyAccessor2.prototype.getConsentPolicyHeader = function(valueOnly) {
        if (valueOnly === void 0) {
          valueOnly = false;
        }
        if (!this.consentPolicyAccess) {
          this.consentPolicyAccess = getConsentPolicyManager(this.env);
        }
        var consentPolicyHeaderObj = this.consentPolicyAccess && this.consentPolicyAccess._getConsentPolicyHeader() || {
          "consent-policy": ""
        };
        this.clearReference();
        return valueOnly ? consentPolicyHeaderObj["consent-policy"] : consentPolicyHeaderObj;
      };
      return ConsentPolicyAccessor2;
    }();
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/errors.js
var require_errors = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/errors.js"(exports) {
    "use strict";
    init_define_process_env();
    var __extends2 = exports && exports.__extends || /* @__PURE__ */ function() {
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2) if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      return function(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      };
    }();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.APINotSupportedError = exports.AssertionError = void 0;
    var AssertionError = (
      /** @class */
      function(_super) {
        __extends2(AssertionError2, _super);
        function AssertionError2(message) {
          var _this = _super.call(this, message) || this;
          _this.name = _this.constructor.name;
          return _this;
        }
        return AssertionError2;
      }(Error)
    );
    exports.AssertionError = AssertionError;
    var APINotSupportedError = (
      /** @class */
      function(_super) {
        __extends2(APINotSupportedError2, _super);
        function APINotSupportedError2(message) {
          var _this = _super.call(this, message) || this;
          _this.name = _this.constructor.name;
          return _this;
        }
        return APINotSupportedError2;
      }(Error)
    );
    exports.APINotSupportedError = APINotSupportedError;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/assert.js
var require_assert2 = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/assert.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ok = exports.object = exports.defined = void 0;
    var errors_1 = require_errors();
    var defined = function(target, message) {
      if (target === void 0) {
        throw new errors_1.AssertionError(message);
      }
    };
    exports.defined = defined;
    var object = function(target, message) {
      if (target !== void 0 && (typeof target !== "object" || Array.isArray(target) || target === null)) {
        throw new errors_1.AssertionError(message);
      }
    };
    exports.object = object;
    var ok = function(target, message) {
      if (!target) {
        throw new errors_1.AssertionError(message);
      }
    };
    exports.ok = ok;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/browser.js
var require_browser = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/browser.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.readCookie = exports.sendBeacon = exports.getWindowSize = exports.getDesktopSize = exports.now = void 0;
    function now2() {
      return typeof performance !== "undefined" && performance && performance.now ? performance.now() : -1;
    }
    exports.now = now2;
    function getDesktopSize(window2) {
      var width = window2.screen && window2.screen.width || 0;
      var height = window2.screen && window2.screen.height || 0;
      return "".concat(width, "x").concat(height);
    }
    exports.getDesktopSize = getDesktopSize;
    function getWindowSize(window2) {
      var width = 0;
      var height = 0;
      if (window2.innerWidth) {
        width = window2.innerWidth;
        height = window2.innerHeight;
      } else if (window2.document) {
        if (window2.document.documentElement && window2.document.documentElement.clientWidth) {
          width = window2.document.documentElement.clientWidth;
          height = window2.document.documentElement.clientHeight;
        } else if (window2.document.body && window2.document.body.clientWidth) {
          width = window2.document.body.clientWidth;
          height = window2.document.body.clientHeight;
        }
      }
      return "".concat(width, "x").concat(height);
    }
    exports.getWindowSize = getWindowSize;
    function sendBeacon2(url, data) {
      if (typeof navigator === "undefined" || !navigator || !navigator.sendBeacon) {
        return false;
      }
      return navigator.sendBeacon(url, data);
    }
    exports.sendBeacon = sendBeacon2;
    function readCookie2(cookieName) {
      if (typeof document === "undefined") {
        return null;
      }
      if (window.__ENABLE_COOKIE_READ_OPTIMIZATION__ && window.__BI_cookie_cache && window.__BI_cookie_cache[cookieName] !== void 0) {
        return window.__BI_cookie_cache[cookieName];
      }
      var cookies = document.cookie.split(";");
      for (var _i = 0, cookies_1 = cookies; _i < cookies_1.length; _i++) {
        var cookie = cookies_1[_i];
        var pair = cookie.split("=");
        var name_1 = pair[0];
        var value = pair[1];
        while (name_1[0] === " ") {
          name_1 = name_1.substr(1);
        }
        if (name_1 === cookieName) {
          if (window.__ENABLE_COOKIE_READ_OPTIMIZATION__) {
            if (!window.__BI_cookie_cache) {
              window.__BI_cookie_cache = {};
            }
            window.__BI_cookie_cache[cookieName] = value;
          }
          return value;
        }
      }
      return "";
    }
    exports.readCookie = readCookie2;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/constants.js
var require_constants = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/constants.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.DefaultCommonConfig = exports.BrandToHostMap = exports.HeadlessHost = exports.DefaultBrand = exports.EventContextMap = exports.BackofficeDomains = exports.LoggerVersion = void 0;
    exports.LoggerVersion = "2.0.985|C";
    exports.BackofficeDomains = [".wix.com", ".editorx.com"];
    var EventContextMap;
    (function(EventContextMap2) {
      EventContextMap2["msid"] = "_msid";
      EventContextMap2["clientId"] = "_client_id";
      EventContextMap2["uuid"] = "_uuid";
      EventContextMap2["visitorId"] = "_visitorId";
      EventContextMap2["siteMemberId"] = "_siteMemberId";
      EventContextMap2["brandId"] = "_brandId";
      EventContextMap2["siteBranchId"] = "_siteBranchId";
      EventContextMap2["ms"] = "_ms";
      EventContextMap2["lv"] = "_lv";
      EventContextMap2["isHeadless"] = "_isHeadless";
      EventContextMap2["hostingPlatform"] = "_hostingPlatform";
    })(EventContextMap = exports.EventContextMap || (exports.EventContextMap = {}));
    exports.DefaultBrand = "wix";
    exports.HeadlessHost = "VIEWER_HEADLESS";
    exports.BrandToHostMap = {
      wix: "wix",
      editorx: "editorx"
    };
    exports.DefaultCommonConfig = {
      brand: exports.DefaultBrand
    };
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/env.js
var require_env = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/env.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getGlobal = exports.getWindowIfTop = exports.isBackoffice = exports.isWebWorker = exports.getHost = exports.setHost = void 0;
    var constants_1 = require_constants();
    var host;
    var hostByDomain;
    function setHost(_host) {
      host = _host;
    }
    exports.setHost = setHost;
    function getHost(brand) {
      if (brand === void 0) {
        brand = constants_1.DefaultBrand;
      }
      if (host) {
        return host;
      }
      var hostByDomainOrBrand = "";
      if (typeof hostByDomain === "undefined") {
        hostByDomain = getGlobal2(function(window2) {
          if (!window2.location || !window2.location.hostname) {
            return null;
          }
          var _a = window2.location.hostname.match(/\.(wix|editorx)\.com$/) || [], domain = _a[1];
          return domain || null;
        }, null);
      }
      hostByDomainOrBrand = hostByDomain || constants_1.BrandToHostMap[brand] || constants_1.BrandToHostMap[constants_1.DefaultBrand];
      return "frog.".concat(hostByDomainOrBrand, ".com");
    }
    exports.getHost = getHost;
    function isWebWorker2() {
      return typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
    }
    exports.isWebWorker = isWebWorker2;
    function isBackoffice() {
      return getWindowIfTop(function(_a) {
        var document2 = _a.document;
        return constants_1.BackofficeDomains.some(function(domain) {
          return document2.location.host.indexOf(domain) !== -1;
        });
      });
    }
    exports.isBackoffice = isBackoffice;
    function getWindowIfTop(cb) {
      if (typeof window !== "undefined" && window) {
        try {
          return window.top === window.self ? cb ? cb(window) : window : null;
        } catch (e) {
          return null;
        }
      }
      return null;
    }
    exports.getWindowIfTop = getWindowIfTop;
    function getGlobal2(cb, defaultValue) {
      if (defaultValue === void 0) {
        defaultValue = null;
      }
      if (typeof self !== "undefined" && self) {
        return cb(self) || defaultValue;
      }
      return defaultValue;
    }
    exports.getGlobal = getGlobal2;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/utils.js
var require_utils2 = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/utils.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.guid = exports.buildBiUrl = exports.getCookies = void 0;
    var browser_1 = require_browser();
    var env_1 = require_env();
    var cacheKillerCounter = 0;
    function getCookies(params) {
      return Object.keys(params).reduce(function(res, param) {
        var _a = typeof params[param] === "string" ? { name: params[param] } : params[param], name = _a.name, _b = _a.transform, transform = _b === void 0 ? function(x) {
          return x;
        } : _b;
        var value = transform((0, browser_1.readCookie)(name));
        if (value) {
          res[param] = value;
        }
        return res;
      }, {});
    }
    exports.getCookies = getCookies;
    function buildBiUrl(_a, params, context) {
      var _b = _a.host, host = _b === void 0 ? "" : _b, _c = _a.endpoint, endpoint = _c === void 0 ? "" : _c;
      if (context === void 0) {
        context = {};
      }
      host = typeof host === "function" ? host() : host;
      host = host || (0, env_1.getHost)();
      endpoint = context.endpoint || endpoint;
      if (!context.useBatch) {
        params._ = "" + (/* @__PURE__ */ new Date()).getTime() + cacheKillerCounter++;
      }
      var pairs = context.useBatch ? [] : Object.keys(params).map(function(key) {
        return "".concat(encodeURIComponent(key), "=").concat(encodeURIComponent(params[key]));
      }, []);
      return ["//".concat(host, "/").concat(endpoint)].concat(pairs.length ? pairs.join("&") : []).join("?");
    }
    exports.buildBiUrl = buildBiUrl;
    function guid() {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
        var r = Math.random() * 16 | 0;
        var v = c === "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    }
    exports.guid = guid;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/types.js
var require_types = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/types.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Errors = exports.EventCategories = exports.PublishMethods = void 0;
    var PublishMethods;
    (function(PublishMethods2) {
      PublishMethods2["Auto"] = "auto";
      PublishMethods2["PostMessage"] = "postMessage";
      PublishMethods2["Fetch"] = "fetch";
    })(PublishMethods = exports.PublishMethods || (exports.PublishMethods = {}));
    var EventCategories;
    (function(EventCategories2) {
      EventCategories2["Essential"] = "essential";
      EventCategories2["Functional"] = "functional";
      EventCategories2["Analytics"] = "analytics";
    })(EventCategories = exports.EventCategories || (exports.EventCategories = {}));
    var Errors;
    (function(Errors2) {
      Errors2[Errors2["Unsupported"] = 0] = "Unsupported";
    })(Errors = exports.Errors || (exports.Errors = {}));
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/transport.js
var require_transport = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/transport.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.postMessageTransport = exports.xhrTransport = exports.fetchTransport = exports.pixelTransport = exports.beaconTransport = void 0;
    var browser_1 = require_browser();
    var errors_1 = require_errors();
    function beaconTransport(url, params, sendInBody) {
      if (sendInBody === void 0) {
        sendInBody = false;
      }
      return new Promise(function(resolve, reject) {
        return (0, browser_1.sendBeacon)(url, sendInBody ? JSON.stringify(params) : void 0) ? resolve() : reject(new Error("Transport Error: Cannot send bi using beacon"));
      });
    }
    exports.beaconTransport = beaconTransport;
    function pixelTransport(url, image) {
      return new Promise(function(resolve, reject) {
        var biImage = image || new window.Image(0, 0);
        biImage.onload = function() {
          return resolve();
        };
        biImage.onerror = function() {
          return reject(new Error("Transport Error: Cannot send bi using pixel"));
        };
        biImage.src = url;
      });
    }
    exports.pixelTransport = pixelTransport;
    function fetchTransport(url, params, method, fetchFunction) {
      if (method === void 0) {
        method = "GET";
      }
      if (typeof fetchFunction === "undefined") {
        if (typeof fetch === "undefined") {
          return Promise.reject(new errors_1.APINotSupportedError("fetch"));
        }
        fetchFunction = fetch;
      }
      var options = {
        method,
        credentials: "include"
      };
      if (method === "POST") {
        options.body = JSON.stringify(params);
      } else {
        options.keepalive = true;
      }
      return fetchFunction(url, options).then(function(response) {
        if (!response.ok) {
          throw Error("Transport Error: Cannot send bi using fetch. Status: ".concat(response.status));
        }
      });
    }
    exports.fetchTransport = fetchTransport;
    function xhrTransport(url, params, method) {
      if (method === void 0) {
        method = "GET";
      }
      return new Promise(function(resolve, reject) {
        var xhr = new XMLHttpRequest();
        xhr.open(method, "".concat(location.protocol).concat(url));
        xhr.onload = resolve;
        xhr.onerror = function() {
          reject(new Error("Transport Error: Cannot send bi using xhr."));
        };
        xhr.withCredentials = true;
        if (method === "POST") {
          xhr.send(JSON.stringify(params));
        } else {
          xhr.send();
        }
      });
    }
    exports.xhrTransport = xhrTransport;
    function postMessageTransport(message, postMessage) {
      if (postMessage === void 0) {
        postMessage = self.postMessage;
      }
      var messageArgs = [message];
      if (typeof WorkerGlobalScope === "undefined") {
        messageArgs.push("*");
      }
      return postMessage.apply(self, messageArgs);
    }
    exports.postMessageTransport = postMessageTransport;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/publishers.js
var require_publishers = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/publishers.js"(exports) {
    "use strict";
    init_define_process_env();
    var __assign3 = exports && exports.__assign || function() {
      __assign3 = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign3.apply(this, arguments);
    };
    var __rest = exports && exports.__rest || function(s, e) {
      var t = {};
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
      if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
            t[p[i]] = s[p[i]];
        }
      return t;
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getTransformers = exports.getPublisher = exports.postMessagePublisher = exports.xhrPublisher = exports.fetchPublisher = exports.beaconPublisher = exports.imagePublisher = exports.resolvePublisher = void 0;
    var utils_1 = require_utils2();
    var env_1 = require_env();
    var errors_1 = require_errors();
    var types_1 = require_types();
    var transport_1 = require_transport();
    var getHttpMethod = function(context) {
      return context.useBatch ? "POST" : "GET";
    };
    var resolvePublisher = function(options, publishFunctions) {
      var publisherFactory;
      var publishFunction;
      if (options.publishMethod === types_1.PublishMethods.PostMessage) {
        publisherFactory = postMessagePublisher;
        publishFunction = publishFunctions && publishFunctions[types_1.PublishMethods.PostMessage];
      } else if (options.publishMethod === types_1.PublishMethods.Fetch) {
        publisherFactory = fetchPublisher;
        publishFunction = publishFunctions && publishFunctions[types_1.PublishMethods.Fetch];
      } else if ((0, env_1.isWebWorker)()) {
        publisherFactory = fetchPublisher;
      } else {
        publisherFactory = beaconPublisher;
      }
      return publisherFactory(options, publishFunction);
    };
    exports.resolvePublisher = resolvePublisher;
    function imagePublisher(options) {
      if (options === void 0) {
        options = {};
      }
      return function image(params, context) {
        if (context === void 0) {
          context = {};
        }
        if (context.useBatch) {
          throw new errors_1.APINotSupportedError("Can't use image publisher to send batched events.");
        }
        var url = (0, utils_1.buildBiUrl)(options, params, context);
        return (0, transport_1.pixelTransport)(url, context.image);
      };
    }
    exports.imagePublisher = imagePublisher;
    function beaconPublisher(options) {
      if (options === void 0) {
        options = {};
      }
      return function beacon(params, context) {
        if (context === void 0) {
          context = {};
        }
        var url = (0, utils_1.buildBiUrl)(options, params, context);
        return (0, transport_1.beaconTransport)(url, params, !!context.useBatch).catch(function() {
          var method = getHttpMethod(context);
          return context.useBatch ? (0, transport_1.fetchTransport)(url, params, method).catch(function(error) {
            return error instanceof errors_1.APINotSupportedError ? (0, transport_1.xhrTransport)(url, params, method) : Promise.reject(error);
          }) : (0, transport_1.pixelTransport)(url, context.image);
        });
      };
    }
    exports.beaconPublisher = beaconPublisher;
    function fetchPublisher(options, fetchFunction) {
      if (options === void 0) {
        options = {};
      }
      return function fetch2(params, context) {
        if (context === void 0) {
          context = {};
        }
        var url = (0, utils_1.buildBiUrl)(options, params, context);
        var method = getHttpMethod(context);
        return (0, transport_1.fetchTransport)(url, params, method, fetchFunction).catch(function(error) {
          return error instanceof errors_1.APINotSupportedError ? (0, transport_1.xhrTransport)(url, params, method) : Promise.reject(error);
        });
      };
    }
    exports.fetchPublisher = fetchPublisher;
    function xhrPublisher(options) {
      if (options === void 0) {
        options = {};
      }
      return function xhr(params, context) {
        if (context === void 0) {
          context = {};
        }
        var url = (0, utils_1.buildBiUrl)(options, params, context);
        var method = getHttpMethod(context);
        return (0, transport_1.xhrTransport)(url, params, method);
      };
    }
    exports.xhrPublisher = xhrPublisher;
    function postMessagePublisher(options, publishFunction) {
      if (options === void 0) {
        options = {};
      }
      return function postMessage(params) {
        return (0, transport_1.postMessageTransport)(params, publishFunction);
      };
    }
    exports.postMessagePublisher = postMessagePublisher;
    function getPublisher(options, publishFunctions) {
      return (0, exports.resolvePublisher)(options, publishFunctions);
    }
    exports.getPublisher = getPublisher;
    var getTransformers = function(factoryOptions, transformer) {
      var _eventTransformer, _payloadTransformer;
      if (transformer) {
        if (typeof transformer !== "function" && transformer.postMessage && factoryOptions.publishMethod === types_1.PublishMethods.PostMessage) {
          _payloadTransformer = transformer.postMessage;
        } else if (typeof transformer === "function") {
          _eventTransformer = transformer;
        }
      }
      var eventTransformer = _eventTransformer;
      var payloadTransformer = function(params, publisherContext) {
        if (publisherContext.useBatch) {
          var getEndpoint_1 = function(context) {
            return (context === null || context === void 0 ? void 0 : context.endpoint) || publisherContext.endpoint || factoryOptions.endpoint;
          };
          params.e = params.e.map(function(e) {
            var context = e.context, event = __rest(e, ["context"]);
            var res = __assign3(__assign3({}, event), { f: __assign3(__assign3({}, event.f), { _rp: getEndpoint_1(context) }) });
            return res;
          });
        }
        return _payloadTransformer ? _payloadTransformer(params) : params;
      };
      return { eventTransformer, payloadTransformer };
    };
    exports.getTransformers = getTransformers;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/common-config.js
var require_common_config = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/common-config.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getWixHost = exports.getBranchId = exports.getBrand = exports.getCommonConfigValue = void 0;
    var env_1 = require_env();
    var constants_1 = require_constants();
    var resolveCommonConfig = function() {
      return (0, env_1.getGlobal)(function(g) {
        return g.Wix && g.Wix.Utils && g.Wix.Utils.commonConfig || g.commonConfig;
      });
    };
    var getCommonConfigValue = function(key, commonConfig2) {
      if (commonConfig2 === void 0) {
        commonConfig2 = resolveCommonConfig();
      }
      commonConfig2 = commonConfig2 && typeof commonConfig2.getAll === "function" ? commonConfig2.getAll() : commonConfig2;
      if (!commonConfig2 || typeof commonConfig2[key] === "undefined") {
        return constants_1.DefaultCommonConfig[key];
      }
      return commonConfig2[key];
    };
    exports.getCommonConfigValue = getCommonConfigValue;
    var getBrand = function(commonConfigGetter) {
      return (0, exports.getCommonConfigValue)("brand", commonConfigGetter());
    };
    exports.getBrand = getBrand;
    var getBranchId = function(commonConfigGetter) {
      return (0, exports.getCommonConfigValue)("branchId", commonConfigGetter());
    };
    exports.getBranchId = getBranchId;
    var getWixHost = function(commonConfigGetter) {
      return (0, exports.getCommonConfigValue)("host", commonConfigGetter());
    };
    exports.getWixHost = getWixHost;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/event-defaults.js
var require_event_defaults = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/event-defaults.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getCommonDefaults = exports.getUserDefaults = exports.transformDefaults = void 0;
    var constants_1 = require_constants();
    var browser_1 = require_browser();
    var common_config_1 = require_common_config();
    var utils_1 = require_utils2();
    var transformDefaults = function(context) {
      return Object.keys(context).reduce(function(res, key) {
        var mappedKey = constants_1.EventContextMap[key] || key;
        res[mappedKey] = context[key];
        return res;
      }, {});
    };
    exports.transformDefaults = transformDefaults;
    var getUserDefaults = function() {
      return (0, utils_1.getCookies)({
        clientId: "_wixCIDX",
        uuid: {
          name: "_wixUIDX",
          transform: function(value) {
            return typeof value === "string" && value.split("|")[1];
          }
        }
      });
    };
    exports.getUserDefaults = getUserDefaults;
    var getCommonDefaults = function(commonConfigGetter, consentPolicyGetter) {
      return (0, exports.transformDefaults)({
        brandId: function() {
          return (0, common_config_1.getBrand)(commonConfigGetter);
        },
        siteBranchId: function() {
          return (0, common_config_1.getBranchId)(commonConfigGetter);
        },
        ms: function() {
          return Math.round((0, browser_1.now)());
        },
        isHeadless: function() {
          return resolveIsHeadless(commonConfigGetter);
        },
        hostingPlatform: function() {
          return (0, common_config_1.getWixHost)(commonConfigGetter);
        },
        lv: constants_1.LoggerVersion
      });
    };
    exports.getCommonDefaults = getCommonDefaults;
    var resolveIsHeadless = function(commonConfigGetter) {
      return (0, common_config_1.getWixHost)(commonConfigGetter) === constants_1.HeadlessHost || void 0;
    };
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/logger.js
var require_logger = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/logger.js"(exports) {
    "use strict";
    init_define_process_env();
    var __assign3 = exports && exports.__assign || function() {
      __assign3 = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign3.apply(this, arguments);
    };
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.BiLoggerClientFactory = exports.createBatchQueue = exports.manager = exports.factory = exports.Factory = exports.setHost = exports.EventCategories = exports.PublishMethods = void 0;
    var wix_bi_logger_client_1 = require_dist();
    var consent_policy_client_accessor_1 = (init_src(), __toCommonJS(src_exports));
    var assert = __importStar(require_assert2());
    var publishers_1 = require_publishers();
    var common_config_1 = require_common_config();
    var env_1 = require_env();
    var types_1 = require_types();
    var event_defaults_1 = require_event_defaults();
    var types_2 = require_types();
    Object.defineProperty(exports, "PublishMethods", { enumerable: true, get: function() {
      return types_2.PublishMethods;
    } });
    Object.defineProperty(exports, "EventCategories", { enumerable: true, get: function() {
      return types_2.EventCategories;
    } });
    var env_2 = require_env();
    Object.defineProperty(exports, "setHost", { enumerable: true, get: function() {
      return env_2.setHost;
    } });
    var Factory = (
      /** @class */
      function() {
        function Factory2(options) {
          if (options === void 0) {
            options = {};
          }
          this.options = options;
          this.commonConfigGetter = function() {
            return void 0;
          };
          this.initialized = false;
          assert.ok(!options.publishMethod || Object.keys(types_1.PublishMethods).map(function(key) {
            return types_1.PublishMethods[key];
          }).indexOf(options.publishMethod) !== -1, 'Unsupported publish method "'.concat(options.publishMethod, '"'));
          Factory2.consentPolicyAccessor = Factory2.consentPolicyAccessor || new consent_policy_client_accessor_1.ConsentPolicyAccessor();
          this.loggerClientFactory = (0, wix_bi_logger_client_1.factory)();
        }
        Factory2.prototype.initFactory = function() {
          var _this = this;
          if (this.initialized) {
            return this.loggerClientFactory;
          }
          this.initialized = true;
          this.updateDefaults((0, event_defaults_1.getCommonDefaults)(this.commonConfigGetter, Factory2.consentPolicyAccessor));
          this.withUserContext((0, event_defaults_1.getUserDefaults)());
          var options = __assign3(__assign3({}, this.options), { host: this.options.host || function() {
            return (0, env_1.getHost)((0, common_config_1.getBrand)(_this.commonConfigGetter));
          } });
          var publisher = (0, publishers_1.getPublisher)(options, this.publishFunctions);
          var _a = (0, publishers_1.getTransformers)(options, this.transformer), eventTransformer = _a.eventTransformer, payloadTransformer = _a.payloadTransformer;
          var baseFactory = this.loggerClientFactory.addPublisher(publisher).withConsentPolicyGetter(function() {
            return Factory2.consentPolicyAccessor.getCurrentConsentPolicy();
          });
          if (eventTransformer) {
            baseFactory.withEventTransformer(eventTransformer);
          }
          if (payloadTransformer) {
            baseFactory.withPayloadTransformer(payloadTransformer);
          }
          return baseFactory;
        };
        Factory2.prototype.withTransformer = function(transformer) {
          assert.defined(transformer, "Transformer must be provided");
          assert.ok(typeof transformer === "function" || transformer && typeof transformer[types_1.PublishMethods.PostMessage] === "function", "Valid transformer must be provided");
          this.transformer = transformer;
          return this;
        };
        Factory2.prototype.withPublishFunction = function(publishFunctions) {
          assert.defined(publishFunctions, "Publish functions object must be provided");
          assert.ok(this.options.publishMethod && this.options.publishMethod !== types_1.PublishMethods.Auto, "Publish function can be used only when using a custom publish method");
          assert.ok(publishFunctions && typeof publishFunctions[this.options.publishMethod] === "function", "Valid publish function must be provided");
          this.publishFunctions = publishFunctions;
          return this;
        };
        Factory2.prototype.withUserContext = function(context) {
          assert.defined(context, "User context object must be provided");
          this.updateDefaults((0, event_defaults_1.transformDefaults)(context));
          return this;
        };
        Factory2.prototype.withUoUContext = function(context) {
          assert.defined(context, "UoU context object must be provided");
          this.updateDefaults((0, event_defaults_1.transformDefaults)(context));
          return this;
        };
        Factory2.prototype.withNonEssentialContext = function(context) {
          assert.defined(context, "Non-essential context object must be provided");
          this.loggerClientFactory.updateNonEssentialDefaults((0, event_defaults_1.transformDefaults)(context));
          return this;
        };
        Factory2.prototype.withCommonConfigGetter = function(commonConfigGetter) {
          assert.defined(commonConfigGetter, "Common config getter must be provided");
          assert.ok(typeof commonConfigGetter === "function", "Common config getter must be a function");
          this.commonConfigGetter = commonConfigGetter;
          return this;
        };
        Factory2.prototype.updateDefaults = function(params) {
          this.loggerClientFactory.updateDefaults(params);
          return this;
        };
        Factory2.prototype.setMuted = function(isMuted) {
          this.loggerClientFactory.setMuted(isMuted);
          return this;
        };
        Factory2.prototype.setEvents = function(events) {
          this.loggerClientFactory.setEvents(events);
          return this;
        };
        Factory2.prototype.setGlobalBatchQueue = function(batchQueue) {
          this.loggerClientFactory.setGlobalBatchQueue(batchQueue);
          return this;
        };
        Factory2.prototype.onError = function(handler) {
          this.loggerClientFactory.setPublisherFailHandler(handler);
          return this;
        };
        Factory2.prototype.logger = function(options) {
          if (options === void 0) {
            options = {};
          }
          var _a = this.options, endpoint = _a.endpoint, useBatch = _a.useBatch;
          var logger = this.initFactory().logger(__assign3({ endpoint, useBatch }, options));
          return logger;
        };
        return Factory2;
      }()
    );
    exports.Factory = Factory;
    var factory2 = function(options) {
      if (options === void 0) {
        options = {};
      }
      return new Factory(options);
    };
    exports.factory = factory2;
    exports.manager = wix_bi_logger_client_1.manager;
    exports.createBatchQueue = wix_bi_logger_client_1.createBatchQueue;
    exports.BiLoggerClientFactory = wix_bi_logger_client_1.BiLoggerFactory;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/navigator.js
var require_navigator = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/navigator.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.listen = void 0;
    var env_1 = require_env();
    function hook(obj, fnName, cbHook) {
      if (!obj || !obj[fnName]) {
        return;
      }
      var original = obj[fnName];
      obj[fnName] = function() {
        cbHook.apply(null, arguments);
        return original.apply(obj, arguments);
      };
    }
    function onLoad(cb) {
      setTimeout(function() {
        return (0, env_1.getWindowIfTop)(function(window2) {
          return cb(window2.location.href);
        });
      });
    }
    function onPushState(cb) {
      (0, env_1.getWindowIfTop)(function(_a) {
        var history = _a.history;
        return ["pushState", "replaceState"].forEach(function(fnName) {
          hook(history, fnName, function(_, __, url) {
            return cb(url);
          });
        });
      });
    }
    function onPopState(cb) {
      (0, env_1.getWindowIfTop)(function(window2) {
        return window2.addEventListener("popstate", function() {
          return cb(window2.location.href);
        });
      });
    }
    function listen(cb) {
      (0, env_1.getWindowIfTop)(function(window2) {
        var fromUrl = window2.document.referrer;
        [onLoad, onPushState, onPopState].forEach(function(event) {
          return event(function(toUrl) {
            cb(fromUrl, toUrl);
            fromUrl = toUrl;
          });
        });
      });
    }
    exports.listen = listen;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/lib/tracker.js
var require_tracker = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/lib/tracker.js"(exports) {
    "use strict";
    init_define_process_env();
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.track = void 0;
    var utils_1 = require_utils2();
    var navigator_1 = require_navigator();
    var env_1 = require_env();
    var browser_1 = require_browser();
    var IS_TRACKING = "__isTrackingPageViews__";
    var ENDPOINT = "p";
    var SOURCE = 19;
    var EVID = 3;
    function shouldTrack(force) {
      return force || !(0, env_1.isWebWorker)() && (0, env_1.isBackoffice)() && (0, env_1.getWindowIfTop)(function(window2) {
        return !window2[IS_TRACKING];
      });
    }
    function setIsTracking() {
      return (0, env_1.getWindowIfTop)(function(window2) {
        return window2[IS_TRACKING] = true;
      });
    }
    function getLogger(loggerFactory) {
      return loggerFactory({ endpoint: ENDPOINT }).updateDefaults({ src: SOURCE, evid: EVID, vsi: (0, utils_1.guid)() }).logger();
    }
    function trackBrowsingSession(loggerFactory) {
      var logger = getLogger(loggerFactory);
      var firstInSession = 1;
      (0, navigator_1.listen)(function(fromUrl, toUrl) {
        var _a = (0, env_1.getWindowIfTop)(function(window2) {
          return {
            sr: (0, browser_1.getDesktopSize)(window2),
            wr: (0, browser_1.getWindowSize)(window2)
          };
        }), sr = _a.sr, wr = _a.wr;
        logger.log({ from: fromUrl, to: toUrl, fis: firstInSession, sr, wr });
        firstInSession = 0;
      });
    }
    function track(loggerFactory, options) {
      if (options === void 0) {
        options = { force: false };
      }
      if (shouldTrack(options.force)) {
        setIsTracking();
        trackBrowsingSession(loggerFactory);
      }
    }
    exports.track = track;
  }
});

// ../../node_modules/@wix/web-bi-logger/dist/src/tracking-logger.js
var require_tracking_logger = __commonJS({
  "../../node_modules/@wix/web-bi-logger/dist/src/tracking-logger.js"(exports) {
    "use strict";
    init_define_process_env();
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.BiLoggerClientFactory = exports.EventCategories = exports.createBatchQueue = exports.manager = exports.setHost = exports.factory = void 0;
    var wix_bi_logger_client_1 = require_dist();
    var tracker = __importStar(require_tracker());
    var logger = __importStar(require_logger());
    var factory2 = function(options) {
      if (options === void 0) {
        options = {};
      }
      var trackSession = options.trackSession || typeof options.trackSession === "undefined";
      if (trackSession) {
        tracker.track(logger.factory, { force: trackSession === "force" });
      }
      return logger.factory(options);
    };
    exports.factory = factory2;
    exports.setHost = logger.setHost;
    exports.manager = wix_bi_logger_client_1.manager;
    exports.createBatchQueue = wix_bi_logger_client_1.createBatchQueue;
    exports.EventCategories = logger.EventCategories;
    exports.BiLoggerClientFactory = logger.BiLoggerClientFactory;
    exports.default = {
      factory: exports.factory,
      setHost: logger.setHost,
      manager: wix_bi_logger_client_1.manager,
      createBatchQueue: wix_bi_logger_client_1.createBatchQueue,
      EventCategories: logger.EventCategories,
      BiLoggerClientFactory: logger.BiLoggerClientFactory
    };
  }
});

// src/bex-bundled-mini-essentials.ts
init_define_process_env();

// src/api/createEssentials.ts
init_define_process_env();

// src/api/StandaloneRootEssentials.ts
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/dist/esm/core/ChildEssentials.js
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/dist/esm/core/EssentialsPartialDelegate.js
init_define_process_env();

// ../../node_modules/@wix/wix-i18n-config/dist/esm/index.js
init_define_process_env();

// ../../node_modules/@wix/wix-i18n-config/dist/esm/icu/icu.js
init_define_process_env();
import IntlMessageFormat from "intl-messageformat";

// ../../node_modules/@wix/wix-i18n-config/dist/esm/icu/utils.js
init_define_process_env();
function getLastOfPath(object, path, Empty) {
  function cleanKey(key) {
    return key && key.indexOf("###") > -1 ? key.replace(/###/g, ".") : key;
  }
  function canNotTraverseDeeper() {
    return !object || typeof object === "string";
  }
  const stack = typeof path !== "string" ? [].concat(path) : path.split(".");
  while (stack.length > 1) {
    if (canNotTraverseDeeper())
      return {};
    const key = cleanKey(stack.shift());
    if (!object[key] && Empty)
      object[key] = new Empty();
    object = object[key];
  }
  if (canNotTraverseDeeper())
    return {};
  return {
    obj: object,
    k: cleanKey(stack.shift())
  };
}
function setPath(object, path, newValue) {
  const { obj, k } = getLastOfPath(object, path, Object);
  obj[k] = newValue;
}
function getPath(object, path) {
  const { obj, k } = getLastOfPath(object, path);
  if (!obj)
    return void 0;
  return obj[k];
}
var arr = [];
var each = arr.forEach;
var slice = arr.slice;
function defaults(obj) {
  each.call(slice.call(arguments, 1), function(source) {
    if (source) {
      for (const prop in source) {
        if (obj[prop] === void 0)
          obj[prop] = source[prop];
      }
    }
  });
  return obj;
}

// ../../node_modules/@wix/wix-i18n-config/dist/esm/icu/icu.js
function getDefaults() {
  return {
    memoize: true,
    memoizeFallback: false,
    bindI18n: "",
    bindI18nStore: void 0,
    parseErrorHandler: (_err, _key, res) => {
      return res;
    }
  };
}
var ICU = class {
  constructor(options) {
    this.type = "i18nFormat";
    this.mem = {};
    this.init(null, options);
  }
  init(i18next2, options) {
    var _a, _b;
    const i18nextOptions = i18next2 && i18next2.options && i18next2.options.i18nFormat || {};
    this.options = defaults(i18nextOptions, options, this.options || {}, getDefaults());
    this.formats = (_a = this.options) == null ? void 0 : _a.formats;
    if (i18next2) {
      const { bindI18n, bindI18nStore, memoize } = this.options;
      i18next2.IntlMessageFormat = IntlMessageFormat;
      i18next2.ICU = this;
      if (memoize) {
        if (bindI18n) {
          i18next2.on(bindI18n, () => this.clearCache());
        }
        if (bindI18nStore) {
          i18next2.store.on(bindI18nStore, () => this.clearCache());
        }
      }
    }
    if ((_b = this.options) == null ? void 0 : _b.localeData) {
      if (Object.prototype.toString.apply(this.options.localeData) === "[object Array]") {
        this.options.localeData.forEach((ld) => this.addLocaleData(ld));
      } else {
        this.addLocaleData(this.options.localeData);
      }
    }
  }
  addLocaleData(data) {
    const locales = Array.isArray(data) ? data : [data];
    locales.forEach((localeData) => {
      if (localeData && localeData.locale) {
        IntlMessageFormat.__addLocaleData(localeData);
      }
    });
  }
  addUserDefinedFormats(formats2) {
    this.formats = this.formats ? { ...this.formats, ...formats2 } : formats2;
  }
  parse(res, options, lng, ns, key, info) {
    var _a, _b, _c, _d, _e;
    const hadSuccessfulLookup = info && info.resolved && info.resolved.res;
    const memKey = ((_a = this.options) == null ? void 0 : _a.memoize) && "".concat(lng, ".").concat(ns, ".").concat(key.replace(/\./g, "###"));
    let fc;
    if ((_b = this.options) == null ? void 0 : _b.memoize) {
      fc = getPath(this.mem, memKey);
    }
    try {
      if (!fc) {
        fc = new IntlMessageFormat(res, lng, this.formats);
        if (((_c = this.options) == null ? void 0 : _c.memoize) && (this.options.memoizeFallback || !info || hadSuccessfulLookup)) {
          setPath(this.mem, memKey, fc);
        }
      }
      return fc.format(options);
    } catch (err) {
      return (_e = (_d = this.options) == null ? void 0 : _d.parseErrorHandler) == null ? void 0 : _e.call(_d, err, key, res, options);
    }
  }
  addLookupKeys(finalKeys) {
    return finalKeys;
  }
  clearCache() {
    this.mem = {};
  }
};
ICU.type = "i18nFormat";
var icu_default = ICU;

// ../../node_modules/@wix/wix-i18n-config/dist/esm/index.js
import {} from "i18next";
import { withTranslation, useTranslation, I18nextProvider, Trans } from "react-i18next";

// ../../node_modules/@wix/wix-i18n-config/dist/esm/initI18n.js
init_define_process_env();

// ../../node_modules/@wix/wix-i18n-config/dist/esm/i18n.js
init_define_process_env();
import i18next from "i18next";
function i18n({ locale, asyncMessagesLoader: asyncMessagesLoader2, messages, useSuspense = false, wait, disableAutoInit = false, bindI18n }, { icu } = {}) {
  const config = {
    // Initial language
    lng: locale,
    fallbackLng: "en",
    // Don't use a key separator (no support for nested translation objects)
    keySeparator: false,
    react: {
      useSuspense,
      bindI18n,
      wait
    },
    // @ts-expect-error It's here for backward campatibility - can be removed after old `wix-i18n-config` will no longer be in use.
    // Basically when BM can be loaded without this config - you're good to go.
    _polyfill: { isLoading: false }
  };
  const i18nInstance = i18next.createInstance(disableAutoInit ? config : void 0);
  if (icu) {
    i18nInstance.use(icu);
  }
  if (asyncMessagesLoader2) {
    i18nInstance.use({
      type: "backend",
      read: async (language, _namespace, callback) => {
        try {
          const translation = await asyncMessagesLoader2(language);
          return callback(null, translation);
        } catch (err) {
          return callback(err, null);
        }
      }
    });
  }
  if (messages) {
    config.resources = { [locale]: { translation: messages } };
  }
  if (!disableAutoInit) {
    i18nInstance.init(config);
  }
  return i18nInstance;
}

// ../../node_modules/@wix/wix-i18n-config/dist/esm/initI18n.js
function initI18n({ icuOptions = {}, ...options }) {
  const { parseErrorHandler = void 0 } = options;
  const icu = new icu_default({
    parseErrorHandler,
    bindI18n: options.bindI18n,
    ...icuOptions
  });
  return i18n(options, { icu });
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/index.js
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/constants.js
init_define_process_env();
var NO_SCENARIO_FOUND = "NO_SCENARIO_FOUND";
var SSR_HOST = "www.wix.com";
var SSR_PROTOCOL = "http";
var ORIGINAL_URL_HEADER = "x-wix-metro-original-url";
var ORIGINAL_HOST_HEADER = "x-wix-metro-original-host";
var ORIGINAL_PROTOCOL_HEADER = "x-wix-metro-original-protocol";
var MAX_NGINX_URL_LENGTH = 9216;

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/error.js
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/headers.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/index.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/headers/csrf.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/cookies.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/globals.js
init_define_process_env();
function maybeGetDocument() {
  if (typeof document === "object") {
    return document;
  }
  return void 0;
}
function maybeGetGlobal() {
  if (typeof self === "object") {
    return self;
  } else {
    return global;
  }
}

// ../../node_modules/@wix/headers/dist/esm/cookies.js
function readCookie(name) {
  const cookieValue = getCookieByName(name);
  if (cookieValue) {
    return cookieValue.split("=")[1];
  }
  return "";
}
function loadCookies() {
  const documentObj = maybeGetDocument();
  if (documentObj && documentObj.cookie) {
    return decodeURIComponent(documentObj.cookie).split(";");
  }
  return [];
}
function getCookieByName(name) {
  return loadCookies().filter((cookie) => name === cookie.split("=")[0].trim())[0];
}

// ../../node_modules/@wix/headers/dist/esm/headers/csrf.js
var XSRF_TOKEN_COOKIE_NAME = "XSRF-TOKEN";
var XSRF_HEADER_NAME = "x-xsrf-token";
function csrf() {
  const value = readCookie(XSRF_TOKEN_COOKIE_NAME);
  return { [XSRF_HEADER_NAME]: value };
}

// ../../node_modules/@wix/headers/dist/esm/headers/x-wix-brand.js
init_define_process_env();
var X_WIX_BRAND_NAME = "x-wix-brand";
function xWixBrand() {
  const value = extractBrand();
  return { [X_WIX_BRAND_NAME]: value };
}
function extractBrand() {
  const globalObj = maybeGetGlobal();
  if (globalObj && globalObj.commonConfig && typeof globalObj.commonConfig.brand === "string") {
    return globalObj.commonConfig.brand;
  }
  return "";
}

// ../../node_modules/@wix/headers/dist/esm/headers/consent-policy.js
init_define_process_env();
function consentPolicy() {
  return tryResolveNativeAPI() || tryResolveJsSDK() || none();
}
function tryResolveJsSDK() {
  const globalObj = maybeGetGlobal();
  if (globalObj && globalObj.Wix && globalObj.Wix.Utils && typeof globalObj.Wix.Utils._getConsentPolicyHeader === "function") {
    return globalObj.Wix.Utils._getConsentPolicyHeader();
  }
  return void 0;
}
function tryResolveNativeAPI() {
  const globalObj = maybeGetGlobal();
  if (globalObj && globalObj.consentPolicyManager && typeof globalObj.consentPolicyManager._getConsentPolicyHeader === "function") {
    return globalObj.consentPolicyManager._getConsentPolicyHeader();
  }
  return void 0;
}
function none() {
  return {};
}

// ../../node_modules/@wix/headers/dist/esm/headers/authorization.js
init_define_process_env();
function authorization(signedInstance) {
  return { authorization: signedInstance };
}

// ../../node_modules/@wix/headers/dist/esm/headers/artifact-id.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/utils.js
init_define_process_env();
function isCI() {
  if (isNode()) {
    return !!define_process_env_default.TEAMCITY_VERSION || !!define_process_env_default.BUILDKITE;
  }
  return false;
}
function isNode() {
  var _a;
  return typeof process !== "undefined" && ((_a = process.versions) == null ? void 0 : _a.node) != null;
}

// ../../node_modules/@wix/headers/dist/esm/headers/artifact-id.js
function artifactId(override) {
  var _a, _b;
  const artifactIdToUse = isNode() ? (_b = (_a = define_process_env_default.ARTIFACT_ID) != null ? _a : define_process_env_default.APP_NAME) != null ? _b : "" : "";
  return {
    "X-Wix-Client-Artifact-Id": override != null ? override : !isCI() ? artifactIdToUse : ""
  };
}

// ../../node_modules/@wix/headers/dist/esm/headers/common-config.js
init_define_process_env();
var IGNORE_KEYS = ["consentPolicy", "consentPolicyHeader"];
var COMMON_CONFIG_NAME = "commonConfig";
var MAP_KEYS = {
  bsi: "BSI"
};
function extractCommonConfigValues() {
  const globalObj = maybeGetGlobal();
  const commonConfigObj = globalObj == null ? void 0 : globalObj.commonConfig;
  if (!commonConfigObj) {
    return null;
  }
  const res = {};
  let addedKeys = false;
  Object.keys(commonConfigObj).forEach((key) => {
    const newKey = MAP_KEYS[key];
    if (newKey) {
      res[newKey] = commonConfigObj[key];
      addedKeys = true;
    } else if (IGNORE_KEYS.indexOf(key) < 0 && typeof commonConfigObj[key] !== "function") {
      res[key] = commonConfigObj[key];
      addedKeys = true;
    }
  });
  return addedKeys ? res : null;
}
var commonConfig = () => {
  const commonConfigValues = extractCommonConfigValues();
  const value = commonConfigValues ? JSON.stringify(commonConfigValues) : "";
  return { [COMMON_CONFIG_NAME]: encodeURIComponent(value) };
};

// ../../node_modules/@wix/headers/dist/esm/headers/linguist.js
init_define_process_env();
var import_base_64 = __toESM(require_base64());
var LINGUIST_HEADER_KEY = "x-wix-linguist";
function linguistHeader({ lang, locale, isPrimaryLanguage, signedInstance }) {
  if (isMultilingualOptionsAreValid({ lang, locale, isPrimaryLanguage })) {
    const instanceId = getInstanceIdFromSignedInstance(signedInstance);
    if (instanceId !== void 0) {
      return {
        [LINGUIST_HEADER_KEY]: [
          lang,
          locale,
          isPrimaryLanguage == null ? void 0 : isPrimaryLanguage.toString(),
          instanceId
        ].join("|")
      };
    }
  }
  return {};
}
function isMultilingualOptionsAreValid({ lang, locale, isPrimaryLanguage }) {
  return lang && locale && /^(true|false)$/.test((isPrimaryLanguage == null ? void 0 : isPrimaryLanguage.toString()) || "");
}
function getInstanceIdFromSignedInstance(signedInstance) {
  try {
    const encodedInstance = (signedInstance == null ? void 0 : signedInstance.startsWith("wixcode")) ? signedInstance == null ? void 0 : signedInstance.split(".")[2] : signedInstance == null ? void 0 : signedInstance.split(".")[1];
    if (encodedInstance) {
      return JSON.parse(import_base_64.default.decode(encodedInstance)).instanceId;
    }
  } catch (e) {
  }
}

// ../../node_modules/@wix/headers/dist/esm/assert.js
init_define_process_env();

// ../../node_modules/@wix/headers/dist/esm/errors.js
init_define_process_env();
var WixHeadersValidationError = class extends Error {
  constructor(type, key, value) {
    super("WixHeadersValidationError: expected ".concat(key, " to be ").concat(type, " but got ").concat(JSON.stringify(value)));
  }
};

// ../../node_modules/@wix/headers/dist/esm/assert.js
function assertBoolean(key, value) {
  if (typeof value !== "boolean") {
    throw new WixHeadersValidationError("boolean", key, value);
  }
}
function assertString(key, value) {
  if (typeof value !== "string") {
    throw new WixHeadersValidationError("string", key, value);
  }
}

// ../../node_modules/@wix/headers/dist/esm/index.js
function createHeaders(opts = {}) {
  opts = { csrf: true, signedInstance: "", ...opts };
  verifyOptsOrThrow(opts);
  const headers = [
    xWixBrand(),
    consentPolicy(),
    authorization(opts.signedInstance),
    artifactId(opts.artifactId),
    commonConfig(),
    linguistHeader({
      signedInstance: opts.signedInstance,
      ...opts.multilingualOptions
    })
  ];
  if (opts.csrf) {
    headers.push(csrf());
  }
  return headers.filter((hdrs) => Object.values(hdrs).every((v) => v)).reduce((result, hdrs) => ({
    ...result,
    ...hdrs
  }), {});
}
function verifyOptsOrThrow(opts) {
  assertBoolean("opts.csrf", opts.csrf);
  assertString("opts.signedInstance", opts.signedInstance);
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/utils.js
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/env-util.js
init_define_process_env();
function isBrowser() {
  return typeof window !== "undefined";
}
function isWebWorker() {
  var _a;
  return typeof self === "object" && ((_a = self === null || self === void 0 ? void 0 : self.constructor) === null || _a === void 0 ? void 0 : _a.name) === "DedicatedWorkerGlobalScope";
}
function isNode2() {
  var _a;
  return typeof process !== "undefined" && ((_a = process === null || process === void 0 ? void 0 : process.versions) === null || _a === void 0 ? void 0 : _a.node) != null;
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/utils.js
function isAbsoluteUrl(url) {
  if (typeof url !== "string") {
    throw new TypeError("Expected a `string`, got `".concat(typeof url, "`"));
  }
  return /(^https?:)|(^\/\/)/.test(url);
}
async function silent(fn) {
  try {
    await fn();
  } catch (_a) {
  }
}
function extractProp(data, path) {
  return path.split(".").filter((prop) => prop).reduce((result, prop) => result[prop], data);
}
function resolveHost(opts) {
  if (opts.baseURL) {
    return extractHost(opts.baseURL);
  } else if (opts.isSSR) {
    return SSR_HOST;
  } else if (typeof self !== "undefined" && !!self.location) {
    return self.location.host;
  } else {
    return "";
  }
}
function resolveProtocol(opts) {
  if (opts.baseURL) {
    return extractProtocol(opts.baseURL);
  } else if (opts.isSSR) {
    return SSR_PROTOCOL;
  } else if (typeof self !== "undefined" && !!self.location) {
    return self.location.protocol;
  } else {
    return "";
  }
}
function extractProtocol(url) {
  try {
    const asUrl = new URL(url);
    return asUrl.protocol;
  } catch (_a) {
    const hostAndProtocol = extractHostAndProtocolUsingRegExp(url);
    return hostAndProtocol.protocol;
  }
}
function extractHost(url) {
  let asUrl;
  try {
    asUrl = new URL(url);
  } catch (_a) {
    asUrl = new URL("http:".concat(url));
  }
  try {
    return asUrl.host;
  } catch (_b) {
    const hostAndProtocol = extractHostAndProtocolUsingRegExp(url);
    return hostAndProtocol.host;
  }
}
function extractHostAndProtocolUsingRegExp(url) {
  const regExp = new RegExp("^(.*:)//([A-Za-z0-9-.]+)(:[0-9]+)?(.*)$");
  try {
    const urlOptions = regExp.exec(url);
    return { protocol: urlOptions[1], host: urlOptions[2] };
  } catch (_a) {
    return { protocol: "http:", host: "" };
  }
}
function changeHost(urlOrPath, host) {
  let url;
  try {
    url = new URL(urlOrPath);
    url.host = host;
    url.protocol = "http";
  } catch (_a) {
    url = new URL("http://".concat(host));
    url.pathname = urlOrPath;
  }
  return url.toString();
}
function getGlobalConfig() {
  const defaultConfig = { httpMockServer: { enabled: false } };
  let globalConfig;
  if (isNode2() && define_process_env_default.HTTP_CLIENT_GLOBAL_CONFIG) {
    try {
      globalConfig = JSON.parse(define_process_env_default.HTTP_CLIENT_GLOBAL_CONFIG);
    } catch (e) {
    }
  }
  if (!globalConfig) {
    if (isBrowser()) {
      globalConfig = window._httpClientGlobalConfig;
    } else if (isWebWorker()) {
    }
  }
  return globalConfig || defaultConfig;
}
function isHttpMockServerEnabled() {
  const globalConfig = getGlobalConfig();
  return globalConfig.httpMockServer.enabled;
}
function shouldAllowUnmocked() {
  const globalConfig = getGlobalConfig();
  return globalConfig.httpMockServer.allowUnmocked;
}
function toSearchQueryParams(params) {
  return Object.entries(params).map(([key, value]) => "".concat(key, "=").concat(encodeURIComponent(value))).flat().join("&");
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/whitelist.json
var whitelist_default = [
  "wix.com",
  "editorx.com",
  "wix-code.com",
  "wixapps.net",
  "wixprod.net"
];

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/headers.js
function requestIdOrEmptyString(response) {
  var _a;
  return ((_a = response === null || response === void 0 ? void 0 : response.headers) === null || _a === void 0 ? void 0 : _a["x-wix-request-id"]) || "";
}
var composeHeaders = ({ url, disableWixHeaders, includeWixHeaders, wixHeadersOpts }) => {
  const shouldAssignWixHeaders = includeWixHeaders || !disableWixHeaders && isWixDomain(url);
  return shouldAssignWixHeaders ? createHeaders(wixHeadersOpts) : {};
};
function isWixDomain(url) {
  const isRelative = !isAbsoluteUrl(url);
  if (isRelative) {
    return true;
  }
  const host = ".".concat(extractHost(url));
  const isWhitelisted = whitelist_default.find((wixHost) => host.endsWith(".".concat(wixHost)));
  return !!isWhitelisted;
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/error.js
var axiosErrorFields = [
  "code",
  "config",
  "request",
  "response",
  "toJSON",
  "__CANCEL__"
];
var HttpError = class _HttpError extends Error {
  constructor(error) {
    super(error.message);
    this.isWixHttpError = true;
    Object.setPrototypeOf(this, _HttpError.prototype);
    axiosErrorFields.forEach((key) => {
      this[key] = error[key];
    });
  }
  get requestId() {
    return requestIdOrEmptyString(this.response);
  }
};
function createHttpError(...args) {
  return new HttpError(...args);
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/http-client.js
init_define_process_env();
var import_axios = __toESM(require_axios2());
var import_xhr = __toESM(require_xhr());

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/options.js
init_define_process_env();
var buildOptions = ({ requestOptions, urlObject, headers, globalConfig = {
  httpMockServer: {
    enabled: false
  }
} }) => {
  const { url, method, params, fallback } = requestOptions;
  if (params) {
    if (typeof params !== "object") {
      throw new Error("Search params must be an object");
    }
    if (fallback === null || fallback === void 0 ? void 0 : fallback.length) {
      if (method === "GET" && !isValidGetRequest(requestOptions)) {
        const fallbackOptions = getFallbackRequestOptions(fallback);
        if (fallbackOptions) {
          requestOptions = Object.assign(Object.assign({}, requestOptions), fallbackOptions);
          if (fallbackOptions.method === "POST") {
            requestOptions.params = void 0;
          }
        }
      }
    }
  }
  const localConfigOptions = maybeRedirectToMockServer(url, globalConfig);
  const newOptions = Object.assign(Object.assign(Object.assign({}, requestOptions), localConfigOptions), { headers });
  return newOptions;
};
var buildAllHeaders = (requestOptions, wixHeadersOpts, globalConfig = {
  httpMockServer: {
    enabled: false
  }
}, urlObject) => {
  const { url, disableWixHeaders, headers, includeWixHeaders } = requestOptions;
  const composedHeaders = composeHeaders({
    url,
    disableWixHeaders,
    includeWixHeaders,
    wixHeadersOpts
  });
  const originalUrlHeader = getUrlHeaders(globalConfig, requestOptions, urlObject);
  return Object.assign(Object.assign(Object.assign({}, composedHeaders), lowerAllJsonKeys(headers)), originalUrlHeader);
};
var getUrlHeaders = (globalConfig, requestOptions, urlObject) => {
  const { url, params } = requestOptions;
  const { host, protocol } = urlObject;
  const originalUrlHeader = globalConfig.httpMockServer.enabled ? {
    [ORIGINAL_URL_HEADER]: buildUrlFromRequest(url, params),
    [ORIGINAL_HOST_HEADER]: isAbsoluteUrl(url) ? extractHost(url) : host,
    [ORIGINAL_PROTOCOL_HEADER]: isAbsoluteUrl(url) ? extractProtocol(url) : protocol
  } : {};
  return originalUrlHeader;
};
function maybeRedirectToMockServer(url, globalConfig) {
  if (globalConfig.httpMockServer.enabled) {
    const mockUrl = new URL(globalConfig.httpMockServer.mockServerUrl);
    return {
      url: changeHost(url, mockUrl.host)
    };
  }
  return {};
}
function buildUrlFromRequest(url, requestParams) {
  const { pathname, searchParams } = new URL(url, "http://unused.com");
  requestParams = requestParams || searchParams;
  if (requestParams) {
    const params = toSearchQueryParams(requestParams) || requestParams.toString();
    const paramsAsString = params ? "?".concat(params) : "";
    return "".concat(pathname).concat(paramsAsString);
  }
  return pathname;
}
function lowerAllJsonKeys(objectToChange) {
  objectToChange = objectToChange || {};
  const result = Object.keys(objectToChange).reduce((prev, key) => Object.assign(Object.assign({}, prev), { [key.toLowerCase()]: objectToChange[key] }), {});
  return result;
}
function isValidGetRequest(requestOptions) {
  if (requestOptions.method !== "GET") {
    return false;
  }
  const { url, params } = requestOptions;
  return "".concat(url).concat(params).length < MAX_NGINX_URL_LENGTH;
}
function getFallbackRequestOptions(fallbackRequests) {
  for (const requestOption of fallbackRequests) {
    if (requestOption.method !== "GET" || isValidGetRequest(requestOption)) {
      return requestOption;
    }
  }
}

// ../../node_modules/@wix/fe-essentials/node_modules/@wix/http-client/dist/es/src/http-client.js
var HttpClient = class {
  constructor(opts = {}) {
    this.opts = opts;
    this.opts = defaultClientOptions(this.opts);
    this.client = import_axios.default.create(this.opts);
    this.flags = {
      sanitizerPocEnabled: checkSanitizerPocEnabled()
    };
  }
  static isHttpError(payload) {
    return !!(payload === null || payload === void 0 ? void 0 : payload.isWixHttpError);
  }
  setErrorHandler(errorHandler) {
    this.opts.errorHandler = errorHandler;
  }
  async request(requestOptionsOrFactory, overrides) {
    var _a, _b;
    const host = resolveHost(this.opts);
    const protocol = resolveProtocol(this.opts);
    const urlObject = { protocol, host };
    const requestOptions = typeof requestOptionsOrFactory === "function" ? requestOptionsOrFactory({ isSSR: this.opts.isSSR, host }) : requestOptionsOrFactory;
    const signedInstance = (overrides === null || overrides === void 0 ? void 0 : overrides.signedInstance) || await ((_b = (_a = this.opts).getAppToken) === null || _b === void 0 ? void 0 : _b.call(_a)) || "";
    const headers = this.getHeaders(requestOptions, signedInstance, urlObject);
    const options = buildOptions({
      requestOptions,
      urlObject,
      headers,
      globalConfig: getGlobalConfig()
    });
    if (this.opts.isSSR) {
      options.baseURL = this.opts.baseURL ? this.opts.baseURL : "".concat(SSR_PROTOCOL, "://").concat(SSR_HOST);
    }
    try {
      const res = await this.client.request(options).catch((err) => this.maybeFallbackRequest(err, requestOptions, urlObject, signedInstance));
      return this.transformResponse(res, requestOptions);
    } catch (e) {
      this.handleRequestError(e, options);
    }
  }
  async get(url, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), { url, method: "GET" });
    return this.request(opts);
  }
  async delete(url, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), { url, method: "DELETE" });
    return this.request(opts);
  }
  async head(url, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), { url, method: "HEAD" });
    return this.request(opts);
  }
  async options(url, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), { url, method: "OPTIONS" });
    return this.request(opts);
  }
  async post(url, data, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), {
      url,
      data,
      method: "POST"
    });
    return this.request(opts);
  }
  async put(url, data, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), {
      url,
      data,
      method: "PUT"
    });
    return this.request(opts);
  }
  async patch(url, data, requestOptions) {
    const opts = Object.assign(Object.assign({}, requestOptions), {
      url,
      data,
      method: "PATCH"
    });
    return this.request(opts);
  }
  get CancelToken() {
    return import_axios.default.CancelToken;
  }
  get isCancel() {
    return import_axios.default.isCancel;
  }
  getHeaders(requestOptions, signedInstance, urlObject) {
    if (typeof this.opts.createHeaders === "function") {
      return this.getCustomHeaders(requestOptions, signedInstance, urlObject);
    }
    const wixHeadersOpts = {
      signedInstance,
      artifactId: this.opts.artifactId,
      csrf: false,
      multilingualOptions: this.opts.multilingualOptions
    };
    return buildAllHeaders(requestOptions, wixHeadersOpts, getGlobalConfig(), urlObject);
  }
  getCustomHeaders(requestOptions, signedInstance, urlObject) {
    const { url, headers } = requestOptions;
    const authHeader = signedInstance && isWixDomain(url) ? { authorization: signedInstance } : {};
    const customHeaders = this.opts.createHeaders();
    const originalUrlHeader = getUrlHeaders(getGlobalConfig(), requestOptions, urlObject);
    return Object.assign(Object.assign(Object.assign(Object.assign({}, originalUrlHeader), customHeaders), authHeader), headers);
  }
  handleRequestError(error, requestOptions) {
    const requestError = createHttpError(error);
    silent(() => {
      var _a;
      return (_a = requestOptions.onError) === null || _a === void 0 ? void 0 : _a.call(requestOptions, requestError);
    });
    silent(() => {
      var _a;
      return (_a = this.opts.errorHandler) === null || _a === void 0 ? void 0 : _a.handleError(requestError, {
        requestOptions
      });
    });
    throw requestError;
  }
  maybeFallbackRequest(err, requestOptions, urlObject, signedInstance) {
    var _a, _b, _c;
    const shouldFallbackRequest = isHttpMockServerEnabled() && shouldAllowUnmocked() && ((_a = err.response) === null || _a === void 0 ? void 0 : _a.status) === 404 && ((_c = (_b = err.response) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.msg) === NO_SCENARIO_FOUND;
    if (shouldFallbackRequest) {
      const headers = this.getHeaders(requestOptions, signedInstance, urlObject);
      const prodOptions = buildOptions({
        requestOptions,
        urlObject,
        headers
      });
      return this.client.request(prodOptions);
    }
    throw err;
  }
  transformResponse(res, requestOptions) {
    const requestId = requestIdOrEmptyString(res);
    const data = transformData(res, requestOptions, this.flags);
    return Object.assign(Object.assign({}, res), {
      data,
      requestId
    });
  }
};
HttpClient.CancelToken = import_axios.default.CancelToken;
HttpClient.isCancel = import_axios.default.isCancel;
function defaultClientOptions(opts) {
  let adapter = opts.adapter;
  if (!adapter) {
    adapter = import_xhr.default;
    if (isNode2()) {
      adapter = getNodeAdapter();
    }
  }
  return Object.assign({ adapter, isSSR: false }, opts);
}
function getNodeAdapter() {
  if (typeof __webpack_require__ === "function") {
    return __non_webpack_require__("axios/lib/adapters/http");
  }
  return require_xhr();
}
function transformData(res, requestOptions, flags) {
  let resData = sanitizeResponse(res, flags);
  if (requestOptions._pickResponseBody) {
    resData = extractProp(res.data, requestOptions._pickResponseBody);
  }
  if (requestOptions._logs) {
    const logs = extractProp(res.data, requestOptions._logs);
    if (logs === null || logs === void 0 ? void 0 : logs.length) {
      logs.map((log) => console.log(...log));
    }
  }
  return resData;
}
function sanitizeResponse(res, flags) {
  try {
    if (flags.sanitizerPocEnabled) {
      const start = performance.now();
      const sanitizer = new Sanitizer();
      if (res.headers["content-type"].includes("application/json")) {
        console.log("[+] JSON Response detected, sanitizing data");
        const sanitizeStringValue = function(jsonResponse) {
          try {
            Object.keys(jsonResponse).forEach((key) => {
              if (typeof jsonResponse[key] === "string") {
                jsonResponse[key] = sanitizer.sanitizeFor("span", jsonResponse[key]).innerHTML;
              } else if (typeof jsonResponse[key] === "object") {
                jsonResponse[key] = sanitizeStringValue(jsonResponse[key]);
              }
            });
            return jsonResponse;
          } catch (error) {
            console.log(error);
          }
        };
        const end = performance.now();
        console.log("Time taken: ".concat(end - start, " milliseconds."));
        return sanitizeStringValue(res.data);
      }
    }
  } catch (e) {
    console.log("[+] Sanitizer API not supported: %o", e);
  }
  return res.data;
}
function checkSanitizerPocEnabled() {
  var _a;
  try {
    return isBrowser() && new URLSearchParams(((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.hash) || "").get("sanitizerPOC") === "true";
  } catch (_b) {
    return false;
  }
}
function createHttpClient(...args) {
  return new HttpClient(...args);
}

// ../../node_modules/@wix/error-monitor/dist/esm/index.js
init_define_process_env();
import { Severity as Severity2 } from "@sentry/types";

// ../../node_modules/@wix/error-monitor/dist/esm/InternalErrorMonitor.js
init_define_process_env();
import { Severity } from "@sentry/types";

// ../../node_modules/@wix/error-monitor/dist/esm/utils/addTags.js
init_define_process_env();

// ../../node_modules/@wix/error-monitor/dist/esm/constants.js
init_define_process_env();
var SENTRY_TAG_NAME_LIMIT = 30;
var SENTRY_TAG_VALUE_LIMIT = 200;
var TAG_WARNING_LIMIT = 20;

// ../../node_modules/@wix/error-monitor/dist/esm/utils/addTags.js
function addTags(scope, appName = "", tags) {
  const sanitizedTags = sanitizeTags(tags, appName);
  Object.keys(sanitizedTags).forEach((tag) => {
    scope.setTag(tag, sanitizedTags[tag]);
  });
}
function sanitizeTags(tags, appName) {
  if (define_process_env_default.NODE_ENV === "development") {
    warnInConsoleIfTagIsIncorrect(tags, appName);
  }
  return Object.keys(tags).reduce((acc, key) => {
    const value = tags[key];
    if (value !== void 0) {
      acc[key] = String(value);
    }
    return acc;
  }, {});
}
function warnInConsoleIfTagIsIncorrect(tagsObject, appName = "") {
  Object.keys(tagsObject).forEach((tagKey) => {
    const tagValue = tagsObject[tagKey];
    if (tagKey.length >= SENTRY_TAG_NAME_LIMIT) {
      console.warn("ErrorMonitor::".concat(appName, ":: tag NAME is too long!\n\n ").concat(tagKey));
    }
    const stringValues = typeof tagValue === "object" ? JSON.stringify(tagValue) : String(tagValue);
    if (stringValues && stringValues.length >= SENTRY_TAG_VALUE_LIMIT) {
      const truncatedValue = truncateIfBiggerThen(tagValue, TAG_WARNING_LIMIT);
      console.warn("ErrorMonitor::".concat(appName, ":: tag VALUE is too long!\n\n ").concat(tagKey, ": ").concat(truncatedValue));
    }
  });
}
function truncateIfBiggerThen(value, length) {
  if (!value || typeof value === "boolean" || typeof value === "number" || value.length <= length) {
    return value;
  }
  return value.substring(0, length) + "...";
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/extractDetailsFromHttpErrors.js
init_define_process_env();

// ../../node_modules/@wix/error-monitor/dist/esm/utils/isWixHttpError.js
init_define_process_env();
function isWixHttpError(exception) {
  return exception.isWixHttpError === true;
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/isAxiosError.js
init_define_process_env();
function isAxiosError(exception) {
  return exception.isAxiosError === true;
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/extractDetailsFromHttpErrors.js
function extractDetailsFromHttpErrors(error) {
  if (!error || !error.config) {
    return {
      error: error ? JSON.stringify(error) : "error is empty"
    };
  }
  const isWixError = isWixHttpError(error);
  const isAxios = isAxiosError(error);
  if (isWixError || isAxios) {
    return {
      isWixHttpError: isWixError,
      requestId: error.requestId,
      ...error.config && {
        requestConfig: {
          url: error.config.url,
          method: error.config.method,
          ...error.config.params && {
            params: JSON.stringify(error.config.params)
          },
          ...error.config.data && {
            data: JSON.stringify(error.config.data)
          }
        }
      },
      ...(error == null ? void 0 : error.response) && {
        response: {
          status: error.response.status,
          statusText: error.response.statusText,
          ...error.response.data && {
            data: JSON.stringify(error.response.data)
          }
        }
      }
    };
  }
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/handleNonErrorException.js
init_define_process_env();
function handleNonErrorException(exception) {
  var _a, _b;
  switch (true) {
    case ("message" in exception && (exception == null ? void 0 : exception.message)): {
      return Object.assign(new Error(exception.message), exception);
    }
    case ("error" in exception && ((_a = exception == null ? void 0 : exception.error) == null ? void 0 : _a.message)): {
      return Object.assign(new Error(exception.error.message), exception == null ? void 0 : exception.error);
    }
    case ("exception" in exception && ((_b = exception == null ? void 0 : exception.exception) == null ? void 0 : _b.message)): {
      return Object.assign(new Error(exception.exception.message), exception == null ? void 0 : exception.exception);
    }
    default: {
      console.log("ErrorMonitor: please pass instance of an Error, instead error monitor received", exception);
      return exception;
    }
  }
}

// ../../node_modules/@wix/error-monitor/dist/esm/InternalErrorMonitor.js
var InternalErrorMonitor = class {
  constructor(Sentry2, appName = "") {
    this.sentry = Sentry2;
    this.appName = appName;
  }
  captureException(exception, options) {
    if (isWixHttpError(exception) || isAxiosError(exception)) {
      options = {
        ...options,
        contexts: {
          ...options == null ? void 0 : options.contexts,
          httpErrorDetails: extractDetailsFromHttpErrors(exception)
        }
      };
    }
    if (!(exception instanceof Error)) {
      exception = handleNonErrorException(exception);
    }
    if (options) {
      if (options.tags) {
        options.tags = sanitizeTags(options.tags, this.appName);
      }
      const sentry = this.sentry;
      if (this.isHub(sentry)) {
        return sentry.captureException(exception, { captureContext: options });
      } else {
        return sentry.captureException(exception, options);
      }
    } else {
      return this.sentry.captureException(exception);
    }
  }
  captureMessage(message, options) {
    if (options) {
      const { level = Severity.Error, tags } = options;
      if (tags) {
        options.tags = sanitizeTags(tags, this.appName);
      }
      const sentry = this.sentry;
      if (this.isHub(sentry)) {
        return sentry.captureMessage(message, level, {
          captureContext: options
        });
      } else {
        return sentry.captureMessage(message, options);
      }
    } else {
      return this.sentry.captureMessage(message);
    }
  }
  /**
   * Added here to comply with already used api (e.g. in business-manager).
   *
   * @deprecated this API is unstable and could be removed in the future, please do not use this if you don't have a reasons for that.
   */
  captureEvent(event) {
    return this.sentry.captureEvent(event);
  }
  addBreadcrumb(breadcrumb) {
    this.sentry.addBreadcrumb(breadcrumb);
  }
  isHub(sentry) {
    return sentry.captureMessage.length === 3;
  }
};

// ../../node_modules/@wix/error-monitor/dist/esm/utils/prepareOptions.js
init_define_process_env();

// ../../node_modules/@wix/error-monitor/dist/esm/utils/enrichBreadcrumbsWithDataHooks.js
init_define_process_env();
function enrichBreadcrumbsWithDataHooks(breadcrumb, hint) {
  const { category } = breadcrumb;
  const isUiInteractionBreadcrumb = category && (category === "ui.click" || category === "ui.input");
  const targetElement = hint && hint.event && hint.event.target;
  if (isUiInteractionBreadcrumb && targetElement) {
    const nodeWithDataHook = targetElement.closest("[data-hook]");
    if (nodeWithDataHook) {
      const dataHook = nodeWithDataHook.getAttribute("data-hook");
      if (targetElement === nodeWithDataHook) {
        breadcrumb.message = "".concat(breadcrumb.message, ' [data-hook="').concat(dataHook, '"]');
      } else {
        breadcrumb.message = "".concat(breadcrumb.message, ' parent:[data-hook="').concat(dataHook, '"]');
      }
    }
  }
  return breadcrumb;
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/calculateAppEnvironment.js
init_define_process_env();
function calculateAppEnvironment() {
  if (typeof window === "undefined") {
    return "server";
  }
  const { hostname } = window.location;
  const { userAgent } = window.navigator;
  const { cookie } = window.document;
  const isSled = /(^|;)\s*automation\s*=\s*sled:/.test(cookie);
  const isLocalhost = /localhost|127\.0\.0\.1|::1|\.local|local.wix.com|^$/i.test(hostname);
  const isBot = /Googlebot|AdsBot-Google-Mobile|bingbot|BingPreview|facebookexternalhit|Baiduspider|YandexBot/i.test(userAgent);
  const isNotValidUserAgent = /BonEcho|NewsGator|SeaMonkey|iTunes|Epiphany|Konqueror|Sleipnir|IceWeasel/i.test(userAgent);
  switch (true) {
    case (define_process_env_default.NODE_ENV === "development" || isLocalhost):
      return "development";
    case isBot:
      return "bot";
    case isNotValidUserAgent:
      return "invalid_useragent";
    case isSled:
      return "sled";
    default:
      return "production";
  }
}

// ../../node_modules/@wix/error-monitor/dist/esm/utils/prepareOptions.js
function prepareOptions(options) {
  const { dsn, appName = "", version, environment, beforeSend, transport, integrations, artifactId: artifactId2, wixRecorder } = options;
  return {
    dsn,
    environment: environment || calculateAppEnvironment(),
    ...version && { release: "".concat(artifactId2 != null ? artifactId2 : appName, "@").concat(version) },
    beforeBreadcrumb: enrichBreadcrumbsWithDataHooks,
    beforeSend: async (event, hint) => {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;
      let newEvent;
      const originalFingerprint = event.fingerprint;
      const isBeforeSendExists = !!beforeSend;
      if (isBeforeSendExists) {
        event.tags = { ...event.tags, customBeforeSend: true };
      }
      try {
        newEvent = isBeforeSendExists ? await beforeSend(event, hint) : event;
      } catch (e) {
        event.contexts = {
          ...event.contexts,
          errorMonitorBuiltInContext: {
            ...(_a = event.contexts) == null ? void 0 : _a.errorMonitorBuiltInContext,
            customBeforeSendError: true
          }
        };
        newEvent = event;
      }
      if (!newEvent) {
        event.fingerprint = originalFingerprint;
        event.contexts = {
          ...event.contexts,
          errorMonitorBuiltInContext: {
            ...(_b = event.contexts) == null ? void 0 : _b.errorMonitorBuiltInContext,
            customBeforeSendReturnNull: true
          }
        };
        event.environment = "unknown";
        return event;
      }
      newEvent.fingerprint = originalFingerprint;
      const availableStacktraces = [
        ...(_e = (_d = (_c = newEvent.exception) == null ? void 0 : _c.values) == null ? void 0 : _d.map((error) => error.stacktrace)) != null ? _e : [],
        newEvent.stacktrace
      ];
      const stackTraceArtifactIds = availableStacktraces.flatMap((stacktrace) => extractArtifactIdsFromStacktrace(stacktrace));
      const urlArtifactId = extractArtifactIdFromParastoragePath([
        (_h = (_g = (_f = newEvent.contexts) == null ? void 0 : _f.httpErrorDetails) == null ? void 0 : _g.requestConfig) == null ? void 0 : _h.url
      ]);
      const detectedArtifactIds = Array.from(/* @__PURE__ */ new Set([...stackTraceArtifactIds, ...urlArtifactId]));
      if (artifactId2 && !detectedArtifactIds.includes(artifactId2) && newEvent.environment === "production") {
        newEvent.environment = "unknown";
      }
      newEvent.contexts = {
        ...newEvent.contexts,
        errorMonitorBuiltInContext: {
          ...(_i = newEvent.contexts) == null ? void 0 : _i.errorMonitorBuiltInContext,
          detectedArtifactIds
        }
      };
      const sessionRecordingUrl = await (wixRecorder == null ? void 0 : wixRecorder.recordUrl());
      if (sessionRecordingUrl) {
        newEvent.tags = {
          ...newEvent.tags,
          sessionRecordingUrl
        };
        if (sessionRecordingUrl.startsWith("https://app.fullstory.com")) {
          newEvent.contexts = {
            ...newEvent.contexts,
            fullStory: {
              fullStoryUrl: sessionRecordingUrl
            }
          };
        } else {
          newEvent.contexts = {
            ...newEvent.contexts,
            errorMonitorBuiltInContext: {
              ...(_j = newEvent.contexts) == null ? void 0 : _j.errorMonitorBuiltInContext,
              sessionRecordingUrl
            }
          };
        }
      }
      return newEvent;
    },
    transport,
    integrations
  };
}
var extractArtifactIdsFromStacktrace = (stacktrace) => {
  var _a;
  const frames = (_a = stacktrace == null ? void 0 : stacktrace.frames) != null ? _a : [];
  const allFileNamesFromStack = frames.map((frame) => frame.abs_path || frame.filename).filter((path) => !!path).reverse();
  return extractArtifactIdFromParastoragePath(allFileNamesFromStack);
};
var extractArtifactIdFromParastoragePath = (paths) => {
  const parastorageRegex = /(?:\/services|\/_partials)\/([^/]*)\/((?:0|[1-9]\d*)\.(?:0|[1-9]\d*)\.(?:0|[1-9]\d*)|[a-f0-9]{56})\//i;
  return paths == null ? void 0 : paths.map((fileName) => parastorageRegex.exec(fileName != null ? fileName : "")).filter((matches) => !!matches).map((matches) => matches[1]);
};

// ../../node_modules/@wix/error-monitor/dist/esm/utils/configureScope.js
init_define_process_env();
function configureScope(sentryInstance, options) {
  const { user, appName, tags } = options;
  sentryInstance.configureScope((scope) => {
    if (user) {
      scope.setUser(user);
    }
    if (tags) {
      addTags(scope, appName, tags);
    }
  });
}

// ../../node_modules/@wix/error-monitor/dist/esm/createHub.js
init_define_process_env();
var createSafeSentryOptions = (Sentry2, options = {}) => {
  var _a, _b, _c;
  return {
    ...options,
    transport: (_a = options.transport) != null ? _a : typeof Sentry2.makeFetchTransport !== "undefined" ? Sentry2.makeFetchTransport : void 0,
    stackParser: (_b = options.stackParser) != null ? _b : typeof Sentry2.defaultStackParser !== "undefined" ? Sentry2.defaultStackParser : void 0,
    integrations: (_c = options.integrations) != null ? _c : typeof Sentry2.getDefaultIntegrations === "function" ? Sentry2.getDefaultIntegrations({}) : Sentry2.defaultIntegrations
  };
};
function createHub(options) {
  const { Sentry: Sentry2 } = options;
  const clientOptions = createSafeSentryOptions(Sentry2, prepareOptions(options));
  const sentryClient = new Sentry2.BrowserClient(clientOptions);
  const sentryHub = new Sentry2.Hub(sentryClient);
  configureScope(sentryHub, options);
  return new InternalErrorMonitor(sentryHub, options.appName);
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/ErrorHandler.js
init_define_process_env();

// ../../node_modules/@babel/runtime/helpers/esm/defineProperty.js
init_define_process_env();

// ../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js
init_define_process_env();

// ../../node_modules/@babel/runtime/helpers/esm/typeof.js
init_define_process_env();
function _typeof(o) {
  "@babel/helpers - typeof";
  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
    return typeof o2;
  } : function(o2) {
    return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
  }, _typeof(o);
}

// ../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js
init_define_process_env();
function toPrimitive(t, r) {
  if ("object" != _typeof(t) || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != _typeof(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}

// ../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js
function toPropertyKey(t) {
  var i = toPrimitive(t, "string");
  return "symbol" == _typeof(i) ? i : i + "";
}

// ../../node_modules/@babel/runtime/helpers/esm/defineProperty.js
function _defineProperty(e, r, t) {
  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: true,
    configurable: true,
    writable: true
  }) : e[r] = t, e;
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportErrorBi.js
init_define_process_env();

// ../../node_modules/@wix/error-handler-core/@wix/bi-logger-os-data/dist/esm/v2/index.js
init_define_process_env();
function httpClientErrorMappingSrc176Evid100(params) {
  return { evid: 100, src: 176, endpoint: "", params };
}
function getResolvedErrorSrc176Evid101(params) {
  return { evid: 101, src: 176, endpoint: "", params };
}
function showErrorSrc176Evid102(params) {
  return { evid: 102, src: 176, endpoint: "", params };
}
function retryErrorSrc176Evid103(params) {
  return { evid: 103, src: 176, endpoint: "", params };
}
function httpClientErrorSrc176Evid404(params) {
  return { evid: 404, src: 176, endpoint: "", params };
}

// ../../node_modules/@wix/error-handler/dist/esm/util/withoutDefaults.js
init_define_process_env();
function withoutDefaults(fn) {
  return fn;
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportErrorBi.js
function reportErrorBi(errorHandler, params) {
  var _webWindow$location;
  const {
    errorAccessor,
    requestOptions
  } = params;
  const {
    biLogger,
    onlineManager,
    webWindow,
    environment,
    biDefaultsOverrides
  } = errorHandler;
  const {
    statusCode,
    errorData,
    errorDetails,
    errorMessage,
    exceptionMessage,
    httpError,
    error
  } = errorAccessor;
  const config = httpError == null ? void 0 : httpError.config;
  biLogger.report(withoutDefaults(httpClientErrorSrc176Evid404)({
    artifact_id: environment.artifactId,
    full_artifact_id: environment.fullArtifactId,
    hostingEnvironment: biDefaultsOverrides == null ? void 0 : biDefaultsOverrides.hostingEnvironment,
    app_id: biDefaultsOverrides == null ? void 0 : biDefaultsOverrides.app_id,
    artifactVersion: environment.version,
    error_code: statusCode,
    error_json: errorData ? JSON.stringify(errorData) : void 0,
    exception_message: exceptionMessage,
    error_message: errorMessage,
    client_error_code: errorAccessor == null ? void 0 : errorAccessor.clientCode,
    error_type: errorDetails != null && errorDetails.applicationError ? "applicationError" : errorDetails != null && errorDetails.validationError ? "validationError" : void 0,
    request_id: httpError == null ? void 0 : httpError.requestId,
    hasInternetConnection: onlineManager.onLine,
    pageUrl: webWindow == null || (_webWindow$location = webWindow.location) == null ? void 0 : _webWindow$location.href,
    session_id: error == null ? void 0 : error._errorHandlerSessionId,
    serverUrl: (config == null ? void 0 : config.url) || (requestOptions == null ? void 0 : requestOptions.url),
    method: (config == null ? void 0 : config.method) || (requestOptions == null ? void 0 : requestOptions.method) || "unknown",
    entity_fqdn: config == null ? void 0 : config.entityFqdn,
    method_fqn: config == null ? void 0 : config.methodFqn,
    server_artifactid: config == null ? void 0 : config.artifactId
  }));
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/createErrorResolution.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/state/ErrorResolution.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/util/resolveFromMapping.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/util/statusCodeNumericToText.js
init_define_process_env();
var statusCodeNumericToText = {
  400: "INVALID_ARGUMENT",
  401: "UNAUTHENTICATED",
  403: "PERMISSION_DENIED",
  404: "NOT_FOUND",
  409: "ALREADY_EXISTS",
  428: "FAILED_PRECONDITION",
  429: "RESOURCE_EXHAUSTED",
  499: "CANCELED",
  500: "INTERNAL",
  501: "NOT_IMPLEMENTED",
  502: "BAD_GATEWAY",
  503: "UNAVAILABLE"
};

// ../../node_modules/@wix/error-handler/dist/esm/util/resolveFromMapping.js
function resolveFromMapping(params) {
  const {
    errorAccessor,
    errorCodesMap
  } = params;
  const {
    applicationError,
    statusCode,
    error,
    validationError
  } = errorAccessor;
  if (applicationError) {
    var _errorCodesMap$applic;
    const {
      code
    } = applicationError;
    const applicationErrorMapping = (_errorCodesMap$applic = errorCodesMap.applicationError) == null ? void 0 : _errorCodesMap$applic[code];
    if (applicationErrorMapping === false) {
      return null;
    }
    if (applicationErrorMapping) {
      return applicationErrorMapping(applicationError, error);
    }
  }
  if (errorCodesMap.validationError) {
    var _validationError$fiel;
    const rules = Object.keys(errorCodesMap.validationError);
    const firstValidationError = validationError == null || (_validationError$fiel = validationError.fieldViolations) == null ? void 0 : _validationError$fiel.find((_ref) => {
      let {
        ruleName
      } = _ref;
      return rules.includes(ruleName);
    });
    if (firstValidationError != null && firstValidationError.ruleName) {
      var _errorCodesMap$valida;
      const validationErrorMapping = (_errorCodesMap$valida = errorCodesMap.validationError) == null ? void 0 : _errorCodesMap$valida[firstValidationError.ruleName];
      if (validationErrorMapping) {
        return validationErrorMapping(error);
      }
    }
  }
  const statusCodeText = statusCode != null ? statusCodeNumericToText[statusCode] : null;
  const statusCodeErrorMap = {
    ...errorCodesMap.serverError ? {
      INTERNAL: errorCodesMap.serverError,
      NOT_IMPLEMENTED: errorCodesMap.serverError,
      BAD_GATEWAY: errorCodesMap.serverError,
      UNAVAILABLE: errorCodesMap.serverError
    } : {},
    ...errorCodesMap.statusCodeError
  };
  const statusCodeErrorMappingFunction = statusCodeText != null ? statusCodeErrorMap[statusCodeText] : null;
  if (statusCodeErrorMappingFunction) {
    return statusCodeErrorMappingFunction(error);
  }
  return null;
}

// ../../node_modules/@wix/error-handler/dist/esm/state/ErrorResolution.js
var ErrorResolution = class {
  constructor(params) {
    _defineProperty(this, "errorAccessor", void 0);
    _defineProperty(this, "errorCodesMap", void 0);
    _defineProperty(this, "commonErrorsMapState", void 0);
    _defineProperty(this, "onlineManager", void 0);
    _defineProperty(this, "consumerResolvedError", void 0);
    _defineProperty(this, "commonResolvedError", void 0);
    this.commonErrorsMapState = params.commonErrorsMapState;
    this.errorAccessor = params.errorAccessor;
    this.errorCodesMap = params.errorCodesMap;
    this.onlineManager = params.onlineManager;
  }
  get commonErrors() {
    return this.commonErrorsMapState.commonErrors;
  }
  _resolveNetworkError() {
    const {
      onlineManager,
      commonErrors,
      errorAccessor
    } = this;
    if (!commonErrors) {
      return null;
    }
    if (onlineManager.onLine) {
      return commonErrors.getNetworkErrorShowErrorProps(errorAccessor);
    }
    return commonErrors.connectionErrorShowErrorProps;
  }
  _resolveCommonError() {
    var _a;
    const {
      errorAccessor,
      commonErrors,
      errorCodesMap
    } = this;
    const {
      error,
      httpError,
      validationError
    } = errorAccessor;
    if (httpError == null) {
      return this._resolveNetworkError();
    }
    if (!commonErrors) {
      return null;
    }
    if (validationError) {
      var _commonErrors$commonE;
      return (_commonErrors$commonE = commonErrors.commonErrorsMap.statusCodeError) == null || _commonErrors$commonE.INVALID_ARGUMENT == null ? void 0 : _commonErrors$commonE.INVALID_ARGUMENT(error);
    }
    const resolvedError = resolveFromMapping({
      errorAccessor,
      errorCodesMap: commonErrors.commonErrorsMap
    });
    if (!resolvedError) {
      return (_a = errorCodesMap == null || errorCodesMap.serverError == null ? void 0 : errorCodesMap.serverError(error)) != null ? _a : commonErrors.defaultErrorShowErrorProps;
    }
    return resolvedError;
  }
  _resolveConsumerError() {
    const {
      errorCodesMap,
      errorAccessor
    } = this;
    const {
      httpError
    } = errorAccessor;
    if (httpError == null || errorCodesMap == null) {
      return null;
    }
    return resolveFromMapping({
      errorAccessor,
      errorCodesMap
    });
  }
  resolve() {
    this.consumerResolvedError = this._resolveConsumerError();
    if (this.consumerResolvedError != null) {
      return;
    }
    this.commonResolvedError = this._resolveCommonError();
  }
  get errorToShow() {
    var _a;
    return (_a = this.consumerResolvedError) != null ? _a : this.commonResolvedError;
  }
};

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/createErrorResolution.js
function createErrorResolution(errorHandler, params) {
  const {
    commonErrorsMapState,
    onlineManager
  } = errorHandler;
  const {
    errorAccessor,
    errorCodesMap
  } = params;
  const errorResolution = new ErrorResolution({
    errorAccessor,
    errorCodesMap,
    commonErrorsMapState,
    onlineManager
  });
  errorResolution.resolve();
  return errorResolution;
}

// ../../node_modules/@wix/error-handler/dist/esm/util/createBiLoggerWithDefaults.js
init_define_process_env();
function createBiLoggerWithDefaults(params) {
  return typeof params.biLoggerOrFactory === "function" ? params.biLoggerOrFactory().logger() : params.biLoggerOrFactory;
}

// ../../node_modules/@wix/error-handler/dist/esm/state/ErrorAccessor.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/util/httpErrorDecoders.js
init_define_process_env();
function isObject(thing) {
  return thing != null;
}
function isHttpError(err) {
  return isObject(err) && err.response != null;
}
function responseDataHasMessage(data) {
  return isObject(data) && data.message != null;
}
function responseDataHasDetails(data) {
  return isObject(data) && data.details != null;
}

// ../../node_modules/@wix/error-handler/dist/esm/util/sdkErrorDecoders.js
init_define_process_env();
function isObject2(thing) {
  return thing != null;
}
function isSdkError(err) {
  return isObject2(err) && err.status != null;
}
function toMinimalHttpError(err) {
  return {
    response: {
      data: {
        details: err.details
      },
      status: err.status
    },
    requestId: err.requestId
  };
}

// ../../node_modules/@wix/error-handler/dist/esm/state/ErrorAccessor.js
var ErrorAccessor = class {
  constructor(params) {
    _defineProperty(this, "inputError", void 0);
    _defineProperty(this, "_error", void 0);
    _defineProperty(this, "_httpError", void 0);
    _defineProperty(this, "_errorDetails", void 0);
    this.inputError = params.error;
  }
  get error() {
    var _a;
    return (_a = this._error) != null ? _a : this._error = this.inputError instanceof Error ? this.inputError : null;
  }
  /**
   * The message of the JS error, for example: `Network Error`
   */
  get exceptionMessage() {
    var _this$error;
    return (_this$error = this.error) == null ? void 0 : _this$error.message;
  }
  /**
   * Error object from the http client, including the http response
   */
  get httpError() {
    var _a;
    const {
      inputError
    } = this;
    return (_a = this._httpError) != null ? _a : this._httpError = isHttpError(inputError) ? inputError : isSdkError(inputError) ? toMinimalHttpError(inputError) : null;
  }
  /**
   * errno symbolic name** like `ENETUNREACH`, Not http status code
   * This code is how the browser represents the error
   */
  get clientCode() {
    var _this$httpError;
    return (_this$httpError = this.httpError) == null ? void 0 : _this$httpError.code;
  }
  /**
   * The http response of the error
   */
  get errorResponse() {
    var _this$httpError2;
    return (_this$httpError2 = this.httpError) == null ? void 0 : _this$httpError2.response;
  }
  /**
   * The http status code of the http response, numeric value (e.g. 404)
   */
  get statusCode() {
    var _this$errorResponse;
    return (_this$errorResponse = this.errorResponse) == null ? void 0 : _this$errorResponse.status;
  }
  /**
   * The data (JSON) of the http response
   */
  get errorData() {
    var _this$errorResponse2;
    return (_this$errorResponse2 = this.errorResponse) == null ? void 0 : _this$errorResponse2.data;
  }
  /**
   * The details of the error, if available
   */
  get errorDetails() {
    var _a;
    const {
      errorData
    } = this;
    return (_a = this._errorDetails) != null ? _a : this._errorDetails = responseDataHasDetails(errorData) ? errorData.details : null;
  }
  get errorMessage() {
    const {
      errorData
    } = this;
    return responseDataHasMessage(errorData) ? errorData.message : void 0;
  }
  get applicationError() {
    var _this$errorDetails;
    return (_this$errorDetails = this.errorDetails) == null ? void 0 : _this$errorDetails.applicationError;
  }
  get validationError() {
    var _this$errorDetails2;
    return (_this$errorDetails2 = this.errorDetails) == null ? void 0 : _this$errorDetails2.validationError;
  }
};

// ../../node_modules/@wix/error-handler/dist/esm/state/TranslationsState.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/state/asyncMessagesLoader.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/services/translationsImportsMap.js
init_define_process_env();
var translationsImportsMap = {
  ar: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ar-json" */
    "./common-errors_ar-LFVNFS2J.js"
  ))),
  bg: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_bg-json" */
    "./common-errors_bg-MTXA6CZY.js"
  ))),
  ca: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ca-json" */
    "./common-errors_ca-HJPWMPW7.js"
  ))),
  cs: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_cs-json" */
    "./common-errors_cs-PA3RYUWB.js"
  ))),
  da: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_da-json" */
    "./common-errors_da-QOTAF6DM.js"
  ))),
  de: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_de-json" */
    "./common-errors_de-QQOUIVXS.js"
  ))),
  el: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_el-json" */
    "./common-errors_el-2AGQO6PX.js"
  ))),
  en: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_en-json" */
    "./common-errors_en-LYWYGJDV.js"
  ))),
  es: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_es-json" */
    "./common-errors_es-2SLR53D7.js"
  ))),
  fi: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_fi-json" */
    "./common-errors_fi-PYXR5MB3.js"
  ))),
  fr: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_fr-json" */
    "./common-errors_fr-GK3BGWQO.js"
  ))),
  he: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_he-json" */
    "./common-errors_he-EMKYOLAN.js"
  ))),
  hi: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_hi-json" */
    "./common-errors_hi-AV4BWUTE.js"
  ))),
  hr: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_hr-json" */
    "./common-errors_hr-RWY64K7L.js"
  ))),
  hu: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_hu-json" */
    "./common-errors_hu-QBBCBMMB.js"
  ))),
  id: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_id-json" */
    "./common-errors_id-XHADDAJD.js"
  ))),
  it: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_it-json" */
    "./common-errors_it-PTBEZETM.js"
  ))),
  ja: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ja-json" */
    "./common-errors_ja-HZQFUKT4.js"
  ))),
  ko: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ko-json" */
    "./common-errors_ko-6U32HL7I.js"
  ))),
  lt: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_lt-json" */
    "./common-errors_lt-4KBOUDLP.js"
  ))),
  lv: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_lv-json" */
    "./common-errors_lv-WBN6RFLD.js"
  ))),
  ms: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ms-json" */
    "./common-errors_ms-VBHOWK2S.js"
  ))),
  nl: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_nl-json" */
    "./common-errors_nl-Y2GEKEDW.js"
  ))),
  no: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_no-json" */
    "./common-errors_no-NXCNA3ZW.js"
  ))),
  pl: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_pl-json" */
    "./common-errors_pl-2PNPIR5U.js"
  ))),
  pt: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_pt-json" */
    "./common-errors_pt-OY5JGVOF.js"
  ))),
  ro: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ro-json" */
    "./common-errors_ro-LYELKOPQ.js"
  ))),
  ru: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_ru-json" */
    "./common-errors_ru-RMWOJMPU.js"
  ))),
  sk: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_sk-json" */
    "./common-errors_sk-MVMGHSRL.js"
  ))),
  sl: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_sl-json" */
    "./common-errors_sl-CHPXKGNR.js"
  ))),
  sv: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_sv-json" */
    "./common-errors_sv-QHJJIJDP.js"
  ))),
  th: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_th-json" */
    "./common-errors_th-Z2MHP73L.js"
  ))),
  tl: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_tl-json" */
    "./common-errors_tl-LPFJRVGY.js"
  ))),
  tr: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_tr-json" */
    "./common-errors_tr-NCLDYOQM.js"
  ))),
  uk: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_uk-json" */
    "./common-errors_uk-XGLJ4WNV.js"
  ))),
  vi: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_vi-json" */
    "./common-errors_vi-T537GXFW.js"
  ))),
  zh: () => Promise.resolve().then(() => __toESM(__require(
    /* webpackChunkName: "common-errors_zh-json" */
    "./common-errors_zh-5CL6YCVI.js"
  )))
};

// ../../node_modules/@wix/error-handler/dist/esm/state/asyncMessagesLoader.js
var resolveMessages = (messages) => typeof messages.default === "object" ? messages.default : messages;
var asyncMessagesLoader = async (locale) => {
  const factory2 = translationsImportsMap[locale];
  if (factory2 == null) {
    throw new Error("@wix/cairo: Failed to find translations for locale '".concat(locale, "'"));
  }
  return resolveMessages(await factory2());
};

// ../../node_modules/@wix/error-handler/dist/esm/state/TranslationsState.js
var TranslationsState = class {
  constructor(_params) {
    _defineProperty(this, "i18n", void 0);
    _defineProperty(this, "_initPromise", void 0);
    _defineProperty(this, "_ready", void 0);
    _defineProperty(this, "translate", (key, params) => this.i18n.t(key, params));
    _defineProperty(this, "getTranslateFn", async () => {
      await this.getInitPromise();
      return this.translate;
    });
    this.i18n = _params.createI18n({
      asyncMessagesLoader,
      disableAutoInit: true
    });
    this._initPromise = new Promise(async (resolve) => {
      let failedLoading = false;
      const onFailedLoading = (lng, _ns, err) => {
        if (lng !== "en") {
          return;
        }
        this.i18n.off("failedLoading", onFailedLoading);
        failedLoading = true;
        resolve(err);
      };
      this.i18n.on("failedLoading", onFailedLoading);
      try {
        await this.i18n.init();
        if (failedLoading) {
          return;
        }
        resolve(null);
        this._ready = true;
      } catch (e) {
        resolve(e);
      }
    });
  }
  async getInitPromise() {
    const error = await this._initPromise;
    if (error) {
      throw error;
    }
  }
};

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportErrorResolutionBi.js
init_define_process_env();
function reportErrorResolutionBi(errorHandler, params) {
  var _errorCodesMap$applic;
  const {
    errorAccessor,
    errorCodesMap
  } = params;
  const {
    biLogger
  } = errorHandler;
  const {
    error,
    applicationError
  } = errorAccessor;
  const code = applicationError == null ? void 0 : applicationError.code;
  const applicationErrorMapping = errorCodesMap == null || (_errorCodesMap$applic = errorCodesMap.applicationError) == null ? void 0 : _errorCodesMap$applic[code];
  biLogger.report(withoutDefaults(httpClientErrorMappingSrc176Evid100)({
    error_opt_out: applicationErrorMapping === false,
    is_override_error: String(errorCodesMap != null),
    session_id: error == null ? void 0 : error._errorHandlerSessionId
  }));
}

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/index.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/stringify.js
init_define_process_env();
var byteToHex = [];
for (i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
var i;
function unsafeStringify(arr2, offset = 0) {
  return (byteToHex[arr2[offset + 0]] + byteToHex[arr2[offset + 1]] + byteToHex[arr2[offset + 2]] + byteToHex[arr2[offset + 3]] + "-" + byteToHex[arr2[offset + 4]] + byteToHex[arr2[offset + 5]] + "-" + byteToHex[arr2[offset + 6]] + byteToHex[arr2[offset + 7]] + "-" + byteToHex[arr2[offset + 8]] + byteToHex[arr2[offset + 9]] + "-" + byteToHex[arr2[offset + 10]] + byteToHex[arr2[offset + 11]] + byteToHex[arr2[offset + 12]] + byteToHex[arr2[offset + 13]] + byteToHex[arr2[offset + 14]] + byteToHex[arr2[offset + 15]]).toLowerCase();
}

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/rng.js
init_define_process_env();
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/v4.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/native.js
init_define_process_env();
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// ../../node_modules/@wix/error-handler/node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  var rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (var i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportGetResolvedErrorBi.js
init_define_process_env();
function reportGetResolvedErrorBi(errorHandler, params) {
  const {
    message,
    action,
    errorAccessor,
    errorResolution
  } = params;
  const {
    biLogger,
    commonErrorsMapState,
    translations
  } = errorHandler;
  const {
    error
  } = errorAccessor;
  const {
    consumerResolvedError
  } = errorResolution != null ? errorResolution : {};
  biLogger.report(withoutDefaults(getResolvedErrorSrc176Evid101)({
    session_id: error == null ? void 0 : error._errorHandlerSessionId,
    translated_message: message,
    action_text: action == null ? void 0 : action.text,
    is_consumer_resolved_error: consumerResolvedError != null,
    common_errors_load_failed: String(commonErrorsMapState.commonErrors == null),
    isEn: translations.i18n.language === "en"
  }));
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportShowErrorBi.js
init_define_process_env();
function reportShowErrorBi(errorHandler, params) {
  var _errorAccessor$error;
  const {
    message,
    action,
    errorAccessor
  } = params;
  const {
    biLogger,
    translations
  } = errorHandler;
  biLogger.report(withoutDefaults(showErrorSrc176Evid102)({
    session_id: (_errorAccessor$error = errorAccessor.error) == null ? void 0 : _errorAccessor$error._errorHandlerSessionId,
    displayed_message: message,
    displayed_action: action == null ? void 0 : action.text,
    action_was_provided: String((action == null ? void 0 : action.onClick) != null),
    isEn: translations.i18n.language === "en"
  }));
}

// ../../node_modules/@wix/error-handler/dist/esm/state/CommonErrorsMapState.js
init_define_process_env();

// ../../node_modules/@wix/error-handler/dist/esm/state/getErrorCodesMap.js
init_define_process_env();
var getErrorCodesMap = () => Promise.resolve().then(() => __toESM(__require(
  /* webpackChunkName: "error-handler-commonErrorsMapping" */
  "./commonErrorsMapping-LZAS2WHP.js"
)));

// ../../node_modules/@wix/error-handler/dist/esm/state/CommonErrorsMapState.js
var CommonErrorsMapState = class {
  constructor(params) {
    var _a;
    _defineProperty(this, "translations", void 0);
    _defineProperty(this, "errorMonitor", void 0);
    _defineProperty(this, "webWindow", void 0);
    _defineProperty(this, "getErrorCodesMap", void 0);
    _defineProperty(this, "_initPromise", void 0);
    _defineProperty(this, "commonErrors", void 0);
    this.translations = params.translations;
    this.errorMonitor = params.errorMonitor;
    this.webWindow = params.webWindow;
    this.getErrorCodesMap = (_a = params.getErrorCodesMap) != null ? _a : getErrorCodesMap;
    this._initPromise = this._init();
  }
  async getInitPromise() {
    const error = await this._initPromise;
    if (error) {
      throw error;
    }
  }
  async _init() {
    try {
      const {
        setCommonErrors
      } = await this.getErrorCodesMap();
      await setCommonErrors(this);
      return null;
    } catch (e) {
      return e;
    }
  }
};

// ../../node_modules/@wix/error-handler/dist/esm/fallbackMessage.js
init_define_process_env();
var fallbackMessage = "This action wasn't completed due to a technical issue.";

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/reportErrorRetryBi.js
init_define_process_env();
function reportErrorRetryBi(errorHandler, params) {
  const {
    biLogger
  } = errorHandler;
  const {
    errorAccessor
  } = params;
  const {
    error
  } = errorAccessor;
  const sessionId = error == null ? void 0 : error._errorHandlerSessionId;
  if (!sessionId) {
    return;
  }
  biLogger.report(withoutDefaults(retryErrorSrc176Evid103)({
    session_id: sessionId
  }));
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/ErrorHandlerV2.js
init_define_process_env();
var ErrorHandlerV2 = class {
  constructor(_errorHandler) {
    _defineProperty(this, "errorHandler", void 0);
    _defineProperty(this, "withErrorHandler", async (fn, errorCodesMap) => {
      return this.errorHandler.withErrorHandler(fn, {
        errorCodesMap: {
          validationError: errorCodesMap,
          statusCodeError: errorCodesMap,
          applicationError: Object.entries(errorCodesMap).reduce((acc, _ref) => {
            let [key, value] = _ref;
            if (value) {
              acc[key] = (_, error) => value(error);
            }
            return acc;
          }, {}),
          serverError: errorCodesMap.serverError
        }
      });
    });
    _defineProperty(this, "getResolvedError", (error) => {
      var _a, _b;
      const {
        errorHandler
      } = this;
      const {
        errorMonitor
      } = errorHandler;
      try {
        const errorAccessor = new ErrorAccessor({
          error
        });
        const {
          httpError,
          error: e
        } = errorAccessor;
        const errorResolution = errorHandler._resolveError(errorAccessor);
        const resolvedError = e == null ? void 0 : e._errorHandlerResolvedError;
        const message = (_a = resolvedError == null ? void 0 : resolvedError.message) != null ? _a : fallbackMessage;
        const action = resolvedError == null ? void 0 : resolvedError.action;
        const requestId = (_b = resolvedError == null ? void 0 : resolvedError.requestId) != null ? _b : httpError == null ? void 0 : httpError.requestId;
        reportGetResolvedErrorBi(errorHandler, {
          message,
          action,
          errorAccessor,
          errorResolution
        });
        return {
          message,
          action,
          requestId,
          ...resolvedError
        };
      } catch (e) {
        console.error(e);
        errorMonitor.captureException(e);
        throw e;
      }
    });
    _defineProperty(this, "showError", (error, props) => {
      this.errorHandler.showError(error, props);
    });
    _defineProperty(this, "reportRetryAttempt", (error) => {
      this.errorHandler.reportRetryAttempt(error);
    });
    _defineProperty(this, "handleError", (error, options) => {
      this.errorHandler.handleError(error, options);
    });
    this.errorHandler = _errorHandler;
  }
};

// ../../node_modules/@wix/error-handler/dist/esm/util/dedupeRequestId.js
init_define_process_env();
function dedupeRequestId(requestId) {
  var _requestId$split$;
  if (requestId == null) {
    return requestId;
  }
  return (_requestId$split$ = requestId.split(",")[0]) == null ? void 0 : _requestId$split$.trim();
}

// ../../node_modules/@wix/error-handler/dist/esm/error-handler/ErrorHandler.js
var ErrorHandler = class {
  constructor(params) {
    var _a, _b;
    var _this = this;
    _defineProperty(this, "environment", void 0);
    _defineProperty(this, "biDefaultsOverrides", void 0);
    _defineProperty(this, "biLogger", void 0);
    _defineProperty(this, "errorMonitor", void 0);
    _defineProperty(this, "experiments", void 0);
    _defineProperty(this, "platformShowError", void 0);
    _defineProperty(this, "translations", void 0);
    _defineProperty(this, "commonErrorsMapState", void 0);
    _defineProperty(this, "onlineManager", void 0);
    _defineProperty(this, "webWindow", void 0);
    _defineProperty(this, "_skipWaitTranslations", void 0);
    _defineProperty(this, "v2", void 0);
    _defineProperty(this, "handleError", function(error, options) {
      if (options === void 0) {
        options = {};
      }
      if (_this._isErrorHandlerDisabled()) {
        return;
      }
      const {
        errorMonitor
      } = _this;
      try {
        const errorAccessor = new ErrorAccessor({
          error
        });
        _this._setErrorHandlerSessionId(errorAccessor);
        reportErrorBi(_this, {
          errorAccessor,
          requestOptions: options.requestOptions
        });
      } catch (e) {
        console.error(e);
        errorMonitor.captureException(e);
      }
    });
    _defineProperty(this, "withErrorHandler", async (fn, options) => {
      try {
        return await fn();
      } catch (error) {
        this._setErrorHandlerErrorCodesMap(error, options);
        if (define_process_env_default.NODE_ENV === "test" && !this._skipWaitTranslations) {
          await this.commonErrorsMapState.getInitPromise();
        }
        throw error;
      }
    });
    _defineProperty(this, "getResolvedError", (error) => {
      var _a2;
      const {
        errorMonitor
      } = this;
      try {
        const errorAccessor = new ErrorAccessor({
          error
        });
        const {
          applicationError,
          validationError,
          httpError,
          error: e
        } = errorAccessor;
        const errorResolution = this._resolveError(errorAccessor);
        const resolvedError = e == null ? void 0 : e._errorHandlerResolvedError;
        const message = (_a2 = resolvedError == null ? void 0 : resolvedError.message) != null ? _a2 : fallbackMessage;
        reportGetResolvedErrorBi(this, {
          message,
          action: resolvedError == null ? void 0 : resolvedError.action,
          errorAccessor,
          errorResolution
        });
        return {
          message,
          action: resolvedError == null ? void 0 : resolvedError.action,
          validationError,
          applicationError,
          httpError,
          requestId: dedupeRequestId(httpError == null ? void 0 : httpError.requestId)
        };
      } catch (e) {
        console.error(e);
        errorMonitor.captureException(e);
        throw e;
      }
    });
    _defineProperty(this, "reportRetryAttempt", (error) => {
      const {
        errorMonitor
      } = this;
      try {
        const errorAccessor = new ErrorAccessor({
          error
        });
        reportErrorRetryBi(this, {
          errorAccessor
        });
      } catch (e) {
        console.error(e);
        errorMonitor.captureException(e);
      }
    });
    _defineProperty(this, "showError", (error, props) => {
      var _a2, _b2, _c;
      const {
        platformShowError,
        errorMonitor
      } = this;
      if (!platformShowError) {
        return;
      }
      try {
        var _errorAccessor$httpEr;
        const errorAccessor = new ErrorAccessor({
          error
        });
        const {
          error: e
        } = errorAccessor;
        this._resolveError(errorAccessor);
        const resolvedError = e == null ? void 0 : e._errorHandlerResolvedError;
        const showErrorProps = {
          ...resolvedError,
          ...props
        };
        const message = (_b2 = (_a2 = props == null ? void 0 : props.message) != null ? _a2 : resolvedError == null ? void 0 : resolvedError.message) != null ? _b2 : fallbackMessage;
        const action = (_c = props == null ? void 0 : props.action) != null ? _c : resolvedError == null ? void 0 : resolvedError.action;
        reportShowErrorBi(this, {
          message,
          action,
          errorAccessor
        });
        platformShowError({
          ...showErrorProps,
          requestId: dedupeRequestId((_errorAccessor$httpEr = errorAccessor.httpError) == null ? void 0 : _errorAccessor$httpEr.requestId),
          message,
          action: action != null && action.onClick ? {
            text: action.text,
            onClick: action.onClick
          } : void 0
        });
      } catch (e) {
        console.error(e);
        errorMonitor.captureException(e);
      }
    });
    this.environment = params.environment;
    this.biDefaultsOverrides = params.biDefaultsOverrides;
    this.biLogger = createBiLoggerWithDefaults(params);
    this.errorMonitor = params.createErrorMonitor({
      dsn: "https://831e1d96e7944c6aae0c9ed9d6babd35@sentry.wixpress.com/5896"
    });
    this.experiments = params.createExperiments == null ? void 0 : params.createExperiments({
      scopes: ["error-handler"]
    });
    this.platformShowError = params.showError;
    this.translations = new TranslationsState(params);
    this.onlineManager = (_a = params.onlineManager) != null ? _a : typeof navigator !== "undefined" ? navigator : {
      onLine: true
    };
    this.webWindow = (_b = params.webWindow) != null ? _b : typeof window !== "undefined" ? window : void 0;
    this.commonErrorsMapState = new CommonErrorsMapState(this);
    this.v2 = new ErrorHandlerV2(this);
  }
  _setErrorHandlerSessionId(errorAccessor) {
    const {
      error
    } = errorAccessor;
    if (!error) {
      return;
    }
    error._errorHandlerSessionId = v4_default();
  }
  _setErrorHandlerResolvedError(errorAccessor, errorResolution) {
    const {
      error
    } = errorAccessor;
    if (!error) {
      return;
    }
    error._errorHandlerResolvedError = errorResolution.errorToShow;
  }
  _setErrorHandlerErrorCodesMap(error, options) {
    if (options === void 0) {
      options = {};
    }
    const {
      errorCodesMap
    } = options;
    const errorAccessor = new ErrorAccessor({
      error
    });
    reportErrorResolutionBi(this, {
      errorAccessor,
      errorCodesMap
    });
    const {
      error: e
    } = errorAccessor;
    if (!e) {
      return;
    }
    e._errorHandlerErrorCodesMap = errorCodesMap;
  }
  _isErrorHandlerDisabled() {
    const {
      experiments
    } = this;
    return experiments != null && !experiments.enabled("specs.os.EnableErrorHandlerInEditor");
  }
  _resolveError(errorAccessor, options) {
    var _a;
    var _errorAccessor$error;
    if (options === void 0) {
      options = {};
    }
    if (this._isErrorHandlerDisabled()) {
      return;
    }
    const errorCodesMap = (_a = options.errorCodesMap) != null ? _a : (_errorAccessor$error = errorAccessor.error) == null ? void 0 : _errorAccessor$error._errorHandlerErrorCodesMap;
    const errorResolution = createErrorResolution(this, {
      errorAccessor,
      errorCodesMap
    });
    this._setErrorHandlerResolvedError(errorAccessor, errorResolution);
    return errorResolution;
  }
  toJSON() {
    return {};
  }
};

// ../../node_modules/@wix/wix-experiments/dist/es/src/index.js
init_define_process_env();

// ../../node_modules/@wix/wix-experiments/dist/es/src/experiments.js
init_define_process_env();
import { __assign as __assign2, __extends } from "tslib";

// ../../node_modules/@wix/wix-experiments/dist/es/src/base-url.js
init_define_process_env();
function baseUrl(isNewApi, maybeBaseUrl) {
  var maybeTestkitUrl = define_process_env_default.NODE_ENV === "test" && isNewApi && "http://localhost:5700";
  return maybeBaseUrl || maybeTestkitUrl || "";
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/conduction-utils/global-defaults.js
init_define_process_env();
import { __assign } from "tslib";

// ../../node_modules/@wix/wix-experiments/dist/es/src/conduction-method.js
init_define_process_env();
var ConductionMethod;
(function(ConductionMethod2) {
  ConductionMethod2["Default"] = "";
  ConductionMethod2["OwnerAccount"] = "owner-account";
})(ConductionMethod || (ConductionMethod = {}));

// ../../node_modules/@wix/wix-experiments/dist/es/src/conduction-utils/global-defaults.js
var GlobalDefaultKeys = {
  UseNewApi: "__WIXEXP_USE_NEW_API",
  ConductionMethod: "__WIXEXP_CONDUCTION_METHOD_",
  OwnerAccountId: "__WIXEXP_OWNER_ACCOUNT_ID_",
  LoggedInUserId: "__WIXEXP_LOGGED_IN_USER_ID_"
};
function getValueOrEmptyObject(objectKey, globalValueKey, type) {
  var _a, _b;
  if (typeof self !== "undefined") {
    if (typeof type === "function") {
      if (typeof type(self[globalValueKey]) !== "undefined") {
        return _a = {}, _a[objectKey] = type(self[globalValueKey]), _a;
      }
    } else if (typeof self[globalValueKey] === type) {
      return _b = {}, _b[objectKey] = self[globalValueKey], _b;
    }
  }
  return {};
}
var checkConductionMethod = function(conductionMethod) {
  return Object.keys(ConductionMethod).filter(function(cm) {
    return ConductionMethod[cm] === conductionMethod;
  }).length > 0 ? conductionMethod : void 0;
};
function getGlobalDefaults() {
  return __assign(__assign(__assign(__assign({}, getValueOrEmptyObject("useNewApi", GlobalDefaultKeys.UseNewApi, "boolean")), getValueOrEmptyObject("conductionMethod", GlobalDefaultKeys.ConductionMethod, checkConductionMethod)), getValueOrEmptyObject("siteOwnerId", GlobalDefaultKeys.OwnerAccountId, "string")), getValueOrEmptyObject("loggedInUserId", GlobalDefaultKeys.LoggedInUserId, "string"));
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/conduction-utils/global-defaults-checks.js
init_define_process_env();
function shouldConductByAccountByDefault(globalDefaults) {
  return globalDefaults.conductionMethod === ConductionMethod.OwnerAccount && globalDefaults.siteOwnerId && globalDefaults.loggedInUserId;
}
function getGlobalRequestContext(globalDefaults) {
  if (shouldConductByAccountByDefault(globalDefaults)) {
    return {
      forSiteOwner: {
        siteOwnerId: globalDefaults.siteOwnerId,
        loggedInUserId: globalDefaults.loggedInUserId
      }
    };
  }
  return {};
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/conduction-utils/request-context.js
init_define_process_env();
var isNonEmptyString = function(value) {
  return typeof value === "string" && value !== "";
};
var buildForSiteOwnerQuery = function(forSiteOwner) {
  if (isNonEmptyString(forSiteOwner.loggedInUserId) && isNonEmptyString(forSiteOwner.siteOwnerId)) {
    return "&" + ("requestContext.forSiteOwner.loggedInUserId=" + forSiteOwner.loggedInUserId + "&") + ("requestContext.forSiteOwner.siteOwnerId=" + forSiteOwner.siteOwnerId);
  }
  return "";
};
var buildForSiteVisitorsQuery = function(forSiteVisitors) {
  if (isNonEmptyString(forSiteVisitors.visitorId) && isNonEmptyString(forSiteVisitors.siteOwnerId)) {
    return "&" + ("requestContext.forSiteVisitors.visitorId=" + forSiteVisitors.visitorId + "&") + ("requestContext.forSiteVisitors.siteOwnerId=" + forSiteVisitors.siteOwnerId);
  }
  return "";
};
var buildOverrideCriteriaQuery = function(overrideCriteria) {
  if (isNonEmptyString(overrideCriteria.entityId)) {
    return "&requestContext.overrideCriteria.entityId=" + overrideCriteria.entityId;
  }
  return "";
};
function getRequestContextQuery(requestContext) {
  if (requestContext === void 0) {
    requestContext = {};
  }
  var forSiteOwner = requestContext.forSiteOwner, forSiteVisitors = requestContext.forSiteVisitors, overrideCriteria = requestContext.overrideCriteria;
  var query = "";
  var fieldsPassed = ["forSiteOwner", "forSiteVisitors"].reduce(function(acc, cur) {
    return requestContext[cur] ? acc + 1 : acc;
  }, 0);
  if (fieldsPassed > 1) {
    throw new Error('Only one of "forSiteOwner" or "forSiteVisitors" is accepted.');
  }
  if (forSiteOwner) {
    query += buildForSiteOwnerQuery(forSiteOwner);
  }
  if (forSiteVisitors) {
    query += buildForSiteVisitorsQuery(forSiteVisitors);
  }
  if (overrideCriteria) {
    query += buildOverrideCriteriaQuery(overrideCriteria);
  }
  return query;
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/experiments-cache.js
init_define_process_env();
import { __awaiter, __generator, __values } from "tslib";

// ../../node_modules/@wix/wix-experiments/dist/es/src/experiments-data-utils.js
init_define_process_env();
function tryParse(data) {
  if (typeof data === "string") {
    try {
      return JSON.parse(data);
    } catch (e) {
    }
  }
  return data;
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/urlMap.js
init_define_process_env();
var petriUrlMap = {
  new: {
    conductAllInScope: "/_api/wix-laboratory-server/v1/laboratory/platform/conductAllInScope",
    conductExperiment: "/_api/wix-laboratory-server/v1/laboratory/platform/conductExperiment"
  },
  old: {
    conductAllInScope: "/_api/wix-laboratory-server/laboratory/conductAllInScope",
    conductExperiment: "/_api/wix-laboratory-server/laboratory/conductExperiment"
  }
};
var getAllInScopePath = function(scope, useNewApi) {
  if (scope === void 0) {
    scope = "";
  }
  if (useNewApi === void 0) {
    useNewApi = false;
  }
  var urlApi = useNewApi ? petriUrlMap.new.conductAllInScope + "?scope=" + encodeURIComponent(scope) : petriUrlMap.old.conductAllInScope + "?scope=" + encodeURIComponent(scope);
  return urlApi;
};
function isValidScopeUrl(url, useNewApi) {
  return url.indexOf(useNewApi ? petriUrlMap.new.conductAllInScope : petriUrlMap.old.conductAllInScope) !== -1;
}
var getExperimentPath = function(key, fallback, useNewApi) {
  if (key === void 0) {
    key = "";
  }
  if (fallback === void 0) {
    fallback = "";
  }
  if (useNewApi === void 0) {
    useNewApi = false;
  }
  var urlApi = useNewApi ? petriUrlMap.new.conductExperiment + "?key=" + encodeURIComponent(key) + "&fallbackValue=" + encodeURIComponent(fallback) : petriUrlMap.old.conductExperiment + "?key=" + encodeURIComponent(key) + "&fallback=" + encodeURIComponent(fallback);
  return urlApi;
};
function isUrlOfExperiment(url, specName, useNewApi) {
  var pattern = "" + getExperimentPath(specName, "", useNewApi);
  return url.includes(pattern);
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/experiments-cache.js
var ExperimentsRequestsCache = (
  /** @class */
  function() {
    function ExperimentsRequestsCache2() {
      this.urlMap = /* @__PURE__ */ new Map();
      this.pendingUrlMap = /* @__PURE__ */ new Map();
    }
    ExperimentsRequestsCache2.prototype.addUrlRequest = function(url, promise) {
      return __awaiter(this, void 0, void 0, function() {
        var _this = this;
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              this.pendingUrlMap.set(url, promise);
              return [4, promise.then(function(response) {
                return _this.addUrlResponse(url, response);
              })];
            case 1:
              _a.sent();
              return [
                2
                /*return*/
              ];
          }
        });
      });
    };
    ExperimentsRequestsCache2.prototype.addUrlResponse = function(url, response) {
      this.urlMap.set(url, response);
    };
    ExperimentsRequestsCache2.prototype.getUrlResponse = function(url) {
      return this.urlMap.get(url);
    };
    ExperimentsRequestsCache2.prototype.getUrlRequest = function(url) {
      return this.pendingUrlMap.get(url);
    };
    ExperimentsRequestsCache2.prototype.getExperimentValue = function(specName, useNewApi) {
      var e_1, _a;
      try {
        for (var _b = __values(this.urlMap.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {
          var url = _c.value;
          if (isUrlOfExperiment(url, specName, useNewApi)) {
            return this.urlMap.get(url);
          } else if (isValidScopeUrl(url, useNewApi)) {
            var jsonObject = tryParse(this.urlMap.get(url));
            if (typeof jsonObject === "object" && specName in jsonObject) {
              return jsonObject[specName];
            }
          }
        }
      } catch (e_1_1) {
        e_1 = { error: e_1_1 };
      } finally {
        try {
          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        } finally {
          if (e_1) throw e_1.error;
        }
      }
    };
    return ExperimentsRequestsCache2;
  }()
);
var NullCache = (
  /** @class */
  function() {
    function NullCache2() {
    }
    NullCache2.prototype.addUrlRequest = function() {
    };
    NullCache2.prototype.addUrlResponse = function() {
    };
    NullCache2.prototype.getUrlResponse = function() {
      return void 0;
    };
    NullCache2.prototype.getUrlRequest = function() {
      return void 0;
    };
    NullCache2.prototype.getExperimentValue = function() {
      return void 0;
    };
    return NullCache2;
  }()
);
function getCacheInstance() {
  if (define_process_env_default.NODE_ENV !== "production") {
    return new NullCache();
  }
  if (self.experimentsCacheV2 === void 0) {
    self.experimentsCacheV2 = new ExperimentsRequestsCache();
  }
  return self.experimentsCacheV2;
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/http-request.js
init_define_process_env();
function httpRequest(url) {
  return new Promise(function(resolve, reject) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);
    xhr.responseType = "text";
    xhr.withCredentials = true;
    xhr.onload = function() {
      if (xhr.status >= 200 && xhr.status < 400) {
        resolve(xhr.responseText);
      } else {
        reject(new Error("Failed to load " + url + ", status " + xhr.status));
      }
    };
    xhr.onerror = function() {
      return reject(new Error("Failed to load " + url));
    };
    xhr.send();
  });
}

// ../../node_modules/@wix/wix-experiments/dist/es/src/ReadOnlyExperiments.js
init_define_process_env();
var ReadOnlyExperiments = (
  /** @class */
  function() {
    function ReadOnlyExperiments2(options) {
      var _a;
      this.experiments = (_a = options.experiments) !== null && _a !== void 0 ? _a : {};
    }
    ReadOnlyExperiments2.prototype.get = function(key) {
      return this.experiments[key];
    };
    ReadOnlyExperiments2.prototype.enabled = function(key) {
      return this.get(key) === "true";
    };
    ReadOnlyExperiments2.prototype.pending = function() {
      return false;
    };
    ReadOnlyExperiments2.prototype.ready = function() {
      return Promise.resolve();
    };
    ReadOnlyExperiments2.prototype.all = function() {
      return this.experiments;
    };
    return ReadOnlyExperiments2;
  }()
);

// ../../node_modules/@wix/wix-experiments/dist/es/src/experiments.js
var noop = function() {
};
var Experiments = (
  /** @class */
  function(_super) {
    __extends(Experiments2, _super);
    function Experiments2(obj) {
      if (obj === void 0) {
        obj = {};
      }
      var _this = _super.call(this, obj) || this;
      var globalDefaults = getGlobalDefaults();
      _this.useNewApi = typeof obj.useNewApi !== "undefined" ? obj.useNewApi : globalDefaults.useNewApi || false;
      _this.experiments = obj.experiments || {};
      _this.loaders = /* @__PURE__ */ new Map();
      _this.baseUrl = baseUrl(_this.useNewApi, obj.baseUrl);
      _this.requestContext = obj.requestContext || getGlobalRequestContext(globalDefaults);
      _this.onError = obj.onError || noop;
      if (obj.scope) {
        _this.load(obj.scope);
      }
      if (obj.scopes) {
        obj.scopes.forEach(_this.load.bind(_this));
      }
      return _this;
    }
    Experiments2.prototype.add = function(obj) {
      this.experiments = __assign2(__assign2({}, this.experiments), obj);
    };
    Experiments2.prototype._addLoader = function(url, promise) {
      var _this = this;
      this.loaders.set(url, promise);
      promise.then(function() {
        _this.loaders.delete(url);
      });
      return promise;
    };
    Experiments2.prototype._getUrlWithFallback = function(url, fallback) {
      var _this = this;
      var cachedResponse = getCacheInstance().getUrlResponse(url);
      if (cachedResponse !== void 0) {
        return Promise.resolve(cachedResponse);
      }
      var cachedRequest = getCacheInstance().getUrlRequest(url);
      if (cachedRequest !== void 0) {
        return cachedRequest;
      }
      var existingRequest = this.loaders.get(url);
      if (existingRequest !== void 0) {
        return existingRequest;
      }
      var requestPromise = httpRequest(url);
      getCacheInstance().addUrlRequest(url, requestPromise);
      return requestPromise.catch(function(error) {
        _this.onError(error);
        return fallback;
      });
    };
    Experiments2.prototype.load = function(scope) {
      var _this = this;
      var scopeConductionPath = getAllInScopePath(scope, this.useNewApi);
      var requestContextQuery = this.useNewApi ? getRequestContextQuery(this.requestContext) : "";
      var url = "" + this.baseUrl + scopeConductionPath + requestContextQuery;
      var result = this._getUrlWithFallback(url, "{}").then(function(response) {
        return tryParse(response);
      }).then(function(response) {
        return _this.useNewApi ? response.values : response;
      }).then(function(obj) {
        _this.add(obj);
        return obj;
      });
      return this._addLoader(url, result);
    };
    Experiments2.prototype.conduct = function(spec, fallbackValue) {
      var _this = this;
      var cachedResponse = getCacheInstance().getExperimentValue(spec, this.useNewApi);
      if (cachedResponse !== void 0) {
        return this._addConductResult(spec, cachedResponse);
      }
      var experimentsPath = getExperimentPath(spec, fallbackValue, this.useNewApi);
      var requestContextQuery = this.useNewApi ? getRequestContextQuery(this.requestContext) : "";
      var url = "" + this.baseUrl + experimentsPath + requestContextQuery;
      var result = this._getUrlWithFallback(url, fallbackValue !== null && fallbackValue !== void 0 ? fallbackValue : "").then(function(response) {
        return _this._addConductResult(spec, response);
      });
      return this._addLoader(url, result);
    };
    Experiments2.prototype.pending = function() {
      return !!this.loaders.size;
    };
    Experiments2.prototype.ready = function() {
      return Promise.all(Array.from(this.loaders.values()));
    };
    Experiments2.prototype._addConductResult = function(spec, conductResponse) {
      var _a;
      var value = this.useNewApi ? JSON.parse(conductResponse).value : conductResponse;
      this.add((_a = {}, _a[spec] = value, _a));
      return Promise.resolve(value);
    };
    return Experiments2;
  }(ReadOnlyExperiments)
);

// ../../node_modules/@wix/fedops-logger/dist/es/src/logger-factory.js
init_define_process_env();

// ../../node_modules/@wix/fedops-presets/dist/es/src/index.js
init_define_process_env();

// ../../node_modules/@wix/fedops-presets/dist/es/src/loader.js
init_define_process_env();

// ../../node_modules/@wix/fedops-presets/dist/es/presets/default.json
var default_default = {
  src: 72,
  persistentEndpoint: "performance",
  nonPersistentEndpoint: "fed",
  successRateRoot: "fedops_events",
  performanceRoot: "fedops_performance",
  appLoadStart: {
    eventId: 14
  },
  appLoadFinish: {
    eventId: 11
  },
  loadPhaseStart: {
    eventId: 12
  },
  loadPhaseFinish: {
    eventId: 13
  },
  interactionStart: {
    eventId: 15
  },
  interactionEnd: {
    eventId: 16
  },
  error: {
    eventId: 17
  },
  resource: {
    eventId: 18
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/ds.json
var ds_default = {
  src: 72,
  persistentEndpoint: "ds-performance",
  nonPersistentEndpoint: "ds-performance",
  successRateRoot: "ds_events",
  performanceRoot: "ds_performance",
  appLoadStart: {
    eventId: 31
  },
  appLoadFinish: {
    eventId: 33
  },
  interactionStart: {
    eventId: 34
  },
  interactionEnd: {
    eventId: 35
  },
  loadPhaseStart: {
    eventId: 38
  },
  loadPhaseFinish: {
    eventId: 32
  },
  error: {
    eventId: 36
  },
  resource: {
    eventId: 37
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/editor.json
var editor_default = {
  src: 72,
  persistentEndpoint: "editor-performance",
  nonPersistentEndpoint: "editor-performance",
  successRateRoot: "editor_events",
  performanceRoot: "editor_performance",
  appLoadStart: {
    eventId: 41
  },
  appLoadFinish: {
    eventId: 43
  },
  interactionStart: {
    eventId: 44
  },
  interactionEnd: {
    eventId: 45
  },
  loadPhaseStart: {
    eventId: 48
  },
  loadPhaseFinish: {
    eventId: 42
  },
  error: {
    eventId: 46
  },
  resource: {
    eventId: 47
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/bolt.json
var bolt_default = {
  src: 72,
  persistentEndpoint: "bolt-performance",
  nonPersistentEndpoint: "bolt-performance",
  successRateRoot: "bolt_events",
  performanceRoot: "bolt_performance",
  appLoadStart: {
    eventId: 21
  },
  loadPhaseStart: {
    eventId: 28
  },
  loadPhaseFinish: {
    eventId: 22
  },
  appLoadFinish: {
    eventId: 23
  },
  interactionStart: {
    eventId: 24
  },
  interactionEnd: {
    eventId: 25
  },
  error: {
    eventId: 26
  },
  resource: {
    eventId: 27
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/ooi.json
var ooi_default = {
  src: 72,
  persistentEndpoint: "ooi-performance",
  nonPersistentEndpoint: "ooi-performance",
  successRateRoot: "fedops_events",
  performanceRoot: "fedops_performance",
  appLoadStart: {
    eventId: 61
  },
  appLoadFinish: {
    eventId: 63
  },
  interactionStart: {
    eventId: 64
  },
  interactionEnd: {
    eventId: 65
  },
  loadPhaseStart: {
    eventId: 68
  },
  loadPhaseFinish: {
    eventId: 62
  },
  error: {
    eventId: 66
  },
  resource: {
    eventId: 67
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/mobile.json
var mobile_default = {
  src: 72,
  persistentEndpoint: "mobile-performance",
  nonPersistentEndpoint: "mobile-performance",
  successRateRoot: "fedops_events",
  performanceRoot: "fedops_performance",
  appLoadStart: {
    eventId: 51
  },
  appLoadFinish: {
    eventId: 53
  },
  interactionStart: {
    eventId: 54
  },
  interactionEnd: {
    eventId: 55
  },
  loadPhaseStart: {
    eventId: 58
  },
  loadPhaseFinish: {
    eventId: 52
  },
  error: {
    eventId: 56
  },
  resource: {
    eventId: 57
  }
};

// ../../node_modules/@wix/fedops-presets/dist/es/presets/presets-types.js
init_define_process_env();
var presetsTypes = {
  DEFAULT: "DEFAULT",
  DS: "DS",
  EDITOR: "EDITOR",
  OOI: "OOI",
  BOLT: "BOLT",
  MOBILE: "MOBILE"
};

// ../../node_modules/@wix/fedops-presets/dist/es/src/loader.js
function presetLoader(presetType) {
  switch (presetType) {
    case presetsTypes.DEFAULT:
      return default_default;
    case presetsTypes.BOLT:
      return bolt_default;
    case presetsTypes.DS:
      return ds_default;
    case presetsTypes.EDITOR:
      return editor_default;
    case presetsTypes.OOI:
      return ooi_default;
    case presetsTypes.MOBILE:
      return mobile_default;
    default:
      return default_default;
  }
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/env.js
init_define_process_env();
var envFallback = {};
var env = function env2() {
  if (typeof window !== "undefined") {
    return window;
  } else if (typeof globalThis !== "undefined") {
    return globalThis;
  } else if (typeof global !== "undefined") {
    return global;
  } else if (typeof WorkerGlobalScope !== "undefined") {
    return WorkerGlobalScope;
  } else {
    return envFallback;
  }
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/conf.js
init_define_process_env();
var SESSION_ID_STORAGE_KEY = "fedops.logger.sessionId";
var DEFAULT_APP_VERSION = "0.0.0";

// ../../node_modules/@wix/fedops-logger/dist/es/src/reporter/reporter-factory.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/reporter/reporter.js
init_define_process_env();
var defaultLoggerFactory = __toESM(require_logger());
var Reporter = /* @__PURE__ */ function() {
  function Reporter2(_ref) {
    var biLoggerFactory = _ref.biLoggerFactory, baseUrl2 = _ref.baseUrl, preset = _ref.preset, useBatch = _ref.useBatch;
    this._preset = preset;
    var shouldBatch = !(useBatch === false);
    this._factory = biLoggerFactory || defaultLoggerFactory.factory({
      host: baseUrl2,
      useBatch: shouldBatch
    });
    this._publisher = this._factory.logger();
    this._nonBatchedPublisher = this._factory.logger({
      useBatch: false
    });
  }
  var _proto = Reporter2.prototype;
  _proto.flush = function flush() {
    this._publisher.flush();
  };
  _proto.report = function report(data, reporterEndpoint, params) {
    if (!data) {
      return null;
    }
    var endpoint = reporterEndpoint || this._preset.nonPersistentEndpoint;
    if (params && params.useBatch === false) {
      return this._nonBatchedPublisher.log(data, {
        endpoint,
        category: "essential"
      });
    }
    return this._publisher.log(data, {
      endpoint,
      category: "essential"
    });
  };
  return Reporter2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/reporter/reporter-factory.js
var ReporterFactory;
function create(_temp) {
  var _ref = _temp === void 0 ? {} : _temp, biLoggerFactory = _ref.biLoggerFactory, baseUrl2 = _ref.baseUrl, endpoint = _ref.endpoint, preset = _ref.preset, useBatch = _ref.useBatch;
  if (!ReporterFactory) {
    return new Reporter({
      biLoggerFactory,
      baseUrl: baseUrl2,
      endpoint,
      preset,
      useBatch
    });
  } else {
    return ReporterFactory({
      preset
    });
  }
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/base-logger.js
init_define_process_env();
init_src();

// ../../node_modules/@wix/fedops-logger/dist/es/src/performance/performance.js
init_define_process_env();
var performance_default = {
  getNavigation: function getNavigation() {
    var _env$performance;
    return ((_env$performance = env().performance) == null ? void 0 : _env$performance.navigation) || {};
  },
  /**
   * get all loaded resources
   */
  getResources: function getResources() {
    var _env$performance2;
    return ((_env$performance2 = env().performance) == null ? void 0 : _env$performance2.getEntriesByType == null ? void 0 : _env$performance2.getEntriesByType("resource")) || [];
  },
  /**
   * get all loaded resources
   */
  getMarks: function getMarks() {
    var _env$performance3;
    return ((_env$performance3 = env().performance) == null ? void 0 : _env$performance3.getEntriesByType == null ? void 0 : _env$performance3.getEntriesByType("mark")) || [];
  },
  getTiming: function getTiming() {
    var _env$performance4;
    return ((_env$performance4 = env().performance) == null ? void 0 : _env$performance4.timing) || {};
  },
  clearResourceTimings: function clearResourceTimings() {
    var _env$performance5;
    (_env$performance5 = env().performance) == null ? void 0 : _env$performance5.clearResourceTimings == null ? void 0 : _env$performance5.clearResourceTimings();
  },
  /**
   * Duration relative to navigation start (env().performance.timing.navigationStart)
   * fallback to: performance.now -> now (nodejs) -> getTime()
   */
  now: function now() {
    var _env$performance6, _performance;
    return ((_env$performance6 = env().performance) == null ? void 0 : _env$performance6.now == null ? void 0 : _env$performance6.now()) || typeof performance !== "undefined" && ((_performance = performance) == null ? void 0 : _performance.now == null ? void 0 : _performance.now()) || (/* @__PURE__ */ new Date()).getTime();
  },
  /**
   * Duration from fetch start to response end
   */
  responseEndTime: function responseEndTime() {
    var _performance2, _performance2$timing, _performance3, _performance3$timing;
    var fetchStart = (_performance2 = performance) == null ? void 0 : (_performance2$timing = _performance2.timing) == null ? void 0 : _performance2$timing.fetchStart;
    var responseEnd = (_performance3 = performance) == null ? void 0 : (_performance3$timing = _performance3.timing) == null ? void 0 : _performance3$timing.responseEnd;
    if (fetchStart && responseEnd) {
      return responseEnd - fetchStart;
    }
  },
  /**
   * Create a performance timestamp
   */
  mark: function mark(name) {
    var _env$performance7;
    (_env$performance7 = env().performance) == null ? void 0 : _env$performance7.mark == null ? void 0 : _env$performance7.mark(name);
  },
  /**
   * Record a performance measurement
   */
  measure: function measure(name, startMark, endMark) {
    var _env$performance8;
    (_env$performance8 = env().performance) == null ? void 0 : _env$performance8.measure == null ? void 0 : _env$performance8.measure(name, startMark, endMark);
  },
  /**
   * Get performance entries by name
   */
  getEntriesByName: function getEntriesByName(name) {
    var _env$performance9;
    return ((_env$performance9 = env().performance) == null ? void 0 : _env$performance9.getEntriesByName == null ? void 0 : _env$performance9.getEntriesByName(name)) || [];
  }
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/times/times.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/global-app-data/global-app-data.js
init_define_process_env();
function getAppData(appName) {
  return ((env().fedops || {}).apps || {})[appName];
}
function initializeFedops() {
  env().fedops = env().fedops || {};
  env().fedops.apps = env().fedops.apps || {};
}
function initializeApp(appName) {
  env().fedops.apps[appName] = env().fedops.apps[appName] || {};
}
function initializeGlobal(appName) {
  initializeFedops();
  initializeApp(appName);
}
function getLoadStartTime(appName) {
  return (getAppData(appName) || {}).startLoadTime || 0;
}
function setLoadStartTime(appName, startLoadTime) {
  return (getAppData(appName) || {}).startLoadTime = startLoadTime;
}
function setSessionId(sessionId) {
  return (env().fedops || {}).sessionId = sessionId;
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/times/times.js
var Times = /* @__PURE__ */ function() {
  function Times2(appName) {
    this.appName = appName;
    this.apps = {};
    this.apps[appName] = {};
  }
  var _proto = Times2.prototype;
  _proto._getKeyForApp = function _getKeyForApp(appId, widgetId) {
    if (appId === void 0) {
      appId = this.appName;
    }
    return widgetId ? appId + "_" + widgetId : appId;
  };
  _proto.setLoadStarted = function setLoadStarted(_temp) {
    var _ref = _temp === void 0 ? {} : _temp, appId = _ref.appId, widgetId = _ref.widgetId;
    var key = this._getKeyForApp(appId, widgetId);
    if (!this.apps[key]) {
      this.apps[key] = {};
    }
    var loadStartTime = performance_default.now();
    this.apps[key].startLoadTime = loadStartTime;
    if (!appId) {
      setLoadStartTime(key, loadStartTime);
    }
  };
  _proto.getLoadStartTime = function getLoadStartTime2(_temp2) {
    var _ref2 = _temp2 === void 0 ? {} : _temp2, appId = _ref2.appId, widgetId = _ref2.widgetId;
    var key = this._getKeyForApp(appId, widgetId);
    var loadStartTime = this.getLoadStartTimeFromInstance(key) || getLoadStartTime(key) || 0;
    return Math.floor(loadStartTime);
  };
  _proto.getLoadStartTimeFromInstance = function getLoadStartTimeFromInstance(key) {
    return this.apps[key] && this.apps[key].startLoadTime;
  };
  _proto.getAppLoadTime = function getAppLoadTime(_temp3) {
    var _ref3 = _temp3 === void 0 ? {} : _temp3, appId = _ref3.appId, widgetId = _ref3.widgetId;
    return Math.floor(performance_default.now() - this.getLoadStartTime({
      appId,
      widgetId
    }));
  };
  _proto.getFirstRequestDuration = function getFirstRequestDuration(_temp4) {
    var _ref4 = _temp4 === void 0 ? {} : _temp4, appId = _ref4.appId, widgetId = _ref4.widgetId;
    return this.getLoadStartTime({
      appId,
      widgetId
    });
  };
  return Times2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-source/data-source.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/common/data-item.js
init_define_process_env();
var DataItem = /* @__PURE__ */ function() {
  function DataItem2(data) {
    if (data === void 0) {
      data = void 0;
    }
    this.data = data;
  }
  var _proto = DataItem2.prototype;
  _proto.isActive = function isActive() {
    return true;
  };
  _proto["export"] = function _export() {
    return this.data;
  };
  return DataItem2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-source/data-source.js
var DataSource = /* @__PURE__ */ function() {
  function DataSource2(item) {
    var _this = this;
    if (item === void 0) {
      item = null;
    }
    this.items = [];
    if (item) {
      (typeof item.length === "undefined" ? [item] : item).forEach(function(item2) {
        return _this.addItem(item2);
      });
    }
  }
  var _proto = DataSource2.prototype;
  _proto.clone = function clone() {
    return new DataSource2(this.items.slice());
  };
  _proto.addItem = function addItem(item) {
    this.items.push(item instanceof DataItem ? item : new DataItem(item));
    return this;
  };
  _proto.mergeItems = function mergeItems() {
    var res = {};
    for (var i = 0; i < this.items.length; i++) {
      var item = this.items[i];
      if (!item.isActive()) {
        res = null;
        break;
      }
      var data = item["export"]();
      for (var key in data) {
        if (data.hasOwnProperty(key)) {
          res[key] = data[key];
        }
      }
    }
    return res;
  };
  return DataSource2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/session-manager/session-manager.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/storage/storage.js
init_define_process_env();
var storage_default = {
  getItem: function getItem(key) {
    try {
      return env().localStorage && env().localStorage.getItem(key);
    } catch (e) {
    }
  },
  setItem: function setItem(key, value) {
    try {
      return env().localStorage && env().localStorage.setItem(key, value);
    } catch (e) {
    }
  }
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/utils.js
init_define_process_env();
var generateGuid = function generateGuid2() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
    var r = Math.random() * 16 | 0, v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var phaseNameExtractor = /\[fedops] phase:([^ ]+) ([^ ]+) ?(.*) (started|finished)/;
var getPhaseMark = function getPhaseMark2(markName) {
  var matches = phaseNameExtractor.exec(markName);
  if (matches) {
    return {
      phaseName: matches[1],
      appId: matches[2],
      widgetId: matches[3]
    };
  }
};
var interactionNameExtractor = /\[fedops] ([^ ]+) interaction ([^ ]+) (started|ended)/;
var getInteractionMark = function getInteractionMark2(markName) {
  var matches = interactionNameExtractor.exec(markName);
  if (matches) {
    return {
      appName: matches[1],
      interactionName: matches[2]
    };
  }
};
var getPathnameTemplate = function getPathnameTemplate2(pathname) {
  if (isNumber(pathname)) {
    return ":param";
  }
  return pathname;
};
var isNumber = function isNumber2(str) {
  return !isNaN(parseFloat(str)) && isFinite(str);
};
var extractUrl = function extractUrl2(url) {
  var parsedUrl;
  try {
    parsedUrl = new URL(url);
    return parsedUrl;
  } catch (e) {
    var _env$location$origin, _env, _env$location;
    return {
      pathname: url,
      origin: (_env$location$origin = (_env = env()) == null ? void 0 : (_env$location = _env.location) == null ? void 0 : _env$location.origin) != null ? _env$location$origin : ""
    };
  }
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/session-manager/session-manager.js
var sessionManager = {
  getSessionId: function getSessionId() {
    var res = typeof env() !== "undefined" && env().fedops && env().fedops.sessionId;
    res = res || storage_default.getItem(SESSION_ID_STORAGE_KEY);
    res = res || generateGuid();
    setSessionId(res);
    storage_default.setItem(SESSION_ID_STORAGE_KEY, res);
    return res;
  }
};
var session_manager_default = sessionManager;

// ../../node_modules/@wix/fedops-logger/dist/es/src/loading-phases/loading-phases.js
init_define_process_env();
var LoadingPhases = /* @__PURE__ */ function() {
  function LoadingPhases2(appName, times) {
    this.appName = appName;
    this.phases = /* @__PURE__ */ new Map();
    this.indexToKey = /* @__PURE__ */ new Map();
    this.times = times || new Times(appName);
  }
  LoadingPhases2._getIndexForPhase = function _getIndexForPhase(_ref) {
    var name = _ref.name, _ref$appId = _ref.appId, appId = _ref$appId === void 0 ? "" : _ref$appId, _ref$widgetId = _ref.widgetId, widgetId = _ref$widgetId === void 0 ? "" : _ref$widgetId;
    return name + "_" + appId + "_" + widgetId;
  };
  var _proto = LoadingPhases2.prototype;
  _proto.getAppLoadingPhaseData = function getAppLoadingPhaseData(_ref2) {
    var name = _ref2.name, appId = _ref2.appId, widgetId = _ref2.widgetId;
    return this.phases.get(LoadingPhases2._getIndexForPhase({
      name,
      appId,
      widgetId
    }));
  };
  _proto.saveLoadingPhase = function saveLoadingPhase(_ref3) {
    var name = _ref3.name, appId = _ref3.appId, widgetId = _ref3.widgetId;
    var phaseKey = LoadingPhases2._getIndexForPhase({
      name,
      appId,
      widgetId
    });
    if (!this.phases.has(phaseKey)) {
      var index = this.phases.size;
      this.phases.set(phaseKey, {
        name,
        phaseStartTime: performance_default.now(),
        index
      });
      this.indexToKey.set(index, phaseKey);
    }
  };
  _proto.endLoadingPhase = function endLoadingPhase(_ref4) {
    var name = _ref4.name, appId = _ref4.appId, widgetId = _ref4.widgetId, widgetArray = _ref4.widgetArray;
    var phaseKey = LoadingPhases2._getIndexForPhase({
      name,
      appId,
      widgetId
    });
    if (!this.phases.has(phaseKey) || this.phases.get(phaseKey).duration) {
      return;
    }
    var phase = this.phases.get(phaseKey);
    phase.duration = performance_default.now() - phase.phaseStartTime;
    if (widgetArray) {
      phase.widgetArray = widgetArray;
    }
    if (widgetId) {
      phase.widgetId = widgetId;
    }
    this.phases.set(phaseKey, phase);
  };
  _proto.getNextPhaseToReport = function getNextPhaseToReport() {
    var latestStepIndex = this.phases.size - 1;
    var lastPhaseKey = this.indexToKey.get(latestStepIndex);
    return this.phases.get(lastPhaseKey);
  };
  _proto.getPhasePreviousTo = function getPhasePreviousTo(_ref5) {
    var name = _ref5.name, appId = _ref5.appId, widgetId = _ref5.widgetId;
    var currentPhase = this.phases.get(LoadingPhases2._getIndexForPhase({
      name,
      appId,
      widgetId
    }));
    var previousPhaseIndex = this.indexToKey.get(currentPhase.index - 1);
    return this.phases.get(previousPhaseIndex);
  };
  _proto.getPhases = function getPhases(_temp) {
    var _ref6 = _temp === void 0 ? {} : _temp, appId = _ref6.appId;
    var phaseToNamedPhaseObject = function phaseToNamedPhaseObject2(phase) {
      var _ref7;
      return _ref7 = {}, _ref7[phase.name] = phase, _ref7;
    };
    return Array.from(this.phases).filter(function(_ref8) {
      var phaseKey = _ref8[0];
      var _phaseKey$split = phaseKey.split("_"), appIdOfPhase = _phaseKey$split[1];
      return appId && appIdOfPhase === appId || !appId;
    }).map(function(_ref9) {
      var phase = _ref9[1];
      return phaseToNamedPhaseObject(phase);
    });
  };
  return LoadingPhases2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/data-items.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/common/bi-app-context-item.js
init_define_process_env();
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  _setPrototypeOf(subClass, superClass);
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf3(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf(o, p);
}
var BiAppContextDataItem = /* @__PURE__ */ function(_DataItem) {
  _inheritsLoose(BiAppContextDataItem2, _DataItem);
  function BiAppContextDataItem2(_ref) {
    var _this;
    var appId = _ref.appId, widgetId = _ref.widgetId, isServerSide = _ref.isServerSide, widgetArray = _ref.widgetArray;
    _this = _DataItem.call(this) || this;
    _this.data = _this._filterUndefined({
      appId,
      widgetId,
      isServerSide,
      widgetArray
    });
    return _this;
  }
  var _proto = BiAppContextDataItem2.prototype;
  _proto._filterUndefined = function _filterUndefined(contextData) {
    var definedValues = {};
    Object.keys(contextData).forEach(function(key) {
      if (contextData[key]) {
        definedValues[key] = contextData[key];
      }
    });
    return definedValues;
  };
  return BiAppContextDataItem2;
}(DataItem);

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/duration/duration-item.js
init_define_process_env();
function _inheritsLoose2(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  _setPrototypeOf2(subClass, superClass);
}
function _setPrototypeOf2(o, p) {
  _setPrototypeOf2 = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf3(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf2(o, p);
}
var DurationDataItem = /* @__PURE__ */ function(_DataItem) {
  _inheritsLoose2(DurationDataItem2, _DataItem);
  function DurationDataItem2(duration) {
    return _DataItem.call(this, {
      duration
    }) || this;
  }
  var _proto = DurationDataItem2.prototype;
  _proto.setFirstRequestDuration = function setFirstRequestDuration(firstRequestDuration) {
    this.data.frd = firstRequestDuration;
    return this;
  };
  return DurationDataItem2;
}(DataItem);

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/phases/utils.js
init_define_process_env();
function _createForOfIteratorHelperLoose(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (it) return (it = it.call(o)).next.bind(it);
  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
    if (it) o = it;
    var i = 0;
    return function() {
      if (i >= o.length) return { done: true };
      return { done: false, value: o[i++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr2, len) {
  if (len == null || len > arr2.length) len = arr2.length;
  for (var i = 0, arr22 = new Array(len); i < len; i++) {
    arr22[i] = arr2[i];
  }
  return arr22;
}
function createPhasesCollection(phasesOfApp) {
  var phases = {};
  for (var _iterator = _createForOfIteratorHelperLoose(phasesOfApp), _step; !(_step = _iterator()).done; ) {
    var phase = _step.value;
    deleteIndexFrom(phase);
    phases = Object.assign(phases, phase);
  }
  return phases;
}
function calcPhaseDuration(phaseStartTime) {
  return Math.floor(performance_default.now() - phaseStartTime);
}
function deleteIndexFrom(phase) {
  delete phase[Object.getOwnPropertyNames(phase)[0]].index;
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/data-items/data-items.js
var DataItems = /* @__PURE__ */ function() {
  function DataItems2(sessionId, preset) {
    this._sessionId = sessionId;
    this._preset = preset;
  }
  var _proto = DataItems2.prototype;
  _proto.biAppLoadStart = function biAppLoadStart() {
    return this._biDataItem(this._preset.appLoadStart.eventId);
  };
  _proto.biAppLoadFinish = function biAppLoadFinish() {
    return this._biDataItem(this._preset.appLoadFinish.eventId);
  };
  _proto.biInteractionStart = function biInteractionStart() {
    return this._biDataItem(this._preset.interactionStart.eventId);
  };
  _proto.biInteractionEnd = function biInteractionEnd() {
    return this._biDataItem(this._preset.interactionEnd.eventId);
  };
  _proto.biLoadPhaseStart = function biLoadPhaseStart() {
    return this._biDataItem(this._preset.loadPhaseStart.eventId);
  };
  _proto.biLoadPhaseFinish = function biLoadPhaseFinish() {
    return this._biDataItem(this._preset.loadPhaseFinish.eventId);
  };
  _proto.biHttpRequest = function biHttpRequest() {
    return this._biDataItem(this._preset.httpRequest.eventId);
  };
  _proto.biHttpResponse = function biHttpResponse() {
    return this._biDataItem(this._preset.httpResponse.eventId);
  };
  _proto.biHttpResponseTime = function biHttpResponseTime() {
    return this._biDataItem(this._preset.httpResponseTime.eventId);
  };
  _proto.biBlackbox = function biBlackbox(performanceEntry) {
    var entryTypeToEventId = {
      environment: 500,
      "initial-paint": 501,
      loaded: 502,
      visibility: 503,
      "first-input": 504,
      "page-transition": 505,
      crux: 506,
      "crux-cls": 507,
      responsiveness: 508
    };
    var eventId = entryTypeToEventId[performanceEntry.entryType];
    return eventId && this._biDataItem(eventId);
  };
  _proto.blackboxPerformance = function blackboxPerformance(performanceEntry) {
    return this.dataItem(performanceEntry);
  };
  _proto.webVitalsLoaded = function webVitalsLoaded() {
    return this._biDataItem(29);
  };
  _proto.webVitalsFirstInput = function webVitalsFirstInput() {
    return this._biDataItem(39);
  };
  _proto.biError = function biError() {
    return this._biDataItem(this._preset.error.eventId);
  };
  _proto.appName = function appName(_ref) {
    var _appName = _ref.appName, isServerSide = _ref.isServerSide;
    return this.dataItem({
      appName: isServerSide ? _appName + "_ssr" : _appName
    });
  };
  _proto.artifact = function artifact(_ref2) {
    var artifactId2 = _ref2.id, artifactVersion = _ref2.version, isRollout = _ref2.isRollout;
    return this.dataItem({
      artifactId: artifactId2,
      artifactVersion,
      isRollout
    });
  };
  _proto.appContext = function appContext(params) {
    return new BiAppContextDataItem(params);
  };
  _proto.customParams = function customParams(_customParams) {
    return this.dataItem({
      customParams: _customParams
    });
  };
  _proto.duration = function duration(_duration) {
    return new DurationDataItem(_duration);
  };
  _proto.loadingPhaseCollection = function loadingPhaseCollection(phasesOfApp) {
    var phases = JSON.stringify(createPhasesCollection(phasesOfApp));
    return this.dataItem({
      phases
    });
  };
  _proto.loadingPhaseStart = function loadingPhaseStart(_ref3) {
    var name = _ref3.name;
    return this.dataItem({
      name
    });
  };
  _proto.loadingPhaseFinish = function loadingPhaseFinish(_ref4) {
    var name = _ref4.name, phaseStartTime = _ref4.phaseStartTime;
    var duration = calcPhaseDuration(phaseStartTime);
    return this.dataItem({
      name,
      duration
    });
  };
  _proto.dataItem = function dataItem(params) {
    return new DataItem(params);
  };
  _proto._biDataItem = function _biDataItem(eventId) {
    var data = this._asBiEvent(eventId);
    return this.dataItem(data);
  };
  _proto._asBiEvent = function _asBiEvent(evid) {
    return {
      src: this._preset.src,
      evid,
      session_id: this._sessionId,
      _: (/* @__PURE__ */ new Date()).getTime()
      // cache buster
    };
  };
  return DataItems2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/loading-phases/loading-phases-config.js
init_define_process_env();
var phasesConfigValues = {
  SEND_ON_START: "SEND_ON_START",
  SEND_ON_FINISH: "SEND_START_AND_FINISH",
  SEND_ON_APP_LOADED: "SEND_ON_START",
  SEND_START_AND_FINISH: "SEND_START_AND_FINISH"
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/cookie-overrides/cookie-overrides.js
init_define_process_env();

// ../../node_modules/@wix/fedops-overrides/dist/esm/index.js
init_define_process_env();

// ../../node_modules/@wix/fedops-overrides/dist/esm/types.js
init_define_process_env();

// ../../node_modules/@wix/fedops-overrides/dist/esm/const.js
init_define_process_env();
var FEDOPS_OVERRIDES_COOKIE = "fedops.logger.defaultOverrides";

// ../../node_modules/@wix/fedops-logger/dist/es/src/cookie-overrides/parse-json-from-node-or-scala-servers.js
init_define_process_env();
function parseJsonFromNodeOrScalaServers(rawPayload) {
  function attemptToParseJsonRecursivelySinceScalaServersSerializeItTwice() {
    try {
      return JSON.parse(JSON.parse(rawPayload));
    } catch (err) {
      return null;
    }
  }
  function attemptURIDecodeAndParseJsonSinceNodeServersUseWithURIEncoding() {
    try {
      return JSON.parse(decodeURIComponent(rawPayload));
    } catch (err) {
      return null;
    }
  }
  return attemptToParseJsonRecursivelySinceScalaServersSerializeItTwice() || attemptURIDecodeAndParseJsonSinceNodeServersUseWithURIEncoding();
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/cookie-overrides/cookie-overrides.js
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), true).forEach(function(key) {
      _defineProperty2(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty2(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
var FEDOPS_OVERRIDES_WINDOW_IDENTIFIER = "__DEFAULT_FEDOPS_OVERRIDES__";
var CookieOverrides = /* @__PURE__ */ function() {
  function CookieOverrides2() {
    var _this$_getOverridesFr;
    this._overridesCookie = (_this$_getOverridesFr = this._getOverridesFromWindow()) != null ? _this$_getOverridesFr : this._getOverridesFromDocumentCookieIfExists();
  }
  CookieOverrides2.persistGlobalOverrides = function persistGlobalOverrides(overridesObject) {
    env()[FEDOPS_OVERRIDES_WINDOW_IDENTIFIER] = overridesObject;
  };
  var _proto = CookieOverrides2.prototype;
  _proto.getGlobalOverrides = function getGlobalOverrides() {
    return this._overridesCookie;
  };
  _proto.getCookieOverridesForApp = function getCookieOverridesForApp(appName) {
    return Object.assign({}, this._overridesCookie.paramsOverrides, this._overridesCookie.paramsOverridesForApp && this._overridesCookie.paramsOverridesForApp[appName]);
  };
  _proto._getOverridesFromDocumentCookieIfExists = function _getOverridesFromDocumentCookieIfExists() {
    try {
      var overridesCookieContent = getCookie(FEDOPS_OVERRIDES_COOKIE);
      var overridesObject = overridesCookieContent ? parseJsonFromNodeOrScalaServers(overridesCookieContent) : overridesCookieContent;
      if (overridesObject && typeof overridesObject === "object") {
        if (overridesObject.paramsOverridesForApp) {
          overridesObject.paramsOverridesForApp = Object.entries(overridesObject.paramsOverridesForApp).reduce(toOverridesWithoutDots, {});
        }
        CookieOverrides2.persistGlobalOverrides(overridesObject);
        return overridesObject;
      } else {
        return {};
      }
    } catch (err) {
      console.log(err);
      return {};
    }
  };
  _proto._getOverridesFromWindow = function _getOverridesFromWindow() {
    return env()[FEDOPS_OVERRIDES_WINDOW_IDENTIFIER];
  };
  return CookieOverrides2;
}();
function toOverridesWithoutDots(overridesMap, _ref) {
  var _objectSpread22;
  var appName = _ref[0], overrides = _ref[1];
  return _objectSpread(_objectSpread({}, overridesMap), {}, (_objectSpread22 = {}, _objectSpread22[appName.replace(/\./g, "-")] = overrides, _objectSpread22));
}
function getCookie(cookieName) {
  if (!env().document || !env().document.cookie) {
    return "";
  }
  var cookieKeyValuePairs = env().document.cookie.split(";").map(function(c) {
    return c.trim().split("=");
  });
  var _cookieKeyValuePairs$ = cookieKeyValuePairs.filter(function(_ref2) {
    var key = _ref2[0];
    return key === cookieName;
  }), relevantCookie = _cookieKeyValuePairs$[0];
  if (relevantCookie) {
    var value = relevantCookie[1];
    return value;
  } else {
    return "";
  }
}

// ../../node_modules/@wix/fedops-logger/dist/es/src/errors/error-flow-type.js
init_define_process_env();
var APP_LOAD_ERROR_FLOW = "app-load";

// ../../node_modules/@wix/fedops-logger/dist/es/src/http-monitoring-preset.js
init_define_process_env();
var http_monitoring_preset_default = {
  src: 72,
  endpoint: "http-client-poc",
  httpRequest: {
    eventId: 1100
  },
  httpResponse: {
    eventId: 1101
  },
  httpResponseTime: {
    eventId: 1102
  }
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/defer.js
init_define_process_env();
var defer = function defer2() {
  var res, rej;
  var promise = new Promise(function(resolve, reject) {
    res = resolve;
    rej = reject;
  });
  promise.resolve = res;
  promise.reject = rej;
  return promise;
};

// ../../node_modules/@wix/fedops-logger/dist/es/src/sample-rate/sample-rate-manager.js
init_define_process_env();

// ../../node_modules/@wix/fedops-logger/dist/es/src/sample-rate/sample-rate-lists.js
init_define_process_env();
var VERTICALS_LIST = {
  "1380b703-ce81-ff05-f115-39571d94dfcd_1380bbc4-1485-9d44-4616-92e36b1ead6b": [21, 23],
  "1380b703-ce81-ff05-f115-39571d94dfcd_1380bbc4-1485-9d44-4616-92e36b1ead6b_ssr": [21, 23],
  "14271d6f-ba62-d045-549b-ab972ae1f70e": [22, 28],
  "14271d6f-ba62-d045-549b-ab972ae1f70e_142bb34d-3439-576a-7118-683e690a1e0d": [21, 23],
  "14271d6f-ba62-d045-549b-ab972ae1f70e_142bb34d-3439-576a-7118-683e690a1e0d_ssr": [21, 23],
  "14517e1a-3ff0-af98-408e-2bd6953c36a2": [22, 28],
  "1484cb44-49cd-5b39-9681-75188ab429de": [22, 28],
  "14bcded7-0066-7c35-14d7-466cb3f09103": [22, 28],
  "14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9": [22, 28],
  "14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9_members": [21],
  "14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9_members_ssr": [21],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c": [22, 28],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_getSubscribers": [21, 23],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_getSubscribers_ssr": [21, 23],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_init-phase": [21, 23],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_init-phase_ssr": [21, 23],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_wixForms": [21, 23],
  "14ce1214-b278-a7e4-1373-00cebd1bef7c_wixForms_ssr": [21, 23],
  "675bbcef-18d8-41f5-800e-131ec9e08762": [22, 28],
  dataBinding: [22, 28],
  "1484cb44-49cd-5b39-9681-75188ab429de_SearchAppController": [21],
  "1484cb44-49cd-5b39-9681-75188ab429de_SearchAppController_ssr": [21]
};
var PHASES_WHITE_LIST = {
  script_loaded: [22, 28],
  await_controller_promise: [22, 28]
};
var SAMPLED_APP_NAMES = Object.keys(VERTICALS_LIST);
var NON_SAMPLED_PHASES = Object.keys(PHASES_WHITE_LIST);

// ../../node_modules/@wix/fedops-logger/dist/es/src/sample-rate/sample-rate-manager.js
var SampleRateManager = /* @__PURE__ */ function() {
  function SampleRateManager2(enableSampleRateForAppNames) {
    this.enableSampleRateForAppNames = enableSampleRateForAppNames;
  }
  var _proto = SampleRateManager2.prototype;
  _proto.shouldSampleAppNameEvent = function shouldSampleAppNameEvent(appName, eventId, name) {
    var _PHASES_WHITE_LIST$na, _VERTICALS_LIST$appNa;
    var isEventAndNameWhiteListed = (_PHASES_WHITE_LIST$na = PHASES_WHITE_LIST[name]) == null ? void 0 : _PHASES_WHITE_LIST$na.includes(eventId);
    var isAppNameInList = SAMPLED_APP_NAMES.includes(appName);
    if (!isAppNameInList || !this.enableSampleRateForAppNames || isEventAndNameWhiteListed) {
      return false;
    }
    var sampledEventIds = (_VERTICALS_LIST$appNa = VERTICALS_LIST[appName]) != null ? _VERTICALS_LIST$appNa : [];
    var isEventIdInSamplingList = sampledEventIds.includes(eventId);
    return this.enableSampleRateForAppNames && isEventIdInSamplingList;
  };
  return SampleRateManager2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/base-logger.js
function _createForOfIteratorHelperLoose2(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (it) return (it = it.call(o)).next.bind(it);
  if (Array.isArray(o) || (it = _unsupportedIterableToArray2(o)) || allowArrayLike && o && typeof o.length === "number") {
    if (it) o = it;
    var i = 0;
    return function() {
      if (i >= o.length) return { done: true };
      return { done: false, value: o[i++] };
    };
  }
  throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray2(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray2(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray2(o, minLen);
}
function _arrayLikeToArray2(arr2, len) {
  if (len == null || len > arr2.length) len = arr2.length;
  for (var i = 0, arr22 = new Array(len); i < len; i++) {
    arr22[i] = arr2[i];
  }
  return arr22;
}
function ownKeys2(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread2(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys2(Object(source), true).forEach(function(key) {
      _defineProperty3(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys2(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty3(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", { writable: false });
  return Constructor;
}
var BLACKBOX = "wixPerformanceMeasurements";
var BLACKBOX_ENDPOINT = "bpm";
var callHook = function callHook2(hook, hookArgs) {
  if (hook) {
    return hook(hookArgs);
  }
};
var getInteractionLogName = function getInteractionLogName2(interactionName, eventGuid) {
  return eventGuid ? "[guid: " + eventGuid + "] " + interactionName : interactionName;
};
var getInteractionNameFromLog = function getInteractionNameFromLog2(interactionLogName) {
  return interactionLogName.replace(/\[guid:\s[^\]]+\]\s/, "");
};
var ARRAY_TYPE = "[object Array]";
var isArray = function isArray2(possiblyArray) {
  return Object.prototype.toString.call(possiblyArray) === ARRAY_TYPE;
};
var BaseLogger = /* @__PURE__ */ function() {
  function BaseLogger2(appName, appVersion, reporter, params) {
    var defaultParams = {
      appId: null,
      widgetId: null,
      metasiteId: null,
      sessionId: session_manager_default.getSessionId(),
      isServerSide: null,
      disableAutoLoadFinish: false,
      phasesConfig: phasesConfigValues.SEND_ON_START,
      interactionTimeout: null,
      timeoutHook: null,
      startHook: null,
      endHook: null,
      isPersistent: false,
      corrId: generateGuid(),
      presetType: presetsTypes.DEFAULT,
      customParams: {},
      paramsOverrides: {},
      enableSampleRateForAppNames: false
    };
    var paramsWithDefaults = Object.assign({}, defaultParams, params);
    this.appName = appName;
    this.appVersion = appVersion;
    this.appId = paramsWithDefaults.appId;
    this.widgetId = paramsWithDefaults.widgetId;
    this.metasiteId = paramsWithDefaults.metasiteId;
    this.corrId = paramsWithDefaults.corrId;
    this.isServerSide = paramsWithDefaults.isServerSide;
    this.params = {
      sessionId: paramsWithDefaults.sessionId
    };
    this.enableSampleRateForAppNames = paramsWithDefaults.enableSampleRateForAppNames;
    this.httpMonitoringDataItems = new DataItems(this.sessionId, http_monitoring_preset_default);
    this.httpMonitoringReporter = create({
      preset: http_monitoring_preset_default
    });
    this._customParams = Object.assign({}, paramsWithDefaults.customParams);
    this.disableAutoLoadFinish = paramsWithDefaults.disableAutoLoadFinish;
    this.phasesConfig = paramsWithDefaults.phasesConfig;
    this._appLoadedCalled = {};
    this._appStartLoadCalled = {};
    this._presetType = paramsWithDefaults.presetType;
    this._preset = presetLoader(this._presetType);
    this._constructorParamsOverrides = paramsWithDefaults.paramsOverrides;
    this._cookiesParamsOverrides = new CookieOverrides();
    this.dataItems = new DataItems(this.sessionId, this._preset);
    this.reporter = reporter || create({
      preset: this._preset
    });
    this._times = new Times(appName);
    this.loadingPhases = new LoadingPhases(appName, this._times);
    this.sampleRateManager = new SampleRateManager(this.enableSampleRateForAppNames);
    this.dataSourceBase = new DataSource();
    this.dataSourceBase.addItem(this.dataItems.appName({
      appName,
      isServerSide: this.isServerSide
    })).addItem(this.dataItems.dataItem({
      corrId: this.corrId,
      is_rollout: false
    })).addItem(this.dataItems.dataItem(paramsWithDefaults.paramsOverrides));
    if (params && params.artifactData) {
      this.dataSourceBase.addItem(this.dataItems.artifact(params.artifactData));
    }
    if ("is_rollout" in this._constructorParamsOverrides && typeof this._constructorParamsOverrides.is_rollout === "undefined") {
      this._constructorParamsOverrides.is_rollout = false;
    }
    this._outgoingInteractions = {};
    this._outgoingHttpRequests = {};
    this.interactionTimeout = paramsWithDefaults.interactionTimeout;
    this.timeoutHook = paramsWithDefaults.timeoutHook;
    this.startHook = paramsWithDefaults.startHook;
    this.endHook = paramsWithDefaults.endHook;
    this.isPersistent = paramsWithDefaults.isPersistent;
    this._firstErrorFiredInFlow = {};
    this._platformTenantsPromise = defer();
    this._webVitalsLoadedPromise = defer();
    this._webVitalsFirstInputPromise = defer();
    if (paramsWithDefaults.reportBlackbox) {
      this._handleBlackboxPerformance();
    }
    this._reportWebVitalsWhenAvailable();
  }
  var _proto = BaseLogger2.prototype;
  _proto._report = function _report(dataSource, reporterEndpoint, params) {
    var data = dataSource.mergeItems();
    if (this.sampleRateManager.shouldSampleAppNameEvent(data.appName || this.appName, data.evid, data.name)) {
      return;
    }
    return this.reporter.report(data, reporterEndpoint, params);
  };
  _proto._reportIfNotSSR = function _reportIfNotSSR(dataSource, reporterEndpoint, params) {
    if (!this.isServerSide || this.appName.includes("thunderbolt")) {
      return this._report(dataSource, reporterEndpoint, params);
    }
  };
  _proto._reportHttpMonitoring = function _reportHttpMonitoring(dataSource) {
    return this.httpMonitoringReporter.report(dataSource.mergeItems(), http_monitoring_preset_default.endpoint);
  };
  _proto.getAppName = function getAppName() {
    return this.appName;
  };
  _proto.getAppVersion = function getAppVersion2() {
    return this.appVersion;
  };
  _proto.getReporter = function getReporter() {
    return this.reporter;
  };
  _proto.getHttpMonitoringReporter = function getHttpMonitoringReporter() {
    return this.httpMonitoringReporter;
  };
  _proto.getParam = function getParam(paramName) {
    return this.params[paramName];
  };
  _proto._isDisableAutoLoadFinish = function _isDisableAutoLoadFinish() {
    return this.disableAutoLoadFinish;
  };
  _proto.isDisableAutoLoadFinish = function isDisableAutoLoadFinish() {
    return this._isDisableAutoLoadFinish();
  };
  _proto.reportNetworkAnalysis = function reportNetworkAnalysis() {
  };
  _proto._getAppLoadingPhaseMarksForApp = function _getAppLoadingPhaseMarksForApp(_ref) {
    var appId = _ref.appId;
    var allMarks = performance_default.getMarks();
    var appMarks = [];
    allMarks.forEach(function(x) {
      var markData = getPhaseMark(x.name);
      if (markData && markData.appId === appId && !markData.widgetId) {
        var startTime = x.startTime, name = x.name;
        var markWithStartTime = Object.assign({}, {
          startTime,
          name
        }, markData);
        appMarks.push(markWithStartTime);
      }
    });
    return appMarks;
  };
  _proto._getTimesOfPhase = function _getTimesOfPhase(_ref2) {
    var _appPhasesMarks$find, _appPhasesMarks$find2;
    var phaseName = _ref2.phaseName, appPhasesMarks = _ref2.appPhasesMarks, appId = _ref2.appId;
    var startMarkTime = (_appPhasesMarks$find = appPhasesMarks.find(function(mark2) {
      return mark2.name === "[fedops] phase:" + phaseName + " " + appId + " started";
    })) == null ? void 0 : _appPhasesMarks$find.startTime;
    var finishMarkTime = (_appPhasesMarks$find2 = appPhasesMarks.find(function(mark2) {
      return mark2.name === "[fedops] phase:" + phaseName + " " + appId + " finished";
    })) == null ? void 0 : _appPhasesMarks$find2.startTime;
    return {
      startMarkTime,
      finishMarkTime
    };
  };
  _proto._getPhaseNamesFromMarks = function _getPhaseNamesFromMarks(marks) {
    return new Set(marks.map(function(mark2) {
      return mark2.phaseName;
    }));
  };
  _proto.reportAppPhasesNetworkAnalysis = function reportAppPhasesNetworkAnalysis() {
  };
  _proto.appLoadStarted = function appLoadStarted(_temp) {
    var _ref3 = _temp === void 0 ? {} : _temp, appId = _ref3.appId, paramsOverrides = _ref3.paramsOverrides;
    if (appId && this._appStartLoadCalled[appId] || !appId && this._appStartLoadCalled[this.appName]) {
      return;
    }
    BaseLogger2._markAppLoadStarted(this.appName);
    this._appStartLoadCalled[appId || this.appName] = true;
    this._times.setLoadStarted({
      appId
    });
    var dataSource = this.dataSource.addItem(this.dataItems.biAppLoadStart()).addItem(this.dataItems.appContext({
      appId: appId || this.appId,
      widgetId: this.widgetId,
      isServerSide: this.isServerSide
    })).addItem(this._getDataItemWithDefaultParamsOverrides({
      appName: appId
    })).addItem(this.dataItems.dataItem(paramsOverrides));
    if (appId) {
      this._changeAppNameForEvent(dataSource, appId);
    }
    return this._report(dataSource, this._getEndpoint());
  };
  _proto.httpRequest = function httpRequest2(_ref4) {
    var artifactId2 = _ref4.artifactId, method = _ref4.method, url = _ref4.url;
    var urlTemplate = this._getUrlTemplate(url);
    this._outgoingHttpRequests[urlTemplate] = {
      timestamp: performance_default.now()
    };
    var dataSource = this.dataSource.addItem(this.httpMonitoringDataItems.biHttpRequest()).addItem({
      artifactId: artifactId2,
      method,
      url: urlTemplate
    });
    this._reportHttpMonitoring(dataSource);
  };
  _proto.httpResponse = function httpResponse(_ref5) {
    var artifactId2 = _ref5.artifactId, method = _ref5.method, statusCode = _ref5.statusCode, url = _ref5.url;
    var urlTemplate = this._getUrlTemplate(url);
    if (!this._outgoingHttpRequests[urlTemplate]) {
      throw new Error("To use httpResponse you must use httpRequest first");
    }
    var startTime = this._outgoingHttpRequests[urlTemplate].timestamp;
    var endTime = performance_default.now();
    var responseTime = Math.floor(endTime - startTime);
    var dataSource = this.dataSource.addItem(this.httpMonitoringDataItems.biHttpResponse()).addItem({
      artifactId: artifactId2,
      method,
      responseTime,
      status_code: statusCode,
      url: urlTemplate
    });
    this._httpResponseTime({
      artifactId: artifactId2,
      method,
      responseTime,
      url: urlTemplate
    });
    this._reportHttpMonitoring(dataSource);
  };
  _proto._httpResponseTime = function _httpResponseTime(_ref6) {
    var artifactId2 = _ref6.artifactId, method = _ref6.method, responseTime = _ref6.responseTime, url = _ref6.url;
    var dataSource = this.dataSource.addItem(this.httpMonitoringDataItems.biHttpResponseTime()).addItem({
      artifactId: artifactId2,
      method,
      responseTime,
      url
    });
    return this._reportHttpMonitoring(dataSource);
  };
  _proto._getUrlTemplate = function _getUrlTemplate(url) {
    var _extractUrl = extractUrl(url), origin = _extractUrl.origin, pathname = _extractUrl.pathname;
    var convertedPathname = pathname.split("/").filter(function(p) {
      return !!p;
    }).map(function(p) {
      return getPathnameTemplate(p);
    }).join("/");
    return origin + "/" + convertedPathname;
  };
  _proto._shouldAddCustomParams = function _shouldAddCustomParams(customParams) {
    var isEmptyObject = function isEmptyObject2(obj) {
      return obj && Object.keys(obj).length === 0 && obj.constructor === Object;
    };
    var bothCustomParamsAreEmpty = isEmptyObject(this._customParams) && isEmptyObject(customParams);
    var consentPolicyAccessor = new ConsentPolicyAccessor();
    var _consentPolicyAccesso = consentPolicyAccessor.getCurrentConsentPolicy(), functional = _consentPolicyAccesso.functional, analytics = _consentPolicyAccesso.analytics;
    var consentAllowsCustomParams = functional && analytics;
    return !bothCustomParamsAreEmpty && consentAllowsCustomParams;
  };
  _proto._addCustomParamsToEvent = function _addCustomParamsToEvent(dataSource, customParams) {
    var customParamsObj = typeof customParams === "string" ? JSON.parse(customParams) : customParams;
    customParams = Object.assign({}, this._customParams, customParamsObj);
    if (Object.keys(customParams).length > 0) {
      var stringifiedCustomParams = JSON.stringify(customParams);
      dataSource.addItem(this.dataItems.customParams(stringifiedCustomParams));
    }
  };
  _proto.appLoaded = function appLoaded(_temp2) {
    var _ref7 = _temp2 === void 0 ? {} : _temp2, appId = _ref7.appId, customParams = _ref7.customParams, paramsOverrides = _ref7.paramsOverrides;
    if (appId && this._appLoadedCalled[appId] || !appId && this._appLoadedCalled[this.appName]) {
      return;
    }
    BaseLogger2._clearLoadTimeout();
    BaseLogger2._markAndMeasureAppLoad(this.appName);
    this._appLoadedCalled[appId || this.appName] = true;
    this._sendLastAppLoadPhaseIfNeeded();
    var dataSource = this.dataSource.addItem(this.dataItems.biAppLoadFinish()).addItem(this.dataItems.appContext({
      appId: appId || this.appId,
      widgetId: this.widgetId,
      isServerSide: this.isServerSide
    })).addItem(this.dataItems.duration(this._times.getAppLoadTime({
      appId
    })).setFirstRequestDuration(this._times.getFirstRequestDuration())).addItem(this._getDataItemWithDefaultParamsOverrides({
      appName: appId
    })).addItem(this.dataItems.dataItem(paramsOverrides));
    if (appId) {
      this._changeAppNameForEvent(dataSource, appId);
    }
    if (this._shouldAddCustomParams(customParams)) {
      this._addCustomParamsToEvent(dataSource, customParams);
    }
    return this._report(dataSource, this._getEndpoint());
  };
  _proto.appLoadingPhaseStart = function appLoadingPhaseStart(name, _temp3) {
    var _ref8 = _temp3 === void 0 ? {} : _temp3, appId = _ref8.appId, widgetId = _ref8.widgetId, paramsOverrides = _ref8.paramsOverrides;
    this.loadingPhases.saveLoadingPhase({
      name,
      appId,
      widgetId
    });
    this._sendPreviousPhaseIfNeeded(name, {
      appId,
      widgetId,
      paramsOverrides
    });
    performance_default.mark("[fedops] " + name + " started");
    performance_default.mark("[fedops] phase:" + name + " " + appId + (widgetId ? " " + widgetId : "") + " started");
    var dataSource = this.dataSource.addItem(this.dataItems.biLoadPhaseStart()).addItem(this.dataItems.appContext({
      appId,
      widgetId
    })).addItem(this.dataItems.loadingPhaseStart({
      name
    })).addItem(this._getDataItemWithDefaultParamsOverrides({
      appName: appId
    })).addItem(this.dataItems.dataItem(paramsOverrides));
    if (appId) {
      this._changeAppNameForEvent(dataSource, appId);
    }
    this._report(dataSource, this._getEndpoint());
  };
  _proto._changeAppNameForEvent = function _changeAppNameForEvent(dataSource, appName) {
    dataSource.addItem(this.dataItems.appName({
      appName,
      isServerSide: this.isServerSide
    }));
  };
  _proto._sendPreviousPhaseIfNeeded = function _sendPreviousPhaseIfNeeded(name, _temp4) {
    var _ref9 = _temp4 === void 0 ? {} : _temp4, appId = _ref9.appId, widgetId = _ref9.widgetId, paramsOverrides = _ref9.paramsOverrides;
    var previousPhase = this.loadingPhases.getPhasePreviousTo({
      name,
      appId,
      widgetId
    });
    if (previousPhase && this.phasesConfig === phasesConfigValues.SEND_ON_START) {
      performance_default.mark("[fedops] " + previousPhase.name + " finished");
      var loadingPhaseDataItem = this.dataItems.loadingPhaseFinish(previousPhase);
      var loadingPhaseBiItem = this.dataItems.biLoadPhaseFinish();
      var overridesDataItem = this.dataItems.dataItem(paramsOverrides);
      var dataSource = this.dataSource.addItem(loadingPhaseDataItem).addItem(loadingPhaseBiItem).addItem(this._getDataItemWithDefaultParamsOverrides({
        appName: appId
      })).addItem(overridesDataItem);
      this._report(dataSource);
    }
  };
  _proto.appLoadingPhaseFinish = function appLoadingPhaseFinish(name, _temp5, _temp6) {
    var _ref10 = _temp5 === void 0 ? {} : _temp5, appId = _ref10.appId, widgetId = _ref10.widgetId, widgetArray = _ref10.widgetArray, paramsOverrides = _ref10.paramsOverrides;
    var _ref11 = _temp6 === void 0 ? {} : _temp6, endHook = _ref11.endHook;
    if (this.phasesConfig === phasesConfigValues.SEND_ON_START) {
      throw new Error('To use appLoadingPhaseFinish you must use "phasesConfig: SEND_START_AND_FINISH" setting');
    }
    performance_default.mark("[fedops] " + name + " finished");
    performance_default.mark("[fedops] phase:" + name + " " + appId + (widgetId ? " " + widgetId : "") + " finished");
    var loadingPhase = this.loadingPhases.getAppLoadingPhaseData({
      name,
      appId,
      widgetId
    });
    if (!loadingPhase) {
      throw new Error("Cannot report end of a phase that wasn't started. Phase " + name + " doesn't exist");
    }
    var loadingPhaseDataItem = this.dataItems.loadingPhaseFinish(loadingPhase);
    var loadingPhaseBiItem = this.dataItems.biLoadPhaseFinish();
    var defaultParamsOverridesDataItem = this._getDataItemWithDefaultParamsOverrides({
      appName: appId
    });
    var overridesDataItem = this.dataItems.dataItem(paramsOverrides);
    var eventContextDataItem = this.dataItems.appContext({
      appId,
      widgetId,
      widgetArray,
      isServerSide: this.isServerSide
    });
    callHook(endHook || this.endHook, {
      name: loadingPhase.name,
      duration: Math.floor(performance_default.now() - loadingPhase.phaseStartTime)
    });
    var dataSource = this.dataSource.addItem(loadingPhaseDataItem).addItem(loadingPhaseBiItem).addItem(eventContextDataItem).addItem(defaultParamsOverridesDataItem).addItem(overridesDataItem);
    if (appId) {
      this._changeAppNameForEvent(dataSource, appId);
    }
    return this._report(dataSource, this._getEndpoint());
  };
  _proto._getEndpoint = function _getEndpoint() {
    return this.isPersistent ? this._preset.persistentEndpoint : this._preset.nonPersistentEndpoint;
  };
  _proto._getDataItemWithDefaultParamsOverrides = function _getDataItemWithDefaultParamsOverrides(_temp7) {
    var _ref12 = _temp7 === void 0 ? {} : _temp7, _ref12$appName = _ref12.appName, appName = _ref12$appName === void 0 ? null : _ref12$appName;
    return this.dataItems.dataItem(_objectSpread2(_objectSpread2({}, this._cookiesParamsOverrides.getCookieOverridesForApp(appName || this.appName)), this._constructorParamsOverrides));
  };
  _proto._sendLastAppLoadPhaseIfNeeded = function _sendLastAppLoadPhaseIfNeeded() {
    var appLoadingPhase = this.loadingPhases.getNextPhaseToReport();
    var shouldReportLastPhase = appLoadingPhase && this.phasesConfig === phasesConfigValues.SEND_ON_START;
    if (shouldReportLastPhase) {
      this._report(this.dataSource.addItem(this.dataItems.loadingPhaseFinish(appLoadingPhase)).addItem(this.dataItems.biLoadPhaseFinish()));
    }
  };
  BaseLogger2._clearLoadTimeout = function _clearLoadTimeout() {
    if (env() && env().fedops && typeof env().fedops.clearLoadTimeout === "function") {
      env().fedops.clearLoadTimeout();
    }
  };
  _proto.clearResourceTimings = function clearResourceTimings2() {
    performance_default.clearResourceTimings();
  };
  BaseLogger2._markAppLoadStarted = function _markAppLoadStarted(appName) {
    performance_default.mark("[fedops] " + appName + " app-load-started");
  };
  BaseLogger2._markAndMeasureAppLoad = function _markAndMeasureAppLoad(appName) {
    performance_default.mark("[fedops] " + appName + " app-loaded");
    try {
      performance_default.measure("[fedops] " + appName + " app-loaded", "[fedops] " + appName + " app-load-started", "[fedops] " + appName + " app-loaded");
    } catch (e) {
    }
  };
  _proto._markInteractionStarted = function _markInteractionStarted(interactionName) {
    performance_default.mark("[fedops] " + this.appName + " interaction " + interactionName + " started");
  };
  _proto._markAndMeasureInteractionEnded = function _markAndMeasureInteractionEnded(interactionName, outgoingInteraction) {
    if (outgoingInteraction) {
      performance_default.mark("[fedops] " + this.appName + " interaction " + interactionName + " ended");
      try {
        performance_default.measure("[fedops] " + interactionName + " duration", "[fedops] " + this.appName + " interaction " + interactionName + " started", "[fedops] " + this.appName + " interaction " + interactionName + " ended");
      } catch (e) {
      }
    }
  };
  _proto.interactionStarted = function interactionStarted(interactionName, _temp8) {
    var _this = this;
    var _ref13 = _temp8 === void 0 ? {} : _temp8, eventGuid = _ref13.eventGuid, stack = _ref13.stack, timeOverride = _ref13.timeOverride, interactionTimeout = _ref13.interactionTimeout, startHook = _ref13.startHook, timeoutHook = _ref13.timeoutHook, customParams = _ref13.customParams, paramsOverrides = _ref13.paramsOverrides;
    this._markInteractionStarted(interactionName);
    var scheduleTimeoutEvent = function scheduleTimeoutEvent2() {
      if (interactionTimeout || _this.interactionTimeout) {
        return setTimeout(function() {
          var dataSource2 = _this.dataSource.addItem({
            interactionName
          }).addItem({
            errorType: "timeout"
          }).addItem(_this.dataItems.biError());
          _this._reportIfNotSSR(dataSource2);
          callHook(timeoutHook || _this.timeoutHook, {
            name: interactionName,
            timeout: interactionTimeout || _this.interactionTimeout
          });
        }, interactionTimeout || _this.interactionTimeout);
      }
    };
    var dataSource = this.dataSource.addItem({
      name: interactionName
    }).addItem(this.dataItems.biInteractionStart()).addItem(this._getDataItemWithDefaultParamsOverrides()).addItem(this.dataItems.dataItem(paramsOverrides));
    if (this._shouldAddCustomParams(customParams)) {
      this._addCustomParamsToEvent(dataSource, customParams);
    }
    var interactionLogName = getInteractionLogName(interactionName, eventGuid);
    var outGoingInteraction = {
      timestamp: timeOverride ? timeOverride : performance_default.now(),
      timeout: interactionTimeout || this.interactionTimeout
    };
    if (stack) {
      this._outgoingInteractions[interactionLogName] = this._outgoingInteractions[interactionLogName] || [];
      this._outgoingInteractions[interactionLogName].push(outGoingInteraction);
    } else {
      this._outgoingInteractions[interactionLogName] = outGoingInteraction;
    }
    this._reportIfNotSSR(dataSource);
    callHook(startHook || this.startHook, {
      name: interactionName
    });
    var timeoutId = scheduleTimeoutEvent();
    return {
      timeoutId
    };
  };
  _proto.interactionEnded = function interactionEnded(interactionName, _temp9) {
    var _ref14 = _temp9 === void 0 ? {} : _temp9, eventGuid = _ref14.eventGuid, timeOverride = _ref14.timeOverride, timeoutId = _ref14.timeoutId, endHook = _ref14.endHook, customParams = _ref14.customParams, paramsOverrides = _ref14.paramsOverrides;
    var interactionLogName = getInteractionLogName(interactionName, eventGuid);
    var outgoingInteraction = isArray(this._outgoingInteractions[interactionLogName]) ? this._outgoingInteractions[interactionLogName].pop() : this._outgoingInteractions[interactionLogName];
    this._markAndMeasureInteractionEnded(interactionName, outgoingInteraction);
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    var interaction = outgoingInteraction || this._getInteractionFromWindowIfPresent(interactionName);
    var endTime = timeOverride ? timeOverride : performance_default.now();
    var duration = interaction ? Math.floor(endTime - interaction.timestamp) : "";
    callHook(endHook || this.endHook, {
      name: interactionName,
      duration,
      timeout: outgoingInteraction && outgoingInteraction.timeout
    });
    var dataSource = this.dataSource.addItem({
      name: interactionName
    }).addItem({
      duration
    }).addItem(this.dataItems.biInteractionEnd()).addItem(this._getDataItemWithDefaultParamsOverrides()).addItem(this.dataItems.dataItem(paramsOverrides));
    if (this._shouldAddCustomParams(customParams)) {
      this._addCustomParamsToEvent(dataSource, customParams);
    }
    if (!isArray(this._outgoingInteractions[interactionLogName]) || !this._outgoingInteractions[interactionLogName].length) {
      delete this._outgoingInteractions[interactionLogName];
    }
    this._reportIfNotSSR(dataSource);
  };
  _proto._getInteractionsObjectFromWindow = function _getInteractionsObjectFromWindow() {
    var _env, _env$fedops, _env$fedops$apps, _env$fedops$apps$this;
    return ((_env = env()) == null ? void 0 : (_env$fedops = _env.fedops) == null ? void 0 : (_env$fedops$apps = _env$fedops.apps) == null ? void 0 : (_env$fedops$apps$this = _env$fedops$apps[this.appName]) == null ? void 0 : _env$fedops$apps$this.interactions) || {};
  };
  _proto._getInteractionFromWindowIfPresent = function _getInteractionFromWindowIfPresent(interactionName) {
    return this._getInteractionsObjectFromWindow()[interactionName];
  };
  _proto.flush = function flush() {
    this.reporter.flush();
  };
  _proto._handleBlackboxPerformance = function _handleBlackboxPerformance() {
    var _this2 = this;
    var actualEnv = env();
    var wixPerformanceMeasurements = actualEnv[BLACKBOX];
    if (wixPerformanceMeasurements) {
      this._handleBlackboxPerformanceEntries(actualEnv, wixPerformanceMeasurements);
    }
    if (actualEnv.addEventListener) {
      actualEnv.addEventListener(BLACKBOX, function(_ref15) {
        var detail = _ref15.detail;
        return _this2._handleBlackboxPerformanceEntries(actualEnv, detail);
      });
    }
  };
  _proto._handleBlackboxPerformanceEntries = function _handleBlackboxPerformanceEntries(actualEnv, measurements) {
    var _this3 = this;
    measurements.filter(function(_ref16) {
      var then = _ref16.then;
      return then;
    }).forEach(function(performanceEntryPromise) {
      performanceEntryPromise.then(function(performanceEntry) {
        switch (performanceEntry.entryType) {
          case "loaded":
            _this3._webVitalsLoadedPromise.resolve(performanceEntry);
            break;
          case "first-input":
            _this3._webVitalsFirstInputPromise.resolve(performanceEntry);
            break;
          case "page-transitions":
          case "crux-cls-s":
          case "responsiveness":
            if (performanceEntry.eventName && actualEnv.addEventListener) {
              actualEnv.addEventListener(performanceEntry.eventName, function(_ref17) {
                var detail = _ref17.detail;
                return _this3._sendBlackboxMeasurement(detail);
              });
            }
            return;
        }
        _this3._sendBlackboxMeasurement(performanceEntry);
      });
    });
  };
  _proto._sendBlackboxMeasurement = function _sendBlackboxMeasurement(measurement) {
    var blackboxBiDataItem = this.dataItems.biBlackbox(measurement);
    if (blackboxBiDataItem) {
      var blackboxDataItem = this.dataItems.blackboxPerformance(measurement);
      var dataSource = new DataSource().addItem(blackboxBiDataItem).addItem(blackboxDataItem);
      var params;
      if (measurement.entryType === "loaded") {
        params = {
          useBatch: false
        };
      }
      this._report(dataSource, BLACKBOX_ENDPOINT, params);
      if (measurement.entryType === "crux") {
        this.flush();
      }
    }
  };
  _proto.getLoggerForWidget = function getLoggerForWidget(_ref18) {
    var appName = _ref18.appName, appId = _ref18.appId, widgetId = _ref18.widgetId, version = _ref18.version, timeoutHook = _ref18.timeoutHook, startHook = _ref18.startHook, endHook = _ref18.endHook, useGlobalLogger = _ref18.useGlobalLogger, paramsOverrides = _ref18.paramsOverrides, phasesConfig = _ref18.phasesConfig;
    var widgetAppName = appName || appId + "_" + widgetId;
    var widgetVersion = version || this.getAppVersion();
    var reporter = useGlobalLogger ? this.reporter : create({
      biLoggerFactory: this.reporter._factory,
      preset: this._preset
    });
    var config = {
      isServerSide: this.isServerSide,
      appId,
      widgetId,
      sessionId: this.sessionId,
      phasesConfig: phasesConfig || phasesConfigValues.SEND_ON_START,
      isPersistent: this.isPersistent,
      timeoutHook,
      startHook,
      endHook,
      customParams: this._customParams,
      presetType: this._presetType,
      paramsOverrides: _objectSpread2(_objectSpread2({}, this._constructorParamsOverrides), paramsOverrides),
      enableSampleRateForAppNames: this.enableSampleRateForAppNames
    };
    return new BaseLogger2(widgetAppName, widgetVersion, reporter, config);
  };
  _proto._getUnReportedErrorFlows = function _getUnReportedErrorFlows(flows) {
    var _this4 = this;
    return flows.filter(function(flow) {
      return !_this4._firstErrorFiredInFlow[flow];
    });
  };
  _proto.reportErrorThrownOncePerFlow = function reportErrorThrownOncePerFlow() {
    var _this5 = this;
    var flows = this._getFlowsOfError();
    var unReportedErrorFlows = this._getUnReportedErrorFlows(flows);
    if (unReportedErrorFlows.length) {
      unReportedErrorFlows.forEach(function(flow) {
        _this5._firstErrorFiredInFlow[flow] = true;
        var dataSource = _this5.dataSource.addItem({
          interactionName: flow
        }).addItem(_this5.dataItems.biError());
        _this5._report(dataSource);
      });
    }
  };
  _proto._errorHappenedInOneOfAppLoadFlows = function _errorHappenedInOneOfAppLoadFlows() {
    return this._errorHappenedInAppLoadFlow() || this._errorHappenedInAppLoadingPhasesFlow();
  };
  _proto._errorHappenedInAppLoadFlow = function _errorHappenedInAppLoadFlow() {
    var appLoadStarted = this._getAppLoadStartedIndication();
    var appLoaded = this._getAppLoadedIndication();
    return appLoadStarted && !appLoaded;
  };
  _proto._getAppLoadStartedIndication = function _getAppLoadStartedIndication() {
    var _performance$getEntri;
    var appLoadStartedMarkName = "[fedops] " + this.appName + " app-load-started";
    var appLoadStartedMark = (_performance$getEntri = performance_default.getEntriesByName(appLoadStartedMarkName)) == null ? void 0 : _performance$getEntri[0];
    var appLoadStartedTime = this._times.getLoadStartTime();
    return appLoadStartedMark || appLoadStartedTime;
  };
  _proto._getAppLoadedIndication = function _getAppLoadedIndication() {
    var _performance$getEntri2;
    var appLoadedMarkName = "[fedops] " + this.appName + " app-loaded";
    var appLoadedMark = (_performance$getEntri2 = performance_default.getEntriesByName(appLoadedMarkName)) == null ? void 0 : _performance$getEntri2[0];
    return appLoadedMark || this._appLoadedCalled[this.appName];
  };
  _proto._errorHappenedInAppLoadingPhasesFlow = function _errorHappenedInAppLoadingPhasesFlow(_temp10) {
    var _ref19 = _temp10 === void 0 ? {
      appId: this.appName
    } : _temp10, appId = _ref19.appId;
    var appPhasesMarks = this._getAppLoadingPhaseMarksForApp({
      appId
    });
    var phaseNames = this._getPhaseNamesFromMarks(appPhasesMarks);
    for (var _iterator = _createForOfIteratorHelperLoose2(phaseNames), _step; !(_step = _iterator()).done; ) {
      var phaseName = _step.value;
      var _this$_getTimesOfPhas = this._getTimesOfPhase({
        phaseName,
        appPhasesMarks,
        appId
      }), startMarkTime = _this$_getTimesOfPhas.startMarkTime, finishMarkTime = _this$_getTimesOfPhas.finishMarkTime;
      if (startMarkTime && !finishMarkTime) {
        return true;
      }
    }
    return false;
  };
  _proto._getFlowsOfError = function _getFlowsOfError() {
    var flowsWithErrors = this._errorHappenedInOneOfAppLoadFlows() ? [APP_LOAD_ERROR_FLOW] : [];
    return [].concat(flowsWithErrors, this._getInteractionNamesWhereErrorHappened());
  };
  _proto._getInteractionNamesWhereErrorHappened = function _getInteractionNamesWhereErrorHappened() {
    var interactionsFromInstance = this._getInteractionNamesWhereErrorHappenedFromInstance();
    if (interactionsFromInstance.length) {
      return interactionsFromInstance;
    }
    var interactionsFromWindow = Object.keys(this._getInteractionsObjectFromWindow());
    if (interactionsFromWindow.length) {
      return interactionsFromWindow;
    }
    return this._getInteractionNamesWhereErrorHappenedFromPerformanceMarks();
  };
  _proto._getInteractionNamesWhereErrorHappenedFromInstance = function _getInteractionNamesWhereErrorHappenedFromInstance() {
    return Object.keys(this._outgoingInteractions).map(function(logName) {
      return getInteractionNameFromLog(logName);
    });
  };
  _proto._getInteractionNamesWhereErrorHappenedFromPerformanceMarks = function _getInteractionNamesWhereErrorHappenedFromPerformanceMarks() {
    var interactionMarks = this._getInteractionMarksOfCurrentApp();
    return BaseLogger2._getInteractionsThatDidntEndFromMarks(interactionMarks);
  };
  _proto._getInteractionMarksOfCurrentApp = function _getInteractionMarksOfCurrentApp() {
    var _this6 = this;
    var allMarks = performance_default.getMarks();
    return allMarks.reduce(function(interactionMarksOfCurrentApp, mark2) {
      var markData = getInteractionMark(mark2.name);
      if (markData && markData.appName === _this6.appName) {
        interactionMarksOfCurrentApp[markData.interactionName] = interactionMarksOfCurrentApp[markData.interactionName] || [];
        interactionMarksOfCurrentApp[markData.interactionName].push({
          startTime: mark2.startTime,
          name: mark2.name
        });
      }
      return interactionMarksOfCurrentApp;
    }, {});
  };
  BaseLogger2._getInteractionsThatDidntEndFromMarks = function _getInteractionsThatDidntEndFromMarks(interactionsMarks) {
    var unFinishedInteractions = [];
    for (var interactionName in interactionsMarks) {
      if (interactionsMarks.hasOwnProperty(interactionName)) {
        var _BaseLogger$_countSta = BaseLogger2._countStartedEndedInteractionMarks(interactionsMarks[interactionName]), startedInteractions = _BaseLogger$_countSta.startedInteractions, endedInteractions = _BaseLogger$_countSta.endedInteractions;
        var noInteractionMarks = !startedInteractions && !endedInteractions;
        var moreStartedOrEndedInteractions = startedInteractions - endedInteractions !== 0;
        if (noInteractionMarks || moreStartedOrEndedInteractions) {
          unFinishedInteractions.push(interactionName);
        }
      }
    }
    return unFinishedInteractions;
  };
  BaseLogger2._countStartedEndedInteractionMarks = function _countStartedEndedInteractionMarks(interactionsMarks) {
    var startedInteractions = 0;
    var endedInteractions = 0;
    interactionsMarks.forEach(function(mark2) {
      if (mark2.name.includes("started")) {
        startedInteractions++;
      } else if (mark2.name.includes("ended")) {
        endedInteractions++;
      }
    });
    return {
      startedInteractions,
      endedInteractions
    };
  };
  _proto.registerPlatformTenants = function registerPlatformTenants(appNames) {
    this._platformTenantsPromise.resolve(appNames);
  };
  _proto._reportWebVitalsWhenAvailable = function _reportWebVitalsWhenAvailable() {
    var _this7 = this;
    Promise.all([this._webVitalsLoadedPromise, this._platformTenantsPromise]).then(function(_ref20) {
      var webVitalsLoaded = _ref20[0], platformTenantAppNames = _ref20[1];
      var cls = webVitalsLoaded.cls, lcp = webVitalsLoaded.lcp;
      platformTenantAppNames.forEach(function(appName) {
        var dataSource = _this7.dataSource.addItem(_this7.dataItems.webVitalsLoaded()).addItem(_this7.dataItems.appName({
          appName
        })).addItem({
          cls,
          lcp
        });
        _this7._report(dataSource);
      });
    });
    Promise.all([this._webVitalsFirstInputPromise, this._platformTenantsPromise]).then(function(_ref21) {
      var webVitalsFirstInput = _ref21[0], platformTenantAppNames = _ref21[1];
      var delay = webVitalsFirstInput.delay;
      platformTenantAppNames.forEach(function(appName) {
        var dataSource = _this7.dataSource.addItem(_this7.dataItems.webVitalsFirstInput()).addItem(_this7.dataItems.appName({
          appName
        })).addItem({
          fid: delay
        });
        _this7._report(dataSource);
      });
    });
  };
  _createClass(BaseLogger2, [{
    key: "dataSource",
    get: function get() {
      return this.dataSourceBase.clone();
    }
  }, {
    key: "sessionId",
    get: function get() {
      return this.getParam("sessionId");
    },
    set: function set(sessionId) {
      this.params["sessionId"] = sessionId;
    }
  }]);
  return BaseLogger2;
}();

// ../../node_modules/@wix/fedops-logger/dist/es/src/logger-factory.js
function ownKeys3(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function(sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread3(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys3(Object(source), true).forEach(function(key) {
      _defineProperty4(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys3(Object(source)).forEach(function(key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty4(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function getAppVersion() {
  return env().__CI_APP_VERSION__ || DEFAULT_APP_VERSION;
}
function create2(appName, params) {
  if (params === void 0) {
    params = {};
  }
  if (!appName) {
    return null;
  }
  var appNameWithoutDots = appName.replace(/\./g, "-").toLowerCase();
  initializeGlobal(appNameWithoutDots);
  var fullParams = _objectSpread3(_objectSpread3({}, params), {}, {
    preset: presetLoader(params.presetType)
  });
  var reporter = create(fullParams);
  return new BaseLogger(appNameWithoutDots, getAppVersion(), reporter, fullParams);
}

// ../../node_modules/@wix/fe-essentials/dist/esm/core/EssentialsPartialDelegate.js
var import_web_bi_logger = __toESM(require_tracking_logger());
import * as Sentry from "@sentry/browser";

// ../../node_modules/@wix/fe-essentials/dist/esm/core/EssentialsPartialGetters.js
init_define_process_env();

// ../../node_modules/@wix/fe-essentials/dist/esm/core/assertEnabledAPI.js
init_define_process_env();
function assertEnabledAPI(value, message) {
  if (define_process_env_default.NODE_ENV !== "production" && value == null) {
    throw new Error(message);
  }
}

// ../../node_modules/@wix/fe-essentials/dist/esm/core/EssentialsPartialGetters.js
var EssentialsPartialGetters = class {
  getExperiments(fallback) {
    var _a;
    const experiments = (_a = this.experiments) != null ? _a : fallback == null ? void 0 : fallback.experiments;
    assertEnabledAPI(experiments, "Experiments were used without being correctly initialized! Make sure you pass `{ experiments: { scopes: [...] } }` to the `createEssentials` function.");
    return experiments;
  }
  getFedopsLogger(fallback) {
    var _a;
    const fedopsLogger = (_a = this.fedopsLogger) != null ? _a : fallback == null ? void 0 : fallback.fedopsLogger;
    assertEnabledAPI(fedopsLogger, "Fedops was used without being correctly initialized! Make sure you pass`{ fedops: { appName: '...' } }` to the `createEssentials` function.");
    return fedopsLogger;
  }
  getErrorMonitor(fallback) {
    var _a;
    const errorMonitor = (_a = this.errorMonitor) != null ? _a : fallback == null ? void 0 : fallback.errorMonitor;
    assertEnabledAPI(errorMonitor, "ErrorMonitor was used without being correctly initialized! Make sure you pass `{ errorMonitor: { ... } }` to the `createEssentials` function.");
    return errorMonitor;
  }
  getI18n(fallback) {
    var _a;
    const _i18n = (_a = this.i18n) != null ? _a : fallback == null ? void 0 : fallback.i18n;
    assertEnabledAPI(_i18n, "i18n was used without being correctly initialized! Make sure you pass `{ i18n: { ... } }` to the `createEssentials` function.");
    return _i18n;
  }
  getBILoggerFactory(fallback) {
    var _a;
    const biLoggerFactory = (_a = this.biLoggerFactory) != null ? _a : fallback == null ? void 0 : fallback.biLoggerFactory;
    assertEnabledAPI(biLoggerFactory, "BILoggerFactory was not initialized");
    return biLoggerFactory;
  }
  getBILogger(fallback) {
    var _a;
    const biLogger = (_a = this.biLogger) != null ? _a : fallback == null ? void 0 : fallback.biLogger;
    assertEnabledAPI(biLogger, "BILogger was not initialized");
    return biLogger;
  }
  getHttpClient(fallback) {
    var _a;
    const httpClient = (_a = this.httpClient) != null ? _a : fallback == null ? void 0 : fallback.httpClient;
    assertEnabledAPI(httpClient, "HttpClient was not initialized");
    return httpClient;
  }
  getEnvironment(fallback) {
    const environment = fallback == null ? void 0 : fallback.environment;
    assertEnabledAPI(environment, "Environment was not initialized");
    return environment;
  }
  getErrorHandler(fallback) {
    const errorHandler = fallback == null ? void 0 : fallback.errorHandler;
    assertEnabledAPI(errorHandler, "ErrorHandler was not initialized");
    return errorHandler;
  }
  getDataCapsule(fallback) {
    var _a;
    const dataCapsule = (_a = this.dataCapsule) != null ? _a : fallback == null ? void 0 : fallback.dataCapsule;
    assertEnabledAPI(dataCapsule, "DataCapsule was used without being correctly initialized! Make sure you pass `{ dataCapsule: { ... } }` to the `createEssentials` function.");
    return dataCapsule;
  }
  getCreateCurrencyFormatter(fallback) {
    var _a;
    const createCurrencyFormatter = (_a = this.createCurrencyFormatter) != null ? _a : fallback == null ? void 0 : fallback.createCurrencyFormatter;
    assertEnabledAPI(createCurrencyFormatter, "CreateCurrencyFormatter was not initialized");
    return createCurrencyFormatter;
  }
  getFormatAddress(fallback) {
    var _a;
    const formatAddress2 = (_a = this.formatAddress) != null ? _a : fallback == null ? void 0 : fallback.formatAddress;
    assertEnabledAPI(formatAddress2, "formatAddress was not initialized");
    return formatAddress2;
  }
  getAbTranslate(fallback) {
    var _a;
    const abTranslate = (_a = this.abTranslate) != null ? _a : fallback == null ? void 0 : fallback.abTranslate;
    assertEnabledAPI(abTranslate, "abTranslate was not initialized");
    return abTranslate;
  }
  getPanoramaClient(fallback) {
    var _a;
    const panoramaClient = (_a = this.panoramaClient) != null ? _a : fallback == null ? void 0 : fallback.panoramaClient;
    assertEnabledAPI(panoramaClient, "panoramaClient was not initialized");
    return panoramaClient;
  }
};

// ../../node_modules/@wix/data-capsule/dist/esm/index.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/capsules.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/data-capsule.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/base-storage.js
init_define_process_env();
var BaseStorage = class _BaseStorage {
  static verify(strategy) {
    if (strategy instanceof _BaseStorage) {
      return strategy;
    } else {
      throw new Error("This class must extend BaseStorage!");
    }
  }
  extendScope(scope) {
    return scope;
  }
};

// ../../node_modules/@wix/data-capsule/dist/esm/data-capsule.js
var DataCapsule = class extends BaseStorage {
  constructor({ strategy, ...options }) {
    super();
    this.storageStrategy = BaseStorage.verify(strategy);
    this._options = options;
  }
  async setItem(key, value, options) {
    const validOptions = this._buildValidateOptions(this._options, options);
    return this.storageStrategy.setItem(key, value, validOptions);
  }
  getItem(key, options) {
    const validOptions = this._buildValidateOptions(this._options, options);
    return this.storageStrategy.getItem(key, validOptions);
  }
  removeItem(key, options) {
    const validOptions = this._buildValidateOptions(this._options, options);
    return this.storageStrategy.removeItem(key, validOptions);
  }
  getAllItems(options) {
    const validOptions = this._buildValidateOptions(this._options, options);
    return this.storageStrategy.getAllItems(validOptions);
  }
  _buildValidateOptions(capsuleOptions, options) {
    options = { ...capsuleOptions, ...options };
    options.scope = this.storageStrategy.extendScope(options.scope);
    if (!validateNamespace(options)) {
      throw new Error("namespace is required and should be a string");
    }
    return options;
  }
};
function validateNamespace(options) {
  return typeof options.namespace === "string";
}

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/cached-storage.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/utils/constants.js
init_define_process_env();
var errors = {
  NOT_FOUND: new Error("Key was not found in capsule"),
  SERVER_ERROR: new Error("Failed to perform operarion on server"),
  LOCAL_STORAGE_UNSUPPORTED: new Error("LocalStorage is not supported"),
  COOKIE_CONSENT_DISALLOWED: new Error("The item cannot be set because the user has not approved the category it belongs to")
};
var PREFIX_SEPARATOR = "|";
var KEY_SEPARATOR = "#";
var STORAGE_PREFIX = "capsule";
var NOT_FOUND = errors.NOT_FOUND;
var SERVER_ERROR = errors.SERVER_ERROR;
var LOCAL_STORAGE_UNSUPPORTED = errors.LOCAL_STORAGE_UNSUPPORTED;
var COOKIE_CONSENT_DISALLOWED = errors.COOKIE_CONSENT_DISALLOWED;

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/local-storage.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/consent-policy.js
init_define_process_env();
var CONSENT_POLICY_CATEGORIES = [
  "essential",
  "functional",
  "analytics",
  "advertising"
];
function verifyConsentPolicy(category) {
  verifyConsentPolicyCategoryIfExists(category);
  const policy = getConsentPolicy();
  if (typeof policy !== "undefined" && !policy[category]) {
    throw COOKIE_CONSENT_DISALLOWED;
  }
}
function verifyConsentPolicyCategoryIfExists(category) {
  if (!category) {
    return;
  }
  if (CONSENT_POLICY_CATEGORIES.indexOf(category) === -1) {
    const categories = CONSENT_POLICY_CATEGORIES.map((v) => "'".concat(v, "'")).join(", ");
    throw new Error("category must be one of ".concat(categories));
  }
}
function getConsentPolicy() {
  const { policy } = resolveByNativeAPI() || resolveByJsSDK() || none2();
  return policy;
}
function resolveByNativeAPI() {
  return typeof consentPolicyManager === "object" && consentPolicyManager.getCurrentConsentPolicy && consentPolicyManager.getCurrentConsentPolicy();
}
function resolveByJsSDK() {
  return typeof Wix === "object" && Wix.Utils && Wix.Utils.getCurrentConsentPolicy && Wix.Utils.getCurrentConsentPolicy();
}
function none2() {
  return {};
}

// ../../node_modules/@wix/data-capsule/dist/esm/utils/local-storage-cleaner.js
init_define_process_env();

// ../../node_modules/@wix/data-capsule/dist/esm/utils/record-utils.js
init_define_process_env();
function parseCacheKey(cacheKey) {
  const [prefix, key] = cacheKey.split(KEY_SEPARATOR);
  const [, namespace, scope] = prefix.split(PREFIX_SEPARATOR);
  if (scope === void 0) {
    return { namespace, key };
  } else {
    return { namespace, scope, key };
  }
}
function deserializeData(data) {
  return JSON.parse(data);
}
function getCacheRecords(prefix = STORAGE_PREFIX + PREFIX_SEPARATOR) {
  const items = [];
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    if (key.startsWith(prefix)) {
      const data = localStorage.getItem(key);
      items.push({
        size: key.length + data.length,
        originalKey: key,
        ...deserializeData(data),
        ...parseCacheKey(key)
      });
    }
  }
  return items;
}
function isExpired(data) {
  if (data.expiration) {
    return data.createdAt + data.expiration * 1e3 <= Date.now();
  } else {
    return false;
  }
}

// ../../node_modules/@wix/data-capsule/dist/esm/utils/local-storage-cleaner.js
function deleteRecord(cleaner, record = cleaner.records[0]) {
  localStorage.removeItem(record.originalKey);
  return {
    records: record === cleaner.records[0] ? cleaner.records.slice(1) : cleaner.records.filter(({ originalKey }) => originalKey !== record.originalKey),
    requiredSpace: cleaner.requiredSpace - record.size
  };
}
function deleteExpired(cleaner) {
  const expiredRecords = cleaner.records.filter((record) => isExpired(record));
  expiredRecords.forEach((record) => cleaner = deleteRecord(cleaner, record));
  return cleaner;
}
function lastUsedSort(a, b) {
  return a.lastUsed - b.lastUsed;
}
function canClean(cleaner) {
  return cleaner.records.length > 0 && cleaner.requiredSpace > 0;
}
function deleteOld(cleaner) {
  cleaner.records.sort(lastUsedSort);
  while (canClean(cleaner)) {
    cleaner = deleteRecord(cleaner);
  }
  return cleaner;
}
function localStorageCleaner(requiredSpace) {
  let cleaner = { records: getCacheRecords(), requiredSpace };
  cleaner = deleteExpired(cleaner);
  deleteOld(cleaner);
}

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/local-storage.js
var LocalStorageStrategy = class extends BaseStorage {
  async setItem(key, value, options) {
    const serializedKey = getCacheKey(key, options);
    const serializedValue = serializeData(value, options);
    if (options.category) {
      verifyConsentPolicy(options.category);
    }
    try {
      localStorage.setItem(serializedKey, serializedValue);
    } catch (e) {
      localStorageCleaner(serializedKey.length + serializedValue.length);
      localStorage.setItem(serializedKey, serializedValue);
    }
  }
  getItem(key, options) {
    const fullKey = getCacheKey(key, options);
    let data;
    try {
      data = localStorage.getItem(fullKey);
    } catch (e) {
      return Promise.reject(LOCAL_STORAGE_UNSUPPORTED);
    }
    data = data && deserializeData(data);
    if (data && !isExpired(data)) {
      updateAccessTime(fullKey, data);
      return Promise.resolve(data.value);
    } else {
      return Promise.reject(NOT_FOUND);
    }
  }
  removeItem(key, options) {
    key = getCacheKey(key, options);
    localStorage.removeItem(key);
    return Promise.resolve();
  }
  getAllItems(options) {
    const prefix = getCachePrefix(options);
    const items = {};
    getCacheRecords(prefix).forEach((record) => {
      if (!isExpired(record)) {
        items[record.key] = record.value;
      }
    });
    return Promise.resolve(items);
  }
};
function getCacheKey(key, options) {
  return getCachePrefix(options) + key;
}
function stringify(obj) {
  return typeof obj === "string" ? obj : JSON.stringify(obj);
}
function getCachePrefix(options) {
  return [STORAGE_PREFIX, options.namespace, stringify(options.scope)].filter((x) => x).join(PREFIX_SEPARATOR) + KEY_SEPARATOR;
}
function serializeData(value, options) {
  const data = {
    lastUsed: Date.now(),
    createdAt: options.createdAt || Date.now(),
    expiration: options.expiration,
    value
  };
  return JSON.stringify(data);
}
function updateAccessTime(fullKey, data) {
  const { expiration, createdAt } = data;
  localStorage.setItem(fullKey, serializeData(data.value, { expiration, createdAt }));
}

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/null-storage.js
init_define_process_env();
var NullStrategy = class extends BaseStorage {
  async setItem() {
  }
  getItem() {
    return Promise.reject(NOT_FOUND);
  }
  removeItem() {
    return Promise.resolve();
  }
  getAllItems() {
    return Promise.resolve({});
  }
};

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/wix-storage.js
init_define_process_env();
function getCookieValue(name) {
  var _a;
  if (typeof document === "undefined") {
    return "";
  }
  return (_a = (document.cookie.match("".concat(name, "=([^;]*)")) || [""]).pop()) != null ? _a : "";
}
function getUserId() {
  const wixClient = getCookieValue("wixClient").split("|");
  return wixClient[6] || getCookieValue("_wixCIDX");
}
var WixStorageStrategy = class extends BaseStorage {
  constructor({ httpClient }) {
    super();
    this.httpClient = httpClient;
  }
  extendScope(scope) {
    return {
      userId: getUserId(),
      ...typeof scope === "string" ? { siteId: scope } : scope
    };
  }
  setItem(key, value, options) {
    const payload = {
      nameSpace: options.namespace,
      key,
      blob: value
    };
    if (typeof options.scope === "object" && options.scope.siteId) {
      payload.siteId = options.scope.siteId;
    }
    if (options.expiration) {
      payload.TTLInDays = Math.ceil(options.expiration / (60 * 60 * 24));
    }
    return this.httpClient.post("/_api/wix-user-preferences-webapp/set", payload).then(() => void 0).catch((e) => {
      console.error(e);
      throw SERVER_ERROR;
    });
  }
  removeItem(key, options) {
    const payload = {
      nameSpace: options.namespace,
      key
    };
    if (typeof options.scope === "object" && options.scope.siteId) {
      payload.siteId = options.scope.siteId;
    }
    return this.httpClient.post("/_api/wix-user-preferences-webapp/delete", payload).then(() => void 0).catch(() => {
      throw SERVER_ERROR;
    });
  }
  getItem(key, options) {
    const siteId = typeof options.scope === "object" ? options.scope.siteId : void 0;
    const path = siteId ? "getVolatilePrefForSite" : "getVolatilePrefForKey";
    const url = [
      "/_api/wix-user-preferences-webapp",
      path,
      options.namespace,
      siteId,
      key
    ].filter((x) => x).join("/");
    return this.httpClient.get(url).then((res) => res.data[key]).catch((err) => {
      var _a;
      throw ((_a = err == null ? void 0 : err.response) == null ? void 0 : _a.status) === 404 ? NOT_FOUND : SERVER_ERROR;
    });
  }
  getAllItems(options) {
    const siteId = typeof options.scope === "object" ? options.scope.siteId : void 0;
    const path = siteId ? "getVolatilePrefsForSite" : "getVolatilePrefs";
    const url = [
      "/_api/wix-user-preferences-webapp",
      path,
      options.namespace,
      siteId
    ].filter((x) => x).join("/");
    return this.httpClient.get(url).then((res) => res.data).catch(() => {
      throw SERVER_ERROR;
    });
  }
};

// ../../node_modules/@wix/data-capsule/dist/esm/strategies/cached-storage.js
var DELETED = "___DELETED___";
var CachedStorageStrategy = class extends BaseStorage {
  constructor({ remoteStrategy, localStrategy }) {
    super();
    if (shouldIgnoreCache(remoteStrategy)) {
      localStrategy = new NullStrategy();
    }
    this.remoteStrategy = BaseStorage.verify(remoteStrategy);
    this.localStrategy = BaseStorage.verify(localStrategy || new LocalStorageStrategy());
  }
  extendScope(scope) {
    return this.remoteStrategy.extendScope(scope);
  }
  _cacheItem(key, value, options) {
    return this.localStrategy.setItem(key, value, Object.assign(options, { expiration: 3600 }));
  }
  setItem(key, value, options) {
    return this.remoteStrategy.setItem(key, value, options).then(() => this._cacheItem(key, value, options));
  }
  removeItem(key, options) {
    return this.remoteStrategy.removeItem(key, options).then(() => this._cacheItem(key, DELETED, options));
  }
  getItem(key, options) {
    function throwIfDeletedOrReturn(value) {
      if (value === DELETED) {
        throw NOT_FOUND;
      }
      return value;
    }
    return this.localStrategy.getItem(key, options).catch(() => this._getRemoteAndCache(key, options)).then(throwIfDeletedOrReturn);
  }
  getAllItems(options) {
    return this.remoteStrategy.getAllItems(options).then((items) => Promise.all(Object.keys(items).map((key) => this._cacheItem(key, items[key], options))).then(() => items));
  }
  _getRemoteAndCache(key, options) {
    return this.remoteStrategy.getItem(key, options).then((value) => {
      return this._cacheItem(key, value, options).then(() => value);
    }).catch((e) => {
      if (e === NOT_FOUND) {
        return this._cacheItem(key, DELETED, options).then(() => {
          throw e;
        });
      }
      throw e;
    });
  }
};
function shouldIgnoreCache(remoteStrategy) {
  return remoteStrategy && remoteStrategy.constructor === WixStorageStrategy && getUserId() === "";
}

// ../../node_modules/@wix/data-capsule/dist/esm/capsules.js
function LocalStorageCachedCapsule({ remoteStrategy, ...options }) {
  return new DataCapsule({
    ...options,
    strategy: new CachedStorageStrategy({
      remoteStrategy
    })
  });
}

// ../../node_modules/@wix/l10n/dist/esm/index.js
init_define_process_env();

// ../../node_modules/@wix/l10n/dist/esm/currency/formatter.js
init_define_process_env();

// ../../node_modules/@wix/l10n/dist/esm/currency/factory.js
init_define_process_env();
var extractLanguageCode = (language) => {
  return language.split("-")[0];
};
var _currencyFormatterFactory = ({ language, country, ...options }) => {
  if (typeof (Intl == null ? void 0 : Intl.NumberFormat) === "undefined") {
    throw new Error("Intl.NumberFormat is not available.");
  }
  const languageCode = extractLanguageCode(language);
  const locale = country ? "".concat(languageCode, "-").concat(country) : language;
  return Intl.NumberFormat(locale, {
    style: "currency",
    ...options
  });
};
var cache = /* @__PURE__ */ new Map();
var resolver = (options) => Object.keys(options).filter((key) => options[key] !== void 0).sort().map((key) => "".concat(key, "=").concat(options[key])).join("&");
var currencyFormatterFactory = (params) => {
  const key = resolver(params);
  if (cache.has(key)) {
    return cache.get(key);
  }
  const result = _currencyFormatterFactory(params);
  cache.set(key, result);
  return result;
};
currencyFormatterFactory.cache = cache;

// ../../node_modules/@wix/l10n/dist/esm/currency/formatter.js
function createCurrencyFormatterWithDefaults(defaults2) {
  return function createCurrencyFormatter(params) {
    const overrides = {
      ...defaults2,
      ...params
    };
    return function format({ value, currency }) {
      const instance = currencyFormatterFactory({ ...overrides, currency });
      const input = typeof value === "string" ? Number(value) : value;
      if (overrides.parts) {
        return instance.formatToParts(input);
      }
      return instance.format(input);
    };
  };
}

// ../../node_modules/@wix/l10n/dist/esm/address/index.js
init_define_process_env();

// ../../node_modules/@wix/l10n/dist/esm/address/formatter.js
init_define_process_env();

// ../../node_modules/@wix/l10n/dist/esm/address/parser.js
init_define_process_env();

// ../../node_modules/@wix/l10n/dist/esm/address/formats.js
init_define_process_env();
var formats = { "AC": "%N%n%O%n%A%n%C%n%Z", "AD": "%N%n%O%n%A%n%Z %C", "AE": "%N%n%O%n%A%n%S", "AF": "%N%n%O%n%A%n%C%n%Z", "AI": "%N%n%O%n%A%n%C%n%Z", "AL": "%N%n%O%n%A%n%Z%n%C", "AM": "%N%n%O%n%A%n%Z%n%C%n%S", "AR": "%N%n%O%n%A%n%Z %C%n%S", "AS": "%N%n%O%n%A%n%C %S %Z", "AT": "%O%n%N%n%A%n%Z %C", "AU": "%O%n%N%n%A%n%C %S %Z", "AX": "%O%n%N%n%A%n%Z %C%n\xC5LAND", "AZ": "%N%n%O%n%A%nAZ %Z %C", "BA": "%N%n%O%n%A%n%Z %C", "BB": "%N%n%O%n%A%n%C, %S %Z", "BD": "%N%n%O%n%A%n%C - %Z", "BE": "%O%n%N%n%A%n%Z %C", "BF": "%N%n%O%n%A%n%C %X", "BG": "%N%n%O%n%A%n%Z %C", "BH": "%N%n%O%n%A%n%C %Z", "BL": "%O%n%N%n%A%n%Z %C %X", "BM": "%N%n%O%n%A%n%C %Z", "BN": "%N%n%O%n%A%n%C %Z", "BR": "%O%n%N%n%A%n%D%n%C-%S%n%Z", "BS": "%N%n%O%n%A%n%C, %S", "BT": "%N%n%O%n%A%n%C %Z", "BY": "%O%n%N%n%A%n%Z, %C%n%S", "CA": "%N%n%O%n%A%n%C %S %Z", "CC": "%O%n%N%n%A%n%C %S %Z", "CH": "%O%n%N%n%A%n%Z %C", "CI": "%N%n%O%n%X %A %C %X", "CL": "%N%n%O%n%A%n%Z %C%n%S", "CN": "%Z%n%S%C%D%n%A%n%O%n%N", "CO": "%N%n%O%n%A%n%D%n%C, %S, %Z", "CR": "%N%n%O%n%A%n%S, %C%n%Z", "CU": "%N%n%O%n%A%n%C %S%n%Z", "CV": "%N%n%O%n%A%n%Z %C%n%S", "CX": "%O%n%N%n%A%n%C %S %Z", "CY": "%N%n%O%n%A%n%Z %C", "CZ": "%N%n%O%n%A%n%Z %C", "DE": "%N%n%O%n%A%n%Z %C", "DK": "%N%n%O%n%A%n%Z %C", "DO": "%N%n%O%n%A%n%Z %C", "DZ": "%N%n%O%n%A%n%Z %C", "EC": "%N%n%O%n%A%n%Z%n%C", "EE": "%N%n%O%n%A%n%Z %C %S", "EG": "%N%n%O%n%A%n%C%n%S%n%Z", "EH": "%N%n%O%n%A%n%Z %C", "ES": "%N%n%O%n%A%n%Z %C %S", "ET": "%N%n%O%n%A%n%Z %C", "FI": "%O%n%N%n%A%n%Z %C", "FK": "%N%n%O%n%A%n%C%n%Z", "FM": "%N%n%O%n%A%n%C %S %Z", "FO": "%N%n%O%n%A%nFO%Z %C", "FR": "%O%n%N%n%A%n%Z %C", "GB": "%N%n%O%n%A%n%C%n%Z", "GE": "%N%n%O%n%A%n%Z %C", "GF": "%O%n%N%n%A%n%Z %C %X", "GG": "%N%n%O%n%A%n%C%nGUERNSEY%n%Z", "GI": "%N%n%O%n%A%nGIBRALTAR%n%Z", "GL": "%N%n%O%n%A%n%Z %C", "GN": "%N%n%O%n%Z %A %C", "GP": "%O%n%N%n%A%n%Z %C %X", "GR": "%N%n%O%n%A%n%Z %C", "GS": "%N%n%O%n%A%n%n%C%n%Z", "GT": "%N%n%O%n%A%n%Z- %C", "GU": "%N%n%O%n%A%n%C %Z", "GW": "%N%n%O%n%A%n%Z %C", "HK": "%S%n%C%n%A%n%O%n%N", "HM": "%O%n%N%n%A%n%C %S %Z", "HN": "%N%n%O%n%A%n%C, %S%n%Z", "HR": "%N%n%O%n%A%n%Z %C", "HT": "%N%n%O%n%A%nHT%Z %C", "HU": "%N%n%O%n%C%n%A%n%Z", "ID": "%N%n%O%n%A%n%C%n%S %Z", "IE": "%N%n%O%n%A%n%D%n%C%n%S%n%Z", "IL": "%N%n%O%n%A%n%C %Z", "IM": "%N%n%O%n%A%n%C%n%Z", "IN": "%N%n%O%n%A%n%C %Z%n%S", "IO": "%N%n%O%n%A%n%C%n%Z", "IQ": "%O%n%N%n%A%n%C, %S%n%Z", "IR": "%O%n%N%n%S%n%C, %D%n%A%n%Z", "IS": "%N%n%O%n%A%n%Z %C", "IT": "%N%n%O%n%A%n%Z %C %S", "JE": "%N%n%O%n%A%n%C%nJERSEY%n%Z", "JM": "%N%n%O%n%A%n%C%n%S %X", "JO": "%N%n%O%n%A%n%C %Z", "JP": "\u3012%Z%n%S%n%C%n%A%n%O%n%N%", "KE": "%N%n%O%n%A%n%C%n%Z", "KG": "%N%n%O%n%A%n%Z %C", "KH": "%N%n%O%n%A%n%C %Z", "KI": "%N%n%O%n%A%n%S%n%C", "KN": "%N%n%O%n%A%n%C, %S", "KP": "%Z%n%S%n%C%n%A%n%O%n%N", "KR": "%S %C%D%n%A%n%O%n%N%n%Z", "KW": "%N%n%O%n%A%n%Z %C", "KY": "%N%n%O%n%A%n%S %Z", "KZ": "%Z%n%S%n%C%n%A%n%O%n%N", "LA": "%N%n%O%n%A%n%Z %C", "LB": "%N%n%O%n%A%n%C %Z", "LI": "%O%n%N%n%A%n%Z %C", "LK": "%N%n%O%n%A%n%C%n%Z", "LR": "%N%n%O%n%A%n%Z %C", "LS": "%N%n%O%n%A%n%C %Z", "LT": "%O%n%N%n%A%n%Z %C", "LU": "%O%n%N%n%A%n%Z %C", "LV": "%N%n%O%n%A%n%S%n%C, %Z", "MA": "%N%n%O%n%A%n%Z %C", "MC": "%N%n%O%n%A%n%Z %C %X", "MD": "%N%n%O%n%A%n%Z %C", "ME": "%N%n%O%n%A%n%Z %C", "MF": "%O%n%N%n%A%n%Z %C %X", "MG": "%N%n%O%n%A%n%Z %C", "MH": "%N%n%O%n%A%n%C %S %Z", "MK": "%N%n%O%n%A%n%Z %C", "MM": "%N%n%O%n%A%n%C, %Z", "MN": "%N%n%O%n%A%n%C%n%S %Z", "MO": "%A%n%O%n%N", "MP": "%N%n%O%n%A%n%C %S %Z", "MQ": "%O%n%N%n%A%n%Z %C %X", "MT": "%N%n%O%n%A%n%C %Z", "MU": "%N%n%O%n%A%n%Z%n%C", "MV": "%N%n%O%n%A%n%C %Z", "MW": "%N%n%O%n%A%n%C %X", "MX": "%N%n%O%n%A%n%D%n%Z %C, %S", "MY": "%N%n%O%n%A%n%D%n%Z %C%n%S", "MZ": "%N%n%O%n%A%n%Z %C%S", "NA": "%N%n%O%n%A%n%C%n%Z", "NC": "%O%n%N%n%A%n%Z %C %X", "NE": "%N%n%O%n%A%n%Z %C", "NF": "%O%n%N%n%A%n%C %S %Z", "NG": "%N%n%O%n%A%n%D%n%C %Z%n%S", "NI": "%N%n%O%n%A%n%Z%n%C, %S", "NL": "%O%n%N%n%A%n%Z %C", "NO": "%N%n%O%n%A%n%Z %C", "NP": "%N%n%O%n%A%n%C %Z", "NR": "%N%n%O%n%A%n%S", "NZ": "%N%n%O%n%A%n%D%n%C %Z", "OM": "%N%n%O%n%A%n%Z%n%C", "PA": "%N%n%O%n%A%n%C%n%S", "PE": "%N%n%O%n%A%n%C %Z%n%S", "PF": "%N%n%O%n%A%n%Z %C %S", "PG": "%N%n%O%n%A%n%C %Z %S", "PH": "%N%n%O%n%A%n%D, %C%n%Z %S", "PK": "%N%n%O%n%A%n%D%n%C-%Z", "PL": "%N%n%O%n%A%n%Z %C", "PM": "%O%n%N%n%A%n%Z %C %X", "PN": "%N%n%O%n%A%n%C%n%Z", "PR": "%N%n%O%n%A%n%C PR %Z", "PT": "%N%n%O%n%A%n%Z %C", "PW": "%N%n%O%n%A%n%C %S %Z", "PY": "%N%n%O%n%A%n%Z %C", "RE": "%O%n%N%n%A%n%Z %C %X", "RO": "%N%n%O%n%A%n%Z %S %C", "RS": "%N%n%O%n%A%n%Z %C", "RU": "%N%n%O%n%A%n%C%n%S%n%Z", "SA": "%N%n%O%n%A%n%C %Z", "SC": "%N%n%O%n%A%n%C%n%S", "SD": "%N%n%O%n%A%n%C%n%Z", "SE": "%O%n%N%n%A%n%Z %C", "SG": "%N%n%O%n%A%nSINGAPORE %Z", "SH": "%N%n%O%n%A%n%C%n%Z", "SI": "%N%n%O%n%A%n%Z %C", "SJ": "%N%n%O%n%A%n%Z %C", "SK": "%N%n%O%n%A%n%Z %C", "SM": "%N%n%O%n%A%n%Z %C", "SN": "%N%n%O%n%A%n%Z %C", "SO": "%N%n%O%n%A%n%C, %S %Z", "SR": "%N%n%O%n%A%n%C%n%S", "SV": "%N%n%O%n%A%n%Z-%C%n%S", "SZ": "%N%n%O%n%A%n%C%n%Z", "TA": "%N%n%O%n%A%n%C%n%Z", "TC": "%N%n%O%n%A%n%C%n%Z", "TH": "%N%n%O%n%A%n%D %C%n%S %Z", "TJ": "%N%n%O%n%A%n%Z %C", "TM": "%N%n%O%n%A%n%Z %C", "TN": "%N%n%O%n%A%n%Z %C", "TR": "%N%n%O%n%A%n%Z %C/%S", "TV": "%N%n%O%n%A%n%C%n%S", "TW": "%Z%n%S%C%n%A%n%O%n%N", "TZ": "%N%n%O%n%A%n%Z %C", "UA": "%N%n%O%n%A%n%C%n%S%n%Z", "UM": "%N%n%O%n%A%n%C %S %Z", "US": "%N%n%O%n%A%n%C, %S %Z", "UY": "%N%n%O%n%A%n%Z %C %S", "UZ": "%N%n%O%n%A%n%Z %C%n%S", "VA": "%N%n%O%n%A%n%Z %C", "VC": "%N%n%O%n%A%n%C %Z", "VE": "%N%n%O%n%A%n%C %Z, %S", "VG": "%N%n%O%n%A%n%C%n%Z", "VI": "%N%n%O%n%A%n%C %S %Z", "VN": "%N%n%O%n%A%n%C%n%S %Z", "WF": "%O%n%N%n%A%n%Z %C %X", "XK": "%N%n%O%n%A%n%Z %C", "YT": "%O%n%N%n%A%n%Z %C %X", "ZA": "%N%n%O%n%A%n%D%n%C%n%Z", "ZM": "%N%n%O%n%A%n%Z %C" };
var defaultFormat = "%N%n%O%n%A%n%C";

// ../../node_modules/@wix/l10n/dist/esm/address/parser.js
var libaddressFields = {
  "%N": "name",
  "%O": "organization",
  "%A": "addressLines",
  "%D": "dependentLocality",
  "%C": "locality",
  "%S": "administrativeArea",
  "%Z": "postalCode",
  "%X": "sortingCode",
  "%R": "postalCountry"
};
var streetNameFirstCountries = [
  "AU",
  "AT",
  "BG",
  "HR",
  "CZ",
  "DK",
  "EE",
  "FI",
  "FR",
  "DE",
  "GR",
  "HU",
  "IS",
  "IT",
  "LV",
  "LT",
  "LU",
  "NL",
  "NZ",
  "NO",
  "PL",
  "PT",
  "RO",
  "SK",
  "SI",
  "ES",
  "SE",
  "CH",
  "TR",
  "IE",
  "JP",
  "BR"
  // Brazil
];
var convertStreetAddressToAddressLine = ({ name, number, apt }, countryCode) => {
  if (!name && !number) {
    return "";
  }
  if (!name || !number) {
    return name || number;
  }
  const formattedNumber = apt ? "".concat(number, "-").concat(apt) : number;
  if (streetNameFirstCountries.includes(countryCode)) {
    return "".concat(name, " ").concat(formattedNumber).trim();
  }
  return "".concat(formattedNumber, " ").concat(name).trim();
};
var convertWixAdressToGoogleAddress = (address, addressContactDetails) => {
  var _a, _b;
  const addressLines = [];
  const addressLine2 = (_b = (_a = address.addressLine2) != null ? _a : address.addressLine_2) != null ? _b : void 0;
  if (address.streetAddress) {
    const streetAddress = convertStreetAddressToAddressLine(address.streetAddress, address.country);
    addressLines.push(streetAddress);
  } else {
    if (address.addressLine) {
      addressLines.push(address.addressLine);
    }
  }
  if (addressLine2) {
    addressLines.push(addressLine2);
  }
  return {
    name: addressContactDetails == null ? void 0 : addressContactDetails.fullName,
    organization: addressContactDetails == null ? void 0 : addressContactDetails.company,
    postalCountry: address.country,
    administrativeArea: address.subdivision,
    locality: address.city,
    country: address.countryFullname,
    postalCode: address.postalCode,
    addressLines
  };
};
var getGoogleTemplate = (countryCode) => {
  const code = countryCode == null ? void 0 : countryCode.toUpperCase();
  if (code && code in formats) {
    return formats[code];
  }
  return defaultFormat;
};
var isAddressFieldToken = (token) => {
  return token[0] === "%" && token !== "%n";
};
var getTokenName = (token) => {
  return libaddressFields[token];
};
var hasFieldToken = (address, field) => {
  if (field === "addressLines") {
    return address.addressLines !== void 0 && address.addressLines.length > 0;
  }
  return address[field] !== void 0 && address[field] !== "";
};
var parseGoogleTemplate = (template) => {
  const parts = [];
  let i = 0;
  while (i < template.length) {
    if (template[i] === "%") {
      parts.push(template.slice(i, i + 2));
      i += 1;
    } else {
      let j = i;
      while (template[j] !== "%" && j < template.length) {
        j += 1;
      }
      parts.push(template.slice(i, j));
      i = j - 1;
    }
    i += 1;
  }
  return parts;
};
var trimGoogleTemplate = (address, tokens) => {
  const parts = [];
  let i = 0;
  while (i < tokens.length) {
    const token = tokens[i];
    if (token === "%n") {
      parts.push(token);
    } else if (isAddressFieldToken(token)) {
      const tokenName = getTokenName(token);
      if (hasFieldToken(address, tokenName)) {
        parts.push(token);
      }
    } else {
      const notFollowingRemovedField = i === 0 || !isAddressFieldToken(tokens[i - 1]) || parts.length > 0 && isAddressFieldToken(parts[parts.length - 1]);
      const notPrecedingEmptyField = i === token.length - 1 || token[i + 1] === "%n" || hasFieldToken(address, getTokenName(tokens[i + 1]));
      if (notFollowingRemovedField && notPrecedingEmptyField) {
        parts.push(token);
      }
    }
    i += 1;
  }
  while (parts.length > 0 && parts[0] === "%n") {
    parts.shift();
  }
  return parts;
};
var applyTemplate = (address, tokens, options) => {
  const lines = [];
  let line = "";
  for (const token of tokens) {
    if (token === "%n") {
      if (line.length > 0) {
        lines.push(line);
        line = "";
      }
    } else if (!isAddressFieldToken(token)) {
      line += token;
    } else {
      const field = getTokenName(token);
      if (field === "postalCountry") {
        continue;
      }
      if (field === "addressLines") {
        if (address.addressLines && address.addressLines.length > 0) {
          line += address.addressLines[0];
          lines.push(line);
          line = "";
          if (address.addressLines.length === 2) {
            lines.push(address.addressLines[1]);
          }
        }
        continue;
      }
      line += address[field];
    }
  }
  if (line.length > 0) {
    lines.push(line);
  }
  if (options.appendCountry && address.country) {
    lines.push(address.country);
  }
  return lines;
};

// ../../node_modules/@wix/l10n/dist/esm/address/formatter.js
var formatAddress = ({ address, addressContactDetails }, { appendCountry = true } = {}) => {
  const googleAddressFormat = convertWixAdressToGoogleAddress(address, addressContactDetails);
  const template = getGoogleTemplate(address.country);
  const tokens = parseGoogleTemplate(template);
  const trimmedTemplate = trimGoogleTemplate(googleAddressFormat, tokens);
  return applyTemplate(googleAddressFormat, trimmedTemplate, {
    appendCountry
  });
};

// ../../node_modules/@wix/fe-essentials/dist/esm/core/EssentialsPartialDelegate.js
var EssentialsPartialDelegate = class extends EssentialsPartialGetters {
  constructor({ experiments: experimentsOptions, fedops: fedopsOptions, errorMonitor: errorMonitorOptions, httpClient: httpClientOptions, i18n: i18nOptions, dataCapsule: dataCapsuleOptions, errorHandler: errorHandlerOptions, parent }) {
    var _a;
    super();
    const environment = this.getEnvironment(parent);
    this.errorHandler = errorHandlerOptions ? new ErrorHandler({
      environment,
      biLoggerOrFactory: import_web_bi_logger.factory,
      createExperiments: (opts) => new Experiments(opts),
      createI18n: (opts) => initI18n({
        locale: environment.language,
        ...opts
      }),
      createErrorMonitor: (opts) => createHub({
        Sentry,
        environment: calculateAppEnvironment(),
        ...opts
      }),
      ...errorHandlerOptions
    }) : void 0;
    this.httpClient = httpClientOptions ? createHttpClient({
      ...httpClientOptions,
      errorHandler: this.errorHandler
    }) : null;
    const httpClient = (_a = this.httpClient) != null ? _a : parent == null ? void 0 : parent.asPartial.httpClient;
    this.dataCapsule = dataCapsuleOptions ? new DataCapsule({
      ...dataCapsuleOptions,
      strategy: dataCapsuleOptions.storageStrategy === "userPreferences" && httpClient ? LocalStorageCachedCapsule({
        remoteStrategy: new WixStorageStrategy({
          httpClient
        })
      }) : new LocalStorageStrategy()
    }) : null;
    this.experiments = experimentsOptions ? "scopes" in experimentsOptions ? new Experiments({ scopes: experimentsOptions.scopes }) : new ReadOnlyExperiments({ experiments: experimentsOptions.bag }) : null;
    this.fedopsLogger = fedopsOptions ? create2(fedopsOptions.appName) : null;
    this.errorMonitor = errorMonitorOptions ? createHub({
      Sentry,
      environment: calculateAppEnvironment(),
      ...errorMonitorOptions
    }) : null;
    this.i18n = i18nOptions ? initI18n({
      locale: environment.language,
      ...i18nOptions
    }) : null;
    this.biLoggerFactory = import_web_bi_logger.factory;
    this.biLogger = this.biLoggerFactory().logger();
    this.createCurrencyFormatter = createCurrencyFormatterWithDefaults({
      language: environment.language
    });
    this.formatAddress = formatAddress;
  }
};

// ../../node_modules/@wix/fe-essentials/dist/esm/core/ChildEssentials.js
var ChildEssentials = class _ChildEssentials {
  constructor({ parent, ...options }) {
    this.createChildEssentials = (options2 = {}) => {
      return new _ChildEssentials({
        ...options2,
        parent: this
      });
    };
    this._parent = parent;
    this._delegate = new EssentialsPartialDelegate({
      ...options,
      parent: this._parent
    });
  }
  get asPartial() {
    return this._delegate;
  }
  get experiments() {
    return this._delegate.getExperiments(this._parent);
  }
  get fedopsLogger() {
    return this._delegate.getFedopsLogger(this._parent);
  }
  get errorMonitor() {
    return this._delegate.getErrorMonitor(this._parent);
  }
  get i18n() {
    return this._delegate.getI18n(this._parent);
  }
  get biLoggerFactory() {
    return this._delegate.getBILoggerFactory(this._parent);
  }
  get biLogger() {
    return this._delegate.getBILogger(this._parent);
  }
  get httpClient() {
    return this._delegate.getHttpClient(this._parent);
  }
  get errorHandler() {
    return this._delegate.getErrorHandler(this._parent);
  }
  get dataCapsule() {
    return this._delegate.getDataCapsule(this._parent);
  }
  get createCurrencyFormatter() {
    return this._delegate.getCreateCurrencyFormatter(this._parent);
  }
  get formatAddress() {
    return this._delegate.getFormatAddress(this._parent);
  }
  get abTranslate() {
    return this._delegate.getAbTranslate(this._parent);
  }
  get environment() {
    return this._parent.environment;
  }
  get panoramaClient() {
    return this._delegate.getPanoramaClient(this._parent);
  }
};

// src/api/StandaloneRootEssentials.ts
var StandaloneRootEssentials = class {
  constructor({
    httpClient: httpClientOptions,
    dataCapsule: dataCapsuleOptions,
    environment: environmentOptions,
    fedops: fedopsOptions,
    ...options
  }) {
    this.createChildEssentials = ({
      dataCapsule,
      ...options
    } = {}) => {
      return new ChildEssentials({
        ...options,
        ...dataCapsule && {
          dataCapsule: {
            ...dataCapsule,
            storageStrategy: "userPreferences"
          }
        },
        parent: this
      });
    };
    this._environment = {
      ...environmentOptions
    };
    this._delegate = new EssentialsPartialDelegate({
      ...options,
      httpClient: {
        ...httpClientOptions,
        artifactId: this._environment.artifactId
      },
      dataCapsule: {
        namespace: this.environment.artifactId,
        ...dataCapsuleOptions
      },
      ...fedopsOptions && {
        fedops: {
          ...fedopsOptions,
          appName: this.environment.artifactId
        }
      },
      parent: {
        environment: this._environment
      }
    });
    this.asPartial = {
      environment: this._environment,
      ...this._delegate
    };
  }
  get experiments() {
    return this._delegate.getExperiments();
  }
  get fedopsLogger() {
    return this._delegate.getFedopsLogger();
  }
  get errorHandler() {
    return this._delegate.getErrorHandler();
  }
  get errorMonitor() {
    return this._delegate.getErrorMonitor();
  }
  get i18n() {
    return this._delegate.getI18n();
  }
  get biLoggerFactory() {
    return this._delegate.getBILoggerFactory();
  }
  get biLogger() {
    return this._delegate.getBILogger();
  }
  get httpClient() {
    return this._delegate.getHttpClient();
  }
  get environment() {
    return this._environment;
  }
  get dataCapsule() {
    return this._delegate.getDataCapsule();
  }
  get createCurrencyFormatter() {
    return this._delegate.getCreateCurrencyFormatter();
  }
  get formatAddress() {
    return this._delegate.getFormatAddress();
  }
  get abTranslate() {
    return this._delegate.getAbTranslate();
  }
  get panoramaClient() {
    throw new Error(
      "Panorama Client is not implemented in Standalone Essentials"
    );
  }
};

// src/api/createEssentials.ts
function createEssentials(options) {
  return new StandaloneRootEssentials(options);
}
export {
  createEssentials
};
/*! Bundled license information:

base-64/base64.js:
  (*! https://mths.be/base64 v1.0.0 by @mathias | MIT license *)
*/
//# sourceMappingURL=bex-bundled-mini-essentials.js.map