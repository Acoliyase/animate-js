import React, { useRef } from 'react';
import classNames from 'clsx';
import MediaRenderer from '../media/MediaRenderer';
import { getLinkParams, renderCustomOrDefaultComp } from '../utils';
import s from './ItemRenderer.module.scss';
const ItemRenderer = ({ data, selectors, customRenderers, onItemClick, shouldUseDirectLink, options, }) => {
    const anchorRef = useRef(null);
    const props = { data, selectors, customRenderers, options };
    const { metaData } = data;
    const handleKeyUp = (e) => {
        switch (e.key) {
            case ' ': // space
            case 'Enter': // enter
                e.stopPropagation();
                onItemClick(e, false); // pressing enter or space always behaves as click on main image, even if the click is on a thumbnail
                if (shouldUseDirectLink()) {
                    anchorRef.current?.click(); // when directLink, we want to simulate the 'enter' or 'space' press on an <a> element
                }
                return false;
            default:
                return true;
        }
    };
    const innerDiv = (React.createElement("div", { className: classNames(s.info, selectors?.info) },
        React.createElement("div", { className: classNames(s.title, selectors?.title) }, metaData.title),
        React.createElement("div", { className: classNames(s.description, selectors?.description) }, metaData.description)));
    const linkParams = getLinkParams({
        link: metaData.link,
        itemClickAction: options?.itemClickAction,
    });
    const currentIndex = Number(props.data.index);
    const counterDiv = (React.createElement("div", { className: classNames(s.counter, selectors?.counter) }, currentIndex < 9 ? `0${currentIndex + 1}` : currentIndex + 1));
    return (React.createElement("div", { className: classNames(s.content, selectors?.content) },
        React.createElement("div", { className: classNames(s.media, selectors?.media) }, renderCustomOrDefaultComp(customRenderers?.mediaRenderer, MediaRenderer, props)),
        linkParams?.href ? (React.createElement("a", { ref: anchorRef, className: classNames(s.details, selectors?.details), rel: "playground noreferrer", onKeyUp: handleKeyUp, href: linkParams.href, target: linkParams.target },
            counterDiv,
            innerDiv)) : (React.createElement(React.Fragment, null,
            React.createElement("span", { className: classNames(s.details, selectors?.details), "aria-hidden": true, rel: "playground noreferrer", onKeyUp: handleKeyUp },
                counterDiv,
                innerDiv)))));
};
export default ItemRenderer;
//# sourceMappingURL=ItemRenderer.js.map