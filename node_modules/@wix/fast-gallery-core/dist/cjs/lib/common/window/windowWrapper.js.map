{"version":3,"names":["_window2","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","WindowWrapper","constructor","_defineProperty2","_shouldUseMock","initProxyWindow","bind","windowIsAvailable","initMockWindow","window","handler","target","property","hydrateMockMap","shouldUseMock","value","Reflect","windowProxy","Proxy","proGalleryCustomProps","Set","windowFuncHandler","props","add","WindowMock","mockInstanceId","Math","floor","random","stopUsingMock","windowWrapper","exports","_window","_default"],"sources":["../../../../../src/lib/common/window/windowWrapper.ts"],"sourcesContent":["import WindowMock, { hydrateMockMap } from './window.mock';\n\nclass WindowWrapper {\n  private _shouldUseMock: boolean;\n  public window: any; // Using 'any' here for simplicity; you can define a more specific type if needed\n\n  constructor() {\n    this._shouldUseMock = true;\n    this.initProxyWindow = this.initProxyWindow.bind(this);\n    if (this.windowIsAvailable()) {\n      // this will wrap the real window with partial mock for the dimensions\n      // once the gallery is mounted we will switch from the mocked properties to the real values\n      this.initProxyWindow();\n    } else {\n      this.initMockWindow();\n    }\n  }\n\n  windowIsAvailable(): boolean {\n    try {\n      return typeof window !== 'undefined';\n    } catch (e) {\n      return false;\n    }\n  }\n\n  initProxyWindow(): void {\n    const handler: ProxyHandler<any> = {\n      get: (target: any, property: string | symbol) => {\n        if (hydrateMockMap.has(property as string) && this.shouldUseMock) {\n          return hydrateMockMap.get(property as string);\n        }\n        return target[property];\n      },\n      set: (target: any, property: string | symbol, value: any) => {\n        return Reflect.set(target, property, value);\n      },\n    };\n\n    // eslint-disable-next-line no-undef\n    const windowProxy = new Proxy(window, handler);\n\n    // Initialize proGalleryCustomProps as a Set if it doesn't exist\n    if (!windowProxy.proGalleryCustomProps) {\n      (windowProxy as any).proGalleryCustomProps = new Set<string>();\n    }\n\n    const windowFuncHandler: ProxyHandler<any> = {\n      get: (property: string | symbol) => {\n        const props = windowProxy.proGalleryCustomProps as Set<string>;\n        if (\n          !props.has(property as string) &&\n          typeof windowProxy[property] === 'function'\n        ) {\n          return windowProxy[property].bind(window);\n        }\n        return windowProxy[property];\n      },\n      set: (property: string | symbol, value: any) => {\n        const props = windowProxy.proGalleryCustomProps as Set<string>;\n        if (typeof property === 'string') {\n          props.add(property);\n        }\n        return Reflect.set(windowProxy, property, value);\n      },\n    };\n\n    // this second proxy that returns bound functions to avoid issues with non-configurable properties\n    // eslint-disable-next-line no-undef\n    this.window = new Proxy({}, windowFuncHandler);\n  }\n\n  initMockWindow(): void {\n    this.window = WindowMock;\n    this.window.mockInstanceId = Math.floor(Math.random() * 100000);\n  }\n\n  stopUsingMock(): void {\n    this.shouldUseMock = false;\n  }\n\n  get shouldUseMock(): boolean {\n    return this._shouldUseMock;\n  }\n\n  set shouldUseMock(shouldUseMock: boolean) {\n    this._shouldUseMock = shouldUseMock;\n  }\n}\n\nconst windowWrapper = new WindowWrapper();\nconst _window = windowWrapper.window;\n\nexport default _window;\nexport { windowWrapper };\n"],"mappings":"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","ignoreList":[]}