{"version":3,"names":["cherryPickedLodashFunctions","_interopRequireWildcard","require","_windowWrapper","_interopRequireDefault","_viewModeWrapper","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","GalleryUtils","constructor","_defineProperty2","isEditMode","isPreviewMode","something","fld","func","shouldUseCache","_cache","undefined","val","url","isUndefined","_params","result","tmp","_location","location","search","split","pathname","substr","forEach","item","decodeURIComponent","query","_isMobileByProps","deviceType","parseGetParam","window","isMobileViewer","deviceTypeMobile","isDeviceTypeMobile","String","toLowerCase","indexOf","getOrPutFromCache","_isUserAgentMobile","check","a","test","navigator","userAgent","vendor","opera","_isMobile","isMobileByProps","isUserAgentMobile","assign","_default","exports"],"sources":["../../../../../src/lib/common/utils/index.ts"],"sourcesContent":["import * as cherryPickedLodashFunctions from './cherryPickedLodashFunctions';\nimport window from '../window/windowWrapper';\nimport {\n  isEditMode,\n  isPreviewMode,\n  isDeviceTypeMobile,\n} from '../window/viewModeWrapper';\n\ninterface Cache {\n  [key: string]: any; // Adjust the type as needed\n}\n\ninterface Params {\n  [key: string]: string | undefined;\n}\n\nclass GalleryUtils {\n  private _cache: Cache;\n  private _params: Params;\n  public pick!: (object: any) => any;\n  public debounce!: (...args: any[]) => any;\n  public throttle!: (...args: any[]) => any;\n  public get!: (obj: any, path: string, defaultValue: any) => any;\n  public isFunction!: (something: any) => boolean;\n  public isEqual!: (obj1: object, obj2: object) => boolean;\n  public isNumber!: (n: any) => boolean;\n\n  constructor() {\n    this._cache = {};\n    this._params = {};\n\n    Object.assign(this, cherryPickedLodashFunctions);\n  }\n\n  shouldUseCache = () => {\n    return !isEditMode() && !isPreviewMode();\n  };\n\n  isUndefined = (something: any) => {\n    return typeof something === 'undefined';\n  };\n\n  getOrPutFromCache = <T>(fld: string, func: () => T): T => {\n    if (!this.shouldUseCache()) {\n      return func();\n    }\n    if (this._cache[fld] !== undefined) {\n      return this._cache[fld];\n    }\n    this._cache[fld] = func();\n    return this._cache[fld];\n  };\n\n  parseGetParam = (val: string, url?: string) => {\n    try {\n      if (!this.isUndefined(this._params[val])) {\n        return this._params[val];\n      }\n\n      let result = '',\n        tmp = [];\n\n      let _location = location;\n\n      if (url) {\n        /* @ts-expect-error */\n        // todo fix this type error\n        _location = {\n          search: '?' + (url.split('?')[1] || ''),\n          pathname: (url.split('?')[0] || '').split('/')[1] || '',\n        };\n      }\n\n      _location.search\n        // .replace ( \"?\", \"\" )\n        // this is better, there might be a question mark inside\n        .substr(1)\n        .split('&')\n        .forEach((item) => {\n          tmp = item.split('=');\n          if (tmp[0] === val) {\n            result = decodeURIComponent(tmp[1]);\n          }\n        });\n\n      if (!result) {\n        // if the param was not found in the search, try decoding the path\n        const query = decodeURIComponent(_location.pathname).split('?')[1];\n        if (!query) {\n          return '';\n        }\n\n        query.split('&').forEach((item) => {\n          tmp = item.split('=');\n          if (tmp[0] === val) {\n            result = decodeURIComponent(tmp[1]);\n          }\n        });\n      }\n\n      this._params[val] = result;\n\n      return result;\n    } catch (e) {\n      return false;\n    }\n  };\n\n  isMobileByProps = () => {\n    const _isMobileByProps = () => {\n      const deviceType = this.parseGetParam('deviceType') || window.deviceType;\n      const isMobileViewer = this.parseGetParam('showMobileView') === 'true';\n      const deviceTypeMobile = isDeviceTypeMobile();\n      if (isMobileViewer) {\n        return true;\n      } else if (deviceType) {\n        return String(deviceType).toLowerCase().indexOf('mobile') >= 0;\n      } else if (deviceTypeMobile) {\n        return deviceTypeMobile;\n      } else {\n        return undefined;\n      }\n    };\n\n    return this.getOrPutFromCache('isMobileByProps', _isMobileByProps);\n  };\n\n  isUserAgentMobile = () => {\n    try {\n      const _isUserAgentMobile = () => {\n        let check = false;\n        (function (a) {\n          if (\n            /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|pixel|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n              a,\n            ) ||\n            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n              a.substr(0, 4),\n            )\n          ) {\n            check = true;\n          }\n        })(navigator.userAgent || navigator.vendor || window.opera);\n        return check;\n      };\n\n      return this.getOrPutFromCache('isUserAgentMobile', _isUserAgentMobile);\n    } catch (e) {\n      return false;\n    }\n  };\n\n  isMobile = () => {\n    const _isMobile = () => {\n      const isMobileByProps = this.isMobileByProps();\n      const isUserAgentMobile = this.isUserAgentMobile();\n\n      return this.isUndefined(isMobileByProps)\n        ? isUserAgentMobile\n        : isMobileByProps;\n    };\n\n    return this.getOrPutFromCache('isMobile', _isMobile);\n  };\n}\n\nexport default new GalleryUtils();\n"],"mappings":"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","ignoreList":[]}