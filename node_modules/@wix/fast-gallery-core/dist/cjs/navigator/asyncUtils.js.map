{"version":3,"names":["Deferred","constructor","_defineProperty2","default","isPending","promise","Promise","resolve","reject","value","reason","exports","TrackablePromise","then","_state","catch","state","onfulfilled","onrejected"],"sources":["../../../src/navigator/asyncUtils.ts"],"sourcesContent":["// Define Deferred Class\ntype Resolver<T> = (value: T | PromiseLike<T>) => void;\ntype Rejecter = (reason?: any) => void;\n\nexport class Deferred<T = void> {\n  public promise: Promise<T>;\n  public resolve!: Resolver<T>;\n  public reject!: Rejecter;\n  public isPending: boolean;\n\n  constructor() {\n    this.isPending = true;\n\n    this.promise = new Promise<T>((resolve, reject) => {\n      this.resolve = (value: T | PromiseLike<T>) => {\n        this.isPending = false;\n        resolve(value);\n      };\n      this.reject = (reason?: any) => {\n        this.isPending = false;\n        reject(reason);\n      };\n    });\n  }\n}\n\n// Custom Promise wrapper to track state\nexport class TrackablePromise<T> {\n  private promise: Promise<T>;\n  private _state: 'pending' | 'fulfilled' | 'rejected' = 'pending';\n\n  constructor(promise: Promise<T>) {\n    this.promise = promise;\n    this.promise\n      .then(() => {\n        this._state = 'fulfilled';\n      })\n      .catch(() => {\n        this._state = 'rejected';\n      });\n  }\n\n  public get state() {\n    return this._state;\n  }\n\n  public then<TResult1 = T, TResult2 = never>(\n    onfulfilled?:\n      | ((value: T) => TResult1 | PromiseLike<TResult1>)\n      | undefined\n      | null,\n    onrejected?:\n      | ((reason: any) => TResult2 | PromiseLike<TResult2>)\n      | undefined\n      | null,\n  ): Promise<TResult1 | TResult2> {\n    return this.promise.then(onfulfilled, onrejected);\n  }\n\n  public catch<TResult = never>(\n    onrejected?:\n      | ((reason: any) => TResult | PromiseLike<TResult>)\n      | undefined\n      | null,\n  ): Promise<T | TResult> {\n    return this.promise.catch(onrejected);\n  }\n}\n"],"mappings":";;;;;;AAAA;;AAIO,MAAMA,QAAQ,CAAW;EAM9BC,WAAWA,CAAA,EAAG;IAAA,IAAAC,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IACZ,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,IAAI,CAACC,OAAO,GAAG,IAAIC,OAAO,CAAI,CAACC,OAAO,EAAEC,MAAM,KAAK;MACjD,IAAI,CAACD,OAAO,GAAIE,KAAyB,IAAK;QAC5C,IAAI,CAACL,SAAS,GAAG,KAAK;QACtBG,OAAO,CAACE,KAAK,CAAC;MAChB,CAAC;MACD,IAAI,CAACD,MAAM,GAAIE,MAAY,IAAK;QAC9B,IAAI,CAACN,SAAS,GAAG,KAAK;QACtBI,MAAM,CAACE,MAAM,CAAC;MAChB,CAAC;IACH,CAAC,CAAC;EACJ;AACF;;AAEA;AAAAC,OAAA,CAAAX,QAAA,GAAAA,QAAA;AACO,MAAMY,gBAAgB,CAAI;EAI/BX,WAAWA,CAACI,OAAmB,EAAE;IAAA,IAAAH,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA,kBAFsB,SAAS;IAG9D,IAAI,CAACE,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACA,OAAO,CACTQ,IAAI,CAAC,MAAM;MACV,IAAI,CAACC,MAAM,GAAG,WAAW;IAC3B,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;MACX,IAAI,CAACD,MAAM,GAAG,UAAU;IAC1B,CAAC,CAAC;EACN;EAEA,IAAWE,KAAKA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACF,MAAM;EACpB;EAEOD,IAAIA,CACTI,WAGQ,EACRC,UAGQ,EACsB;IAC9B,OAAO,IAAI,CAACb,OAAO,CAACQ,IAAI,CAACI,WAAW,EAAEC,UAAU,CAAC;EACnD;EAEOH,KAAKA,CACVG,UAGQ,EACc;IACtB,OAAO,IAAI,CAACb,OAAO,CAACU,KAAK,CAACG,UAAU,CAAC;EACvC;AACF;AAACP,OAAA,CAAAC,gBAAA,GAAAA,gBAAA","ignoreList":[]}