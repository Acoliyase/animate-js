{"version":3,"names":["_react","_interopRequireWildcard","require","_clsx","_interopRequireDefault","_navigator","_ItemRenderer","_lib","_utils","_generalConstants","_ItemModule","_jsxFileName","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","Item","props","_props$options","index","data","selectors","customRenderers","eventsListener","createResizedMediaUrl","onMeasure","activeIndex","isCurrentlyHovered","options","isAccessible","getItemCustomAttributes","registerItemRef","itemRef","useRef","isActive","setIsActive","useState","isInFocus","setIsInFocus","itemClickAction","useEffect","current","useMeasure","callback","measurements","ref","handleRightClickContextMenu","event","disableContextMenu","preventDefault","applyItemHover","_itemRef$current","GALLERY_EVENTS","HOVER_SET","classList","add","hoverClasses","itemHover","clearItemHover","_itemRef$current2","remove","onMouseEnter","onMouseLeave","onFocus","ITEM_FOCUSED","onBlur","ITEM_LOST_FOCUS","currentTarget","blur","onKeyDown","key","itemHasLink","link","metaData","itemDoesntHaveLink","url","isItemClickable","_props$options2","_props$options3","CLICK_ACTION","NOTHING","LINK","onItemClick","shouldPreventDefault","ON_ITEM_CLICKED","shouldUseDirectLink","shouldShowHoverOnMobile","handleHoverClickOnMobile","shouldHoverWithoutOverlayAndClickOnMobile","handleGalleryItemAction","ACTION","ITEM_ACTION_TRIGGERED","target","useDirectLink","isHoverEnabledOnMobile","shouldUseDirectLinkOnMobile","utils","isMobile","type","MediaTypes","VIDEO","isEditMode","getItemAriaLabel","alt","description","title","label","substring","defaultLabel","mapTypeToLabel","IMAGE","generateResizedMediaUrl","resizeMediaConsts","resizeMethod","requiredWidth","requiredHeight","createMultiple","resizeMediaParams","item","dto","imageToken","originalUrl","mediaUrl","itemRendererProps","itemCustomAttributes","createElement","_extends2","className","classNames","s","clickable","tabIndex","role","onContextMenu","onClick","__self","__source","fileName","lineNumber","columnNumber","renderCustomOrDefaultComp","itemRenderer","ItemRenderer","_default","exports"],"sources":["../../../../src/components/item/Item.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport classNames from 'clsx';\nimport { useMeasure, Measurements } from '../../navigator';\nimport ItemRenderer from './ItemRenderer';\nimport {\n  EventsListenerFunction,\n  GALLERY_EVENTS,\n  GallerySelectors,\n  ItemContentData,\n  GalleryOptions,\n  GalleryUtils as utils,\n  isEditMode,\n  CLICK_ACTION,\n  MediaTypes,\n  ResizeMediaParams,\n  ResizeMethod,\n  ResizedImageSource,\n  // OVERLAY_BEHAVIOR_ON_HOVER,\n  // SECONDARY_MEDIA_TRIGGER,\n  // PLAY_TRIGGER,\n} from '../../lib';\nimport {\n  CustomGalleryRenderers,\n  ItemRendererProps,\n  ItemCustomAttributesFunction,\n} from '../types';\nimport { renderCustomOrDefaultComp } from '../utils';\nimport { hoverClasses } from '../generalConstants';\nimport s from './Item.module.scss';\n\nexport interface ItemProps {\n  activeIndex: number;\n  index: number;\n  data: ItemContentData;\n  selectors?: GallerySelectors;\n  customRenderers?: CustomGalleryRenderers;\n  eventsListener: EventsListenerFunction;\n  createResizedMediaUrl?: (\n    params: ResizeMediaParams,\n  ) => string | [ResizedImageSource];\n  onMeasure: (\n    index: number,\n    measurements: Measurements,\n    itemRef: React.RefObject<HTMLDivElement>,\n  ) => void;\n  options?: GalleryOptions;\n  isCurrentlyHovered: boolean;\n  isAccessible?: boolean;\n  getItemCustomAttributes?: ItemCustomAttributesFunction;\n  registerItemRef?: (index: number, element: HTMLDivElement | null) => void;\n}\n\nconst Item: React.FC<ItemProps> = (props) => {\n  const {\n    index,\n    data,\n    selectors,\n    customRenderers,\n    eventsListener,\n    createResizedMediaUrl,\n    onMeasure,\n    activeIndex,\n    isCurrentlyHovered,\n    options,\n    isAccessible,\n    getItemCustomAttributes,\n    registerItemRef,\n  } = props;\n  const itemRef = useRef<HTMLDivElement>(null);\n  const [isActive, setIsActive] = useState(false);\n  const [isInFocus, setIsInFocus] = useState<boolean>(false);\n\n  const itemClickAction = props?.options?.itemClickAction;\n\n  useEffect(() => {\n    setIsActive(index === activeIndex);\n  }, [activeIndex, index]);\n\n  useEffect(() => {\n    if (registerItemRef) {\n      registerItemRef(index, itemRef.current);\n    }\n  }, [registerItemRef, index]);\n\n  useMeasure({\n    callback: (measurements: Measurements) =>\n      onMeasure(index, measurements, itemRef),\n    index,\n    ref: itemRef,\n  });\n\n  const handleRightClickContextMenu = (event: React.MouseEvent) => {\n    if (options?.disableContextMenu) {\n      event.preventDefault();\n    }\n  };\n\n  const applyItemHover = () => {\n    eventsListener(GALLERY_EVENTS.HOVER_SET, { index });\n    itemRef.current?.classList.add(hoverClasses.itemHover);\n  };\n\n  const clearItemHover = () => {\n    itemRef.current?.classList.remove(hoverClasses.itemHover);\n    eventsListener(GALLERY_EVENTS.HOVER_SET, { index: -1 });\n  };\n\n  const onMouseEnter = () => {\n    // if (!utils.isMobile()) { //TODO: add this when isMobile is available\n    // }\n    applyItemHover();\n  };\n\n  const onMouseLeave = () => {\n    // if (!utils.isMobile()) { //TODO: add this when isMobile is available\n    // }\n    clearItemHover();\n  };\n\n  const onFocus = () => {\n    eventsListener(GALLERY_EVENTS.ITEM_FOCUSED, { index });\n    applyItemHover();\n    setIsInFocus(true);\n  };\n\n  const onBlur = (e: React.FocusEvent | React.KeyboardEvent) => {\n    if (isAccessible && isCurrentlyHovered) {\n      eventsListener(GALLERY_EVENTS.HOVER_SET, { index: -1 });\n      clearItemHover();\n    } else {\n      eventsListener(GALLERY_EVENTS.ITEM_LOST_FOCUS, { index });\n      (e.currentTarget as HTMLElement).blur();\n      setIsInFocus(false);\n    }\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      onBlur(e);\n    }\n  };\n\n  const itemHasLink = () => {\n    const { link } = data.metaData;\n    const itemDoesntHaveLink = !link || !link.url || link.url === ''; // when itemClickAction is 'LINK' but no link was added to this specific item\n    return !itemDoesntHaveLink;\n  };\n\n  const isItemClickable = () => {\n    const itemDoesntHaveLink = !itemHasLink(); // when itemClickAction is 'LINK' but no link was added to this specific item\n    return props?.options?.itemClickAction === CLICK_ACTION.NOTHING ||\n      (props?.options?.itemClickAction === CLICK_ACTION.LINK &&\n        itemDoesntHaveLink)\n      ? false\n      : true;\n  };\n\n  const onItemClick = (\n    e: React.MouseEvent | React.KeyboardEvent,\n    shouldPreventDefault = false,\n  ) => {\n    eventsListener(GALLERY_EVENTS.ON_ITEM_CLICKED, {\n      index,\n    });\n\n    if (shouldUseDirectLink()) {\n      return;\n    }\n\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n\n    if (\n      shouldShowHoverOnMobile()\n      // || shouldShowSecondMediaOnMobile()\n    ) {\n      handleHoverClickOnMobile();\n    } else if (shouldHoverWithoutOverlayAndClickOnMobile()) {\n      eventsListener(GALLERY_EVENTS.HOVER_SET, { index });\n    } else {\n      handleGalleryItemAction();\n    }\n  };\n\n  const handleGalleryItemAction = () => {\n    if (itemClickAction === CLICK_ACTION.ACTION) {\n      eventsListener(GALLERY_EVENTS.ITEM_ACTION_TRIGGERED, { index });\n    }\n  };\n\n  const shouldUseDirectLink = () => {\n    const { link } = data.metaData;\n    const { url, target } = link || {};\n    const useDirectLink = !!(\n      url &&\n      target &&\n      itemClickAction === CLICK_ACTION.LINK\n    );\n    const isHoverEnabledOnMobile = shouldShowHoverOnMobile();\n    const shouldUseDirectLinkOnMobile =\n      isHoverEnabledOnMobile &&\n      // isClickOnCurrentHoveredItem() &&\n      useDirectLink;\n\n    if (shouldUseDirectLinkOnMobile) {\n      eventsListener(GALLERY_EVENTS.HOVER_SET, { index: -1 });\n      return true;\n    }\n    if (useDirectLink && !isHoverEnabledOnMobile) {\n      return true;\n    }\n    return false;\n  };\n\n  // const isClickOnCurrentHoveredItem = () =>\n  //   isCurrentlyHovered\n  // || // this single item was already hovered.\n  // props.options?.hoveringBehavior ===\n  //   OVERLAY_BEHAVIOR_ON_HOVER.ALWAYS_SHOW;\n\n  const handleHoverClickOnMobile = () => {\n    if (isCurrentlyHovered) {\n      handleGalleryItemAction();\n      eventsListener(GALLERY_EVENTS.HOVER_SET, { index: -1 });\n    } else {\n      eventsListener(GALLERY_EVENTS.HOVER_SET, { index });\n    }\n  };\n\n  const shouldShowHoverOnMobile = () => {\n    if (utils.isMobile()) {\n      // const { hoveringBehavior, alwaysShowHover, previewHover } =\n      // props.options?.behaviors?.item?.overlay || {};\n\n      // if (hoveringBehavior === OVERLAY_BEHAVIOR_ON_HOVER.NEVER_SHOW) {\n      //   return false;\n      // }\n      if (\n        itemClickAction === CLICK_ACTION.NOTHING &&\n        data.type !== MediaTypes.VIDEO\n      ) {\n        return true;\n      }\n      // if (\n      // this.props.customComponents.customHoverRenderer &&\n      // GALLERY_CONSTS.hasHoverPlacement(\n      //   this.props.options[optionsMap.layoutParams.info.placement]\n      // ) &&\n      // hoveringBehaviour !== OVERLAY_BEHAVIOR_ON_HOVER.NEVER_SHOW\n      // ) {\n      // return true;\n      // }\n      // TODO Notice this important case\n      // if (isEditMode() && previewHover) {\n      //   return true;\n      // }\n      if (isEditMode()) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  // const shouldShowSecondMediaOnMobile = () => {\n  //   if (utils.isMobile()) {\n  //     if (\n  //       itemClickAction === CLICK_ACTION.NOTHING &&\n  //       data.type !== 'video' &&\n  //       data.type !== '3d'\n  //     ) {\n  //       return (\n  //         props.options?.secondaryMedia?.trigger ===\n  //         SECONDARY_MEDIA_TRIGGER.HOVER\n  //       );\n  //     } else {\n  //       return false;\n  //     }\n  //   }\n  //   return false;\n  // };\n\n  const shouldHoverWithoutOverlayAndClickOnMobile = () => {\n    return (\n      utils.isMobile() &&\n      // props.options?.behaviors?.item?.video?.playTrigger ===\n      //   PLAY_TRIGGER.HOVER &&\n      itemClickAction === CLICK_ACTION.NOTHING\n    );\n  };\n\n  const getItemAriaLabel = () => {\n    const { type } = data;\n    const { alt, description, title } = data.metaData;\n    const label = alt || title || description.substring(0, 120);\n    const defaultLabel = `Gallery item ${index + 1}`;\n\n    const mapTypeToLabel: { [key in MediaTypes]: string } = {\n      [MediaTypes.VIDEO]: label || `${defaultLabel} (video)`,\n      [MediaTypes.IMAGE]: label || defaultLabel,\n    };\n    return mapTypeToLabel[type as MediaTypes];\n  };\n\n  // const getItemContainerTabIndex = () => {\n  //   const tabIndex = this.isHighlight()\n  //     ? utils.getTabIndex('currentThumbnail')\n  //     : this.props.activeIndex === this.props.idx\n  //     ? utils.getTabIndex('currentGalleryItem')\n  //     : -1;\n  //   return tabIndex;\n  // }; //TODO: add this when getTabIndex is needed\n\n  const generateResizedMediaUrl = (): string | [ResizedImageSource] => {\n    const resizeMediaConsts = {\n      resizeMethod: 'fit' as ResizeMethod,\n      requiredWidth: 1000,\n      requiredHeight: 1000,\n      createMultiple: true,\n    };\n    const resizeMediaParams: ResizeMediaParams = {\n      ...resizeMediaConsts,\n      item: { item: data, dto: { imageToken: '' } },\n      originalUrl: data.mediaUrl,\n    };\n    if (typeof createResizedMediaUrl === 'function') {\n      return createResizedMediaUrl(resizeMediaParams);\n    } else {\n      return data.mediaUrl;\n    }\n  };\n\n  const itemRendererProps: ItemRendererProps = {\n    data: { ...data, mediaUrl: generateResizedMediaUrl() },\n    selectors,\n    customRenderers,\n    eventsListener,\n    onItemClick,\n    shouldUseDirectLink,\n    options,\n  };\n\n  // Get custom attributes for the item element\n  const itemCustomAttributes = getItemCustomAttributes\n    ? getItemCustomAttributes(index)\n    : {};\n\n  return (\n    <div\n      ref={itemRef}\n      className={classNames(\n        s.item,\n        selectors?.item,\n        isActive ? 'active' : '',\n        isInFocus ? 'focus' : '',\n        isItemClickable() ? s.clickable : '',\n        isCurrentlyHovered ? 'item-hover' : '',\n        isAccessible ? 'accessible' : '',\n      )}\n      tabIndex={index === activeIndex ? 0 : -1}\n      data-index={index}\n      role=\"listitem\"\n      onContextMenu={(e) => {\n        handleRightClickContextMenu(e);\n      }}\n      onClick={(e) => onItemClick(e, false)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      onFocus={onFocus}\n      onBlur={onBlur}\n      onKeyDown={onKeyDown}\n      aria-label={getItemAriaLabel()}\n      {...itemCustomAttributes}\n    >\n      {renderCustomOrDefaultComp(\n        customRenderers?.itemRenderer,\n        ItemRenderer,\n        itemRendererProps,\n      )}\n    </div>\n  );\n};\n\nexport default Item;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,IAAA,GAAAL,OAAA;AAsBA,IAAAM,MAAA,GAAAN,OAAA;AACA,IAAAO,iBAAA,GAAAP,OAAA;AACA,IAAAQ,WAAA,GAAAN,sBAAA,CAAAF,OAAA;AAAmC,IAAAS,YAAA;AAAA,SAAAV,wBAAAW,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAb,uBAAA,YAAAA,CAAAW,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAwBnC,MAAMkB,IAAyB,GAAIC,KAAK,IAAK;EAAA,IAAAC,cAAA;EAC3C,MAAM;IACJC,KAAK;IACLC,IAAI;IACJC,SAAS;IACTC,eAAe;IACfC,cAAc;IACdC,qBAAqB;IACrBC,SAAS;IACTC,WAAW;IACXC,kBAAkB;IAClBC,OAAO;IACPC,YAAY;IACZC,uBAAuB;IACvBC;EACF,CAAC,GAAGd,KAAK;EACT,MAAMe,OAAO,GAAG,IAAAC,aAAM,EAAiB,IAAI,CAAC;EAC5C,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG,IAAAC,eAAQ,EAAC,KAAK,CAAC;EAC/C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAF,eAAQ,EAAU,KAAK,CAAC;EAE1D,MAAMG,eAAe,GAAGtB,KAAK,aAAAC,cAAA,GAALD,KAAK,CAAEW,OAAO,qBAAdV,cAAA,CAAgBqB,eAAe;EAEvD,IAAAC,gBAAS,EAAC,MAAM;IACdL,WAAW,CAAChB,KAAK,KAAKO,WAAW,CAAC;EACpC,CAAC,EAAE,CAACA,WAAW,EAAEP,KAAK,CAAC,CAAC;EAExB,IAAAqB,gBAAS,EAAC,MAAM;IACd,IAAIT,eAAe,EAAE;MACnBA,eAAe,CAACZ,KAAK,EAAEa,OAAO,CAACS,OAAO,CAAC;IACzC;EACF,CAAC,EAAE,CAACV,eAAe,EAAEZ,KAAK,CAAC,CAAC;EAE5B,IAAAuB,qBAAU,EAAC;IACTC,QAAQ,EAAGC,YAA0B,IACnCnB,SAAS,CAACN,KAAK,EAAEyB,YAAY,EAAEZ,OAAO,CAAC;IACzCb,KAAK;IACL0B,GAAG,EAAEb;EACP,CAAC,CAAC;EAEF,MAAMc,2BAA2B,GAAIC,KAAuB,IAAK;IAC/D,IAAInB,OAAO,YAAPA,OAAO,CAAEoB,kBAAkB,EAAE;MAC/BD,KAAK,CAACE,cAAc,CAAC,CAAC;IACxB;EACF,CAAC;EAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAAA,IAAAC,gBAAA;IAC3B5B,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;MAAElC;IAAM,CAAC,CAAC;IACnD,CAAAgC,gBAAA,GAAAnB,OAAO,CAACS,OAAO,aAAfU,gBAAA,CAAiBG,SAAS,CAACC,GAAG,CAACC,8BAAY,CAACC,SAAS,CAAC;EACxD,CAAC;EAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;IAAA,IAAAC,iBAAA;IAC3B,CAAAA,iBAAA,GAAA3B,OAAO,CAACS,OAAO,aAAfkB,iBAAA,CAAiBL,SAAS,CAACM,MAAM,CAACJ,8BAAY,CAACC,SAAS,CAAC;IACzDlC,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;MAAElC,KAAK,EAAE,CAAC;IAAE,CAAC,CAAC;EACzD,CAAC;EAED,MAAM0C,YAAY,GAAGA,CAAA,KAAM;IACzB;IACA;IACAX,cAAc,CAAC,CAAC;EAClB,CAAC;EAED,MAAMY,YAAY,GAAGA,CAAA,KAAM;IACzB;IACA;IACAJ,cAAc,CAAC,CAAC;EAClB,CAAC;EAED,MAAMK,OAAO,GAAGA,CAAA,KAAM;IACpBxC,cAAc,CAAC6B,mBAAc,CAACY,YAAY,EAAE;MAAE7C;IAAM,CAAC,CAAC;IACtD+B,cAAc,CAAC,CAAC;IAChBZ,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAM2B,MAAM,GAAIpE,CAAyC,IAAK;IAC5D,IAAIgC,YAAY,IAAIF,kBAAkB,EAAE;MACtCJ,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;QAAElC,KAAK,EAAE,CAAC;MAAE,CAAC,CAAC;MACvDuC,cAAc,CAAC,CAAC;IAClB,CAAC,MAAM;MACLnC,cAAc,CAAC6B,mBAAc,CAACc,eAAe,EAAE;QAAE/C;MAAM,CAAC,CAAC;MACxDtB,CAAC,CAACsE,aAAa,CAAiBC,IAAI,CAAC,CAAC;MACvC9B,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM+B,SAAS,GAAIxE,CAAsB,IAAK;IAC5C,IAAIA,CAAC,CAACyE,GAAG,KAAK,QAAQ,EAAE;MACtBL,MAAM,CAACpE,CAAC,CAAC;IACX;EACF,CAAC;EAED,MAAM0E,WAAW,GAAGA,CAAA,KAAM;IACxB,MAAM;MAAEC;IAAK,CAAC,GAAGpD,IAAI,CAACqD,QAAQ;IAC9B,MAAMC,kBAAkB,GAAG,CAACF,IAAI,IAAI,CAACA,IAAI,CAACG,GAAG,IAAIH,IAAI,CAACG,GAAG,KAAK,EAAE,CAAC,CAAC;IAClE,OAAO,CAACD,kBAAkB;EAC5B,CAAC;EAED,MAAME,eAAe,GAAGA,CAAA,KAAM;IAAA,IAAAC,eAAA,EAAAC,eAAA;IAC5B,MAAMJ,kBAAkB,GAAG,CAACH,WAAW,CAAC,CAAC,CAAC,CAAC;IAC3C,OAAO,CAAAtD,KAAK,aAAA4D,eAAA,GAAL5D,KAAK,CAAEW,OAAO,qBAAdiD,eAAA,CAAgBtC,eAAe,MAAKwC,iBAAY,CAACC,OAAO,IAC5D,CAAA/D,KAAK,aAAA6D,eAAA,GAAL7D,KAAK,CAAEW,OAAO,qBAAdkD,eAAA,CAAgBvC,eAAe,MAAKwC,iBAAY,CAACE,IAAI,IACpDP,kBAAmB,GACnB,KAAK,GACL,IAAI;EACV,CAAC;EAED,MAAMQ,WAAW,GAAGA,CAClBrF,CAAyC,EACzCsF,oBAAoB,GAAG,KAAK,KACzB;IACH5D,cAAc,CAAC6B,mBAAc,CAACgC,eAAe,EAAE;MAC7CjE;IACF,CAAC,CAAC;IAEF,IAAIkE,mBAAmB,CAAC,CAAC,EAAE;MACzB;IACF;IAEA,IAAIF,oBAAoB,EAAE;MACxBtF,CAAC,CAACoD,cAAc,CAAC,CAAC;IACpB;IAEA,IACEqC,uBAAuB,CAAC;IACxB;IAAA,EACA;MACAC,wBAAwB,CAAC,CAAC;IAC5B,CAAC,MAAM,IAAIC,yCAAyC,CAAC,CAAC,EAAE;MACtDjE,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;QAAElC;MAAM,CAAC,CAAC;IACrD,CAAC,MAAM;MACLsE,uBAAuB,CAAC,CAAC;IAC3B;EACF,CAAC;EAED,MAAMA,uBAAuB,GAAGA,CAAA,KAAM;IACpC,IAAIlD,eAAe,KAAKwC,iBAAY,CAACW,MAAM,EAAE;MAC3CnE,cAAc,CAAC6B,mBAAc,CAACuC,qBAAqB,EAAE;QAAExE;MAAM,CAAC,CAAC;IACjE;EACF,CAAC;EAED,MAAMkE,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAM;MAAEb;IAAK,CAAC,GAAGpD,IAAI,CAACqD,QAAQ;IAC9B,MAAM;MAAEE,GAAG;MAAEiB;IAAO,CAAC,GAAGpB,IAAI,IAAI,CAAC,CAAC;IAClC,MAAMqB,aAAa,GAAG,CAAC,EACrBlB,GAAG,IACHiB,MAAM,IACNrD,eAAe,KAAKwC,iBAAY,CAACE,IAAI,CACtC;IACD,MAAMa,sBAAsB,GAAGR,uBAAuB,CAAC,CAAC;IACxD,MAAMS,2BAA2B,GAC/BD,sBAAsB;IACtB;IACAD,aAAa;IAEf,IAAIE,2BAA2B,EAAE;MAC/BxE,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;QAAElC,KAAK,EAAE,CAAC;MAAE,CAAC,CAAC;MACvD,OAAO,IAAI;IACb;IACA,IAAI0E,aAAa,IAAI,CAACC,sBAAsB,EAAE;MAC5C,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd,CAAC;;EAED;EACA;EACA;EACA;EACA;;EAEA,MAAMP,wBAAwB,GAAGA,CAAA,KAAM;IACrC,IAAI5D,kBAAkB,EAAE;MACtB8D,uBAAuB,CAAC,CAAC;MACzBlE,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;QAAElC,KAAK,EAAE,CAAC;MAAE,CAAC,CAAC;IACzD,CAAC,MAAM;MACLI,cAAc,CAAC6B,mBAAc,CAACC,SAAS,EAAE;QAAElC;MAAM,CAAC,CAAC;IACrD;EACF,CAAC;EAED,MAAMmE,uBAAuB,GAAGA,CAAA,KAAM;IACpC,IAAIU,iBAAK,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;MACA;;MAEA;MACA;MACA;MACA,IACE1D,eAAe,KAAKwC,iBAAY,CAACC,OAAO,IACxC5D,IAAI,CAAC8E,IAAI,KAAKC,eAAU,CAACC,KAAK,EAC9B;QACA,OAAO,IAAI;MACb;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,IAAAC,eAAU,EAAC,CAAC,EAAE;QAChB,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMb,yCAAyC,GAAGA,CAAA,KAAM;IACtD,OACEQ,iBAAK,CAACC,QAAQ,CAAC,CAAC;IAChB;IACA;IACA1D,eAAe,KAAKwC,iBAAY,CAACC,OAAO;EAE5C,CAAC;EAED,MAAMsB,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAM;MAAEJ;IAAK,CAAC,GAAG9E,IAAI;IACrB,MAAM;MAAEmF,GAAG;MAAEC,WAAW;MAAEC;IAAM,CAAC,GAAGrF,IAAI,CAACqD,QAAQ;IACjD,MAAMiC,KAAK,GAAGH,GAAG,IAAIE,KAAK,IAAID,WAAW,CAACG,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC;IAC3D,MAAMC,YAAY,GAAG,gBAAgBzF,KAAK,GAAG,CAAC,EAAE;IAEhD,MAAM0F,cAA+C,GAAG;MACtD,CAACV,eAAU,CAACC,KAAK,GAAGM,KAAK,IAAI,GAAGE,YAAY,UAAU;MACtD,CAACT,eAAU,CAACW,KAAK,GAAGJ,KAAK,IAAIE;IAC/B,CAAC;IACD,OAAOC,cAAc,CAACX,IAAI,CAAe;EAC3C,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMa,uBAAuB,GAAGA,CAAA,KAAqC;IACnE,MAAMC,iBAAiB,GAAG;MACxBC,YAAY,EAAE,KAAqB;MACnCC,aAAa,EAAE,IAAI;MACnBC,cAAc,EAAE,IAAI;MACpBC,cAAc,EAAE;IAClB,CAAC;IACD,MAAMC,iBAAoC,GAAG;MAC3C,GAAGL,iBAAiB;MACpBM,IAAI,EAAE;QAAEA,IAAI,EAAElG,IAAI;QAAEmG,GAAG,EAAE;UAAEC,UAAU,EAAE;QAAG;MAAE,CAAC;MAC7CC,WAAW,EAAErG,IAAI,CAACsG;IACpB,CAAC;IACD,IAAI,OAAOlG,qBAAqB,KAAK,UAAU,EAAE;MAC/C,OAAOA,qBAAqB,CAAC6F,iBAAiB,CAAC;IACjD,CAAC,MAAM;MACL,OAAOjG,IAAI,CAACsG,QAAQ;IACtB;EACF,CAAC;EAED,MAAMC,iBAAoC,GAAG;IAC3CvG,IAAI,EAAE;MAAE,GAAGA,IAAI;MAAEsG,QAAQ,EAAEX,uBAAuB,CAAC;IAAE,CAAC;IACtD1F,SAAS;IACTC,eAAe;IACfC,cAAc;IACd2D,WAAW;IACXG,mBAAmB;IACnBzD;EACF,CAAC;;EAED;EACA,MAAMgG,oBAAoB,GAAG9F,uBAAuB,GAChDA,uBAAuB,CAACX,KAAK,CAAC,GAC9B,CAAC,CAAC;EAEN,oBACElC,MAAA,CAAAsB,OAAA,CAAAsH,aAAA,YAAAC,SAAA,CAAAvH,OAAA;IACEsC,GAAG,EAAEb,OAAQ;IACb+F,SAAS,EAAE,IAAAC,aAAU,EACnBC,mBAAC,CAACX,IAAI,EACNjG,SAAS,oBAATA,SAAS,CAAEiG,IAAI,EACfpF,QAAQ,GAAG,QAAQ,GAAG,EAAE,EACxBG,SAAS,GAAG,OAAO,GAAG,EAAE,EACxBuC,eAAe,CAAC,CAAC,GAAGqD,mBAAC,CAACC,SAAS,GAAG,EAAE,EACpCvG,kBAAkB,GAAG,YAAY,GAAG,EAAE,EACtCE,YAAY,GAAG,YAAY,GAAG,EAChC,CAAE;IACFsG,QAAQ,EAAEhH,KAAK,KAAKO,WAAW,GAAG,CAAC,GAAG,CAAC,CAAE;IACzC,cAAYP,KAAM;IAClBiH,IAAI,EAAC,UAAU;IACfC,aAAa,EAAGxI,CAAC,IAAK;MACpBiD,2BAA2B,CAACjD,CAAC,CAAC;IAChC,CAAE;IACFyI,OAAO,EAAGzI,CAAC,IAAKqF,WAAW,CAACrF,CAAC,EAAE,KAAK,CAAE;IACtCgE,YAAY,EAAEA,YAAa;IAC3BC,YAAY,EAAEA,YAAa;IAC3BC,OAAO,EAAEA,OAAQ;IACjBE,MAAM,EAAEA,MAAO;IACfI,SAAS,EAAEA,SAAU;IACrB,cAAYiC,gBAAgB,CAAC;EAAE,GAC3BsB,oBAAoB;IAAAW,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAA7I,YAAA;MAAA8I,UAAA;MAAAC,YAAA;IAAA;EAAA,IAEvB,IAAAC,gCAAyB,EACxBtH,eAAe,oBAAfA,eAAe,CAAEuH,YAAY,EAC7BC,qBAAY,EACZnB,iBACF,CACG,CAAC;AAEV,CAAC;AAAC,IAAAoB,QAAA,GAAAC,OAAA,CAAAzI,OAAA,GAEaS,IAAI","ignoreList":[]}