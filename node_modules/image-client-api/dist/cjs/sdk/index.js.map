{"version":3,"sources":["../../../src/sdk/index.js"],"names":["imageClientApi","require","constants","populateGlobalFeatureSupport","wixStatic","wixStaticWithMedia","HAS_MEDIA_PREFIX_RE","devicePixelRatio","window","getURL","uri","test","getScaleToFitImageURL","relativeUrl","sourceWidth","sourceHeight","targetWidth","targetHeight","options","data","getData","fittingTypes","SCALE_TO_FIT","id","width","height","name","htmlTag","IMG","alignment","alignTypes","CENTER","pixelAspectRatio","getScaleToFillImageURL","SCALE_TO_FILL","focalPoint","x","y","getCropImageURL","cropX","cropY","cropWidth","cropHeight","crop","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["'use strict'\nconst imageClientApi = require('../api/uri/index')\nconst constants = require('../helpers/imageServiceConstants')\n\nimageClientApi.populateGlobalFeatureSupport()\n\nconst wixStatic = 'https://static.wixstatic.com/'\nconst wixStaticWithMedia = 'https://static.wixstatic.com/media/'\nconst HAS_MEDIA_PREFIX_RE = /^media\\//i\n\nconst devicePixelRatio = typeof window !== 'undefined' ? window.devicePixelRatio : 1\n\nfunction getURL(uri) {\n    return HAS_MEDIA_PREFIX_RE.test(uri) ? `${wixStatic}${uri}` : `${wixStaticWithMedia}${uri}`\n}\n\nfunction getScaleToFitImageURL(relativeUrl, sourceWidth, sourceHeight, targetWidth, targetHeight, options) {\n    const data = imageClientApi.getData(constants.fittingTypes.SCALE_TO_FIT, {\n        id: relativeUrl,\n        width: sourceWidth,\n        height: sourceHeight,\n        name: options && options.name\n    }, {\n        width: targetWidth,\n        height: targetHeight,\n        htmlTag: imageClientApi.htmlTag.IMG,\n        alignment: imageClientApi.alignTypes.CENTER,\n        pixelAspectRatio: devicePixelRatio\n    }, options)\n\n    return getURL(data.uri)\n}\n\nfunction getScaleToFillImageURL(relativeUrl, sourceWidth, sourceHeight, targetWidth, targetHeight, options) {\n    const data = imageClientApi.getData(constants.fittingTypes.SCALE_TO_FILL, {\n        id: relativeUrl,\n        width: sourceWidth,\n        height: sourceHeight,\n        name: options && options.name,\n        focalPoint: {\n            x: options && options.focalPoint && options.focalPoint.x,\n            y: options && options.focalPoint && options.focalPoint.y\n        }\n    }, {\n        width: targetWidth,\n        height: targetHeight,\n        htmlTag: imageClientApi.htmlTag.IMG,\n        alignment: imageClientApi.alignTypes.CENTER,\n        pixelAspectRatio: devicePixelRatio\n    }, options)\n\n    return getURL(data.uri)\n}\n\nfunction getCropImageURL(relativeUrl, sourceWidth, sourceHeight, cropX, cropY, cropWidth, cropHeight, targetWidth, targetHeight, options) {\n    const data = imageClientApi.getData(constants.fittingTypes.SCALE_TO_FILL, {\n        id: relativeUrl,\n        width: sourceWidth,\n        height: sourceHeight,\n        name: options && options.name,\n        crop: {\n            x: cropX,\n            y: cropY,\n            width: cropWidth,\n            height: cropHeight\n        }\n    }, {\n        width: targetWidth,\n        height: targetHeight,\n        htmlTag: imageClientApi.htmlTag.IMG,\n        alignment: imageClientApi.alignTypes.CENTER,\n        pixelAspectRatio: devicePixelRatio\n    }, options)\n\n    return getURL(data.uri)\n}\n\nmodule.exports = {\n    getScaleToFitImageURL,\n    getScaleToFillImageURL,\n    getCropImageURL\n}"]}