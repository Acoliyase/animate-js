{"version":3,"sources":["../../../../src/engines/attributes/imgAttributes.js"],"names":["constants","require","getCSS","transformsObj","target","attributes","css","container","img","fittingType","alignType","alignment","fittingTypes","alignTypes","position","ORIGINAL_SIZE","LEGACY_ORIGINAL_SIZE","parts","length","width","height","src","SCALE_TO_FIT","LEGACY_FIT_WIDTH","LEGACY_FIT_HEIGHT","LEGACY_FULL","objectFit","STRETCH","SCALE_TO_FILL","verticalMiddle","Math","round","horizontalMiddle","top","right","bottom","left","CENTER","LEFT","RIGHT","TOP","BOTTOM","TOP_RIGHT","TOP_LEFT","BOTTOM_RIGHT","BOTTOM_LEFT","module","exports","get"],"mappings":"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","file":"imgAttributes.js","sourcesContent":["'use strict'\n\nconst constants = require('../../helpers/imageServiceConstants')\n\n/**\n * returns image tag CSS data\n * @param {object}                  transformsObj    transform parts object\n * @param {ImageTransformTarget}    target\n *\n * @returns {{css: {img: {}, container: {}}}}\n */\nfunction getCSS(transformsObj, target) {\n    const attributes = {\n        css: {\n            container: {},\n            img: {}\n        }\n    }\n    const css = attributes.css\n    const fittingType = transformsObj.fittingType\n    const alignType = target.alignment\n\n    const fittingTypes = constants.fittingTypes\n    const alignTypes = constants.alignTypes\n\n    css.container.position = 'relative'\n\n\n    switch (fittingType) {\n        case fittingTypes.ORIGINAL_SIZE:\n        case fittingTypes.LEGACY_ORIGINAL_SIZE:\n            if (transformsObj.parts && transformsObj.parts.length) {\n                css.img.width = transformsObj.parts[0].width\n                css.img.height = transformsObj.parts[0].height\n            } else {\n                css.img.width = transformsObj.src.width\n                css.img.height = transformsObj.src.height\n            }\n            break\n\n        case fittingTypes.SCALE_TO_FIT:\n        case fittingTypes.LEGACY_FIT_WIDTH:\n        case fittingTypes.LEGACY_FIT_HEIGHT:\n        case fittingTypes.LEGACY_FULL:\n            css.img.width = target.width\n            css.img.height = target.height\n            css.img.objectFit = 'contain'\n            break\n\n        case fittingTypes.STRETCH:\n            css.img.width = target.width\n            css.img.height = target.height\n            css.img.objectFit = 'fill'\n            break\n\n        case fittingTypes.SCALE_TO_FILL:\n            css.img.width = target.width\n            css.img.height = target.height\n            css.img.objectFit = 'cover'\n            break\n    }\n\n    // set alignment in a private case where the image src is smaller than the image element,\n    if (css.img.width !== target.width || css.img.height !== target.height) {\n        const verticalMiddle = Math.round((target.height - css.img.height) / 2)\n        const horizontalMiddle = Math.round((target.width - css.img.width) / 2)\n        css.img.position = 'absolute'\n        css.img.top = 'auto'\n        css.img.right = 'auto'\n        css.img.bottom = 'auto'\n        css.img.left = 'auto'\n\n        switch (alignType) {\n            default:\n            case alignTypes.CENTER:\n                css.img.width = target.width\n                css.img.height = target.height\n                css.img.objectFit = 'none'\n                break\n\n            case alignTypes.LEFT:\n                css.img.left = 0\n                css.img.top = verticalMiddle\n                //0% 50%\n                break\n\n            case alignTypes.RIGHT:\n                css.img.right = 0\n                css.img.top = verticalMiddle\n                //100% 50%\n                break\n\n            case alignTypes.TOP:\n                css.img.left = horizontalMiddle\n                css.img.top = 0\n                //50% 0%\n                break\n\n            case alignTypes.BOTTOM:\n                css.img.left = horizontalMiddle\n                css.img.bottom = 0\n                //50% 100%\n                break\n\n            case alignTypes.TOP_RIGHT:\n                css.img.right = 0\n                css.img.top = 0\n                //100% 0%\n                break\n\n            case alignTypes.TOP_LEFT:\n                css.img.left = 0\n                css.img.top = 0\n                //0% 0%\n                break\n\n            case alignTypes.BOTTOM_RIGHT:\n                css.img.right = 0\n                css.img.bottom = 0\n                //100% 100%\n                break\n\n            case alignTypes.BOTTOM_LEFT:\n                css.img.left = 0\n                css.img.bottom = 0\n                //0% 100%\n                break\n        }\n    }\n\n    return attributes\n}\n\nmodule.exports = {\n    get: getCSS\n}\n"]}