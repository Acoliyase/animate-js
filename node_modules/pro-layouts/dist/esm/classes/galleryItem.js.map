{"version":3,"file":"galleryItem.js","sourceRoot":"","sources":["../../../src/classes/galleryItem.js"],"names":[],"mappings":"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","sourcesContent":["import { utils, GALLERY_CONSTS } from 'pro-gallery-lib';\nimport { Item } from '../logic/item.js';\n\nclass GalleryItem {\n  constructor(config) {\n    this.uniqueId = utils.generateUUID();\n    this.isGalleryItem = true;\n    this.createdBy = config.createdBy;\n\n    this.createUrl = this.createUrl.bind(this);\n    this.createMagnifiedUrl = this.createMagnifiedUrl.bind(this);\n    this.createSecondMediaItemIfNeeded(config);\n\n    this.update(config);\n  }\n  createSecondMediaItemIfNeeded(config) {\n    if (config.dto?.secondaryMedia) {\n      this.secondaryMediaItem = new GalleryItem(this.mapItemConfig(config));\n    }\n  }\n\n  updateSecondaryMedia(config) {\n    if (this.secondaryMediaItem) {\n      this.secondaryMediaItem.update(this.mapItemConfig(config));\n    }\n  }\n\n  mapItemConfig(config) {\n    const dto = {};\n    Object.assign(dto, config.dto.secondaryMedia, config.dto.secondaryMedia.metadata);\n    return {\n      ...config,\n      dto,\n      scheme: {\n        ...config.scheme,\n        maxHeight: dto.height,\n        maxWidth: dto.width,\n      },\n    };\n  }\n\n  update(config) {\n    this.createMediaUrl = config.createMediaUrl;\n\n    if (config.dto && config.dto.dto) {\n      config.dto = config.dto.dto; // defence patch due to mis-use of item-core\n      if (utils.isDev()) {\n        console.warn('Item core is created with already existing item core');\n      }\n    }\n    this.dto = { ...config.dto };\n\n    if (config.scheme) {\n      this.processScheme(config.scheme);\n    } else {\n      const dto = {};\n      Object.assign(dto, this.dto, this.metadata);\n      this.processScheme(new Item({ dto }).scheme);\n    }\n\n    if (this.dto) {\n      const itemMetadata = this.dto.metaData || this.dto.metadata;\n      if (itemMetadata) {\n        // metadata is encoded encoded, parsed if needed\n        this.dto.metaData = utils.parseStringObject(itemMetadata);\n      }\n    }\n\n    this.sharpParams = { ...config.sharpParams };\n    if (!this.sharpParams.quality) {\n      this.sharpParams.quality = 90;\n    }\n    if (!this.sharpParams.usm) {\n      this.sharpParams.usm = {};\n    }\n    this.thumbnailSize = config.thumbnailSize || 120;\n\n    this.resetUrls();\n    this.updateSharpParams();\n    this.updateSecondaryMedia(config);\n  }\n\n  processScheme(scheme) {\n    this.id = scheme.id;\n    this.idx = scheme.idx;\n    this.type = scheme.type;\n    this.style = scheme.style;\n    this.width = scheme.width;\n    this.maxWidth = scheme.maxWidth;\n    this.infoWidth = scheme.infoWidth;\n    this.height = scheme.height;\n    this.maxHeight = scheme.maxHeight;\n    this.infoHeight = scheme.infoHeight;\n    this.margins = scheme.margins;\n    this.ratio = scheme.ratio;\n    this.cropRatio = scheme.cropRatio;\n    this.cubeImages = scheme.isCropped;\n    this.cubeType = scheme.cropType || GALLERY_CONSTS.resizeMethods.FILL;\n    this.offset = scheme.offset;\n    this.group = scheme.group;\n    this.orientation = scheme.orientation;\n    this.visibility = scheme.visibility;\n  }\n\n  renderProps(config) {\n    const style = {\n      ratio: this.ratio,\n      bgColor: this.bgColor,\n      maxWidth: this.maxWidth,\n      maxHeight: this.maxHeight,\n      infoWidth: this.infoWidth,\n      infoHeight: this.infoHeight,\n      orientation: this.orientation,\n      ...this.style,\n    };\n    const itemProps = {\n      className: 'image',\n      key: this.key,\n      idx: this.idx,\n      photoId: this.photoId,\n      id: this.id,\n      hash: this.id,\n      html: this.html,\n      type: this.type,\n      isVideoPlaceholder: this.isVideoPlaceholder,\n      videoPlaceholderUrl: this.videoPlaceholderUrl,\n      url: this.url,\n      alt: this.alt,\n      htmlContent: this.htmlContent,\n      directLink: this.directLink,\n      directShareLink: this.directShareLink,\n      linkUrl: this.linkUrl,\n      linkType: this.linkType,\n      linkOpenType: this.linkOpenType,\n      linkData: this.linkData,\n      title: this.title,\n      fileName: this.fileName,\n      description: this.description,\n      createUrl: this.createUrl,\n      createMagnifiedUrl: this.createMagnifiedUrl,\n      cubeImages: this.cubeImages,\n      cubeType: this.cubeType,\n      cropRatio: this.cropRatio,\n      isTransparent: this.isTransparent,\n      offset: this.offset,\n      style,\n      isDemo: this.isDemo,\n      videoUrl: this.videoUrl,\n      isExternalVideo: this.isExternalVideo,\n      hasSecondaryMedia: this.hasSecondaryMedia,\n      scene: this.scene,\n      ...config,\n    };\n    if (this.hasSecondaryMedia) {\n      itemProps.secondaryMediaItem = {\n        ...this.secondaryMediaItem.renderProps(),\n        style: {\n          ...style,\n          bgColor: this.secondaryMediaItem.bgColor,\n        },\n      };\n    }\n    return itemProps;\n  }\n\n  getDataForShop() {\n    const focalPoint = this.focalPoint;\n    const metadata = this.metadata;\n    return {\n      isDemo: metadata.isDemo,\n      orderIndex: this.orderIndex,\n      itemId: this.dto.itemId,\n      itemUrl: this.url,\n      itemHeight: metadata.height,\n      title: metadata.title,\n      itemWidth: metadata.width,\n      itemType: metadata.type || 'image',\n      imageUrl: this.processedMediaUrl(GALLERY_CONSTS.resizeMethods.FIT, 200, 200, null, null).img(),\n      imagePurchasedUrl: this.dto.mediaUrl,\n      fpX: focalPoint[0],\n      fpY: focalPoint[1],\n    };\n  }\n\n  getHighestMp4Resolution(qualities) {\n    const mp4s = qualities.filter((video) => video.formats[0] === 'mp4');\n    const { width, height } = mp4s.sort((a, b) => b.width - a.width)[0];\n    return { width, height };\n  }\n\n  processedMediaUrl(resizeMethod, requiredWidth, requiredHeight, sharpParams, createMultipleUrls = false) {\n    const mediaUrl = (\n      item,\n      url,\n      resizeMethod,\n      requiredWidth,\n      requiredHeight,\n      sharpParams = null,\n      focalPoint = null\n    ) => {\n      let mediaUrl;\n      if (typeof this.createMediaUrl === 'function') {\n        try {\n          const str = String(\n            utils.hashCode(\n              JSON.stringify({\n                url,\n                resizeMethod,\n                requiredWidth,\n                requiredHeight,\n                sharpParams,\n                focalPoint,\n              })\n            )\n          );\n          if (!this._cachedUrls[str]) {\n            this._cachedUrls[str] =\n              this.createMediaUrl({\n                item,\n                originalUrl: url,\n                resizeMethod,\n                requiredWidth,\n                requiredHeight,\n                sharpParams,\n                focalPoint,\n                createMultiple: createMultipleUrls,\n              }) || '';\n          }\n          mediaUrl = this._cachedUrls[str];\n        } catch (e) {\n          console.error(\n            'Cannot create url',\n            e,\n            item,\n            url,\n            resizeMethod,\n            requiredWidth,\n            requiredHeight,\n            sharpParams,\n            focalPoint\n          );\n          mediaUrl = String(url);\n        }\n      } else {\n        mediaUrl = String(url);\n      }\n      return mediaUrl;\n    };\n\n    requiredWidth = Math.ceil(requiredWidth);\n    requiredHeight = Math.ceil(requiredHeight);\n    const thumbSize = 250;\n\n    const focalPoint = resizeMethod === GALLERY_CONSTS.resizeMethods.FILL && this.isCropped && this.focalPoint;\n\n    const urls = {};\n    let imgUrl = this.url;\n\n    urls[GALLERY_CONSTS.urlTypes.THREE_D] = () => this.url;\n    if (this.is3D) {\n      imgUrl = this.poster.url;\n    }\n    if (this.isText) {\n      return Object.assign(\n        {},\n        ...Object.values(GALLERY_CONSTS.urlTypes).map((value) => ({\n          [value]: () => '',\n        }))\n      );\n    } else if (this.isVideo || this.isVideoPlaceholder) {\n      imgUrl = this.poster?.url;\n\n      if (utils.isExternalUrl(this.url)) {\n        urls[GALLERY_CONSTS.urlTypes.VIDEO] = () => this.url;\n      } else {\n        urls[GALLERY_CONSTS.urlTypes.VIDEO] = () =>\n          mediaUrl(this, this.url, GALLERY_CONSTS.resizeMethods.VIDEO, requiredWidth, requiredHeight);\n      }\n    }\n\n    urls[GALLERY_CONSTS.urlTypes.HIGH_RES] = () =>\n      mediaUrl(this, imgUrl, resizeMethod, requiredWidth, requiredHeight, sharpParams, focalPoint);\n\n    urls[GALLERY_CONSTS.urlTypes.LOW_RES] = () => {\n      const resizedRatio = this.resizeWidth / this.resizeHeight;\n      return mediaUrl(\n        this,\n        imgUrl,\n        this.cubeImages && resizeMethod !== GALLERY_CONSTS.resizeMethods.FIT\n          ? GALLERY_CONSTS.resizeMethods.FILL\n          : GALLERY_CONSTS.resizeMethods.FIT,\n        thumbSize * resizedRatio,\n        thumbSize,\n        { ...sharpParams, quality: 30, blur: 30 },\n        focalPoint\n      );\n    };\n    return urls;\n  }\n\n  resetUrls() {\n    const maxWidth = this.maxWidth || this.dto.width || this.metadata.width;\n    const maxHeight = this.maxHeight || this.dto.height || this.metadata.height;\n\n    this.resizeWidth = Math.min(maxWidth, Math.ceil(this.width));\n    this.resizeHeight = Math.min(maxHeight, Math.ceil(this.height));\n\n    this._cachedUrls = {};\n    this.urls = {};\n  }\n\n  createUrl(size, type) {\n    try {\n      return this[size + '_url'][type]();\n    } catch (e) {\n      return '';\n    }\n  }\n\n  get cubeTypeResizeMethod() {\n    return {\n      [GALLERY_CONSTS.layoutParams_crop_method.FIT]: GALLERY_CONSTS.resizeMethods.FIT,\n      [GALLERY_CONSTS.layoutParams_crop_method.FILL]: GALLERY_CONSTS.resizeMethods.FILL,\n    }[this.cubeType];\n  }\n\n  createMagnifiedUrl(scale = 1) {\n    if (!this.urls.magnified_url) {\n      const { innerWidth, innerHeight } = this.style;\n      this.urls.magnified_url = this.processedMediaUrl(\n        this.cubeTypeResizeMethod,\n        innerWidth * scale,\n        innerHeight * scale,\n        this.sharpParams,\n        true\n      );\n    }\n    return this.urls.magnified_url[GALLERY_CONSTS.urlTypes.HIGH_RES]();\n  }\n\n  get resized_url() {\n    if (!this.urls.resized_url) {\n      this.urls.resized_url = this.processedMediaUrl(\n        this.cubeTypeResizeMethod,\n        this.resizeWidth,\n        this.resizeHeight,\n        this.sharpParams\n      );\n    }\n    return this.urls.resized_url;\n  }\n\n  get multi_url() {\n    if (!this.urls.multi_url) {\n      this.urls.multi_url = this.processedMediaUrl(\n        this.cubeTypeResizeMethod,\n        this.resizeWidth,\n        this.resizeHeight,\n        this.sharpParams,\n        true\n      );\n    }\n    return this.urls.multi_url;\n  }\n\n  get scaled_url() {\n    if (!this.urls.scaled_url) {\n      const orgRatio = this.maxWidth / this.maxHeight;\n      const resizedRatio = this.resizeWidth / this.resizeHeight;\n      const isOrgWider = resizedRatio < orgRatio;\n      this.urls.scaled_url = this.processedMediaUrl(\n        GALLERY_CONSTS.resizeMethods.FILL,\n        isOrgWider ? orgRatio * this.resizeHeight : this.resizeWidth,\n        isOrgWider ? this.resizeHeight : this.resizeWidth / orgRatio,\n        this.sharpParams\n      );\n    }\n    return this.urls.scaled_url;\n  }\n\n  get pixel_url() {\n    if (!this.urls.pixel_url) {\n      this.urls.pixel_url = this.processedMediaUrl(GALLERY_CONSTS.resizeMethods.FILL, 1, 1, {\n        quality: 90,\n      });\n    }\n    return this.urls.pixel_url;\n  }\n\n  get thumbnail_url() {\n    if (!this.urls.thumbnail_url) {\n      this.urls.thumbnail_url = this.processedMediaUrl(\n        GALLERY_CONSTS.resizeMethods.FILL,\n        this.thumbnailSize,\n        this.thumbnailSize,\n        { quality: 70 }\n      );\n    }\n    return this.urls.thumbnail_url;\n  }\n\n  get square_url() {\n    if (!this.urls.square_url) {\n      this.urls.square_url = this.processedMediaUrl(GALLERY_CONSTS.resizeMethods.FILL, 100, 100, {\n        quality: 80,\n      });\n    }\n    return this.urls.square_url;\n  }\n\n  get full_url() {\n    if (!this.urls.full_url) {\n      this.urls.full_url = this.processedMediaUrl(\n        GALLERY_CONSTS.resizeMethods.FULL,\n        this.maxWidth,\n        this.maxHeight,\n        this.sharpParams\n      );\n    }\n    return this.urls.full_url;\n  }\n\n  get sample_url() {\n    if (!this.urls.sample_url) {\n      this.urls.sample_url = this.processedMediaUrl(GALLERY_CONSTS.resizeMethods.FIT, 500, 500, this.sharpParams);\n    }\n    return this.urls.sample_url;\n  }\n\n  get preload_url() {\n    if (!this.urls.preload_url) {\n      this.urls.preload_url = this.processed_url;\n    }\n    return this.urls.preload_url;\n  }\n\n  get download_url() {\n    return this.createDownloadUrl(this.full_url);\n  }\n\n  get download_sample_url() {\n    return this.createDownloadUrl(this.sample_url);\n  }\n\n  createDownloadUrl(url) {\n    if (!this.urls.download_url) {\n      this.urls.download_url = url;\n      this.urls.download_url._img = this.urls.download_url.img;\n      this.urls.download_url.img = () => {\n        const downloadUrl = this.urls.download_url._img();\n        return downloadUrl + (downloadUrl.includes('?') ? '&' : '?') + `dn=${this.fileName}`;\n      };\n    }\n    return this.urls.download_url;\n  }\n\n  updateSharpParams() {\n    // override sharpParams with item sharpParams\n    if (this.dto.metaData && this.dto.metaData.sharpParams && this.dto.metaData.sharpParams.L) {\n      const sharpParams = this.dto.metaData.sharpParams.L;\n      if (sharpParams.quality && sharpParams.overrideQuality === true) {\n        this.sharpParams.quality = sharpParams.quality;\n      }\n\n      if (sharpParams.usm && sharpParams.overrideUsm === true) {\n        this.sharpParams.usm = sharpParams.usm;\n      }\n    }\n  }\n\n  get hasSecondaryMedia() {\n    return !!this.secondaryMediaItem;\n  }\n  get itemId() {\n    return this.id;\n  }\n\n  updateId(id) {\n    this.dto.itemId = this.id = id;\n  }\n\n  get metadata() {\n    let md = this.dto.metaData || this.dto.metadata;\n    if (utils.isUndefined(md)) {\n      // console.error('Item with no metadata' + JSON.stringify(this.dto));\n      md = {};\n    }\n    return md;\n  }\n\n  get metaData() {\n    return this.metadata;\n  }\n\n  get bgColor() {\n    let bg;\n    if (this.isText) {\n      bg =\n        this.metadata &&\n        ((this.metadata.textStyle && this.metadata.textStyle.backgroundColor) || this.metadata.backgroundColor);\n    } else {\n      bg = 'none';\n    }\n    return bg;\n  }\n\n  get isCropped() {\n    return this.cubeImages && this.cubeTypeResizeMethod === GALLERY_CONSTS.resizeMethods.FILL;\n  }\n\n  get focalPoint() {\n    return this.metadata.focalPoint || [0.5, 0.5];\n  }\n\n  set focalPoint(value) {\n    this.metadata.focalPoint = value;\n  }\n\n  // ----------------------------------------------------------------//\n\n  get photoId() {\n    return this.id;\n  }\n\n  get key() {\n    if (!this._key) {\n      this._key = (this.dto.key || this.id || this.dto.url || 'no_key_found').replace(/\\W/g, '');\n    }\n    return this._key;\n  }\n\n  get orderIndex() {\n    return this.dto.orderIndex || this.dto.o || 0;\n  }\n\n  set orderIndex(value) {\n    this.dto.orderIndex = value;\n  }\n\n  updateOrderIndex(value) {\n    const ret = this.orderIndex !== value;\n    this.orderIndex = value;\n    return ret;\n  }\n\n  get url() {\n    // todo :change from mediaUrl\n    return this.dto.file_url || this.dto.mediaUrl || this.dto.url || this.dto.src || '';\n  }\n\n  get mediaUrl() {\n    return this.url;\n  }\n\n  get html() {\n    return this.dto.html || this.dto.text || this.metadata.html || this.metadata.text;\n  }\n\n  get lastModified() {\n    return this.metadata.lastModified;\n  }\n\n  get seed() {\n    return utils.hashToInt(this.url);\n  }\n\n  get isImage() {\n    return this.type === 'image';\n  }\n\n  get isImportant() {\n    return !!this.dto.i;\n  }\n\n  get videoUrl() {\n    return this.metadata.videoUrl;\n  }\n\n  get poster() {\n    return (\n      this.metadata.poster ||\n      (this.metadata.customPoster && this.metadata.customPoster) ||\n      (this.metadata.posters ? this.metadata.posters[this.metadata.posters.length - 1] : null)\n    );\n  }\n\n  get scene() {\n    return this.metadata.scene;\n  }\n\n  get qualities() {\n    return this.metadata.qualities;\n  }\n\n  get isExternalVideo() {\n    return this.metadata.isExternal;\n  }\n\n  get isExternal() {\n    return this.metadata.isExternal === true;\n  }\n\n  set type(type) {\n    this._type = type;\n  }\n\n  get type() {\n    switch (this._type || this.dto.type || this.metadata.type || this.dto.media_type) {\n      case 'dummy':\n        return 'dummy';\n      case 'v':\n      case 'video':\n        return 'video';\n      case 'h':\n      case 'html':\n      case 'text':\n        return 'text';\n      case '3d':\n        return '3d';\n      case 'i':\n      case 'image':\n      default:\n        return 'image';\n    }\n  }\n\n  get isVideoPlaceholder() {\n    return !!(this.dto.isVideoPlaceholder || this.metadata.isVideoPlaceholder || this.dto.media_isVideoPlaceholder);\n  }\n\n  get videoPlaceholderUrl() {\n    return this.dto.videoPlaceholderUrl || this.metadata.videoPlaceholderUrl || this.dto.media_videoPlaceholderUrl;\n  }\n\n  get htmlContent() {\n    return this.html?.replace(/<[^<>]*>/g, '').trim();\n  }\n\n  get alt() {\n    return (utils.isMeaningfulString(this.metadata.alt) && this.metadata.alt) || '';\n  }\n\n  set alt(value) {\n    this.metadata.alt = value;\n  }\n\n  get title() {\n    return this.metadata.title || '';\n  }\n\n  set title(value) {\n    this.metadata.title = value;\n  }\n\n  get fileName() {\n    return this.metadata.fileName || '';\n  }\n\n  set fileName(value) {\n    this.metadata.fileName = value;\n  }\n\n  get description() {\n    return this.metadata.description || '';\n    // if (!this.metadata.isDemo) {\n    //   return this.metadata.description || '';\n    // }\n    // return this.getTranslatedValue(this.metadata.description);\n  }\n\n  set description(value) {\n    this.metadata.description = value;\n  }\n\n  get exif() {\n    return this.metadata.exif || '';\n  }\n\n  get hasLink() {\n    switch (this.linkType) {\n      case 'wix':\n        return !!this.linkData.type;\n      default:\n        return !!this.linkUrl;\n    }\n  }\n\n  get link() {\n    return this.metadata.link || {};\n  }\n\n  get linkData() {\n    if (this.metadata.link && this.metadata.link.data) {\n      return this.metadata.link.data;\n    } else if (this.isWixUrl) {\n      return {\n        type: 'web',\n        url: this.linkUrl,\n      };\n    } else {\n      return {};\n    }\n  }\n\n  set linkData(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n    this.metadata.link.data = value;\n  }\n\n  get linkType() {\n    if (this.metadata.link && !utils.isUndefined(this.metadata.link.type)) {\n      return this.metadata.link.type;\n    } else if (this.linkUrl) {\n      return 'web';\n    } else {\n      return 'none';\n    }\n  }\n\n  set linkType(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n\n    // reset metadata.link when 'none' is selected - that's the way wix galleries work\n    this.metadata.link = {\n      type: value,\n      url: undefined,\n      text: undefined,\n      title: undefined,\n      target: '_blank',\n    };\n  }\n\n  get defaultLinkText() {\n    const linkData = this.linkData;\n\n    switch (this.linkType) {\n      case 'wix':\n        if (linkData) {\n          switch (linkData.type) {\n            case 'PageLink':\n              return `Go to Page ${linkData.pageName}`;\n            case 'AnchorLink':\n              return `Scroll to ${linkData.anchorName}`;\n            case 'ExternalLink':\n              return `${linkData.url}`;\n            case 'EmailLink':\n              return `Email ${linkData.recipient}`;\n            case 'PhoneLink':\n              return `Call ${linkData.phoneNumber}`;\n            case 'DocumentLink':\n              return `Open ${linkData.name}`;\n            default:\n              return 'Go to Link';\n          }\n        } else {\n          return 'Go to Link';\n        }\n      case 'web':\n        return this.linkTitleFromUrl || this.linkUrl;\n      case 'page':\n        return this.linkTitle;\n      default:\n        return '';\n    }\n  }\n\n  get defaultLinkValue() {\n    const linkData = this.linkData;\n\n    switch (this.linkType) {\n      case 'wix':\n        if (linkData) {\n          switch (linkData.type) {\n            case 'PageLink':\n              if (linkData.pageName) {\n                return `PAGE - ${linkData.pageName}`;\n              } else {\n                return 'PAGE';\n              }\n            case 'AnchorLink':\n              return `ANCHOR - ${linkData.anchorName}`;\n            case 'ExternalLink':\n              return `LINK - ${linkData.url}`;\n            case 'EmailLink':\n              return `EMAIL - ${linkData.recipient}`;\n            case 'PhoneLink':\n              return `PHONE - ${linkData.phoneNumber}`;\n            case 'DocumentLink':\n              return `DOCUMENT - ${linkData.name}`;\n            default:\n              return 'Add a Link';\n          }\n        } else {\n          return 'Add a Link';\n        }\n      case 'web':\n        return this.linkUrl;\n      case 'page':\n        return this.linkTitle;\n      default:\n        return '';\n    }\n  }\n\n  get linkText() {\n    return (this.metadata.link && this.metadata.link.text) || this.defaultLinkText;\n  }\n\n  set linkText(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n    this.metadata.link.text = value;\n  }\n\n  get linkTitle() {\n    return this.metadata.link && this.metadata.link.title;\n  }\n\n  set linkTitle(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n    this.metadata.link.title = value;\n  }\n\n  get linkUrl() {\n    return this.metadata.link && this.metadata.link.url;\n  }\n\n  set linkUrl(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n    this.metadata.link.url = value;\n  }\n\n  get isWixUrl() {\n    return this.linkUrl && this.linkUrl.indexOf('wix') === 0;\n  }\n\n  get linkTitleFromUrl() {\n    const regex = /[^/]*\\.\\w+$/g;\n    const regexRes = regex.exec(this.linkUrl);\n    const match = regexRes && regexRes[0];\n    return match && match.split('.')[0];\n  }\n\n  get unprotectedLinkOpenType() {\n    return utils.get(this, 'metadata.link.target');\n  }\n\n  get linkOpenType() {\n    if (this.metadata.link && !utils.isUndefined(this.metadata.link.target)) {\n      return this.unprotectedLinkOpenType;\n    } else if (this.metadata.link && !utils.isUndefined(this.metadata.link.targetBlank)) {\n      return this.metadata.link.targetBlank ? '_blank' : '_top';\n    } else {\n      return '_blank';\n    }\n  }\n\n  set linkOpenType(value) {\n    if (!this.metadata.link) {\n      this.metadata.link = {};\n    }\n    this.metadata.link.target = value;\n  }\n\n  get initialLinkObject() {\n    return {\n      type: 'none',\n      url: undefined,\n      text: undefined,\n      title: undefined,\n      target: '_blank',\n    };\n  }\n\n  get isDemo() {\n    return (\n      this.metadata.isDemo ||\n      this.dto.isDemo ||\n      this.metadata.sourceName === 'public' ||\n      (this.metadata.tags && Array.isArray(this.metadata.tags) && this.metadata.tags.indexOf('_paid') >= 0)\n    );\n  }\n\n  set isDemo(val) {\n    this.metadata.isDemo = val;\n  }\n\n  get isText() {\n    return this.type === 'text';\n  }\n\n  get isVideo() {\n    return this.type === 'video';\n  }\n\n  get is3D() {\n    return this.type === '3d';\n  }\n\n  get isVisible() {\n    return true;\n  }\n\n  get isRendered() {\n    return true;\n  }\n\n  get isDimensionless() {\n    return !(this.maxWidth > 1 || this.maxHeight > 1);\n  }\n\n  get isTransparent() {\n    return this.url && (this.url.indexOf('.png') > 0 || this.url.indexOf('.gif') > 0);\n  }\n\n  get webLink() {\n    if (this.linkUrl?.length > 0 && this.linkType === 'web') {\n      return { url: this.linkUrl, target: this.linkOpenType };\n    } else {\n      return {};\n    }\n  }\n\n  get directLink() {\n    return this.dto.directLink || this.webLink || {};\n  }\n  get directShareLink() {\n    return this.dto.directShareLink || '';\n  }\n}\n\nexport default GalleryItem;\n"]}