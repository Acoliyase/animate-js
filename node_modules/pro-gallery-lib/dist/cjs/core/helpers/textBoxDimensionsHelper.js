"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const layoutParams_info_placement_js_1 = require("../../common/constants/layoutParams_info_placement.js");
const index_js_1 = tslib_1.__importDefault(require("../../common/constants/index.js"));
const optionsMap_js_1 = tslib_1.__importDefault(require("./optionsMap.js"));
const processTextDimensions = (options, customExternalInfoRendererExists) => {
    let _options = Object.assign({}, options);
    _options[optionsMap_js_1.default.layoutParams.info.height] = getTextBoxAboveOrBelowHeight(_options, customExternalInfoRendererExists);
    _options.externalInfoHeight = getHeightFromOptions(_options, _options[optionsMap_js_1.default.layoutParams.info.height]);
    _options.externalInfoWidth = getTextBoxRightOrLeftWidth(_options, customExternalInfoRendererExists);
    return _options;
};
function getHeightFromOptions(options, infoHeight) {
    let additionalHeight = infoHeight;
    if (infoHeight > 0 &&
        (0, layoutParams_info_placement_js_1.hasExternalVerticalPlacement)(options[optionsMap_js_1.default.layoutParams.info.placement]) &&
        options[optionsMap_js_1.default.layoutParams.info.layout] ===
            index_js_1.default[optionsMap_js_1.default.layoutParams.info.layout].SEPARATED_BACKGROUND) {
        additionalHeight += options[optionsMap_js_1.default.layoutParams.info.spacing];
        additionalHeight += options[optionsMap_js_1.default.layoutParams.info.border.width] * 2;
    }
    return additionalHeight;
}
function getTextBoxRightOrLeftWidth(options, customExternalInfoRendererExists) {
    if (!shouldShowTextRightOrLeft(options, customExternalInfoRendererExists)) {
        return 0;
    }
    let width = 0;
    if (options[optionsMap_js_1.default.layoutParams.info.sizeUnits] === index_js_1.default[optionsMap_js_1.default.layoutParams.info.sizeUnits].PERCENT) {
        width = Math.min(100, Math.max(0, options[optionsMap_js_1.default.layoutParams.info.width])) / 100;
    }
    else {
        width = options[optionsMap_js_1.default.layoutParams.info.width];
    }
    return width;
}
function shouldShowTextRightOrLeft(options, customExternalInfoRendererExists) {
    const allowedByLayoutConfig = options[optionsMap_js_1.default.layoutParams.structure.scrollDirection] ===
        index_js_1.default[optionsMap_js_1.default.layoutParams.structure.scrollDirection].VERTICAL &&
        options[optionsMap_js_1.default.layoutParams.structure.layoutOrientation] ===
            index_js_1.default[optionsMap_js_1.default.layoutParams.structure.layoutOrientation].VERTICAL &&
        options[optionsMap_js_1.default.layoutParams.groups.groupSize] === 1;
    return (allowedByLayoutConfig &&
        (0, layoutParams_info_placement_js_1.hasExternalHorizontalPlacement)(options[optionsMap_js_1.default.layoutParams.info.placement]) &&
        customExternalInfoRendererExists);
}
function getTextBoxAboveOrBelowHeight(options, customExternalInfoRendererExists) {
    if (!shouldShowTextBoxAboveOrBelow(options, customExternalInfoRendererExists)) {
        return 0;
    }
    return options[optionsMap_js_1.default.layoutParams.info.height];
}
function shouldShowTextBoxAboveOrBelow(options, customExternalInfoRendererExists) {
    return ((0, layoutParams_info_placement_js_1.hasExternalVerticalPlacement)(options[optionsMap_js_1.default.layoutParams.info.placement]) && customExternalInfoRendererExists);
}
exports.default = processTextDimensions;
/* eslint-enable prettier/prettier */
//# sourceMappingURL=textBoxDimensionsHelper.js.map